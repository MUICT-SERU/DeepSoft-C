issuekey,title,description,component,f4-audit,f4-auth,f4-camel,f4-core,f4-import-export,f4-java-client,f4-jmeter,f4-ldp,f4-message-consumer,f4-oaiprovider,f4-ontology,f4-transform,f4-vagrant,f4-webapp-plus,legacy - FeSL,legacy - Fedora,legacy - GSearch,legacy - OAIProvider,legacy - OSGi,legacy - Trippi,legacy - community extensions,legacy - java-client
FCREPO-1,External triplestore with additional capabilities,"This is beyond the basic indexing of relationships that  will go on internally in Fedora 2.0. This external service  can harvest relationship metadata from the repository  and index it outside. It can also be the place where  other ontologies are overlayed on the base Fedora  relationship metadata to support more complex queries  and inferencing. Followup: Date: 2005-03-24 11:39 Sender: payette Logged In: YES  user_id=128 NSDL and/or Harris could develop stand-alone external  service. or we can enable remote configuration of existing kowari in  Fedora, but at users own risk.  (Fedora is not totally in  control of what goes in it.)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-2,BDef and BMech Modification : with Integrity Alerts,"(80/20 rule applied)  This has been on ongoing discussion about the extent to  which Fedora will support versioning of BDef and BMech  objects.   General things we agree to: 1. We will allow changes that do not break  existing ""behavior contracts."" So, we WILL support  adding methods to existing BDefs, but NOT modification  or deletion of methods. 2. We will not enforce that a BMech implements all  methods of a BDef. So, if a BDef has a new method  added to it, that method does not have to be  implemented by all associated BMechs. So, it could be  the case that new methods may not always be  available. The idea would be that all BMechs would  eventually implement newly defined BDef methods, but  Fedora will not consider a BMech broken when it does  not implement new methods. 3. Date-time stamped API-A requests. If API-A  requests to see methods supported by an object are  given date-time stamps, we well return the list of  methods implemented at the time specified. A note on Disseminator Versioning. Regarding  modifiation of Disseminators on Data Objects (which  point to BDef and BMech objects, the only valid changes  that can be made are those that do not break existing  behavior contracts on the Data Object. Thus it is  permitted to change descriptive labels, or change the  BMech that the Disseminator points to. Changing the  BMech can only be done if it does not require different  datastream bindings. These permitted changes will  cause the Disseminator to be versioned.  Changing a BDef on an existing Disseminator is NOT  allowed. A new BDef would require a new Disseminator  because ia different BDef means a different behavor  contract is being associated with the Data Object. We are still discussing what we should/should-not  support in the realm of BDef/BMech versioning beyond  the above. Date: 2005-11-16 11:24 Sender: payette Logged In: YES  user_id=128  The ""Force Purge"" feature can help here too:   Add option to be able to force purge of objects or datastreams even if the purge would violate referential integrity constraints. There are times this is desirable, and it's o.k. to have the repository in a temporary state of broken references. Clear example is removing a bmech object, when intent is to replace it with updated object. Check implications of loosening referential integrity checks on force purge and on modification of MIME on a datastream. (issues in Admininstrator? Elsewhere?) Date: 2005-11-16 11:23 Sender: payette Logged In: YES  user_id=128  More notes on the problem:   At this time, we do not allow modification of the datastreams of BDEF and BMECH objects, most notably the METHODMAP and WSDL datastreams. At the current time, modification of a BDEF/BMECH is achieved by purging the BDEF/BMECH, making changes to ingest file, and doing new ingest. Before BDEF/BMECH can be purged, all data objects that reference it must also be purged. Once new BDEF/BMECH in ingested, then all data objects are re-ingested. This is tedious.  However, there are two basic reasons we have not enabled direct modification of BDEF and BMECH objects:  1. Free editing of the xml content of these datastreams is dangerous in terms of potentially breaking data objects that are referring to the BDEF or BMECH. The most obvious case is modifying a datastream binding spec in a BMECH object in such a way that the datastream binding keys in the data objects are no longer valid. We need to decide what kinds of changes to BDEF and BMECH objects we will allow, to minimize potential breakage.  2. Given that we want to allow reasonable changes to BDEF and BMECH objects, the real issue to tackle is the current replication process that takes BDEF and BMECH xml data and populates the relational db. The replication of changes to the relational database is not set up properly to accomodate changes. Right now, there are relationships between the data objects and the bdef/bmech objects that depend on joins that use db-generated identifiers as join keys. Replication is generally a delete/insert process rather than an update process when it comes to BDEF and BMECH objects. This would result in rows with new db-generated identifiers and would break the joins to the data object tables which would reference old db-generated identifiers. We need to fix this.  We need to take a good look at the replicator code and figure out how to do database updates for changes to BDEF and BMECH datastreams. We also need to decide what client tools will enable the updating of BDEF and BMECH objects. Options: 1. Fedora Administrator Object Editor: When editing a BDEF or BMECH object, bring up special dialogs for editing METHODMAP and WSDL datastreams. Then send a modifyDatastream and have the server realize we are dealing with these special datastreams. Alternative is to send a whole new ingest file via a new API-M method (updateObject?) and have the server do some sort of diff analysis for BDEF and BMECH objects. 2. Modify the BDEF/BMECH builder to allow editing of these objects. Same issue on how changes are communicated to server. Do we have a new API-M method that allows a whole new ingest file to come in (updateObject) and then server does the diff thing?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-3,Logging Refactoring : consistency and enable easy analysis,"Use log4j (via commons-logging or directly) instead of what we have now. It's more flexible and makes integration tasks easier. Use an XML appender. Date: 2005-11-16 10:06 Sender: payette Logged In: YES  user_id=128 Do better logging via log4j and messaging to support performance analysis Date: 2005-03-24 16:38 Sender: payette Logged In: YES  user_id=128 For any new services, implement logging using log4j.   Eventually, refactor the core repository service to use  log4j. Date: 2005-02-02 11:08 Sender: payette Logged In: YES  user_id=128 also do a better job of log messages.  what events do we  want to log?  What is a meaninful message in the log for the  event?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-4,Proper Architecture of Multiple Triplestore Options,"This was planned for 2.1b but not viable then. Date: 2006-11-15 09:52 Sender: payette Logged In: YES  user_id=128 - NOTE: trippi not transactional at this point - NOTE: in next release we should better rationalize different triplestore configurations (currently, we have the following configurations internal kowari, internal MPT, external mulgara (topaz) Date: 2006-01-26 11:12 Sender: payette Logged In: YES  user_id=128 look at all options for stabilizing the RI feature via triplestore: kowari upgrade? sesame other - (be creative)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-5,Content Model Architecture (CMA),"Date: 2006-09-01 17:02 Sender: payette Logged In: YES  user_id=128 See initial proposal: http://www.cs.cornell.edu/payette/fedora/designs/cmda/ Date: 2005-11-16 10:13 Sender: payette Logged In: YES  user_id=128 Look at ways to re-architect the Fedora disseminator architecture so that it is less rigid and easier to manage.  We need a way that it is easy to modify a bdef/bmech and to not have to modify every subscribing object when a disseminator change must be made.  The proposal is a looser binding of the disseminators by having content model objects that have disseminators on them.  Then, data objects can have a late binding of disseminators based on whether they (1) have the same content model (via content model identifier) or (2) have a relationship to a content model object in RELS-EXT.   Look at ways to extend the existing dissemination service to support this.  Another possibility is to implement this in the manner that the default disseminator is implemented in the ""dynamic behavior"" section of the code.   Maybe in addition to the default disseminator there can be another thing plugged that can figure out if there is a late-bind disseminator for an object.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-6,Content Modeling Language for 3.0,XML Schema,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-7,JMS Service,"The Fedora development team will focus on providing a message-oriented middleware solution for the Fedora Service Framework that will be based on an open-source implementation of the Java Message Service (JMS) API.  This will entail JMS-enabling the core Fedora repository so that it can publish messages (e.g., API events). Also a JMS message broker will be implemented in the framework to facilitate publish/subscribe of messages between the Fedora repository and other services (i.e., preservation-oriented services, and other services).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-436,Preservation Alerting Service,"Once the service framework has a JMS messaging service, and the core repository is enabled to publish API-M and other types of events, the preservation alerting service can be developed to subscribe to events that are of interest for preservation. The alerting service can be configured to alert people, or take other action, when it detects certain types of events.  The development of this service will be done in conjunction with Rutgers under the Sun Center of Excellence for Preservation with Fedora.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-9,Web-Based Server Management,"Rather than modifying files (especially fedora.fcfg) on the server, this feature would allow web-accessible configuration.  It would: - Provide the ability to change configuration. - Provide a way to re-initialize the server.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-10,Ingest/Export Archive (multiple objects),Support for advanced ingest and export of the repository by enabling a way to submit an entire archive of objects.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-430,Filter FieldSearch Results based on policy,"Tim suggestion to not expose hits for things that people  are not allowed to access.  FieldSearch is current always open since it is the administrative  search for the repository (you can always find what's in  there.)  Implementing this would mean building policy examination into the FieldSearch result processing code (per object, does the subject have access?)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-427,Add new ingest and export formats,Consider: - METS 1.3 - DIDL - SCORM,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-14,DirIngest Client for Content Submission (directory),Create a means of uploading a whole directory of files  into the repository. How deal with Dublin Core records? Date: 2005-11-03 16:11 Sender: payette Logged In: YES  user_id=128 We have a nice client created by Cornell PhD student that works with the DirIngest service.  Need to test and document before releasing. Date: 2005-03-24 11:47 Sender: payette Logged In: YES  user_id=128 We have a service in DirIngest and we need a simple client  for user. Date: 2004-10-27 16:40 Sender: payette Logged In: YES  user_id=128 tie this in with web-based content submission interface,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-440,CModel-based Object Builder/Submission Utility,"Create the equivalent of a multi-step submission process  to get objects into the repository. Do this in as general  a manner, so that it is not fused into the base server  software. Maybe this can be a plug-in service to  Fedora? Date: 2005-03-24 11:48 Sender: payette Logged In: YES  user_id=128 Fedora-IR deals with this requirement",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-16,SDeps with SOAP Bindings,"Build in functionality that lets a SDep object contain WSDL that binds to a SOAP service. Currently, these can only contain WSDL with REST bindings.  Things to look at: - Web Services Invocation Framework  - modify Dissemination Service to recognise and invoke",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-17,Initial REST API Implementation,Create a totally REST-based binding for the Fedora  Management API. Date: 2005-03-24 13:32 Sender: payette Logged In: YES  user_id=128 Selective methods will be implemented - ingest/export. Continue disscussion on need for full-blown API-M-Lite.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-425,Fedora WSDL Extensions to support BMech objects,We have LOCAL and multi-server bindings that are not  conventional in WSDL.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-19,Enable SDep Binding to a SET of Datastreams,"This is the example where we want a method to take a  set of datastreams as input. We want there to be a  single datastreams binding key for the set such  as ""PHOTOS"" and then a list of image/gifs can be  associated with this key. Right now we can associate a  single datastream ID with a binding key. Date: 2005-03-24 13:56 Sender: payette Logged In: YES  user_id=128 We need to rationalize this in terms of the new  structoid/contentModel stuff.  Either accomodate it there  or get rid of it as a requirement.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-20,Format Validation Service,Integrate or develop a service that validates datastreams based on their asserted formats. This could be used as part of a larger validation framework for Fedora objects.  Consider the use of JHove and/or GDFR for this purpose.  Consider also having such service be usable by DSpace (perhaps jointly developed?) as they have a similar need.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-424,Workflow Engine Integration,"Look at existing standards around workflow (see Sandy's  bibliography). Also look at Eden Workflow engine.  Specify somthing that is generalizable and configurable,  so that we do not hard wire any one workflow into  Fedora. Date: 2005-03-24 14:52 Sender: payette Logged In: YES  user_id=128 Can we integrate an existing workflow engine into the  Fedora Service Framework.  This is beyond the simple  submit/review/edit workflow tracking (that we will  implement as a simple workflow service to support Fedora- IR. Date: 2005-02-02 11:29 Sender: payette Logged In: YES  user_id=128 This may be done in cooperation with Fedora Development  Consortium members. - Do we need a Fedora Workflow API? - Will this be done as a service layer on top of Fedora?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-434,Shibboleth Plugin for AuthN and AuthZ,"Authentication -- We will Shib-enable Fedora, enabling a  user to provide credentials managed by their origin  institution, and providing a single sign-in solution for  Fedora. We will obtain attributes about users  (Eduperson), and we will use those attributed in  authorization. Authorization -- we will support XML-encoded policies  (XACML). Fedora will constrain what can be expressed  in the policies to things Fedora is prepared to enforce.  Policies can refer to user attributes, and attributes of  Fedora digital objects. We will build the Fedora  authorization module to interpret and enforce policies. Date: 2004-05-11 14:48 Sender: payette Logged In: YES  user_id=128 Security Questionaire: http://www.fedora.info/wiki/bin/view/Fedora/SecurityQuestion nairre Date: 2004-05-11 14:43 Sender: payette Logged In: YES  user_id=128 General Requirements Wiki: http://www.fedora.info/wiki/bin/view/Fedora/AuthenticationRe quirements Scenarios Wiki: http://www.fedora.info/wiki/bin/view/Fedora/AuthNAuthZScen arios  Wiki page:  http://www.fedora.info/wiki/bin/view/Fedora/BasicAuthNAuthZ Specification",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-431,Policy Builder Client,"Some utility is needed to let people specify the  attributes of the kinds of objects a certain policy should  be inserted into. Then a mass setPolicy is run. Not  sure if this is built into the setPolicy operation, or a  separate utility. Date: 2005-11-03 16:03 Sender: payette Logged In: YES  user_id=128 This is under development and currently working on way to facilitate creation of object-specific policies, and policies about specific datastreams or disseminations.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-24,Use Apache connection pooling library,Use Apache db connection pooling library instead of our own custom connection pooling stuff. ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-25,Option to store Audit Trail outside the object,"The Audit trail datastream is currently inline XML. When an object has lots of changes a large audit trail will be inlined within the object, bloating the XML file for the object. We want to be able to store the audit trail as managed content or simply in a repository log file. We should consider whether we should allow the choice to be a repository-wide configuration option, and/or an object-specific option.  Also, consider what the default choice should be.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-26,Support for externally-authenticated users,This is to deal with the case where authentication occurs outside Fedora by some upper layer application or service. Requests to Fedora are made by the app/service with a proxy user identity (like fedoraAdmin) and the user being represented is provided (in header?). We need to have a Tomcat Login Module to get attributes for the user represented by the proxy. This allows attributes to be available for policy enforcement.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-27,Address space exhaustion when running Kowari on 32-bit OS,Discovered by Chris in NSDL load after fix of Kowari leak.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-28,Fine-grained control of the subset of RI triples to index,"Also known as the ""Chinese Menu"" feature, this would allow people to select which subset of the currently-indexed triples they want indexed in the triplestore.  For very large repositories, this can help people cope with triplestore scaling issues.  Examples:  For Derived triples:   - index dc?   - index datastreams?   - index object attributes?  For RELS-EXT triples:   - index all RELS-EXT triples?   - index triples only with a specific list of predicates?   - index triples with a specific predicate URI prefix only?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-29,Allow use of RELS-EXT/INT assertions for policy enforcement,"If object properties can be extended with RELS-EXT (both relationship properties and descriptive properties), then it would be good to allow XACML policies to be written that refer to these properties in the Resource target specification of the policy.  This can be done by modifying the DOReader to include RELS-EXT properties along with core properties. The XACML attribute finder code uses DOReader to get object attributes, so it can take whatever it gets from DOReader.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-30,CMA Proof of Concept,"Based on agreed upon design, refactor core Fedora repository code to make the use of disseminators more dynamic and easy to manage. See initial design proposal:  http://www.cs.cornell.edu/payette/fedora/designs/cmda/",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-426,Support for managed external datastreams,"This is increasingly an issue that we must deal with. Fedora users trying to do this with large images, texts, and datasets. For very large datasets, the constraining factor is doing this over HTTP.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-32,Initial support for OwnerId,- implement OwnerID in FOXML and METS - modify serializers and deserializers to accomodate - add to vocabulary.txt (along with other missing attrs) - verify/modify support in XACML attr finder code,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-33,SRB Implementation of LLStore,"This is something to think about in terms of storage  expansion. SRB provides virtualization of distributed  hierarchical storage. Can we interface SRB with  Fedora? Apparently, DSpace is pursuing this. Date: 2005-11-16 10:03 Sender: payette Logged In: YES  user_id=128 Also, rework temp store so its not embedded in LLStore.  This may have been handled already by Chris and maybe we just have to remove the configuration of temp store from fcfg and make sure it is not created.   This came out of discussions with the SRB folks who are creating an alternate SRB-based implementation of IFileSystem. As things standnow, IFileSystem implementations are used by FileSystemLowlevelStorage which sets up storage locations for objects, datastreams, and temp files. When a NFS file system or the SRB is used, then we are in the inefficient situation where temp files are passed over a network connection. We really want a local temp store area for the Fedora server. Date: 2005-11-16 09:59 Sender: payette Logged In: YES  user_id=128 Also, set up a server module pattern for FileSystemLowlevelStorage. Date: 2005-11-11 14:23 Sender: payette Logged In: YES  user_id=128 other areas of fedora functions need to iterate through  file system (e.g., ingest when prioritizing order of  bdef/bmech/object).  Figure out how to handle with SRB. Date: 2005-11-11 14:21 Sender: payette Logged In: YES  user_id=128 make sure we come up with a way for Fedora rebuilder to  work with SRB.  Somehow, the SRB would have to be able to  provide list of files (with path locations) Date: 2005-11-03 16:08 Sender: payette Logged In: YES  user_id=128 We have received code from Reagan Moore's group and we need to work out issues, figure out how to configure to SRB, test, and integrate with core Fedora release.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-34,Initial GSearch Implementation,"Develop a reference implementation of a richer search  and index service (that what is provided by default as  part of the repository itself). This service will harvest  selected content from objects in the repository. It will  query or subscribe to the Fedroa Delta Notification  Module to receive indications of what content has  changed and should be updated. Date: 2005-03-24 11:43 Sender: payette Logged In: YES  user_id=128 Lucene, Zebra?  Full-text indexing capability is desired. Integrated in Framework via RI (for incremental updating). Date: 2004-10-27 16:41 Sender: payette Logged In: YES  user_id=128 - index arbitrary datastream - follow the query/callback scheme - srw/sru overlay",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-35,Performance Test for 1M objects,"We will do a controlled test of Fedora on an average  hardware setup to test performance at different  benchmark levels (200k, 500k, and 1 million objects). We will focus tests in these areas: 1. Ingest 2. Dissemination 3. Default Repository Search (Resource Index) We plan to publish our performance results on the  Fedora web site to provide benchmark data. If bottlenecks or delays are found we will tune the  repository sofware via several techniques: 1. Code modifications 2. RDBMS indexing 3. Caching strategies 4. Repository clustering and load balance Date: 2005-02-02 11:04 Sender: payette Logged In: YES  user_id=128 we want to do this after the new authN/authZ modules are  implemented to measure performance with this overhead  included.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-36,Fedora deployable as webapp (.war),- for Tomcat due to authN and authZ implementation  which is in terms of its connections to Tomcat.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-37,Refactor JUnit Tests for new .war distribution,"We need a better way than what we have now! Date: 2006-01-26 11:17 Sender: eddie Logged In: YES  user_id=372 With the exception of true unit level tests (that work at the class level), hold off on integration tests until we get some progress on Fedora-as-a-webapp (#585) Date: 2005-11-11 14:55 Sender: payette Logged In: YES  user_id=128 We did a good job on the first pass for 2.1b. 1) develop a junit test to measure api method performance  using jmeter.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-38,Index Dissemination Dependencies in RI,This is required to support the new OAI provider.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-39,Ingest/Export Whole Objects,"There are a number of features that are important for supporting ingest and export of objects. These are: 1. Ingest SIP (self-contained) - This would be for a single digital object, that there is the ability for all datastream content to be inlined or attached so that it is not necessary for the repository to call back to obtain the content bytestream. 2. Ingest Archive - This would be a whole set of self-contained SIPS bound together as an archive that can be ingested into the repository in an efficient manner. 3. Export (self-contained) - This would be an export of a single digital object where the content of all managed content datastreams is inlined or attached.  This can enable a dump and load of a repository since this export can file become a self-contained SIP (as in #1) above. This allows you to dump a Fedora repository, shut it down, and still be able to load up a new repository using the export files as SIPS - without having to do callbacks to the original repository to get the managed content datastreams. 4. Export Archive - This would be a whole set of self-contained export files bound together as an archive. Date: 2006-11-15 10:01 Sender: payette Logged In: YES  user_id=128 Ingest/Export (self-contained objects) is complete (#1 and #3). Ingest/Export archive of many objects is a future item. Date: 2005-11-16 11:27 Sender: payette Logged In: YES  user_id=128 Need to look at options for self-contained SIP ingest: 1) base64 inlining 2) SOAP attachments 3) XOP 4) ARC files 5) other Date: 2005-11-16 11:25 Sender: payette Logged In: YES  user_id=128 More comments on the problem:  Now, the object export will create ""public"" callback URLs for datastreams of type M (managed content). This works well for migration (export from one repository and ingest into new repository) as long as the old repository is up and running at the time of the ingest into the new repository. Then the datastream content can be sucked into the new repository via callback URLs (getItem requests on default disseminator). However, if the old repository is not available after an export, or if you just want to dump and re-load the SAME repository we need a way to get the managed content out of the repository as part of the export. In the Fedora spec, we envisioned a variant of the export file with base-64 encoded binary content inlined for the managed content datastreams. Then, the export file is complete in that it has all the datastream content that was in the repository within it. We can either create another export method on API-M such as exportWithContent() or parameterize the existing export method. From the ingest standpoint, we need to implement logic to look for base64-encoded content or the content location URL as two alternatives.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-40,Proai rcAdmin date should be per-format,See bug 129: http://phad.lib.virginia.edu/bugs/show_bug.cgi?id=129,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-41,Proai multi-threaded record retrieval,"Broadly speaking, the cache update process for Proai has two phase: querying for updates and getting the content for each updated record. The latter phase could be made faster if it were multi-threaded. The following suggested solution depends on tracker item 669 (Proai robustness - transactions and error recovery) being done: - Instead of one, have n threads take x items off the queue and perform concurrent HTTP GETs of the content. Things to consider: - The solution doesn't necessitate that each thread perform it's own reads/writes from/to the db. - Use an appropriate level of abstraction here... possibly a string which is a ""locator"" (not necessarily a URL), so non-http OAIDriver impls can adjust.  Redefining the contract between proai and OAIDriver impls is ok, as long as it doesn't presume a particular locator type.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-42,Use xsi:schemaLocation in DC datastream,"Currently the OAI provider implementations ""inject"" this attribute because it's not put into the DC automatically (for historic reasons), but it's required for OAI. It would actually be better/cleaner for Fedora to create the DC datastream with the attribute already populated.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-43,Selective Datastream Versioning,"Fedora has a placeholder in FOXML for the concept of selective datastream versioning. This is in the form of the ""versionable"" attribute on a datastream. Up until Fedora 2.1.1 datastreams are versioned automatically, and every datastream is subject to such versioning. This new feature will allow for versioning on whatever datastreams are marked as ""versionable."" A new API-M method will allow a client to set the versionable attribute on a datastream by datastream basis. The default is that datastreams are versioned. If a datastream was previously set as ""versionable"" and at a later time it is set to not be ""versionable"" the version history will not be purged, it will just stop the versioning from that point on.  This is very beneficial to avoid excessive or superfluous versioning for datastream that it is not necessary or desirable to version. The choice to version or not is made by each repository administrator.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-44,Purge Datastream Versions by Date Range,"Currently, the purge datastream operation allows versions to be purged, but only from a specified date/time backwards in the version stack. There are times that it is desirable to purge just one version, or purge a set of versions within a data range. One important scenario is to be able to purge the most recent version of a datastream to support transactional activities (that may be set up in middleware above Fedora). If an such a middleware transaction is being managed, and middleware is required to roll back a transaction, it is typically necessary to be able to remove the most recent version of a datastream (given that that datastream was part of the transaction).  Many other cases can arise where it in important to be able to remove versions in a date range, for example, during testing processes, where a bunch of ""junk"" datastream versions get inserted in the version stack.  This feature is implemented by some changes to the Fedora API to accomodate the start/end date range in the purge operation.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-45,New Triplestore Option: MPTStore,"A new triplestore to support core relationships management in the core Fedora repository will be developed for the following reasons: - make core repository not dependent on kowari - due to kowari instability issues and high memory requirements, we must ensure that the core repository is not vulnerable to these things - basic relationship management is something we can achieve with a simpler triplestore. - basic relationship management must be contained within the contect of a Fedora API-M transaction.  Right now, the kowari solution entails Fedora writing triples to a buffer that is outside the context of the Fedora API-M transaction, thus it cannot be guaranteed that such triples have successfully been written to the triplestore from the buffer by the time the Fedora API-M transaction is completed.  For these and other reason, a new triplestore is being developed using relational database technology. The design of this triplestore is based on mapped triple tables (thus MTP). It will hold all the same information currently in the Resource Index model.  Initially, it will support SPO queries. This will be an alternative configuration for the Resource Index in the core Fedora. It will still be possible to configure kowari as the triplestore.  At the same time, we are moving forward with designs to have a Resource Index service that can be outside the core Fedora repository. The idea is to have simpler and more tranasction-savvy relationship management at the core of Fedora, then be able to replicate the managed triples from the core to triplestore outside the repository (the Resource Index service) via messaging. The motivation here is to make the external service be where more semantic web activities happen (outside of the core repository). The base information from the repository can be enriched in the service (add information from other ontologies, add other kinds of relationships, whatever.) Then, full blown capabilities such as inferencing, can be done via the service without bogging down the core repository.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-46,Authentication via ServletFilters,- Move away from JAAS Servlet filters in the preferred pattern for plugging in authentication and attribute-getting - Use Bill's model done for PubCookie,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-47,Checksum Storage and Validation for Datastreams,"Based on recommendations from Preservation Services Working Group, implement checksum and checksum validation feature",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-48,Resource Index Refactoring and MPTStore Support,- more efficient updates for RI - bug fix for concurrent updates to RI - MPTStore plug-in option (alternate triplestore),legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-49,Bundled Postgres driver fails to copy during install,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-50,Postgres java.lang.NumberFormatException at first startup,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-51,Hash Collision can cause rebuilder to skip some objects,None.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-52,WSDL should declare faults,None.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-53,Unhelpful error from server when adding/modding...,...disseminator with invalid binding.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-54,Improve shutdown behavior with long-running requests,"Fedora's webapp  shutdown currently relies on servlet container to ensure all requests are complete.  However, the servlet container doesn't always wait until requests are finished in order to call destroy().  For long-running requests, this can be problematic because the resources (the db, etc) might be closed before the requests have a chance to finish.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-55,User-provided log messages NOT recorded...,...for object-level API-M Methods.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-56,iTQL less-than queries only work on xsd:double...,...datatyped values.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-57,SRB LowlevelStore Issues (for pre Fedora 2.2),None.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-58,Invalid POLICY datastreams make objects inaccessible,"Validation for POLICY datastreams only occurs when they're read for the purpose of enforcement (after they're ingested).  This makes it possible to ingest a non-schema-valid POLICY datastream, which then makes it impossible to access the object at all due to validation failures for every subsequence API operation involving the object.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-59,Minor typos in tutorial2.pdf,"As of Fedora 3.0, all reported typos were fixed except the following:  Page 23: * Service Contract: [...] provides an[d] implementation ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-60,Validation error when namespace for in-line XML...,...datastreams is in root element.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-61,LLStore Pluggability,None.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-62,Fix soap/axis error detail.,Make sure the error detail reported from Fedora's SOAP interfaces is done according to current WSDL/SOAP best practices.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-63,Support SOAP Bindings for SDeps,SOAP bindings are not yet supported.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-64,Datastream SIZE attribute not fully implemented,"Fedora's REST API correctly reports SIZE of ""X"" datastreams, but the size for all other types is currently reported as ""0"".  For ""M"" datastreams, this is clearly wrong.  For ""E"" or ""R"" datastreams, the correct thing to do is less obvious.  For example, hitting the following URL: http://localhost:8080/fedora/objects/demo:SmileyBeerGlass/datastreams/DC?format=xml  ...reports the correct size.  But requesting the same info for an ""M"" datastream reports ""0"" as the size.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-65,XACML IdReference support,"Blair has suggested that, by providing support for resolving XACML IdReferences, more flexible AuthZ can be achieved in Fedora.  This is an enhancement to existing functionality.  On Nov. 13, 2006, Blair wrote:  I'm fairly certain that the idea I'm working on for the ARROW project will provide a more flexible and efficient authz solution.  It will hopefully only require a simple addition to fedora.server.security.PolicyFinderModule to add support for finding policies based on idReference.  The idea is to make PolicySets that support the intuitive notion of letting more specific controls take precedence in authz evaluation.  For example; A Policy denying read access to a particular DO with PID 123 would take precedence over a Policy allowing access to a class of objects that the DO with PID 123 happens to be in (this class would be defined by metadata attributes such as the Dublin Core type).  The plan is to use the reserved POLICY datastream in every DO to hold the top level PolicySet passed to the PDP from the PolicyFinderModule.  This would be the PolicySet used for any authz evaluation pertaining to an action associated with a particular PID - almost all APIA and APIM operations.  Any authz controls required on actions that do not have a specific PID associated with them (such as ingest, describeRepository, findObjects) could have policies placed in the default repository wide policy directory, which would otherwise be empty.  The new top level PolicySet would comprise of a set of other PolicySets combined using the FirstApplicablePolicyAlg.  Therefore if a match were encountered early in the evaluation the result would be returned and evaluation finished; other irrelevant policies would not need to be evaluated.  The component PolicySets would be ordered from most to least specific with regard to their component Policy's Resource and Subject Targets, thus achieving the desired most specific overrides functionality.  See the attached layout for an example; note that this is illustrative of only one possible top level PolicySet structure, different combinations of referencing, in lining and further nesting could be used.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-66,XACML AttributeSelector support for 2.x,"Add support for AttributeSelectors to the ResourceAttributeFinderModule.  This will allow the use of AttributeSelector elements (contrast AttributeDesignators)in policies which can 'select', using an Xpath query, attributes of the resource the policy pertains to.  This affords the ability to write policies based on elements contained in XML datastreams - such as DC, RDF, and many more.  The significance of this feature is that policies will be able to refer to a far greater range of resource attributes such as true object metadata (rather than the system level metadata available now), and relationships to other objects e.g. composition, aggregation.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-67,risearch fails to load stylesheets w/Jetty,"This is an issue when using Jetty, or any other webapp container that doesn't physically unpack the war file into the webapps directory on auto-deployment.  The workaround is to manually deploy the war file:   - don't put it in webapps/   - instead, create a directory under webapps/ called 'fedora'   - un-jar the fedora.war file inside that directory   - start fedora and try risearch again  The problem is, the stylesheet that presents the risearch interface can't be loaded (and this prematurely ends the search attempt) because the code that loads it assumes it's on the filesystem.  This is is true for tomcat, which physically unpacks the war file on automatic deployment, but not true for other webapp containers.  The solution will be to change org.trippi.server.http.Styler#load(String) to resolve the xsl from classloader.getResourceAsStream.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-68,Enable Multiple Fedora WARs in one Servlet Container,"It should be possible to deploy multiple instances of Fedora on one server, using one servlet container.    Currently, the most obvious obstacle to this is the fact that Fedora relies on an environment variable to find FEDORA_HOME.  Because of this, in order to have two versions of Fedora on the same server, you must have two servlet containers running as different users, each of which provides its own FEDORA_HOME.   Is there any way to specify FEDORA_HOME in an XML file deployed alongside the WAR file?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-69,WSDL provided under target /fedora/wsdl is not public,"When running with authentication enabled for both API-A and API-M, the target of /fedora/wsdl is also authenticated even though this target is supposed to remain public.   This appears to be a bug in the Fedora installer script as it builds the web.xml file when configured with authentication enabled for API-A. The installer is including the WSDLServlet in the EnforceAuthnFilter mapping when it should not. An interim fix is to manually edit the generated fedora web.xml file and remove or comment out the following lines:      <filter-mapping>       <filter-name>EnforceAuthnFilter</filter-name>       <servlet-name>WSDLServlet</servlet-name>     </filter-mapping>  Doing so should eliminate the authentication challenge for obtaining wsdl through the /fedora/wsdl target.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-70,LLStore rebuild uses canonical paths,"Aaron reported this.  When running a SQL rebuild, the NSDL team noticed that the lowlevel storage file registry  writes the paths differently than Fedora normally does: it uses the ""canonical"" path (this is the path with any symlinks resolved).  The desired behavior is to save the path in the way it is configured in fedora.fcfg.  That way, the symlink target is respected later, if it changes.  To recreate this problem:   - install an empty fedora repository.   - configure the objectPaths directory in fedora.fcfg to point to a symlink instead of a physical directory.   - create an empty object   - note the associated path value in the objectPaths table (it will include the symlink as part of the path name)   - shut down fedora and do a sql rebuild   - note the new path value in the objectPaths table (it will NOT include the symlink...instead it will contain the canonical path, which is not the desired behavior)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-71,fedora.war deployment fails in JBoss AS with OnlyOnceError,"Fedora version 2.2 WAR file will not deploy to the JBoss Application Server without modification. The root cause is a duplicate copy of Log4J.jar that is included in the Fedora distribution (JBoss AS includes its own copy). Symptoms of the problem are errors similar to these in the JBoss AS log file:  INFO  [TomcatDeployer] deploy, ctxPath=/fedora,    warUrl=.../tmp/deploy/tmp42671fedora-exp.war/ ERROR [STDERR] log4j:ERROR A ""org.jboss.logging.util.OnlyOnceErrorHandler""    object is not assignable to a ""org.apache.log4j.spi.ErrorHandler"" variable. ERROR [STDERR] log4j:ERROR The class ""org.apache.log4j.spi.ErrorHandler"" was loaded by ERROR [STDERR] log4j:ERROR [WebappClassLoader  delegate: false  repositories:    /WEB-INF/classes/ ----------> Parent Classloader: java.net.FactoryURLClassLoader@148bd9e] whereas object of type ERROR [STDERR] log4j:ERROR ""org.jboss.logging.util.OnlyOnceErrorHandler"" was loaded by    [org.jboss.system.server.NoAnnotationURLClassLoader@c2a132].  Further details at http://www.fedora.info/wiki/index.php?title=FAQ:_Fedora_under_JBoss_AS",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-72,"Clean up prompts/messages for ""other"" servlet container","Since we are using the ""other"" servlet container, don't bother to off the prompt to automatically deploy the sample services and objects.  Also added a message detailing the manual step of deploying the WAR files to the end of the installation script.  See attached patch and/or http://drc-dev.ohiolink.edu/changeset/760 for changes in context.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-443,Shibboleth Authentication - Servlet Filter,"New servlet filter to deal with Shibboleth authentication, and facility to pass subject attributes into Fedora so they can be used in the internal Fedora XACML authentication module for policy enforcement.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-74,HTTP Requests include bad HTTP basic Auth,"I've found a troublesome quirk about how Fedora calls URLs.  This applies when a disseminator is calling the URL and when Fedora retrieves Externally Referenced content.  When calling these URLs, Fedora passes an HTTP header like this one:  GET /2005/08/online_xslt/ HTTP/1.1 User-Agent: Fedora Authorization: Basic Og== Host: http://www.w3.org:5050/  The trouble is the Authorization line, which doesn't actually do anything.  The line should be omitted from the outgoing requests.  Some services (like the one in this example) take the authorization line to mean that you actually do want to authenticate.  When the authentication fails, the server returns information about the failed login rather than returning the publicly available content from the URL.  Try it yourself:  Go to this URL in your browser:   http://www.w3.org/2005/08/online_xslt/  You will see the publicly available page from that URL.  Now create an External Reference Datastream in Fedora that points to the same URL.  Point your browser at the new datastream.  It will hang for a second and then give you an empty page.  If you monitor the TCP traffic, you will see that the w3.org server is returning a ""401 Authorization Required"" message.    If you remove the Authorization line from the headers and resend the request, the server returns the proper page.  Is there a way to get Fedora to omit that line from the header?  Conversely, in situations where I actually want Fedora to authenticate with a server when retrieving content, how can I do that?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-75,HTTP Error Codes are not being returned correctly.,"When trying to get a datastream by a Fedora URL, e.g. http://example.org/fedora/get/id:1/DC, for a datastream that doesn't exist (anymore) Fedora returns an empty object instead of a http 404 error.  The header returned by fedora is: HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Pragma: No-cache Cache-Control: no-cache Expires: Thu, 01 Jan 1970 01:00:00 CET Content-Length: 0 Date: Tue, 24 Apr 2007 12:50:04 GMT  Fedora should return an error to indicate that the resource is unavailable.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-76,demo soapclient fails to compile/run,"The bat scripts that are used to compile and run the demo soapclient located in fedora_home/client/demo/soapclient do not reflect the name change of the client.jar file in Fedora 2.2. In 2.2, this jar file was renamed as fedora-client.jar(previously it had just been client.jar).  A workaround is to edit compile-demo-soapclient.bat and run-demo-soapclient.bat and change all occurrences of client.jar to fedora-client.jar.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-77,addDatastream allows invalid values for checksumType,"Our site is having a problem with the values for checksum parameters.  Adding a new datastream to a Fedora object with a checksumType value of ""DEFAULT"" is permitted using the API-M addDatastream function.  The datastream is added and contains the line <foxml:contentDigest DIGEST=""none"" TYPE=""DEFAULT""/>   After the successful API-M add the resulting Fedora object cannot be imported to another Fedora repository using the FedoraAdmin client.  The    Ingest From Repository    rejects with the following error message:     Fedora.server.errors.ObjectValidityException: DOValidatorXMLSchema returned validation exception.  The underlying exception was a org.xml.sax.SAXException.  The message was ""URI=null Line=468: cvc-enumeration-valid: Value 'DEFAULT' is not facet-valid with respect to enumeration '[MD5, SHA-1, SHA-256, SHA-384, SHA-512, HAVAL, TIGER, WHIRLPOOL, DISABLED]'.  It must be a value from the enumeration.""     This leaves me with some questions on the value of checksumType to use when calling API-M.  Since the FedoraAdmin client rejects the value of ""DEFAULT"" when adding an object, should the call to addDatastream using a value of ""DEFAULT"" for checksum type also be rejected as an error or should it cause the new datastream to be added using the default checksum algorithm specified in the Fedora.fcfg file (in this case DISABLED since autoChecksum is set to false in the Fedora.fcfg file)?  Assuming that autoChecksum is false, should the value    DEFAULT    be used for the checksumType attribute in the modifyDatastreamByValue and modifyDatastreamByReference methods or should this also use the value ""DISABLED""?  Since there are now problem records in our repository, should a modifyDatastream using a checksumType    DEFAULT    or    DISABLED    correct the value in the foxml?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-78,Null pointer running v2.2 installer,"The v2.2 installer throws a null pointer exception when doing a custom install.  The (main) custom options are:  Existing Tomcat (ports 8080/8005) Database: included No SSL.  The (partial) trace is:          at fedora.utilities.install.container.TomcatServerXML.setShutdownPort(TomcatServerXML.java:45)         at fedora.utilities.install.container.TomcatServerXML.update(TomcatServerXML.java:32)         at fedora.utilities.install.container.ExistingTomcat.installServerXML(ExistingTomcat.java:32)         at fedora.utilities.install.container.Tomcat.install(Tomcat.java:43)         at fedora.utilities.install.container.ExistingTomcat50.install(ExistingTomcat50.java:15)         at fedora.utilities.install.Installer.install(Installer.java:66)         at fedora.utilities.install.Installer.main(Installer.java:227)  ...  The line numbers do not match the source download, but it appears that the element search for ""/Server[@shuddown and @port]"" is returning null leading to the failure.  The ONLY successful install I've manages with 2.2 is a ""quick"" install.  Any attempt at a custom install lead to errors.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-79,IllegalStateException when authorization header not provided,"If the authorization header isn't available in the http request, the servlet filter sets the response header, then continues with the filter chain.  This causes an IllegalStateException because the response is manipulated twice.  The chain should instead be stopped.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-80,"LDAP, JNDI, and Servlet Filter issues","ISSUES  1.  A bug.  Confused usage of local (method) variable and instance field with the same name ""authenticated"".   2.  Unexpected / strange response from JNDI.  Again, this is a non-existent user with no password provided.  In the case seen in the log,  JNDI does not throw an exception. I haven't seen any documentation on what to expect in this case, and certainly didn't expect this behavior for the specific case of no password provided.  In local testing, I've seen exceptions thrown always on no password provided.  The difference could be due to the directory server used, I guess. I've changed the code defensively, but need to test before sending the patch.  I will also both (a) trap the lack of password in the Fedora code itself, so that it's an error to Fedora before JNDI is called; and (b) treat empty results returned from the results as non-authentication. Both of these will be configurable, which will allow further testing if we want/need to tease this out (i.e., ferret out when exceptions are unexpectedly not thrown).   3.  A bug.  The cached authentication value is not reset before the re-authentication attempt.  A re-authentication attempt with exception thrown then results in using the existing cached value. This is puzzling especially when the the cached value is --incorrectly-- set to true, as set in the second login attempt with no password and no exception thrown by JNDI. That is, case 3 (or 4) is the result of both this bug  --and-- case (2) having incorrectly cached a true authentication value.  Strange case and inadequate testing.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-81,dcDates table not updated when DC datastream modified,"In certain cases, the dcDates table is not updated when the DC datastream is updated.  The dcDates table is populated IF a dc:date can be parsed as a date.  This supported the range queries of fieldsearch.  In the event that the dcDates table has an entry for a given object (the DC date could be parsed), then the object is modified so that the DC date is not parsable, the old value is left in the dcDates table.  The expected behavior is that, if the new dc:date cannot be parsed, the old date would be removed from the dcDates table on modify, as this is supposed to represent the most current version's date.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-82,Multiple owner id support,"fedora owner id currently is an opaque string whose meaning is simply and completely determined by how it effects xacml policies. this feature request is to allow -multiple- owners of an object.  parse object owner id as comma* -separated value string and provide this -set- of values to xacml policy evaluation.  (but also continue to support simple, single owners.)  *: or other configured separator.  "","" is the default separator. (see below if "","" doesn't work in your case)   an object with owner-id == ""alpha,beta"" is co-owned by alpha and beta. the status and meaning of the listed owners continues to be completely determined by your own xacml policies. (for example, individual user and group i.d.s can be mingled in the owner-id csv, with appropriate xacml policies.)  the attached xacml policy allows a user any access to an object if the individual authenticated user i.d. matches one of the listed owners of the object.  as usual, this policy works with other policies, so that fedoraAdmin continues unfettered access under default policies.  see the attached files for how this was tested.   using a different separator from "","" ------------------------------------ if "","" is included in your owner ids (however interpreted), you'll need to use another separator if you want multiple owners.  configure this in fedora.fcfg:    <module role=""fedora.server.security.Authorization"" ...>     <param name=""OWNER-ID-SEPARATOR"" value=""\|""/>  the new parm shown is optional.  if not given, separator is "","".  if given, parm value is a -regular expression-.  so, to use ""|"" as separator, you'd need to avoid r.e. syntax by coding as shown. (note that the xml attribute itself doesn't need escaping, hence don't code this ""\\|"")",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-83,Add messaging support to GSearch,"Fedora 2.3 will include a JMS based messaging module (see Feature Tracker #1656193). Add messaging support to GSearch, allowing GSearch to subscribe to API-M events from the repository and issuing callbacks to index or re-index as necessary.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-84,Migrate Fedora's Modules to OSGi/SpringDM,"Fedora's existing module framework needs revisiting. While the existing framework allows for some degree of extensibility by replacing existing modules, there's no easy way to add a completely new module without modifying server code (e.g. Server, DefaultManagement, or DefaultDOManager).  On April 16th, 2009, the committers discussed and agreed to move toward using Spring Dynamic Modules (OSGi) for Fedora's future module plugin framework.  Notes from whiteboard: http://fedora-commons.org/confluence/download/attachments/11503659/modularity.jpg",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-85,FedoraAccessServlet hardcodes tiny buffer for datastreams,"When getting datastream disseminations via the REST interface, the data is buffered 255 bytes at a time.  If it's not made configurable, it should use at least a byte buffer size of 4096 or 8192 when streaming the content.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-86,Authentication error with fedora-find command-line utility,I just installed 2.2 and am trying to do something simple but without success. I wonder if anyone might recognize what I'm doing wrong.  I'm trying to run the client find utility to get a list of pids:   $FEDORA_HOME/client/bin/fedora-find.sh localhost 9080 pid demo http  I get the following error: Starting Fedora Lister...  ERROR: java.lang.IllegalArgumentException: Username may not be null  It's not clear to me from the documentation how to indicate the username or why it would be necessary. The http://hostname/fedora/search url works fine.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-87,XACML Policies unable to use '...#anyURI' attributes.,"In some (and possibly all) cases, the XACML engine cannot correctly process attributes of type 'http://www.w3.org/2001/XMLSchema#anyURI'.   This means that the following effectively cannot be used in the context of Fedora XACML policies:  urn:fedora:names:fedora:2.1:resource:object:formatUri urn:fedora:names:fedora:2.1:resource:datastream:formatUri urn:fedora:names:fedora:2.1:resource:datastream:newFormatUri urn:fedora:names:fedora:2.1:resource:datastream:location urn:fedora:names:fedora:2.1:resource:datastream:newLocation urn:fedora:names:fedora:2.1:resource:bdef:location urn:fedora:names:fedora:2.1:resource:bmech:location  The AttributeFinderModule class correctly handles other types of content but the specific condition for #anyURI values is omitted. Adding this code corrects the issue.   I have attached a code diff and a sample policy that should protect from dissemination all datastreams with a formatURI set to 'vital:protected' for a particular object. This does not occur, in our experience, without the modification.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-88,Saxon Servlet not respecting base urls,The saxon servlet doesn't pay attention to the base url of the loaded stylesheets.  This makes xml includes resolve improperly.  Bill Parod reported this.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-89,Whitespace added when modifying Inline XML,"When modify inline xml, the Fedora server inserts whitespace on either side.  Modify multiple times and the whitespace will continue increasing.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-91,Automatic rename of do table to dobj sometimes fails,"During the install process, if a ""do"" table is detected in the Fedora schema, it is automatically renamed to ""dobj"".  This automatic rename fails in some cases, which ultimately causes both the old ""do"" table, and the new ""dobj"" table to exist simultaneously in the new Fedora (2.2+) schema.  This situation must be corrected manually (by moving everything from the do table to the new dobj table).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-92,Incorrect XACML demo policies involving state,"From Tom Wana to fedora-commons-developers, 8/13/07  Hi,  it seems as if the Fedora upstream XACML policies contain a bug. When testing for the state of an object or disseminator, there are no such states as ""Active"", ""Inactive"" etc. Instead you would have to use ""A"", ""I"" when writing the policy (this took me a few hours to track down...).  For example, Fedora ships with deny-purge-object-if-active-or-inactive.xml, which contains:       <Resources>        <Resource>          <ResourceMatch MatchId=""urn:oasis:names:tc:xacml:1.0:function:string-equal"">            <AttributeValue DataType=""http://www.w3.org/2001/XMLSchema#string"">Active</AttributeValue>            <ResourceAttributeDesignator AttributeId=""urn:fedora:names:fedora:2.1:resource:object:state""              MustBePresent=""false""              DataType=""http://www.w3.org/2001/XMLSchema#string""/>          </ResourceMatch>        </Resource>        <Resource>          <ResourceMatch MatchId=""urn:oasis:names:tc:xacml:1.0:function:string-equal"">            <AttributeValue DataType=""http://www.w3.org/2001/XMLSchema#string"">Inactive</AttributeValue>            <ResourceAttributeDesignator AttributeId=""urn:fedora:names:fedora:2.1:resource:object:state""              MustBePresent=""false""              DataType=""http://www.w3.org/2001/XMLSchema#string""/>          </ResourceMatch>        </Resource>      </Resources>  But because the state is never ""Active"" or ""Inactive"" (but ""A"" or ""I""), this rule never applies and is in effect useless. Which you can easily check yourself by purging an object which is active or inactive, which this rule should prevent, but it works.  When you replace ""Active"" with ""A"" and ""Inactive"" with ""I"", the rule applies, and you can no longer purge such objects.  So it seems as if all occurrences of ""Active"", ""Inactive"" and ""Deleted"" need to be rewritten to ""A"", ""I"" and ""D"" to do their job.  Perhaps you should also include some test cases to check if the default policies actually work.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-93,Update Libraries for Release 3.0,Update the libraries used by Fedora to the latest versions.  The current libraries used by Fedora (src/lib) are:  activation-1.0.2.jar avalon-framework-4.2.0.jar axis-ant.jar axis.jar batik-all.jar castor-0.9.3.9-xml.jar commons-beanutils.jar commons-betwixt-0.7.jar commons-codec-1.3.jar commons-collections-3.1.jar commons-dbcp-1.2.1.jar commons-digester-1.7.jar commons-discovery.jar commons-httpclient-3.1-beta1.jar commons-logging.jar commons-pool-1.2.jar cos.jar DateUtils1.jar derby.jar dom4j-1.6.1.jar driver-1.0.5.jar fop.jar GroboTestingJUnit-1.2.1-core.jar ij.jar jai_codec.jar jai_core.jar jakarta-oro-2.0.5.jar java-getopt-1.0.11.jar jaxen-1.1-beta-9.jar jaxrpc.jar jena.jar jhbasic.jar jmx.jar jrdf-0.3.3.jar jsf-api.jar jsf-impl.jar jsp-api.jar jsr173_1.0_api.jar jstl.jar junit-4.1.jar log4j-1.2.14.jar lucene-1.3.jar mail.jar md5.jar mkjdbc.jar mptstore-0.9.1.jar mysql-connector-java-5.0.4-bin.jar one-jar-boot-0.95-patched.jar openrdf-model.jar openrdf-util.jar postgresql-8.2-504.jdbc3.jar rio.jar saaj.jar saxon.jar servlet-api.jar sjsxp.jar standard.jar stax-utils.jar sunxacml-patched.jar Tidy.jar trippi-1.1.2-core.jar trippi-1.1.2-kowari.jar trippi-1.1.2-mptstore.jar trove-1.0.2.jar tt-bytecode.jar wsdl4j-1.5.1.jar xercesImpl.jar xml-apis.jar xmlpull_1_1_3_4a.jar xmlunit1.0.jar xpp3_min-1.1.3.4.K.jar,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-94,object editor dirty flag being set when no changes have been,"You can replicate this bug by opening an existing object with the object editor tool of admin client and then closing the object editor pane without making any changes to the object. The pane should just close since no changes have been made, but instead you are prompted with a message asking ""Close without saving changes?"". Looks like the dirty flag is being set even though no changes have occurred.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-95,Java6 compatibility,"Currently, Fedora does not build with Java 6. While implementing the new methods introduced in Java 6 for java.sql.Connection in fedora.server.utilities.ConnectionWrapper allows Fedora to build under Java 6, this is not backwards compatible with Java 5.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-433,JSR-170 support,Implement JSR-170 (level 2 compliance) in Fedora.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-97,SQL rebuild sometimes fails to populate pidGen correctly,"After running fedora-rebuild, the pidGen tables sometimes isn't populated.  This can cause an error when ingesting objects where the pid is unspecified and must be auto-generated.  The workaround is to check this table after a rebuild and, if it is unpopulated, issue the following SQL before restarting Fedora:  INSERT INTO pidGen (namespace, highestID) VALUES ($NS, $HIGHESTID)  Where $NS is the namespace, such as ""demo"", and highestID is the higest existing numeric part of all PIDs in the repository, such as 10.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-98,CMDA Migration Utility for 3.0,"Develop a utility that aids upgrading existing repository objects to support CMDA in release 3.0.  This utility must  process Release 2.2 digital objects but may support prior releases if feasible.  This utility must provide the ability for the administrator to make the final choice of assignment of digital object to content model object though it may automate the process to the degree feasible.    The utility should implement a phased approach consisting of analysis of existing digital objects, generation of suggested content models/categories, and transformation to the new format.  The analysis phase should identify and classify objects that may have similar content models.  This phase should permit the administrator to select the criteria used to classify objects.  The generation phase must create candidate content models consistent with the analysis phase.  The content models generated should be output is a form that the administrator can customize.  The transformation phase must permit the administrator to select which objects will be transformed and what transformation will be applied to them.  The transformation phase should provide the means for the administrator to customize the transformation.  This utility must provide means to upgrade objects without moving stored datastreams.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-429,Integrate Mulgara (without Trippi),"Integrate the Mulgara triplestore as an optional plug-in for the Fedora Repository service to function as the Resource Index.  Permit its operation without requiring the direct use of the Trippi interface.  Trippi may remain  in use as a library for functions that do not directly require an operational triplestore instance.  Deprecate the use of Kowari.  It is not required that this feature development use a JTA interface or that Mulgara be integrated as an XA resource within the same transaction as the Registry (relational) resource.  However, this will happen as a subsequent development and implementation of this feature should plan accordingly.  Due to the current lack of standardization for triplestore interfaces, the implementation of this feature may be specialized for Mulgara and not attempt to implement an abstraction layer for all triplestores.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-100,Update object/datastream files in a transaction,"Fedora currently tries to compensate internally if something fails while committing a change to the foxml and/or datastream files.  This improvement would change that so the work occurs in a transaction.  Goals include: simplifying the compensation code (mostly in DefaultDOManager) and having greater assurance that, when things go wrong (part of the overall transaction fails, power goes out, etc), storage comes up in a consistent state rather than requiring manual intervention.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-101,Initial integration of Akubra with proper rebuilds,"Replace the current LLStore with an Akubra interface (likely a module that wraps an Akubra impl).  This feature should include the ability to do rebuilds against this new interface, now that it is capable of listing its contents.  Whether it's internally ""transactional"" or not is TBD.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-102,SOAP over HTTP with Attachments,"Provide an initial SOAP with attachments capability for API-M via HTTP. Ideally support > 2GB.  If not, break that out as a separate feature.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-103,Installer creates one-jar doc directory,"When running the installer jar, a doc/ directory gets created.  This is caused by the one-jar library that we use for creating self-contained executable jars.  It can be fixed by omitting the main jar manifest's One-Jar-Expand attribute.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-104,Support HTTP Soap with Attachments < 2GB.,"Refactor 1791674 ""Provide a basic SOAP with Attachments for API-M"" to support message sizes which require temporary ""in-flight"" persistence for total message sizes to 2GB. Like 1791674, limit the implementation to HTTP bindings only.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-105,Support HTTP Soap with Attachments > 2GB.,"Refactor 1791689 ""Support HTTP Soap with Attachments to 2GB."" to support message sizes which require temporary ""in-flight"" persistence for total message sizes greater than 2GB. Like 179189, limit the implementation to HTTP bindings only.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-106,Enable RI Indexing of BMECH/BDEF/Method,"Enable the RI to index BMECHs, BDEFs, and Methods in order to enable client like the OAI Provider Service to perform queries to determine which disseminations have changed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-107,Update the OAI Provider for CMDA Changes,"Update the OAI Provider for modifications compatible with the CMDA.  In particular, provide the ability to harvest metadata the enables determining which dissemination have changed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-108,Basic SOAP over JMS,Add capability for Fedora to listen to a JMS provider and apply API-A/M request messages.  ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-109,SOAP over JMS with Attachments,"Add a SOAP with Attachments binding to JMS for message. Payloads over 2GB are ideal; if it needs to be added as a separate feature, do that.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-110,SRB Storage Support,Replace the SRB concrete storage implementation with a new concrete implementation based on Akubra,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-111,IRODs Storage Support,Develop a new concrete implementation for the SDSC IROD (SRB replacement) based on Akubra,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-112,Sun Honeycomb Storage Support,Develop a new concrete implementation for the Sun Honeycomb based on Akubra,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-113,Update the Admin Client for new relations methods.,Update the Java Swing Admin client to utilize the revised relations interfaces for Release 3.0.  Utilize the new relations extensions to permit the display and add of individual relations to RELS-EXT.  Provide a simple method to add one relation at a time and provide a method to edit the REL-EXT datastream as a whole.  Note that a separate feature will provide a graphical relations editor.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-114,Design Backend Security Replacement,"The design of the security between backend (disseminating) services and Fedora needs to be rethought.  The scope of this includes authentication, authorization, ""getDS/getDSAuthenticated"", etc..  We discontinued BESecurity in Fedora 2.2 (see 2.2's release notes).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-115,Change display and editing of RELS-EXT datastream,"Given the increased importance of and reliance on the relationships in the RELS-EXT datastream in the CMDA model, the Admin client should facilitate viewing and editing this datastream in a more user friendly and failsafe manner.  Rather than simply displaying a text edit window to allow the admin client user to view and edit the raw RDF XML of the RELS-EXT datastream, this change will display the contents of that datastream in a three column table, and allow the user to add entries to the table, edit entries in the table or delete entries in the table.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-279,Add messaging support to GSearch,"Peform detailed design, coding, and unit test for Feature 1746275 Add messaging support to GSearch.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-116,Switch to Derby  for bundled/supported pure Java database,"We currently provide McKoi as the bundled java database for the ""quick"" install option.  Due to simple setup, a native Java database is also useful for running our automated tests.  We should switch this to Derby because McKoi is no longer actively maintained (last release was 2004) and Derby is.  Derby is also the underlying database used for ""Java DB"", the JVM-bundled native Java database as of Java 1.6.  This needs to work with Java 1.5 and 1.6.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-117,Publish API-M events via JMS,Enable Fedora to publish API-M events via JMS.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-119,Integrate JMS broker,Integrate support for a JMS broker in Fedora. Provide support for an in-JVM broker as well as an external broker.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-120,Establish format for API-M messaging events,Devise a standard message format/schema for publishing Fedora API-M events for use by subscribed services.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-121,SOAP over JMS,Enable Fedora to receive API-M calls using JMS as the transport layer.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-122,Authentication ServletFilter cleanup,"Try to simplify how this all hangs together,  remove commons-logging remnants, write javadocs explaining how it works, and bring in line with coding standards.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-123,CMDA Off-Line Validator,The validator MUST test whether a digital object conforms to its content model.  The validator MUST operate as an administrative utility that is invoked on digital objects already stored in a Fedora Repository and MUST provide a report on objects that fail validation tests.  The validator MUST test whether the digital object has the number and kind of datastreams defined in the content model.  The validator SHOULD be designed to be extensible to accommodate additional conformation tests including referential integrity tests being developed in a separate feature.  The validator MUST provide the mechanism to test a selection of objects which is a subset of the total number of objects contained in a repository.  The validator SHOULD be designed to enable reuse/sharing of code with on-line error description features.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-428,Extend fedora-validate-objects to include referential integrity reporting,"Extend Feature 1797214 CMDA Post Processing Validator to add referential integrity tests.    Optional capability to check for any relationship to an object.  And verify that object exists in the repository. For Fedora-defined objects (cmodel, sdep, sdef), check that certain required relationships exist:  a) cmodel (optionally point to an sdef) b) sdep (must point to a cmodel and an sdef)  Note: This extends on the functionality of FCREPO-123",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-125,CMDA On-line Error Description (Part 1),"When an error condition is detected during on-line access operations, this feature MUST provide a description of the reasons for the error condition to the caller.  The feature MUST report conformance with the object's content model and SHOULD report any other available information that enables identification of the error's source.  The feature SHOULD be developed to enable extensibility and SHOULD reuse/share code with off-line validation features.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-126,Cleanup referential integrity constraints in client,"Prior to CMDA, there were referential integrity constraints in the admin client that prohibited editing of certain datastreams(e.g., MethodMap, WSDL, DSInputSpec, etc.) in bdef/bmech objects. This refactoring feature MUST remove any remaining constraints from the admin client to conform with the looser coupling provided by CMDA.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-127,Cleanup disseminator references in batchModify utility,"Prior to CMDA, the batchModify utility in the admin client enabled batch modification of api-m methods involving disseminators (e.g., addDisseminator, purgeDisseminator, etc.). This refactoring feature MUST remove from the batchModify utility references to disseminator methods that are no longer available in CMDA.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-128,Cleanup SQLRebuilder to remove disseminator references,The SQLRebuilder still contains references to dissemination database tables. The refactoring feature MUST remove all code referencing old-stlye dissemination databases.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-435,Atomic way of submitting multiple API-M requests,"The so-called ""super method"" is a new API-M method that allows a set of API-M methods to be submitted as a single operation, doing all of the work in one transaction.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-130,pubcookie servlet filter -- omit initial form fetch,"pubcookie servlet filter currently fetches and parses html form, to get parms for authn ping == form action. these parms are well-known and stable, and can instead be provided in config and make the servlet filter more efficient.  [suggested by uva systems group]",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-449,servlet filter certificate use,"investigate config of certificates (e.g., from fedora's trust/keystore vs local java sdk trust/keystore).   recent certificate authority changes at uva need to be tested and reflected in local fedora.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-132,Option to pass backend service errors through,"Peter suggested that it would be useful if, when using API-A Lite, if a backend HTTP service gives a non-200 response, instead of having Fedora return a generic 500 error, it returned the exact error code and payload that the backend service returned.  In practical terms, this would simplify debugging by passing the ultimate error straight through.  Dan and I talked about this and believe it's appropriate to retain the ability to hide the cause of the error (in effect, to have Fedora intercept the error, log it, and provide a unique event id for later lookup by an authorized user).  In a production environment, it may not be appropriate to provide back-end service error detail to the agent making the dissemination request from Fedora.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-133,Resolve multiple fTypes,"With the CMDA changes, a new ""Fedora Object Type"" (fType) was introduced: ""C"".  Now the set of possible fTypes includes ""O"" (data object), ""D"" (bdef object), ""M"" (bmech object), and ""C"" (content model object).  The fType attribute has always been a single-valued required attribute.  With the CMDA changes, this was turned into a repeating attribute of the DigitalObject class.  We need to decide whether we really want this, long-term.  Things to consider:  1) How would it be specified in the FOXML or METS if multiple values were allowed (a delimited string, or multiple elements/attributes?)  2) It is currently not possible to ingest an object that specifies it's of multiple Fedora Object types.  Schematron validation (foxml and mets) both catch this as an error.  3) If it were possible, we don't have any tests that exercise this capability: none of the test/demo objects are of multiple types.  Things that would be particularly important to test include:   - How the resource index update behaves when an object is of two types.   - How the fieldsearch interface would behave.   - How the admin client indicates multiple types to the user.  On the other hand, if we decide to back off of this ""multi-valued fType"" capability, the DigitalObject class and DOReader, etc., should be updated to use a simple getter/setter for this value.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-134,Versioning of FOXML and METS schemas for CMDA,"Our FOXML and METS schemas need to be versioned for Fedora 3.0.    Output of this feature: 1) Two new sets of schemas (foxml and mets, xsd and schematron for each)   - Each schema, where it makes sense, should NOT allow the use of disseminators.   - Where possible, a schema version number should be asserted in the FOXML (or METS?) itself.  This is to support out-of-context use of METS or FOXML files (where looking at the instance indicates what version of the format they are in)  TBD",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-135,default disseminator policy no longer required,The default repository policy named deny-inactive-or-deleted-disseminations-if-not-administrator.xml is no longer needed with CMDA so needs to be removed from default policy set,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-137,HTTP Upload endpoint not formally part of API-M Lite,"The upload servlet management/upload is functionally part of API-M Lite, but it is not documented as such.  The fix to this bug should ensure it gets documented in the WSDL as well as any human-readable docs that talk about API-M Lite in src/userdocs.    It should also ensure that appropriate TestHTTPStatusCodes tests exist (and pass) to exercise AuthN, AuthZ, and request success/failure conditions.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-138,Fedora Auditing Schema update,"The fedora auditing schema (fedora-auditing.xsd) does not reflect the actual structure used to read/write audit information in foxml/mets.  It needs to be updated to reflect this structure, and uploaded to the appropriate endpoint on the website.  Here is the actual structure used for audit information:  (auditTrail)   [1 or more records] (/auditTrail)  (record [optional ID=""string])   (process type=""string""/)   (action)string(/action)   (componentID)string(/componentID)   (responsibility)string(/responsibility)   (date)dateTime(/date)   (justification)string(/justification) (/record)  The schema is currently published at the following endpoint:  http://www.fedora.info/definitions/1/0/fedora-auditing.xsd",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-139,METS Deserializer: evaluate use of RELS-INT,The METS deserializer automatically creates a RELS-INT datastream and puts association information about AMDIDs and DMDIDs within it.    Is this what we want long-term?  Does the actual use of RELS-INT here agree with our imagined use of it (if any) in the future?  Resolving this issue should result in either:  a) changing the way this is done for the METS deserializer (losing the information?)  b) documenting this reserved use of RELS-INT somewhere outside the code.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-140,Constants for namespace/schema uris/locs (server and client),"This was noticed when working with working on METS/FOXML versioning for 3.0 -- there are a lot of hardcoded namespace and schemaLocation constants, particularly in the serializer/deserializers.  These should be declared in and used from common constants instead of being declared/used in each individual class that uses them.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-141,Removed unused namespaces from demo/test objects,"This was noticed while working on FOXML/METS version updates.  There are a lot of uses of namespaces (especially declared at the root) which are just not used in the instance documents.  Removing these namespace declarations will simplify the demos/examples/code, and make things more coherent for users.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-142,Implement search-and-bind style LDAP authn,"This was requested by multiple users as a more flexible way to allow LDAP authentication.  For details, see:  http://sourceforge.net/mailarchive/message.php?msg_id=46083EEA.2040004%40georgetown.edu  Hello all,  This is my first post to the list, so by way of introduction: At Georgetown University, we are just beginning to do a Fedora pilot project, so we're newbies in that arena. But we do have extensive experience in various aspects of AAA middleware, including LDAP. I and another Georgetown staff member are also on the Shibboleth core development team (he is in fact the Shibboleth Java project lead). Over the next few months we might be interested in contributing to Fedora in those areas (via expertise and/or code) if there is a need and a desire for that.   I had previously sent some questions over on the users list regarding the new LDAP auth filter that shipped with v2.2. I understand from Richard Green that there was a patch to the 2.2 version, documented here:  http://www.fedora.info/wiki/index.php/Authenticating_Fedora_2.2_against_LDAP  The patch however has subsequently been found to have other bugs and so the LDAP code is currently being rewritten. That being the case, I wanted to offer a comment/suggestion on how the LDAP auth is configured and attempted. Apologies if this has already been discussed.  I haven't seen the patch, so I can only infer what the patch might be doing based on the LDAP auth wiki topic, but the main observation that I have is that: the original code does not support (and the patch does not appear to support) the standard ""search-and-bind"" style of doing LDAP auth. The style apparently supported in the patch by that new init-param 'bind-filter' (which I would point out isn't really a filter, BTW...) using a DN substitution pattern works for many people in many environments (it does in fact work for our current LDAP environment here at GU), but it makes 2 critical assumptions that don't hold for everyone:  1) Assumes that users exist in a single OU/container in the directory - Many people have LDAP designs which put users in multiple OU's/containers. You could mitigate that by having instead a list of DN substitution patterns to try, but that's a little inefficient.  2) Assumes that the ""username"" is part of the LDAP DN - This isn't always the case. Some people use a unique, opaque identifier to construct the DN, based on a GUID or a Person Registry ID or something else that's unique and persistent. Others use other attributes of the user to construct the last RDN component in the DN, for example Active Directory by default does something like 'CN=""Brent Putman"", CN=Users, DC=domain, DC=org' (or at least used to, I'm not an MS expert).   So the search-and-bind style of LDAP auth is the the only technique (that I know of at least) that works for all environments and LDAP designs. This is supported in and AFAIK is in fact the primary way that people do LDAP auth in well-known software projects such as Apache httpd, Apache Tomcat (via the JNDI Realm, although that supports both bind styles) and most others that I've had occasion to work with. If that gives you the warm fuzzies. :-)  In short, that style of auth is: 1) bind to the directory, either anonymously or with a privileged DN (depending on whether the users to be authenticated are publicly visible and searchable within the directory) 2) search for the user by constructing an LDAP search filter based on the supplied username, e.g. ""(uid=putmanb)"". 3) test user credentials by attempting to bind/rebind as the DN returned in step 2, using the password supplied by the user  So since the code is being rewritten anyway, I would ask that these comments be taken into account - it would make Fedora's LDAP capabilities available to a broader array of organizations. Time permitting (we're trying to get Shibboleth 2.0 out the door...), I might be able to help in getting this implemented and/or tested , etc.   Thanks, Brent",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-143,Remove fedora-auditing from build.,The fedora-auditing.xsd is not needing in the wsdl2java target in the build.xml. Also it need not be copied to the wsdl directory in the build area.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-144,Flush and close missing in FieldSearchServlet,See:  http://drama.ramp.org.au/cgi-bin/trac.cgi/wiki/FieldSearchServlet,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-145,default SSL certificate expired Oct 3; needs updating,"The current Fedora SSL certificate in distribution expired on Oct 3 2007. We should update this cert prior to 3.0 release.  We may also want to consider obtaining a ""trusted"" cert instead of the current self-signed certificate.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-146,No namespace for API-A lite responses,"Background: This bug appears to have existed since the inception of API-A Lite.  I discovered it while working on refactoring item 1814192 (Constants for namespace/schema uris/locs).  In API-A Lite, many of the XML responses are not namespace-qualified.  It appears the intent was to have all of these responses exist in the ""/definitions/1/0/api/access"" namespace, but the way the XML is written doesn't do that.  For example, objectProfile's root element is (non-namespace-qualified) ""objectProfile"", and contains the following namespace/xsd-related attributes: ""xmlns:xsi"", ""xsi:schemaLocation"".  What's missing is an xmlns attribute that declares the namespace of the current element (and children) to be ""http://www.fedora.info/definitions/1/0/access/""",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-147,API-A Lite XML inconsistencies,"I noticed several inconsistencies with API-A Lite responses while working on refactoring item 1814192 (Constants for namespace/schema uris/locs).  1) Object Profile has a dateTime attribute, but other API-A responses use the attribute ""asOfDateTime"".  2) Many responses have a baseURL attribute on the root (I'm not sure of the purpose of this), but Object Profile (for one) doesn't.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-148,Refactor AuthZ code and Policies for CMA and FOXML1.1,"For example, Authorization.enforceGetDissemination takes a ""dissState"" parameter.  It also uses the (now deprecated) Constants.DISSEMINATOR namespace.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-149,CMA On-line Error Description (Part 2),"Follow-on to [ 1797234 ] CMDA On-line Error Description (Part 1)  When an error condition is detected during on-line access operations, this feature MUST report conformance with the object's content model (if relevant to the error). The feature SHOULD be developed to enable extensibility and SHOULD reuse/share code with off-line validation features.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-150,Improve RDF prefix handling in admin gui RELS-EXT editor,"Since feature 1793977 was implemented, visual editing of RELS-EXT is now possible.  The treatment of RDF prefixes/namespaces is still fuzzy in this editor.  This feature is a placeholder for as-yet-unspecified changes to make the editing/entering of URIs vs. ""short"" names for URIs more clear.  Should there be a set of client-side stored prefixes?  Default prefixes?  How about display -- should full URIs be shown differently than ""aliased"" URIs?  This all needs to be specified.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-151,"Remove ""special"" datastream editing contraints from server","The server currently disallows edit of METHODMAP, DSINPUTSPEC and WSDL datastreams of BMechs/BDefs.  Now that we have CMDA we longer need this safety precaution.  Completion of this item:  MUST remove from the SERVER the current constraint that these datastreams cannot be edited.  See the fedora.server.management package.  SHOULD add a test to the TestAPIM suite that modifyDatastream requests to these special datastreams succeed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-152,Consistent use of Constants (catch-all),"Use fedora.common.Constants for public constants that don't clearly belong to a single interface or class.  We should also have more specific guidelines in this area as part of the coding standards.  Look into all classes, but here are some specific ones to investigate: fedora.server.storage.types.Datastream fedora.server.storage.types.DigitalObject",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-153,Consider using enums for Constants,"Java enums provide a clean mechanism for defining sets of typesafe constants.  Within fedora.common.Constants, an obvious place to consider using them are for the RDF/XML/Policy namespaces.  Are there other areas in fedora.common.Constants where they could be used to good effect?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-154,GSearch: Adding parameters to indexing,"GSearch: Adding parameters to indexing, requested by FIZ Karlsruhe (Matthias Razum and Michael Hoppe) for the eSciDoc project.  Proposed solution:  Add params to indexing in format:  ...&indexDocXslt=[xslt-name][(paramname1=value1[,paramname2=value2[,...]])]  Use the parameters at indexing time by putting xsl:param statement in the indexing xslt stylesheet, like this:  <xsl:param name=""someparamname"" select=""defaultvalue""/>  This was implemented in June 2007 and delivered to FIZ. It was satisfactory.  The feature shall be included in next GSearch version.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-155,GSearch: optimize options for Lucene indexing,"GSearch: optimize options for Lucene indexing, proposed by FIZ Karlsruhe (Matthias Razum and Michael Hoppe) for the eSciDoc project:   "" While testing our project we discovered another bottleneck of the fedoragsearch:  We have a test where we create and index a lot of fedora-objects (about 1500) in a loop. After creation of each object, we index it right away, calling the fedoragsearch, then we create the next item. The more items we created the slower the system became. We discussed that and thought, this might happen because of the optimization of the index every time we index a single object.   So what we did was that we changed the code in the OperationsImpl-class so the index only gets optimized each 1000ths object. Running the test again, we saw that the system became much faster.  Maybe the fedoragsearch should have a configuration so we could choose if the index has to get optimized after each indexing of a single item. Additionally to this there could be a call 'optimizeIndex' to the fedoragsearch. """,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-156,GSearch: solve the truncated special characters problem,"GSearch: solve the truncated special characters problem. Proposed by Leire Urcelay:  "" When doing a search, the fields having field.lenght > fieldMaxLength are truncated using getBestFragments method.   If the field contains some special characters, like &apos;, it can happen that this special character is cut.  For example, the field    Il est donc int  ressant de se pencher sur l'acquisition    is transformed into    Il est donc int  ressant de se pencher sur l &apos ...    .  This transformation should produce an error during the XSLT transformation. Currently, this is not the case, since there is a strange transformation in the code. In fact, all    &    characters are transformed in    #    character.   You can see it in the method executeQuery of the class Statement.java:        snippets = highlighter.getBestFragments(tokenStream, f.stringValue(), snippetsMax, "" ... "");       snippets = snippets.replace('&', '#');   Due to this character replacement, there is not any error in the xsl transformation, but however, there is a problem when displaying the result. Instead of getting:     Il est donc int  ressant de se pencher sur l    ...      The following is displayed:      Il est donc int  ressant de se pencher sur l #apos ...    ""  The current solution with '#' was a tradeoff. A more satisfactory solution should be included in the next version of GSearch.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-157,GSearch: add untokenizedFields property,"GSearch: add untokenizedFields property to lucene index.properties files.  Currently, the untokenizedFields property is created at initialization time, based on 10 index documents, and used at query time to select analyzer. Adding the property with a list of all untokenized fields will ensure that they all select the appropriate analyzer. Proposed by Leire Urcelay.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-158,Support for Mulgara in 3.0,Update the ResourceIndex to support Mulgara.  The Resource Index currently supports a variety of triplestores via Trippi. Update Trippi (and thereby Fedora) to support Mulgara.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-159,Allow ingest/export of old version formats,"Now that the FOXML and ""Fedora METS Extension"" formats have been versioned to 1.1, the server allows ingest and export of only the new formats.  The 1.0 serializers/deserializers still exist...they're just not configured in the base-fedora.fcfg.  The first part of this item is just to enable them.  Add the necessary sections to the base fedora.fcfg (use the new URIs for the old formats instead of the old strings), and make sure we have at least one ingest/export system test for each of the old formats.  The second part of this item is to make the client aware of the fact that the server can handle the old formats.  WARNINGS: Even with the above changes, old-style disseminators will be *lost* on ingest.  Users should somehow be made aware of this (some combo of doc/server/client warnings)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-160,XSD dateTime inconsistency,"The Kowari and MPTStore backed Resource Index implementations vary in the way XSD dateTimes are returned: Kowari returns un-timezoned values and MPTStore returns timezoned values, i.e.: 2007-11-15T11:27:40.415 vs 2007-11-15T11:27:40.415Z.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-161,XSD dateTimes can have incorrect fractional seconds,"Per http://www.w3.org/TR/xmlschema-2/#dateTime-canonical-representation  ""The fractional second string, if present, must not end in '0'""  For example: 2006-11-18T12:22:10.010Z vs. 2006-11-18T12:22:10.01Z (the former is incorrect).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-162,Object-specific POLICY datastream ignored when using Oracle,"When running Fedora backed by Oracle, with XACML enforcement enabled, the POLICY datastream is ignored.  This behavior was discovered in Fedora 2.2.1, but exists in prior versions of Fedora as well.  CAUSE: The reason this occurs is twofold:  1) A query executed by FastDOReader.GetDatastream fails in Oracle because it includes a DISTINCT clause, but at least one of the column types (dsBind.dsLocation) is a CLOB.  And in Oracle, it is an error to issue a SELECT DISTINCT query involving a CLOB.  2) Although the above throws an exception, it is caught and ignored by PolicyFinderModule.getObjectPolicyFromObject.  This causes the remainder of the code to assume the POLICY datastream simply doesn't exist.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-163,GSearch: add custom URIResolver for basic auth and SSL,"GSearch: add custom URIResolver for basic auth and SSL, proposed by Ross Wayland:  "" I'm investigating using fedoragsearch to index additional(other than DC) metadata datastreams that are in the foxml object. The additional metadata datastreams are stored as Managed-content datastreams so I was planning to get at this content using the xslt document() function to retrieve the contents of these datastreams. e.g.  document('http://ross.lib.virginia.edu:8080/fedora/get/uva-lib:100/META')  This technique works just fine provided api-a is open. When api-a is using basic auth and/or SSL then the underlying URL looks like:  document('https://ross.lib.virginia.edu:8443/fedora/get/uva-lib:100/META')  This method does not work since apparently the default URIResolver of the xslt engine does not know how to deal with basic auth and/or SSL.  ""  It seems that the right approach is to write a custom URIResolver and let it be configurable, which URIResolver to use with the Transformer.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-164,GSearch: let highlight code be configurable.,"GSearch: let highlight code be configurable.  Ahmed Abdeen: ""Snippets: We probably all agree that it is desirable to highlight searchterms in display of a search result. Specifying a value > 0 in the gFindObjects' ""snippetsMax"" parameter is intended to make this happen. In particular, use of this parameter causes gsearch to surround search terms in all DC metdata with <span class-""highlight""> tags (and highlighting can then be enabled by defining a CSS class to apply desired formatting). This is problematic insofar as introduction of unescaped XML tags into the data changes the XML structure and therefore how the data can be handled by XSLT."" ... ""our metadata includes the usual XML escaped characters, including such characters used for formatting tags : for example, ""<em>emphasized text</em>"" is encoded in the DC metdata as ""<em>ehphasized text</em>"". To display these appropriately in a web context, the string must be processed with output escaping disabled .... When you have a string such as this:     <field name=""dc.description"" >This is some <span class=""highlight"">emphasized</span> <em>text</em> in a sentence.< /field >  You have to use xsl:copy-of to appropriately output the <span> tags     but you cannot disable output escaping to have the escaped <em> tags display properly. Ugh.""  The solution seems to be to make the surrounding highlight code be configurable.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-165,GSearch: add a sortFields parameter to gfindObjects,"GSearch: add a sortFields parameter to gfindObjects.  Robert Waltz: ""I am curious as to the best manner to include lucene sorting in the lucene implementation of gsearch."" ... ""I have a requirement to allow the user to select from a list of fields to sort by. So, I will need to pass the field to sort by via the query string in a REST call.""  There is one statement in fgslucene.Statement.java that should be modified for sorting, namely    Hits hits = searcher.search(query);  where an additional Sort parameter may be given.   The solutions seems to be to add a sortFields parameter to gfindObjects.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-166,improper handling of default namespace in batchModify,"Use of the default xml namespace in in-line XML content that is processed by the batchModify utility can result in xml that is not well formed. An example of in-line xml that uses the default namespace is:  <fbm:modifyDatastream  pid=""demo:999""  dsControlGroupType  =""X"" dsID=""RECORD-XML"" logMessage=""Jira DRINGEST-50""> <fbm:xmlData>  <election_record xmlns=""http://dca.tufts.edu/aas""  xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" label=""Missouri 1824 Election Returns for Congress"" type=""General"" iteration=""First Ballot"" date=""1824"" election_id=""MS115.002.MO.1824.00002"" xsi:schemaLocation=""http://dca.tufts.edu/aas http://dca.tufts.edu/schema/aas/electionRecord.xsd""> ...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-167,Refactor of BatchModifyParser,BatchModifyParser was modeled after an earlier version of METSDODeserializer parser which has since been updated and streamlined. BatchModifyParser does not currently reflect these same updates.  It is desirable to update BatchModifyParser to reflect similar changes made to other parsers in regards to handling of in-line xml content and namespace handling for consistency.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-168,Incorrect protocol/port in DefaultExternalContentManager,"To reproduce this problem, configure your server so that basicAuth is enabled for API-A, but SSL is disabled. Hostname must be something other than ""localhost"". Load the demo objects and attempt to disseminate the getPDF method for demo:26  http://hostname:8080/fedora/get/demo:26/demo:19/getPDF  Instead of seeing the transformed pdf document, you will get a blank web page and the fedora error log will report that DefaultExternalContentManager is unable to resolve the URL:  https://hostname:8443/fedora/get/demo:26/demo:22/getFO  DefaultExternalContentManager is incorrectly setting the protocol/port for the internal fedora call that is generated by the dissemination request. Since SSL is disabled for API-A, it should instead be using:  http://hostname:8080/fedora/get/demo:26/demo:22/getFO",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-169,"""File too large"" Exception from Fedora when getting > 2GB DS","While it is no problem to store a 2 GB file in Fedora it seems to be impossible to get that file back from Fedora.  After digging into the source code I found a check for a maximum file size in  fedora.server.storage.lowlevel.GenericFileSystem line 170:  if (lFileLength > Integer.MAX_VALUE) {     throw new LowlevelStorageException(true, ""file "" + getPath(file) + ""too large for reading""); }  What is the reason behind that check? Could the check be removed?  In my tests I could successfully retrieve a 2 GB file after commenting out the above code.  Thanks for your help!  Best regards,  Andr  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-170,Incorrect handling of dates before 1CE,"RelsExtValidator and DateUtility fail to validate/parse date strings before 1CE (e.g. ""-0001-01-01T00:00:00"").",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-171,RelsExtValidator rejects valid UTC dateTimes,"RelsExtValidator rejects UTC dateTimes that do not have milliseconds to 3 significant digits.  For example, ""1970-01-01T00:00:00Z"", which is the correct canonical lexical representation of the epoch, is rejected by RelsExtValidator.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-172,FieldSearch not releasing connection w/one result,"When a FieldSearch query results in exactly one row, the connection is not released right away as it should be.  This can cause the connection pool to become exhausted.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-173,Remove obsolete/deprecated API-M methods,"ingestObject was supposedly deprecated since 2.2 (perhaps earlier, but I don't recall) in favor of ingest.  If it's going to be dropped, dropping it for 3.0b2 or final seems appropriate.  Also, the Management interface still defines adminPing, which doesn't exist in the API-M WSDL. This seems like another candidate for removal unless there's a reason for the inconsistency.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-174,Shorten XACML example policy paths/filenames,"The example XACML policies in src/xacml-policies use extremely verbose directory and filenames.  Very long paths (>254 chars) in the source tree should be avoided because they can cause subversion checkouts to fail in Windows.  They can also cause Fedora installations to fail if FEDORA_HOME is a modestly-deep directory.  These paths can be shortened significantly by removing repetition and abbreviating where it makes sense.  In a local test, I was able to reduce the longest path by 78 characters.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-175,Installer fails if FEDORA_HOME contains a space,"On Windows, the installer fails if FEDORA_HOME contains a space, e.g. FEDORA_HOME=C:\Program Files\fedora",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-176,Lockup after frequent dissemination requests,"When making many back-to-back requests for the same dissemination, the Fedora server becomes unresponsive to similar dissemination requests.  When this state is reached, the server does not recover until it is restarted.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-177,Dissemination problems in objects with POLICY datastreams,"Under 2.2.x, there is a policy in the set of default repo-wide policies named  deny-policy-management-if-not-administrator.xml that restricts all access to the POLICY datastream unless you have fedoraRole=administrator. This attribute is only available if basciAuth is enabled. This is always the case for API-M so administrator can always access POLICY datastream through API-M. For API-A, the POLICY datastream cannot be accessed unless basicAuth is enabled for API-A and user has fedoraRole=administrator.  Under 3.0b1, we seem to have introduced some new dependency on the POLICY datastream with regard to disseminations so that if an object contains a POLICY datastream, this causes an AuthZException to be consistently thrown when attempting any getDisseminations. Removing the deny-policy-management-if-not-administrator.xml repo-wide policy or removing the POLICY datastream from the data object eliminates the problem, but this is a bug we need to run down before 3.0final release.  I believe this bug is related to how DefaultAccess.GetCMDADisseminationBindingInfo populates the dissBindingInfo data structure. Under 2.2.x, dissBindingInfo used a dbms join to select only those datastreams that were needed to fulfill the dissemination request. It appears that under 3.0b1, all datastreams in the object are being included in the dissBindingInfo data structure. Current logic in DisseminationService applies the policy constraint of ""enforce_Internal_DSState"" to each datastream found in dissBindingInfo. If an object happens to have a POLICY datastream, access to this datastream is denied unless the requesting user has fedoraRole=administrator. This will never happen when basicAuth is disabled for API-A. If basicAuth is enabled for API-A, access to the POLICY datastream is only allowed for fedoraRole=administrator, but this is still not the desired behavior. The result is that the initial dissemination request is denied because the requesting user does not have access to the POLICY datastream which is really irrelevant to the dissemination request. The fix seems to be either to filter the datastreams that are populated in dissBindingInfo to only include those datastreams that are needed in dissemination request or change logic in DisseminationService so policy constraint of ""enforce_Internal_DSState"" is only applied to those datastreams that are needed in dissemination request.  You can quickly test this in 3.0b1 by adding a POLICY datastream that permits-to-all(see attached) to one of the demo objects with disseminators. Attempts to run any disseminations on that object will result in AuthZExceptions. Remove the POLICY datastream and the disseminations will work. Note this is only an issue with getDissemination;  getDatastreamDissemination uses different logic and is unaffected.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-178,disseminator policy attributes need review,vocabulary.txt which lists the available xacml policy attributes still includes attributes related to disseminators which are deprecated in 3.0b1  urn:fedora:names:fedora:2.1:resource:disseminator:id http://www.w3.org/2001/XMLSchema#string urn:fedora:names:fedora:2.1:resource:disseminator:state http://www.w3.org/2001/XMLSchema#string urn:fedora:names:fedora:2.1:resource:disseminator:method http://www.w3.org/2001/XMLSchema#string urn:fedora:names:fedora:2.1:resource:disseminator:asOfDateTime http://www.w3.org/2001/XMLSchema#dateTime urn:fedora:names:fedora:2.1:resource:disseminator:newState http://www.w3.org/2001/XMLSchema#string  XACML-related code needs to be reviewed and these attributes either removed or flagged as deprecated since disseminators are no longer a formal construct in 3.0b1.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-179,mail.jar is missing from 3.0B1.  Causes REST uploads to fail,"One jar file from the REST branch didn't make it into the (3.0B1) trunk.  Without this jar, multipart/mime posts (uploading binary files) fails.  Also, I looked in junit.fedora.test.api.TestRESTAPI.java and found that the testAddDatastream() method only attempts to create an ""X"" datastream by posting some XML.  It doesn't attempt to create an ""M"" datastream by uploading a file.   That's how this error slipped under our radar.  The test method should create both an ""X"" datastream and an ""M"" datastream.  The missing jar file (in SVN Browse):  http://fedora-commons.svn.sourceforge.net/viewvc/fedora-commons/fedora-rest/trunk/lib/jersey/mail.jar",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-180,AuthN servlet filters as standalone project,"Create a separate project, fc-authn, to house the current AuthN servlet filters so they can be easily re-used by other projects.  This new project should have it's own build.xml, and fedora/trunk should be updated to use it as a dependency.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-181,Problem with utf-8 characters in datastream,"Hello all  My name is John and at my company we are using Fedora 2.2.1  I have found a problem with utf-8 xml datastreams, only when the size is larger than 4K. Some times every 4K block, a utf-8 character is destroyed and shows as 2 other characters. I searched the source code and I found a wrong implementation for converting InputStream to StringBuffer. The class fedora.server.storage.translation.FOXMLDOSerializer has the method appendXMLStream. This method first reads 4096 bytes from the InputStream and then encodes them to utf-8. This is wrong, because some times the first byte of a utf-8 character is the last byte of the buffer and the second byte is the first byte of the next buffer. The right method to read the InputStream, is first to use a InputStreamReader (that encodes the InputSream to utf-8) and then to fill the buffer. I have modify that method like this:      private void appendXMLStream(InputStream in, StringBuffer buf, String encoding)             throws ObjectIntegrityException, UnsupportedEncodingException,             StreamIOException {         if (in==null) {             throw new ObjectIntegrityException(""Object's inline xml ""                     + ""stream cannot be null."");         }         try {             InputStreamReader inReader = new InputStreamReader(in, Charset.forName(encoding));             int bufSize = 4096;             char charBuf[] = new char[bufSize];             int len;             while ( ( len = inReader.read(charBuf, 0, bufSize) ) != -1 ) {                 buf.append(charBuf, 0, len);             }         } catch (UnsupportedEncodingException uee) {             throw uee;         } catch (IOException ioe) {             throw new StreamIOException(""Error reading from inline xml datastream."");         } finally {             try {                 in.close();             } catch (IOException closeProb) {                 throw new StreamIOException(""Error closing read stream."");             }         }     }  I hope this fix to be useful to non-latin users of fedora.  Cheers John",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-182,Improved HTTP 1.1 support (Content-Length and Content-Range),"Purpose: For chunked downloading and better support of various HTTP1.1-savvy utilities and services (including WebDAV clients, httpfs, etc..)  Description: Fedora should provide Content-Length in GET and HEAD response headers when this information is easily available.  When practical, the Content-Range header (partial read) on GET request should also be supported.  Details: Support of both should be possible for any Fedora HTTP request that maps to exactly one Inline or Managed datastream in the repository.  This includes:  1) getDatastreamDissemination 2) getDissemination (where the input maps directly to an X or M datastream and does not go through a service)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-438,Improved HTTP 1.1 support  (ETag/Last-Modified),"Purpose: To support various caching http clients and utilities, such as Squid.  Ultimately, to improve performance.  Description:  ETags (opaque) and Last-Modified (a date) both effectively provide a ""state indicator"" to caches (such as those in sophisticated web clients and proxy servers).  When one or both of these pieces of information are provided in HTTP HEAD responses, a full GET request can be avoided if the signature hasn't changed.  Used properly, these indicators can dramatically improve overall web application performance.  Details: For inline and managed datastreams, the last modified date is known, so the state indicator can be provided for both getDatastreamDissemination and getDissemination (where the input is one of these kinds of datastreams and it doesn't pass through a service).  For providing the state indicator on other disseminations, a naive approach is to use the object's last modified date, but this needs to be considered carefully.  For example, in the case where a dissemination goes through a remote service, even if the inputs are known to have not changed since last time, Fedora can't know if the dissemination output has changed because the service's underlying processing may have.    One way forward in this case is to provide a way to mark the bound service operations as volatile (in which case the state indicator would never be given) and non-volatile with an associated date (in which case the combination of the dates of the datastream inputs and the service would be used to derive the state indicator).  However, in the case where any of the datastream inputs are volatile, the state indicator could not be given.  For E and R datastreams, the default assumption could be ""volatile"".  But it would be nice to have the ability to mark either as non-volatile, so the date could be used as a state indicator.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-448,Oracle DDLConverter: Create non-primary-key indexes,"The OracleDDLConverter doesn't automatically create indexes for non-primary-key fields that are defined to require an ""index"" in dbspec.  Currently, this includes the following:   - doFields (on pid)   - dcDates (on pid)  Workaround:   After first startup, create these indexes manually using Oracle management tools.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-185,Proai: Not inferring existence of superset from setSpec,"The Proai update cycle currently fails when it encounters a record with a setSpec like ""1:a"", but only the ""1:a"" set exists in the database (the inferred superset, ""1"" does not).  This can occur if the set information for ""1""  is not provided by the OAIDriver at set update time.  When doing an update of set information in the database, Proai should go through all setSpecs and make sure that all possible inferred supersets exist. in the database.  If they don't, it should add the appropriate entry to the rcSets table.  The set name in this case can just be the setSpec string.  When this occurs, a warning should also be logged noting the lack of the set info object for the inferred superset.  (seeUpdater.java#updateSets(Connection))  This work can be done on the Proai trunk.  When finished, the updated lib should be committed to the services/oaiprovider/trunk/lib.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-186,tutorial2: bedf/bmech example not working,"hi, i tried to follow the tutorial 2 example 3 to use bDef/bMech and datastreams. ingesting both bDef and bMech went well (no visible errors at least), even creating the object. but after that i tried to access the ""disseminated"" object by browsing http://localhost:8082/fedora/get/demo:300/demo:ex3bDef/getContent/ which means going to  http://localhost:8082/fedora/get/demo:300 clicking  ""View the Dissemination Index for this Object"" and then in the table of disseminators ""Run"" for demo:ex3bDef  | getContent  all i got was a blank page and a lengthy stacktrace in catalina.out:  fedora.server.errors.servletExceptionExtensions.InternalError500Exception:         at fedora.server.access.FedoraAccessServlet.doGet(FedoraAccessServlet.java:486)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)         at fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:190)         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:186)         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)         at fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:190)         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:186)         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)         at fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:190)         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:186)         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)         at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)         at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)         at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)         at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)         at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)         at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)         at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)         at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)         at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)         at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)         at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)         at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)         at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)         at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)         at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)         at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)         at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)         at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)         at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)         at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)         at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:705)         at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)         at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)         at java.lang.Thread.run(Thread.java:595)   looking in the code did not really help.  the tutorial is version 10/25/2005, fedora is 2.2.1 used with postgres 8.2 on linux.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-187,CMA: Should/Does FieldSearch still index BMech/BDef info?,"With the changes made for CMA, should FIeldSearch still index bmech and bdef info for each object? Up to this point, it has always held a (repeating) field for each data object, indicating which bdefs and bmechs it was bound to.  1) Is it necessary to keep doing this? 2) If yes, what changes must be made in FieldSearch to do it, if any?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-188,Remove backendSecurity,"Remove the backendSecurity servlet. It should not be used, so having it available is unnecessary.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-189,Update code/tests for Journaling for 3.0,"Fedora 3.0 (trunk) has added add/purgeRelationship methods to API-M.  We need to verify that these actions are journaled/replayable and appropriate tests exist in the journaling code for them.  Also, if there have been any local nsdl changes since the 2.2.1 release, we need to apply those to 3.0 and/or maintenance-2.2, as appropriate.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-190,Inline XML Canonicalization (c14n) for SIZE and CHECKSUM,"The current pseudo-canonicalization of inline XML (for checksum computation) is non-standard.  The w3c has published c14n which defines a canonicalization, and Fedora should use this for:  1) Computation of the checksum 2) Computation of the SIZE attribute   This behavior should also be documented in the system docs.  Note that this also applies to METS.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-191,Improve MultiValueMap class design,"Store attributes internally in a Map<String, String[]>, thus removing a whole lot of conditional logic and behavioral inconsistency.  Create separate methods for set(String, String) and set(String, String[]) instead of accepting either in set(String, Object).  Modify getString(String) so it will return the single value (if any) that was stored under that key. If strict upward compatibility is required, it could throw a ClassCastException if more than one value is stored. More likely, it would be acceptable to either return the first such value, or to throw an IllegalStateException.  Modify method signatures to throw specific exceptions (NullPointerException, IllegalArgumentException, etc.) instead of bare Exception.  Genericize method signatures and internal variables.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-192,Incorrect behaviour when exception thrown during download,"I ingested a 3Gb file into Fedora via Fez. The file ingested into Fedora successfully, however Fedora throws an exception when attempting to fetch the file via HTTP (I believed it's an OutOfMemoryException, but I could be mistaken).  What I would have expected to happen in an exception situation would be an HTTP 500 status returned, however instead of this Fedora returns a 0 byte file with the same name of the requested file.  This then has a flow-on effect for front-end tools such as Fez which proceed to run other software over the file (such as JHOVE) and therefore reports the file size as 0 bytes.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-193,"If journals arrive out of sequence, keep polling","Current behavior is to check the journal file with the earliest timestamp - if that has the wrong repository hash, complain and give up.  New behavior would be the same check, and the same complaint on wrong repository hash, but don't give up, continue polling as before. That way, if the journal files merely arrived in the wrong sequence, the recovery would continue when the correct file arrived.  This use case applies when the journal files are being copied in bulk from one location to another. Currently, it is necessary to stop the follower while moving the files, in order to prevent this scenario.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-194,Close RMI connection after each journal file,"Currently RmiTransportWriter opens a connection to the RmiJournalReceiver at startup, and keeps the connection open until shutdown. This means that the receiver must not be shut down, and the network transport must not be interrupted, even if the leading Fedora instance is quiescent.  New behavior would be: 1) RmiTransportWriter opens the connection to RmiJournalReceiver at startup, to test the connection, and then immediately closes the connection. 2) At the beginning of each Journal file, a new connection is established. 3) At the end of each Journal file, the connection is closed.  This would allow system maintenance in quiescent times. It would also allow a non-crucial RMI transport to resume operation after losing one or more files, without restarting the leading Fedora.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-437,usage of HTTP proxy when getting external content,"Trying to ingest an object into Fedora fails if the document contains a reference to an external resource and the Fedora server is only allowed to access that resource via a HTTP proxy.  My first idea to solve this was to set the environment variable CATALINA_OPTS to something like  CATALINA_OPTS=""-Dhttp.proxyHost=proxy.fiz-karlsruhe.de -Dhttp.proxyPort=8888""  and restart Tomcat.  Unfortunately this isn't sufficient because the HTTPClient module which Fedora uses doesn't read that properties automatically.  So the next step was to set the proxy parameters into the HTTPClient in WebClient.java just after a new instance of the HTTPClient was created (see attached file).  That's all. Maybe someone else has the same problem.  Best regards,  Andr  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-196,"Provide a CMODEL and SDEF, Content Models + a Default CModel",Provide a reference implementation of a content model for the reference implementation of the Fedora content modeling language.  The primary purpose is to create a service definition for all content model objects that includes a uniform operation that disseminates the content model document.  Note that this defines a URI for disseminating the content model not the form of the content model.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-197,Provide a CMODEL and SDEF for SDEFs,Provide a reference implementation of a content model for the reference implementation of the Fedora content modeling language. The primary purpose is to create a service definition for all service definition objects that includes a uniform operation that disseminates the service definition document. Note that this defines a URI for disseminating the service definition not the form of the service definition.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-198,Refactor cross-cutting tasks using AOP,"Aspect Oriented Programming is a useful paradigm for implementing services which cross-cut business logic, such as logging, messaging, or authorization. Consider implementing one of these as a proof-of-concept for AOP within Fedora. The likely AOP implementation is Spring, but AspectJ is also an option.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-199,Update MPTStore jar in dependent projects,"Use latest MPTStore jar file in trippi, oaiprovider (trunk & maint.)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-200,RI rebuilder fails sporadically with Mulgara,"Rebuilder throws an exception at the end of running an RI rebuild, resulting in a corrupt/incomplete index when configured to use Mulgara store.  Seems to be >50% failure rate on a repository of about 4000 objects.  This issue does not seem to be present with an MPTStore-backed RI.     Originally reported by Rozita Fridman: http://sourceforge.net/mailarchive/forum.php?thread_name=561B608813F3E7448D792A51EF2AB03E01C5C5CF%40EXCLUSTER.fiz-karlsruhe.de&forum_name=fedora-commons-developers",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-201,DOReader currently being used to *modify* DO,"The DOReader.java interface is ""for reading Fedora digital objects"" according to the javadoc comment.  However, it is being used to *modify* objects. See for example line 852 of DefaultManagement.java, which is:  w.getAuditRecords().add(audit);  I believe this is a violation of the DOReader contract.  A solution would be for SimpleDOReader.getAuditRecords() to return copies instead of the real objects (please note that it will have some impact on DefaultManagement.java at least).  As a temporary solution, at least it would be nice to explicitly write in DOReader's javadoc that it is not read-only.  Thanks, Keep up the good work, Nicolas.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-202,RELS-EXT's MIME type should be application/rdf+xml,"My understanding is that the RELS-EXT datastream contains RDF data.  The MIME type for RDF is application/rdf+xml as specified on http://www.w3.org/TR/rdf-syntax-grammar/#section-MIME-Type  So why does Fedora create RELS-EXT datastreams with the text/xml MIME type ?  I suggest using the application/rdf+xml MIME type for RELS-EXT datastreams. It would better describe the content.  Any comment appreciated :-) Keep up the good work, Nicolas Raoul.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-203,Add all RDF datastreams to triplestore,"Fedora objects contain RDF triples. These triples are added to the configured triplestore by the addAllDatastreamTriples method of BaseTripleGenerator.java  As of today, this method hard-codes ""RELS-EXT"" for addition to the triplestore.  Why not add all of the Fedora object's semantic information to the triplestore ?  I suggest modifying this method to add the triples contained by all datastreams that have the ""application/rdf+xml"" MIME type and the ""Internal XML Metadata"" control group.  If we develop a patch for this, will it be accepted into Fedora's trunk ?  Cheers, Nicolas Raoul.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-204,OAIProvider: MPTStore config requires aboutDissType,"When using the OAIProvider with MPTStore, if you don't specify an .aboutDissType for each format, the update cycle fails with the error: ""proai.error.RepositoryException: Could not parse metadata about dissemination type at fedora.services.oaiprovider.MPTQueryFactory.listRecords(MPTQueryFactory.java:185)""  The workaround is to specify a bogus .aboutDissType (an actual URI, but one that doesn't really map to anything meaningful).  The fix will need to be done for a 2.2-compatible maintenance release, and not to the trunk (because the issue doesn't exist in the trunk)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-205,Provide an Atom-based DO Serialization,"In addition to FOXML and METS, provide an Atom serialization of a Fedora Digital Object.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-206,log4j errors on startup and shutdown,"On startup:  log4j:WARN No appenders could be found for logger (org.apache.commons.digester.Digester). log4j:WARN Please initialize the log4j system properly.  On shutdown:  log4j:ERROR LogMananger.repositorySelector was null likely due to error in class reloading, using NOPLoggerRepository.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-207,Clean up deprecation warnings on junit tests,When compiling the JUnit tests on trunk there is a listing of deprecated methods which are called during tests. The tests should be updated to no longer use these deprecated methods.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-208,"Get rid of ConnectionWrapper, TableCreatingConnection, etc..","ConnectionWrapper only exists to support TableCreatingConnection, which only exists to support SQLUtility.createNonExistingTables().  If this hung together differently (TBD), it could simplify the both the code and build.xml, which currently employs a replace just prior to compilation in order to support JDBC 3 + 4, depending on whether JDK 1.5 or 1.6 is being used to compile.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-209,Bundled Tomcat needs update,Reported on fedora-users:  Issue 29521: No destroy methods called on service shutdown   https://issues.apache.org/bugzilla/show_bug.cgi?id=29521  This is fixed in 5.0.29 and later. We should update the bundled Tomcat (5.0.28) to the latest (currently 5.0.30).,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-210,ExecUtility calls can fail if command has a space,"The installer will fail to set the executable bit if the path to FEDORA_HOME contains a space (only for non-Windows platforms).   The underlying problem is that we have various calls in various classes to various methods in ExecUtility which pass a command as String argument. ExecUtility should be modified to also take commands as a String array.  So rather than ExecUtility.exec(""ls -l /tmp""), you would use ExecUtility(new String[]{""ls"", ""-l"", ""/tmp""});  This bug is also present in trunk.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-211,ServiceMech/Def + relationship renaming + get rid of fType,"This includes: - Decide on relationship names (inverse/obverse) - Updating classes to use ServiceMech/ServiceDef  - Updating references to such classes, etc.. - Updating demo objects - Getting rid of ""fType""   What is the ""fType"" when RELS-EXT is not present?   A: The default content model.  It should be indexed this way.   This will ultimately be a configurable thing by the repository;    however for 3.0b2 we can define exactly one.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-212,Adding a datastream fails with RC=503,When I adds a big datastream (3.1 Gb) of type 'M' using the administrator utility shows the following error after some minutes:   (503) Service Temporarily Unavailable  Seems a problem due to a timeout. I tried to changed and recompiled the timeout values located in files APIxStubFactory.java and FedoraAPIxServiceLocator but this don't work.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-213,XSLT2 Support (Update Saxon),Provide XSLT2 support. This is essentially updating the very old Saxon 6.x library w/ Saxon 9,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-214,Export Objects as a ZIP Archive,"In addition to the various export contexts defined in DOTranslationUtility (INTERNAL, MIGRATE, PUBLIC, ARCHIVE), add support for a new export context (ZARCHIVE) that creates a ZIP archive of an object, with all inline and managed datastreams as individual files in the archive.  Use Atom as the initial, proof-of-concept, manifest format.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-215,Error validating checksum when adding/updating M datastreams,"This error was reported by Nishen Naidoo (nishen@melcoe.mq.edu.au). His original email and test code are included as attachments.  When calling addDatastream() or modifyDatastreamByReference() for a managed datastream, if valid checksumType and checksum parameters are included with the call the following error results:  ""fedora.server.errors.ValidationException: Checksum Mismatch: ExceptionReadingStream""  The reason for the exception is that the Datastream.computeChecksum() call attempts to get the content stream by reading it from LLStore (see DatastreamManagedContent.getContentStream()), but the datastream is not actually written to LLStore until the final commit.  The question this raises is: Which comes first, the commit or the checksum check? If the checksum check needs to happen first the content stream needs to be read earlier so that the checksum computation can happen. If the commit comes first, then the commit may need to be backed out if the checksum check fails.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-442,SCORM packages with Fedora,"Hello, I am a scolarship holder in Spain that have to learn some things about the Fedora repository. Specifically, the question is:   Is there a way to use SCORM packages with that repository? I've tried to import the XMLs generated by Reload Editor and it doesn't work. Will it be a feature in the upcoming versions?  Thanks for your time,  Mike",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-441,Define and index internal datastream relations ( RELS-INT ),"This idea has been stewing for quite some time.  However, it did not make the 3.0 cut in the interest of time.  People continue to ask for this, or something like it.  See Ben O'Steen's recent blog post  http://oxfordrepo.blogspot.com/2008/05/internal-object-relationships-in.html  This needs to be nailed down and implemented.  The basic idea is a datastream where relationships emanating from datastreams can be asserted in a Fedora-recognized way.  We talked at one time on the developer's list about the difference between RELS-INT and just relaxing RELS-EXT to allow for datastream assertions.  No formal decision was made on this.  That's where it stands.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-218,GSearch: configvalues misconfigures repository.properties,"When I run ""ant -f configvalues.xml configOnWebServer"" to configure the Lucene Demo, I get a repository.properties that has SOAPHOSTPORT as the hostname / portnumber, instead of localhost:8080.  Delving into the configvalues.xml file and comparing it against the repository.properties template, the problem seems to be that configvalues.xml is substituting the host/port string for FEDORASOAP instead of SOAPHOSTPORT. It is also trying to substitute the fedora user and password, but they are hardwired in the template.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-219,GSearch: shell scripts have DOS end-of-lines,"The scripts client/run{REST,SOAP}Client.sh in the fedoragsearch.war file have DOS end-of-lines. This gives /bin/sh major indigestion.  The same problem applies to the test shell scripts, and probably to others as well.  I expect that the root cause is that the files have incorrect (or missing) SVN properties.  Shell scripts should have ""svn:eol-style"" set to ""LF"" and ""svn:executable"" set to ""*"".  (Batch files should have ""svn:eol-style"" set to ""CRLF"")",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-220,GSearch: misconfigured XSLTs in demo config,"I found this problem in config/rest XSLTs for the ""demoOnLucene"" demo, but it may be more widespread.  After running the ant configuration process, the XSLTs in  the config/rest directory contains a demoCommon.xslt.  However, the other XSLTs in that directory still ""include"" the original version of demoCommon.xslt in the configDemoOnLucene/rest directory.  So if you try to tweak the config/rest/demoCommon.xslt file, it has no effect.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-221,GSearch: XSLT includes with relative URIs don't work,"... at least, they don't work for the config/rest/*.xslt files.  I think the root of the problem is in the GTransformer class.  It looks to me like most calls to getTransformer end up passing in a null URI resolver rather than a resolver that knows how to resolve relative URIs.  Whatever the reason, having to specify absolute pathnames   in xsl:include directives is messy and introduces unwanted deployment problems.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-222,Update and Repackage the Demo SOAP Client,The demo SOAP client (documented in src/java/fedora/soapclient) needs to be: 1) Updated in order to be current with the latest version of the server. 2) Repackaged so that it is distributed separately from the server.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-223,xml:lang attribute dropped from DC datastream,"As reported on the dev list, if a dc element in the DC datastream contains an xml:lang attribute (e.g. ""<dc:subject xml:lang=""da"">Tidsinterval</dc:subject>""), the xml:lang attribute is dropped during ingest.  Additionally, the xml:lang attribute is not dropped if the DC datastream is added via addDatastream.  This was reported against 3.0b1, but I believe this affects all versions of Fedora.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-224,API-A fails to unescape first colon in URL,"Reported by Ross against 3.0b1 Apr 2, 2008.  The problem also exists in maintenance-2.2.  Our library is overhauling our web site and web site tools and one of the new web page editor tools is called Contribute from Adobe. We ran into a problem where people were using Contribute to cut/paste citation URLs that were referencing Fedora dissemination requests. Contribute takes URLs that look like:  http://repo.lib.virginia.edu:18080/fedora/get/uva-lib:32653/uva-lib-bdef:100/getFullView  and properly escapes special characters like the colon so the URL is rewritten as:  http://repo.lib.virginia.edu:18080/fedora/get/uva-lib%3A32653/uva-lib-bdef%3A100/getFullView  Problem is, Fedora cannot handle the rewritten URL. The bug is in the request URL parsing section of FedoraAccessServlet where it is looking for a colon(:) character but fails to URLDecode the string before it does the lookup. The result is that %3A does not match colon(:) when parsing the bdef pid section of the URL so the conditional incorrectly fails.  There are two places in code where:                 if (URIArray[6].indexOf("":"") == -1) {  should instead be                  if (URLDecoder.decode(URIArray[6], ""UTF-8"").indexOf("":"") == -1) {",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-226,Inconsistent use of none vs. DISABLED for ds checksums,"The serializers/deserializers inconsistently use the strings ""none"" and ""DISABLED"" for checksum and checksumType on datastreams.  This can cause schema validity errors when ingesting in one format and exporting in another.  Fixing this issue should at a minimum consistently use these attributes in the code.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-249,Create a Wiki Version of the Fedora 2.2 Document Set,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-250,Create a Wiki Version of the Fedora 3.0 Document Set,Convert to using the Wiki as the living Fedora document set for 3.0 and subsequent releases.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-227,Concurrent mod exception when sending many uploads to server,"On Thu, Jul 10, 2008 at 5:37 AM, Antony Corfield [awc] <awc@aber.ac.uk> wrote: > Hi, I've been running some tests depositing zip files using SWORD. When I hit the server with 50 concurrent threads (unlikely in reality!) I get the following error in the fedora code. > > java.util.ConcurrentModificationException >        at java.util.Hashtable$Enumerator.next(Hashtable.java:1031) >        at fedora.server.management.DefaultManagement.putTempStream(DefaultManagement.java:1395) >        at fedora.server.management.UploadServlet.saveAndGetId(UploadServlet.java:149) >        at fedora.server.management.UploadServlet.doPost(UploadServlet.java:99) > > > Here's a simple patch (Fedora 3.0b1) for fedora.server.management.UploadServlet that fixes this problem. > Same problem in Fedora 2.2.1 and other versions I guess. > > > > > Index: C:/Users/awc/eclipse/fedora_release-3.0b1/src/java/fedora/server/management/UploadServlet.java > =================================================================== > --- C:/Users/awc/eclipse/fedora_release-3.0b1/src/java/fedora/server/management/UploadServlet.java      (revision 6592) > +++ C:/Users/awc/eclipse/fedora_release-3.0b1/src/java/fedora/server/management/UploadServlet.java      (working copy) > @@ -129,8 +129,10 @@ >     } > >     private String saveAndGetId(Context context, FilePart filePart) > -               throws ServerException, IOException { > -               return s_management.putTempStream(context, filePart.getInputStream()); > +               throws ServerException, IOException { > +       synchronized (s_management) { > +               return s_management.putTempStream(context, filePart.getInputStream()); > +       } >        }",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-228,Batch Modify Parser mangles some input XML,"When the batch modify parser encounters an inline xml datastream that looks like:  <a:element xmlns:a=""urn:example:a"">   <b:subelement xmlns:b=""urn:example:b"">   </b:subelement> </a:element>  ...the output it sends to Fedora is not well-formed.  In particular, the namespace declarations are moved to the root, but still present in the sub-elements, minus the attribute name, like so:  <a:element xmlns:a=""urn:example:a"" xmlns:b=""urn:example:b"">   <b:subelement =""urn:example:b"">   </b:subelement> </a:element>  Ideally, the output that the batch modify utility sends to Fedora should be exactly the XML that occurs within the xmlContent element.  This was originally reported by Deborah Kaplan at Tufts on May 27th, 2008.  It was thought to have been fixed by bugfix #1838750, but on July 11th, Deborah reported that wasn't the case and I verified.  A fix should ensure any well-formed inline XML, regardless of how namespaces are declared, arrives to Fedora in the same way it was given in the batch modify directives file -- without changing where namespaces are declared.  This bug needs to be fixed in trunk and maintenance-2.2, with appropriate tests.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-229,Improve Validator performance by cacheing Content Models,"As currently implemented, each call to RemoteObjectSource.getContentModelInfo() makes fresh network calls to the server. Since content models tend to be frequently re-used, it would be worth the effort to create a cache in RemoteObjectSource.  Execution time might well be reduced by 50% or more, depending on the structure of the repository.  Major question: how to guard against running out of memory? Can we simply assume that no repository will have more than 1 million content models, ergo the cache will use less than 1 gigabyte? Or perhaps we establish a maximum size and stop caching after that is reached? Is there an open source class that does LRU caching?  Since this seems to be useful for all sorts of ObjectSource, perhaps the best approach is to create a class: AbstractObjectSource implements ObjectSource",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-230,CMA disseminations ignore Service Definitions,"Executing a dissemination requires specifying an object, an SDef, and a method name.  In reality, the implementation ignores the SDef, and exposes all methods defined in the SDep, regardless of what the SDef says.  Thus, a user can execute methods defined in an SDep that are not part of the public interface of an object",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-231,Consistent use of ServerConfiguration,"Right now, there are at least a couple ways that fedora.fcfg is parsed.  When access to all of fedora.fcfg is needed, configuration should be consistently accessed via Server.getConfig instead of the various ways it's done now.  Consider also providing configuration to modules by passing in, or providing a ModuleConfiguration instance.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-232,DOTranslationUtility Contexts - use enum,"Use an enum for DOTranslationUtility's contexts instead of an in constant.  This could be a separate enum class, like TranslationContext, for example.  Note: Doing this will require trivial updates to a number of classes that use this constant, including the 2.x to 3.x migration utility.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-233,Use a single stream copy mechanism,"Right now there are two main ways to perform a stream copy in the codebase, FileUtils.copy() and StreamUtility.pipeStream(). Transition to using only FileUtils.copy() for these tasks.  Also, the input and output streams being copied should not be closed in the copy() method. The caller may have a need to write more data to the output stream, and may use a mark/reset to re-read the input stream. Close calls should be removed from FileUtil.copy() and all places where this method is called should be checked to make sure the streams are closed correctly.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-234,MIMETypedStream finalizer prematurely closes,"MIMETypedStream's finalizer always tries to close the InputStream.  In some cases, this can result in failed API-M operations due the stream being unexpectedly closed while it's being read().  This has been observed in higher load situations.  This is likely also an issue in the maintenance branch.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-235,Tomcat hangs on shutdown on Linux with GSearch,"When running Fedora on Linux with messaging and GSearch enabled and ActiveMQ running as an embedded service (the default configuration) the Tomcat process will hang on shutdown. The same error occurs on Windows, but the tomcat process does not hang.  The error below is seen in the tomcat log right after the shutdown script is executed:  INFO: Stopping service Catalina log4j:ERROR LogMananger.repositorySelector was null likely due to error in class reloading, using NOPLoggerRepository. ERROR 2008-07-23 17:52:12,022 ([/fedoragsearch]) Servlet UpdateListener threw unload() exception javax.servlet.ServletException: Servlet.destroy() for servlet UpdateListener threw exception   at org.apache.catalina.core.StandardWrapper.unload(StandardWrapper.java:1373)   at org.apache.catalina.core.StandardWrapper.stop(StandardWrapper.java:1688)   at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4350)   at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:893)   at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1180)   at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1151)   at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:313)   at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:120)   at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1055)   at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1067)   at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:448)   at org.apache.catalina.core.StandardService.stop(StandardService.java:510)   at org.apache.catalina.core.StandardServer.stop(StandardServer.java:734)   at org.apache.catalina.startup.Catalina.stop(Catalina.java:602)   at org.apache.catalina.startup.Catalina.start(Catalina.java:577)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   at java.lang.reflect.Method.invoke(Method.java:597)   at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)   at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433)",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-236,RI does not delete all triples,"Steps to reproduce: Ingest an object with an empty label. Purge the object. The Resource Index still contains a triple for the object with the empty label, e.g. <info:fedora/demo:test> <info:fedora/fedora-system:def/model#label> """"",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-237,Enabling journalling causes startup failure,"fedora.server.management.ManagementModule does not implement the ManagementDelegate interface.  Thus, specifying it as the management delegate causes an exception and aborts startup.    Also: documentation example uses fedora.server.management.DefaultManagement as the management delegate.  It seems to be obsolete for this purpose (as this class is now used directly by ManagementModule). Documentation should be updated.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-238,APIM.ingest() creates objects with wrong last modification,"I created fedora objects with multiple datastreams with a call of APIM.ingest() method of Fedora30. The creation date of all datastreams except uncustomized DC and AUDIT is later than  lastModifiedDate of the fedora object for each created FOXML.  Thanks a lot for your help, Rozita",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-239,OutOfMemory Errors when modifying large objects,"We frequently encounter OutOfMemoryErrors when calling modifyDatastreamByValue and other API-M methods on relatively large digital objects using Fedora Commons 3.0b1, 3.0b2 and 3.0. In order to better understand the issue we triggered heap dumps and analyzed them. The dumps revealed that up to 140M of heap space get used by Fedora when calling modifyDatastreamByValue on a digital object of 15M.  In order to provoke heap dumps at each api call the heap size was reduced. Additionally we triggered heap dumps at specific locations programmatically using the Java6 HotSpotDiagnosticMXBean.  The OutOfMemoryError always occurs at DOTranslationUtility.writeToStream() after the serialization. This appears to be the peak of heap usage for modifyDatastreamByValue. The heap dump shows the following composition of objects at the time of writeToStream() (see attached screenshot):  * StringBuffer (60M) (15M * 2 (internal UTF-16 representation)) + 30M memory allocated by StringBuffer (StringBuffer doubles its capacity automatically when unsufficient capacity is left for appending a new String. Hence the capacity is likely to exceed the actual memory needed unless explicitly allocated).  * char[] array at writeToStream (StringBuffer.toString()) (31M) (15M * 2 + overhead)  * BasicDigitalObject 24M (15M DatastreamXMLMetadata, 9M AuditRecord)  * DOReaderCache 25M (1 BasicDigitalObject in cache at the time)  * Some other small objects   If the heap space is already consumed to a large extent, allocating another chunk of memory may fail and subsequently trigger an OutOfMemoryError. Explicitly calling the garbage collector is not a viable option, because most of the objects involved are still bound locally to the thread, so they are still reachable.   Increasing the heap will solve the issue temporarily. Depending on the size of the digital object the problem may however resurface: Suppose the digital object is 30M, then according to our findings a heap space of 60M*2 StringBuffer + 60M char array + ~50M DO + ~50M cache = 280M would be needed for a single digital object (we haven't tried this however).  We modified the Fedora code and tried the following options: * We removed the indentation in the FOXMLDOSerializer and DOTranslationUtility. Removing most of the nonessential whitespaces (or replacing indentation whitespaces with tabs) results in a much smaller DO size (about 20% in our test case) and therefore reduces memory footprint.   * As for the StringBuffer problem we basically tried two approaches. We trimmed the StringBuffer in FOXMLDOSerializer before the call to writeToStream() using the trimToSize() method. This adjusts the capacity of the StringBuffer to the actual size of characters contained within. Another option is to explicitly size the buffer.   * The 64 bit version of Java consumes considerably more heap space compared to the 32 bit version. Using a 32 bit version reduces memory usage.   All options mentioned above work well and reduce memory consumption significantly, but solve the underlying problem only partially.  Perhaps a better solution would be to load and process only those parts of the digital object needed for the current operation (not viable for ingest, but e.g. modifyDatastreamByX), but that would probably involve lots of refactoring...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-240,PID not generated during object ingest using REST API,"Performing an ingest with object XML through the REST API does not generate a PID if one is not provided. A PID is only generated when no object content is included in the request. When object content is available, the PID is assumed to be included, which is not always the case.  Attempting to perform an ingest through the REST API with FOXML that does not specify the PID results in the error:  javax.ws.rs.WebApplicationException: fedora.server.errors.LowlevelStorageException: PID delimiter (:) is missing. PID delimiter (:) is missing. at fedora.server.rest.BaseRestResource.handleException(BaseRestResource.java:98) at fedora.server.rest.FedoraObjectResource.createObject(FedoraObjectResource.java:402)  This bug was originally reported by Rudi Stouffs.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-241,REST API is not challenging properly for authentication,"Bug reported by Matt Zumwalt:  Fedora isn't proffering an authentication challenge when I hit the REST API methods.  I had to point my browser at http://127.0.0.1:8080/fedora in order to authenticate my browser and then go back to http://127.0.0.1:8080/fedora/objects/demo:5/export    In the past, Fedora would challenge the browser whenever it attempted to perform a protected method without authenticating, and a failed authentication would return a 400 error.  What changed that it's returning a blank page now?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-242,Package (fedoraApia and fedoraApim) missing.,Package fedoraApia and fedoraApim are missing from the distribution on both 2.2.3 and 3 version. I'll be highly obliged if you kindly give me the download link of those package.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-243,Support Mulgara in 2.2.x,Update maintenance-2.2 branch to support Mulgara. Replace Kowari for Mulgara as in 3.0.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-244,fedora-admin: scroll needed,When a digital object has a lot of datastreams (eg. 500)  the Object form in fedora-admin app shows a lot of tabs  (one per datastream) without a scroll. In this case you  need to redim the window to see the work area.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-370,Fix bug 2037924:  Enabling journalling causes startup failure,"Presumably, just due to missing managementDelegate marker interface.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-245,Enable GSearch to start/stop properly,"Allow GSearch to start and stop properly when running in the same Tomcat server as Fedora. This involves making Server.properties available as there is currently an unmet runtime dependency there, as well as setting up a mechanism to handle GSearch starting prior to Fedora but still being able to connect to the message broker which is started by Fedora in the default configuration.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-246,Transactional Resource Index Updates,"Updates to the Resource Index should be made within the transaction boundary of the Fedora API operation.  Implementing this will likely entail direct use of the MPTStore and/or Mulgara libraries rather than going through Trippi, which hides transaction semantics.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-251,Allow DC datastream elements to include xml:lang attribute,"As reported in FCREPO-223, the xml:lang attribute is dropped from DC datastreams.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-252,Old admin client forward compatibility,"The admin gui currently checks the server version and disallows login if it's not in a list of ""known compatible"" versions.  It should warn instead, since it is often the case that old versions of the client will work with newer versions of the server.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-253,"Fix FCREPO-239, FCREPO-227, and FCREPO-252 for 3.1",Note: Work on these issues started before the migration to JIRA and are being worked on in dev-150445.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-254,Extend dissemination architecture to support datastream binding from multiple objects,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-423,DOS-style newlines in fedora-rebuild.sh,"Found installing Fedora-3.0.0:   1. commons-logging.jar not included in fop.jar, imagemanip.jar and saxon.jar but required by services   2. $FEDORA/server/bin/fedora-rebuild.sh has invalid end lines (DOS-style)  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-255,Fix FCREPO-239 and FCREPO-227 for 2.x,"This is a backport of the work done for FCREPO-253, for 2.x (except FCREPO-252, which was already done for 2.2.4)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-256,Fedora 3.1 Code Freeze,Fedora 3.1 Code Freeze,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-257,Fedora 3.1 Release,Fedora 3.1 Release,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-258,Write Fedora 3.1 Release Notes,Write Fedora 3.1 Release Notes,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-259,Update and Assemble Fedora 3.1 Documentation,Update and Assemble Fedora 3.1 Documentation,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-260,Fedora 2.2.4 Code Freeze,Fedora 2.2.4 Code Freeze,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-261,Fedora 2.2.4 Release,Fedora 2.2.4 Release,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-262,Write Fedora 2.2.4 Release Notes,Write Fedora 2.2.4 Release Notes,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-263,Update and Assemble Fedora Repository 2.2.4 Documentation,Update and Assemble Fedora Repository 2.2.4 Documentation,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-264,Fedora 2.2.4 Integration and Test,Fedora 2.2.4 Integration and Test,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-265,Fedora 3.1  Integration and Test,Fedora 3.1  Integration and Test,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-450,Update GSearch to use FOXML 1.1,GSearch currently uses FOXML 1.0 internally as the format for dealing with fedora objects. Update to use FOXML 1.1 instead.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-372,Update the 2.x Migration Utility for 3.1,"Due to changes in FCREPO-254, the migration utility needs to be updated.  The datastreams in the generated SDep objects need to be in the new formats.  See the changes in the demo objects in FCREPO-254 for details.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-373,Define and Implement the 3.0 to 3.1 upgrade process.,"The upgrade process for 3.1 to 3.2 needs to be defined.  Several changes make this a more complex change than the ""patch"" approach we have used in the past.  1) Due to FCREPO-254, the system-defined CModel for SDeps (in src/java/fedora/server/resources/) needs to be upgraded 2) The web.xml file may need to be modified as a result of FCREPO-241 3) The name of the fedora-client.jar file has changed.  How to do this requires some though.  For example, #2 and #3 might necessitate a re-install of Fedora, where people are advised to point the new installation to their old data (in the db, ri, and filesystem).  #1 will require some more thought.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-375,SPO queries do not correctly handle typed literals in query,"Queries in the SPO language do not seem to match typed literals correctly, regardless of triple store used (Mulgara,MPTStore)  A query such as this:  * <info:fedora/fedora-system:def/view#lastModifiedDate> 2008-07-02T05:09:44.375Z^^<http://fark.com>  will result in a positive match to a triple such as (note that object literal types don't match: <info:fedora/test:123> <info:fedora/fedora-system:def/view#lastModifiedDate> 2008-07-02T05:09:44.375Z^^<http://www.w3.org/2001/XMLSchema#dateTime>  In addition, surrounding the typed literal value in quotes results in 500 error: '2008-07-02T05:09:44.375Z'^^<http://fark.com> ""2008-07-02T05:09:44.375Z""^^<http://fark.com>  SPOnge queries work as expected (but this language is not available with Mulgara) ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-376,Text at end of install process needs update to point to online docs,"Currently, it points to fedora.info/download and a local directory that doesn't exist with the install.  It needs to just point to the wiki.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-377,Allow DSInputSpec binding to datastreams in other objects,"Currently, datastream binding for disseminations is limited to datastreams in the object. DSInputSpec can be extended to support an optional PID attribute to allow for bindings to datastreams in other objects.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-378,Support for SPARQL via risearch interface,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-379,3.1 Source dist installer target fails,"Running ""ant installer"" on the 3.1 source distribution results in the following:  BUILD FAILED C:\fedora-src-3.1\build.xml:46: C:\fedora-src-3.1\.svn\entries doesn't exist",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-380,Remove demo objects that depend on UVA servers,"Since UVA will no longer be hosting these services (as early as the end of December 2008), the demo objects we distribute with Fedora that depend on them need to be removed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-381,ClassNotFoundException with remote instance of Mulgara,"Ben O'Steen reported on the users list that the rebuilder was failing with a ClassNotFoundException against his remote instance of Mulgara.  mulgara-core-2.0.6.jar is missing the client-rdf package (org.mulgara.client.jrdf), which was present prior to 2.0.5. Need to fix this upstream and rebuild mulgara-core. Trippi will also require the updated mulgara-core package.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-382,2.2.4 source dist scripts have dos line endings after install,"Ross reports:  > I downloaded fedora-2.2.4-src.zip > unzipped into fedora-2.2.4-src > built with: ant installer > ran installer: java -jar fedora-2.2.4-installer.jar > > Everything looked Ok and server came up with no problems. However, when I > tried to run some of the client command-line utilities I got ""/bin/sh^M > interpreter error"". Something either in the build or installer is changing > file formats to DOS format. The source files in > fedora-2.2.4-src/src/sh/client and fedora-2.2.4-src/src/sh/server are in the > correct unix format. However, the files copied into $FEDORA_HOME > fedora-2.2.4/client/bin and fedora-2.2.4/server/bin are in DOS file format. > I fixed this by just running dos2unix utility to correct file formatting > issue.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-383,Saxon service fails with Tomcat 6.0.16 as-deployed (commons-logging dependency),"Reported by Stuart Chalk: SaxonServlet startup fails with this version of Tomcat due to the webapp not including the commons-logging library in WEB-INF/lib.  Although older versions of Tomcat work due to an implementation detail of Tomcat, there should no harm in including this in the webapp.  Whoever takes this on, can check if it's true for the other localservices as well?  Feel free to widen the scope of this bug if so.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-461,Unable to deploy Fedora 3.1 in JBoss,We are having trouble deploying Fedora 3.1 in JBoss possibly because of hard-coded file system paths in the RI Search servlet. ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-384,Review REST API XML Responses,"Ensure it's valid XML.  If it uses namespaces, make sure they're declared appropriately.  See FCREPO-146 and FCREPO-147 for the types of problems we want to make sure aren't present.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-385,Extend Validator to Support CMA-defined integrity checks,"Validate CMA relationships and DS-COMPOSITE-MODEL schema.  Schema validation of Fedora-defined datastreams. (WSDL, DSBIND*, etc).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-386,Installer indicates installation instructions at incorrect location.,The installer indicates installation instructions are at http://www.fedora.info/download which is a deprecated location.  Also document locations for the Installation and Configuration Guide for post installation activities point to the same deprecated location.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-387,ConnectionPool validation tests don't run,"Fedora's ConnectionPool class (a wrapper around DBCP) doesn't allow one to configure a ""validationQuery"", which is a standard commons-dbcp configuration value.  According to the following page, there is no default value for this, and since it's not set, it has the effect of disabling testOnBorrow and testOnReturn:  http://issues.apache.org/jira/browse/DBCP-71  This can cause periodic 500 errors on Fedora's front end when connection to the database become invalid.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-388,Fix fcrepo-387 and fcrepo-389 in trunk,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-389,"LDAP Filter falsely reports ""deferring to super"" init message as error","When using the LDAP authentication filter, users may see a message like the following in the log:  ERROR 43:16 FilterLdap> A initThisSubclass() > deferring to super  This is a programmer debugging statement and does not signal a problem.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-390,REST API - NullPointerException on modifyDatastream,When calling modifyDatastream using the REST API with urls such as: http://{host}:{port}/fedora/objects/{PID}/datastreams/{dsID}?label=Update or http://{host}:{port}/fedora/objects/{PID}/datastreams/{dsID}?dsLocation={Updated Address} a NullPointerException is generated.  The stacktrace is as follows:   javax.ws.rs.WebApplicationException: java.lang.NullPointerException   fedora.server.rest.BaseRestResource.handleException(BaseRestResource.java:98)   fedora.server.rest.DatastreamResource.addOrUpdateDatastream(DatastreamResource.java:417)   fedora.server.rest.DatastreamResource.modifyDatastream(DatastreamResource.java:268)   sun.reflect.GeneratedMethodAccessor185.invoke(Unknown Source)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   java.lang.reflect.Method.invoke(Method.java:585)   com.sun.ws.rest.impl.model.method.dispatch.EntityParamDispatchProvider$ResponseOutInvoker._dispatch(EntityParamDispatchProvider.java:128)         ...  This issue was reported on the Fedora Developer's mailing list by James Chartrand. ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-391,Update the REST API to support the new Administrative Client,"In order to complete the new web-based Fedora Administrative Client using the REST API as the back end, there are several updates and additions that are needed in the API. These updates should be completed in parallel with the Administrative Client. A few of the items to be included:  - Include object state information as part of object properties - Include more information in the return value of listDatastreams - Implement the API-M getDatastream method - Update the createObject method to return the PID of the newly created object",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-462,wrong namespace in DC datastream,"The DC datastream that is shown with uri's like http://blabla/get/changeme:001/DC uses the wrong namespace. It should be http://purl.org/dc/elements/1.1/ (with trailing slash) instead of http://purl.org/dc/elements/1.1 (without slash). Fortunately, the object xml itself and uri's in the RI index are correct.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-392,Create XML representations of API-A/M response objects in one place,There are at least three locations in the code where ObjectProfile objects are serialized into XML: - fedora.server.access.FedoraAccessServlet - fedora.server.access.defaultdisseminator.ObjectInfoAsXML - fedora.server.rest.DefaultSerializer  Other API-A and API-M result objects are similarly serialized to XML in multiple locations. There are also two XML representations for method listings and datastream listings. Method listing XML conforms to either listMethods.xsd or objectMethods.xsd. Datastream listing XML conforms to either listDatastreams.xsd or objectItemIndex.xsd.  Each API-A/M response object should have a single schema and should be serialized in one place in the code. ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-410,REST API reads datastreams into heap,"The current implementation of  fedora.server.rest.Multipart.extract() slurps the entire unparsed, and then parsed datastream onto the heap, first by using a ByteArrayDatasource, then by using MimePart.getBody().  Neither of these can work for large files (anything over a few hundred MB is impractical).  See attached patch, which depends on of  Apache File Upload 1.2.1 (http://commons.apache.org/fileupload/)  The patch creates a PipedOutputStream/PipedInputStream to avoid the use to intermediary temp files, and relies on MultipartDataStream.readBodyData to handle proper mime parsing.   This patch does not fix an identical issue for MULTIPART_RELATED mimetypes, and should only be considered a basis for a proper implementation, and/or a temporary fix for those who need it.  There is also some brittleness around header inspection for content type and size, but it's probably good enough for an experimental implementation.   this code has been tested to work with files in excess of 1GB in size, uploaded via ActiveFedora ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-393,Authentication caching intermittently fails,"Kai Strnad reported (and others have reported similar problems on the mailing list):  > Symptoms > We've been experiencing occasional losses of connections to fedora > during mass ingests. Ingests of seemingly random digital objects would > fail with a FilterEnforceAuthn Servlet throwing a 401 despite providing > the right credentials. After some debugging it dawned on me that there > might be a problem with the authentication and caching mechanism used by > Fedora. > > Findings > Thanks to the extensive logging capabilities I was able to trace down > this problem to the following situation: > The CacheEntry (expires every 10 minutes) is very close to expiration > and expires somewhere between the call to CacheElement.authenticate() > and the call to CacheElement.getNamedValues(). The CacheElement will be > repopulated as intended, but without the password. Now there is a new > CacheElement with everything populated but the password. Subsequent > calls don't set the password either, so it won't get set for the rest of > the authentication process which doesn't matter at this point because > the user has already been authenticated. > Subsequent authentications however will fail because the next call to > CacheEntry.authenticate() will compare the given password with the > password of the cache which will effectively compare the password with > null, resulting in the termination of the filter chain and the 401. > The bug will only appear if the EnforceAuthnFilter is part of the filter > chain (eg axis calls). > > > Possible Solution > The most obvious solution would be to supply the given password to the > new CacheEntry the same way it is done in CacheEntry.authenticate(). > However, I don't know if there are side effects and I'm not that > familiar with the code...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-394,Migrating from ANT to Maven2,"In an effort to reduce the learning curve associated with developing in the fedora repository baseline by adopting a standardized application source structure and leveraging community plug-ins, this suggested improvement is to migrate from the existing ANT build framework to Maven2.  This task includes: :restructuring the source tree(s) :moving dependency management into a pom.xml :associating plug-in for eclipse .classpath/.project generation :migrating test suites to Maven2 framework :...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-395,Migration: Analyzer and Generator ClassNotFoundException,"As reported here: http://article.gmane.org/gmane.comp.cms.fedora-commons.devel/1001  Running the analyzer when upgrading from 2.x to 3.1 causes a ClassNotFoundException due to missing classes in the distribution.  Until this is fixed, a workaround is described here:  http://wiki.dlib.indiana.edu/confluence/display/INF/Test+Server+Migration+Notes",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-396,Tomcat 6 and Jetty Installation Problems,Several users have reported incompatibilities with how Fedora installs in Tomcat 6 and Jetty.  These are all related to where certain jars are deployed.  The following threads describe the problem more fully and provide workarounds:  Commons-logging-related (Tomcat6 and Jetty):   http://article.gmane.org/gmane.comp.cms.fedora-commons.devel/1006  Commons-dbcp-related (Tomcat6)   http://article.gmane.org/gmane.comp.cms.fedora-commons.devel/1022,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-397,Update database in a transaction,"Currently Fedora updates its internal database outside of a transaction.  The code in DefaultDOManager is designed to manually back out when an error occurs in the process of ""committing"" a change to an object.  This improvement would cause updates to occur in a database transaction.  It would both simplify the code in DefaultDOManager and give greater assurance that recovery occurred correctly.  Note: This would require that we beging using InnoDB (not MyISAM) style tables when running Fedora with MySQL.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-398,Enable RI as install option for 2.x,The 3.x line has had this for some time.  This capability needs to be backported in order to support automated testing of the legacy (2.x) line.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-399,Test scripts to support automated functional testing,"To support continuous integration testing (and to ease on-demand test setup for developers), provide test scripts for automatically running a series of ""sanity"" tests.  These should collectively allow one to run the existing JUnit (unit, integration, system) tests on Unix-based OSes without requiring manual installation/startup/shutdown of the test server instances.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-400,"Attempt to run disseminations even if a ""required"" datastream is unavailable","Ross@UVA reported that when attempting to run a dissemination where a DSInputSpec-defined datastream is unvailable, but not really required by the particular dissemination being run, it's caught as an error and the dissemination fails to run.  A set of objects that provoke this is attached as hydra-objects.zip  Here is Ross' email describing his investigation of the cause of the current behavior in Fedora 3.1:  ---  I think I pinpointed this problem in code for DefaultAccess near line 500:         DisseminationBindingInfo[] bindingInfo;        bindingInfo = new DisseminationBindingInfo[dsBindRules.length];         for (int i = 0; i < dsBindRules.length; i++) {            DeploymentDSBindRule dsBindRule = dsBindRules[i];            String dsPid = dsBindRule.pid == null ?                    dObj.GetObjectPID() : dsBindRule.pid;            String dsId = dsBindRule.bindingKeyName;            Datastream ds;             DOReader reader = m_manager.getReader(false, context, dsPid);            ds = reader.GetDatastream(dsId, versDateTime);             if (ds == null) {                String message =                        ""The object \""""                                + dsPid                                + ""\"" ""                                + ""contains no datastream with ID \""""                                + dsId                                + ""\"" ""                                + ""that was created on or before the specified date/timestamp ""                                + "" of \""""                                + DateUtility.convertDateToString(versDateTime)                                + ""\"" ."";                throw new DatastreamNotFoundException(message);            }  This logic will throw exception if *any* of the datastream binding rules are not satisfied. I think part of the problem is that the dsInputSpec definition of binding rules is too broad; it just defines a set of binding rules for a particular sDep and does not differentiate which binding rules are associated with which method.  To fix this, I think you would need to either gather additional information from wsdl or methodMap about which bindings were required for each method or add additional information to dsInputSpec that allows you to specify which method a binding rule is associated with...  I suppose if we wanted to be really loose re referential integrity, you could just omit this check and have the dissemination method fail in DisseminationService at run time. That way, methods with matching binding rules would still work and only ones with missing binding rules would fail...  This logic is probably a leftover from Fedora 2.2 when we wanted to catch any case where binding rules were not satisfied since all binding rules had to be satisfied when referential integrity was tight.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-401,WebDAV front end for repository,"Provide a WebDAV front-end for Fedora.  This should allow a low-barrier way to ingest files into Fedora, wrapping them in Fedora objects on the way in.  It may also be a simple way to ingest pre-existing Fedora objects, providing a ""drop box"" style ingest interface.  This idea was originally discussed in the context of having Fedora act as a pluggable repository for Zotero; however a WebDAV interface would be generally useful for many other kinds of other integrations.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-402,Web-Accessible Administrative Client,"Create a modern administrative client for Fedora that allows many of the basic functions of the old Swing-based client, but is web accessible.  We've decided to do this using Adobe Flex (creates Flash apps) to provide a rich user interface with relative ease.  Work on this is being tracked in the wiki at:  http://fedora-commons.org/confluence/x/XoF9",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-403,AtomPub (APP) Interface,Provide an Atom Pub interface for Fedora.  This would be useful as an alternative entry point for developers to hook things into Fedora.  It  could also eventually support a SWORD profile for a potential out-of-box SWORD deposit capability.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-404,SWORD 1.3 Support (Third Party),"Leverage an existing SWORD impl to provide a solution for people wanting a SWORD deposit interface for Fedora.  Also, document how to integrate this with Fedora 3.x.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-445,Improved CMA modeling capabilties,"Users want a way to describe richer content models than is currently possible with the Fedora 3.1 DS-COMPOSITE-MODEL.  One project that is beginning to address this is here:  https://fedora-commons.org/confluence/display/DEV/Fedora+Enhanced+Content+Models  However, Fedora's out-of-box DS-COMPOSITE-MODEL should also support cardinality and optional datastreams.  e.g. max and min, with some datastream # naming convention.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-439,"In-Place ""Ingest"" of local files as datastreams","Users want a way to point Fedora at local files and have it treat them as being managed by Fedora.  It would be nice to be able to just get Fedora to start managing a directory full of files, and not have to move them into Fedora. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-405,SDef/SDep design improvements supporting LANL jpeg2000 service,"Supporting the LANL JPEG2000 Service at  http://african.lanl.gov/aDORe/projects/djatoka/  is a good example, but the goal of this improvement is to support that and other services by improving how SDefs/SDeps can work.    The problem is that a lot of existing http-exposed services have ""APIs"" of their own.  ANd it's hard to put those behind disseminations on digital objects.  Another example: Imagine a dissemination endpoint for an object that represented a collection, and you want to expose that object as an OAI-PMH repository endpoint.  For Fedora to be able to accomodate such a thing, we need to think more broadly about how dissemination calls can be made on objects.  This includes addressing both the ""path syntax"" and the set of possible http verbs that Fedora can expose as dissemination endpoints.  One approach that has been mentioned is to make Fedora act more like an http proxy.  This also ties into some of Aaron Birkland's ideas here:   https://fedora-commons.org/confluence/pages/viewpage.action?pageId=8754366",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-406,Remove assumption of /fedora as webapp path,"Currently, there are several assumptions in the server and test code that Fedora is mounted at ""/fedora"".  This improvement would remove such assumptions.  It requires scanning the existing code for hardcoded ""fedora"" paths and either using relative paths (where possible) or constructing absolute paths (when needed) from some common source that indicated ""where this webapp is mounted"".  Note that the context path is available to a servlet in the servlet api.  It may be possible to get this information at webapp startup time rather than having to require a separate fedora.fcfg configuration parameter.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-447,The color blue should be reserved for links,"Fedora Repository 3.1, Object Profile HTML presentation. E.g. http://localhost:8080/fedora/get/demo:1. All key elements appear in blue, both true links and ""header"" elements. See screenshot.  The color blue is universally recognized on the Web as the color for clickable links. Other elements drawn in blue tend to appear to be clickable when in reality they aren't.   It is impossible to know what is a link (and what isn't) by mere examination. One must mouse over a blue element to decide if it's a link. Confusing and needlessly so. Can a different color be used for text elements and links be left to their native, default color?  (Granted, links may also be underlined. But blue links is as a de facto, established Web ""standard"".)  The lack of CSS makes this difficult to change, unfortunately. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-407,"404 ""Not found"" page never shown -- generates an error","Accessing any invalid URL generates an error. E.g. http://localhost:8080/fedora/xxx yields the page:   HTTP Status 404 -   --------------------------------------------------------------------------------  type Status report  message   description The requested resource () is not available.   --------------------------------------------------------------------------------  Apache Tomcat/5.5.27   And the following error appears in the log:   ERROR 2009-02-04 10:29:44.966 [http-80-Processor2] ([jsp]) Servlet.service() for servlet jsp threw exception java.lang.NullPointerException         at org.apache.jsp.jsp.notfound_002d404_jsp._jspService(notfound_002d404_jsp.java:76)         at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)         at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:331)         at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:329)         at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)         at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:679)         at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)         at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:399)         at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)         at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:364)         at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:285)         at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)         at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)         at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)         at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)         at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:875)         at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)         at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)         at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)         at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)         at java.lang.Thread.run(Thread.java:595) Feb 4, 2009 10:29:44 AM org.apache.catalina.core.StandardHostValve custom SEVERE: Exception Processing ErrorPage[errorCode=404, location=/jsp/notfound-404.jsp] org.apache.jasper.JasperException: Exception in JSP: /jsp/notfound-404.jsp:23  20:                      <h3>No such object, datastream, or dissemination.</h3> 21:                   </center> 22: <% 23: if (exception.getMessage() != null) { 24:     out.print(exception.getMessage()); 25: } 26: %>   Stacktrace:         at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:451)         at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)         at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:329)         at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)         at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)         at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:679)         at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)         at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:399)         at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)         at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:364)         at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:285)         at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)         at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)         at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)         at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)         at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:875)         at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)         at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)         at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)         at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)         at java.lang.Thread.run(Thread.java:595)   The fix is simple and works:  Index: src/war/fedora/jsp/notfound-404.jsp =================================================================== --- src/war/fedora/jsp/notfound-404.jsp (revision 7890) +++ src/war/fedora/jsp/notfound-404.jsp (working copy) @@ -20,7 +20,7 @@                       <h3>No such object, datastream, or dissemination.</h3>                    </center>  <% -if (exception.getMessage() != null) { +if (exception != null && exception.getMessage() != null) {      out.print(exception.getMessage());  }  %> ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-408,Fedora webapp root page features broken link,"The Fedora repository homepage at http://localhost:8080/fedora/ has the following content:   Apache-AXIS Hello! Welcome to Apache-Axis.  What do you want to do today?  Administer Axis [link #1] Visit the Axis Servlet [link #2]   Link #1 above links to http://localhost:8080/fedora/servlet/AdminServlet. But this link is broken: it returns a 404 error page (rather, it should -- see also bug FCSUPPORT-33).   Either this link should be made to work, or it should be removed entirely. Thanks! ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-444,Document and consolidate what needs to be writable at runtime,"I had a hard time installing Fedora Repository 3.1 on Unix thanks to the need for a writable FEDORA_HOME. Typically Unix software is installed by an admin, and users given limited privileges to the few files and directories they absolutely need to write to.  Obviously there needs to be an area where datastreams are kept, but requiring all of FEDORA_HOME (children directories included) to be writable seems somewhat excessive. FEDORA_HOME contains mostly code and configuration files, which don't need to (and in fact, shouldn't) be written to by Fedora.   Through trial and error, I got away with allowing only the following directories to be writable:  FEDORA_HOME/data FEDORA_HOME/server/status FEDORA_HOME/server/logs FEDORA_HOME/server/management FEDORA_HOME/server/fedora-internal-use FEDORA_HOME/server/fedora-internal-use/fedora-internal-use-backend-service-policies  I think it would be quite helpful to document which specific directories need to be writable, and maybe consolidate them into one place. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-409,MySQL error on shutdown,"Whenever I shutdown the Fedora Repository (by shutting down Tomcat), the log shows:  INFO: Illegal access: this web application instance has been stopped already.  Could not load com.mysql.jdbc.SQLError.  The eventual following stack trace is caused by an error th rown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact. java.lang.IllegalStateException         at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1272)         at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1232)         at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)         at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3246)         at com.mysql.jdbc.MysqlIO.quit(MysqlIO.java:1656)         at com.mysql.jdbc.ConnectionImpl.realClose(ConnectionImpl.java:4261)         at com.mysql.jdbc.ConnectionImpl.cleanup(ConnectionImpl.java:1248)         at com.mysql.jdbc.ConnectionImpl.finalize(ConnectionImpl.java:2655)         at java.lang.ref.Finalizer.invokeFinalizeMethod(Native Method)         at java.lang.ref.Finalizer.runFinalizer(Finalizer.java:83)         at java.lang.ref.Finalizer.access$100(Finalizer.java:14)         at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:160) ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-411,Properties and export XML  don't match Datastream details,"I've been working througth the SmileyStuff demo supplied with the Fedora repository. I've setup tomcat to use port 80 instead of the default 8080 this causes a problem as the ingested object refer to port 8080. I have modified the locations of the objects so that where there used to be a reference to 8080 this has now been removed. So what I've done is:  ingested the demo searched for all objects loaded the smileyStuff object changed the location for QUERY from http://localhost:8080/fedora-demo/image-collection-demo/SmileyStuff-MemberQuery.txt  to http://localhost/fedora-demo/image-collection-demo/SmileyStuff-MemberQuery.txt saved the modified  datastream changed the location for XSLT from http://localhost:8080/fedora-demo/image-collection-demo/SmileyStuff-ViewStylesheet.xsl to http://localhost/fedora-demo/image-collection-demo/SmileyStuff-ViewStylesheet.xsl saved the modified  datastream changed the location for http://localhost:8080/fedora/get/demo:SmileyStuff/demo:Collection/list to http://localhost/fedora/get/demo:SmileyStuff/demo:Collection/list saved the modified  datastream switched to the property view and this is the section of xml shown for the 2 modified data streams:   <foxml:datastream CONTROL_GROUP=""E"" ID=""QUERY"" STATE=""A"" VERSIONABLE=""true"">     <foxml:datastreamVersion CREATED=""2008-07-02T05:09:43.062Z"" ID=""QUERY.0"" LABEL=""RDF Query to list members"" MIMETYPE=""text/plain"">       <foxml:contentLocation REF=""http://localhost:8080/fedora-demo/image-collection-demo/SmileyStuff-MemberQuery.txt"" TYPE=""URL""/>     </foxml:datastreamVersion>     <foxml:datastreamVersion CREATED=""2009-02-11T15:45:51.875Z"" ID=""QUERY.1"" LABEL=""RDF Query to list members"" MIMETYPE=""text/plain"">       <foxml:contentLocation         REF=""http://local.fedora.server/fedora-demo/image-collection-demo/SmileyStuff-MemberQuery.txt"" TYPE=""URL""/>     </foxml:datastreamVersion>   </foxml:datastream>   <foxml:datastream CONTROL_GROUP=""E"" ID=""XSLT"" STATE=""A"" VERSIONABLE=""true"">     <foxml:datastreamVersion CREATED=""2008-07-02T05:09:43.062Z"" ID=""XSLT.0""       LABEL=""Stylesheet to view list dissemination as html"" MIMETYPE=""text/xml"">       <foxml:contentLocation         REF=""http://localhost:8080/fedora-demo/image-collection-demo/SmileyStuff-ViewStylesheet.xsl"" TYPE=""URL""/>     </foxml:datastreamVersion>     <foxml:datastreamVersion CREATED=""2009-02-11T15:46:33.640Z"" ID=""XSLT.1""       LABEL=""Stylesheet to view list dissemination as html"" MIMETYPE=""text/xml"">       <foxml:contentLocation         REF=""http://local.fedora.server/fedora-demo/image-collection-demo/SmileyStuff-ViewStylesheet.xsl"" TYPE=""URL""/>     </foxml:datastreamVersion>   </foxml:datastream>   <foxml:datastream CONTROL_GROUP=""E"" ID=""LIST"" STATE=""A"" VERSIONABLE=""true"">     <foxml:datastreamVersion CREATED=""2008-07-02T05:09:43.062Z"" ID=""LIST.0"" LABEL=""Result of list dissemination"" MIMETYPE=""text/xml"">       <foxml:contentLocation REF=""http://local.fedora.server/fedora/get/demo:SmileyStuff/demo:Collection/list"" TYPE=""URL""/>     </foxml:datastreamVersion>   </foxml:datastream>  The contentLocation  shows the 8080 port.  After closing the object and then reloading I've inspected the datastream properties and all is ok however, when I look at the object properties via the view xml the locations still have the 8080 port in the location. This is also the case when the object has been exported.  regards  Alastair ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-412,Provide state and format uri info via REST API,"Asger pointed out that it is currently necessary to parse FOXML or perform a field search in order to determine the state of an object or datastream.  It's also necessary to use API-M in order to determine the format uri of a datastream. Better would be to provide all this information via the REST api, where appropriate.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-413,Remove extPropertyType from FOXML schema,"As of Fedora 3.0, ""extPropertyType"" is no longer used in Fedora.  However, it was not removed from the FOXML schema.  It's confusing that it's still in the schema because it's not readable/writable in any other way via Fedora's APIs.  It is effectively ignored (and likely even dropped on deserialization).  Note that this change would make some formerly valid FOXML 1.1 objects invalid.  So it's important to consider the effects of revising the schema.  For example, should the FOXML format be changed to 1.2?  Or 1.1.1?  What about the format URI accepted for ingest?  Fun...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-414,ORE Resource Map disseminations for all Fedora objects,"Provide a default ORE resource map dissemination of all Fedora objects as a built-in disseminator (or export format?)  It should include:  - Key metadata about the object (mod date, etc)  - Key metadata about the datastreams in the object  - DC information  - Relationships (RELS-EXT/INT)  - URLs where datastreams can be found  This request came up in a call with Ross Wayland, Thorny Staples, and Chris Wilper on Feb 18th.  There are several imagined uses for this kind of information, including:  - As a replacement for ""asset actions"" (the Aquifer project at U of Illinois) - As a way to get basic information about the whole object in one go for the purpose of supporting dissemination services.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-415,Remove redundant SELECT statements running during security evaluation,> In the > authentication process the same select statement gets executed several > times (see the full SQL log here: > http://fedora.fiz-karlsruhe.de/docs/Wiki.jsp?page=Sql) : > > SELECT path FROM objectPaths WHERE token='changeme:27' > SELECT path FROM objectPaths WHERE token='changeme:27' > SELECT path FROM objectPaths WHERE token='changeme:27' > SELECT path FROM objectPaths WHERE token='changeme:27' > SELECT path FROM objectPaths WHERE token='changeme:27' > SELECT path FROM objectPaths WHERE token='changeme:27' > SELECT path FROM objectPaths WHERE token='changeme:27' > SELECT path FROM objectPaths WHERE token='changeme:27' > SELECT path FROM objectPaths WHERE token='changeme:27' > > I guess these selects could be reduced to one statement. The statement > is not terribly expensive and will even be optimized/cached by most > database systems but nonetheless it can hurt performance since the > column doesn't have an index.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-416,Remove explicit GC from ingest process,GC is being run unnecessarily at the end of each ingest.  Removing this will improve performance considerably.  > (DefaultDOManager.java:1075). The garbage collection definitely does > hurt performance when triggered this way and it isn't guaranteed to > happen at  this point in time anyway.   Further details at http://fedora.fiz-karlsruhe.de/docs/Wiki.jsp?page=Java%20Heap%20%26%20GC%20Tuning,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-417,Refactor FieldSearchServlet,Avoid manually building xml/html.  Code is hard to read/debug.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-418,Switch to commons-fileupload for handling uploads,"Discontinue use of the O'Reilly Servlet library, cos.jar and instead use Commons-FileUpload from Apache.  Reasons for this change: 1) cos.jar is not actively maintained; commons-fileupload is 2) The version of cos.jar Fedora currently depends on is patched for handling large uploads; commons-fileupload works as-distributed 3) cos.jar has a unique license that is more restrictive than Apache2; commons-fileupload is released under Apache2",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-419,Standardize on commons-codec for Base64 handling,"Fedora's server code currently uses three separate libraries for Base64 handling: O'Reilly Servlet (com.orielly.servlet.Base64Encoder/Decoder), Axis (org.apache.axis.encoding.Base64), and Commons Codec (org.apache.commons.codec.binary.Base64).  Of these, Commons Codec's implementation is most geared toward generic use.  Using commons-codec for this, in addition to FCREPO-418, will allow removal of the dependency on cos.jar.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-420,FOXML export fails with base64 inline content,"When run in the archive context, the FOXMLDOSerializer produces malformed XML for each managed content stream.  The ""binaryContent"" tag isn't opened properly.    Workaround: after exporting such an object, manually modify the output and prepend ""<"" before occurances of ""foxml:binaryContent>"".",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-451,Fedora Enhanced Security Layer (FeSL) Integration,"This work is still coming together, but with include major improvements for Fedora's AuthN and AuthZ components.  Futher details can be found here: http://fedora-commons.org/confluence/x/h4Ov  FESL should eventually replace the default AuthN/AuthZ functionality built in to Fedora.  If there's a need for people to migrate policies, there should be a period of overlap (where the ""old way"" and ""new way"" work)...hopefully this can be the case for Fedora 3.3",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-452,Move away from Axis 1.3,Fedora has used Axis 1.3 for quite some time.  We need to move away from this as the 1.x line is no longer maintained.  This will also allow us to properly support modern soap with attachments.  Need to make a decision on the library to use.  CXF looks like a good candidate: http://cxf.apache.org/,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-453,Allow the retrieval of content via the file URI scheme,"Chris Wilper wrote: I got a chance to read through your performance wiki[1] again in more detail and found it quite informative.  One part I missed before was the discussion on ""Managed Content Retrieval"", where you discuss the use of a Tomcat FileDirContext in order to avoid sending content in via the upload servlet.  If Fedora just had the option to accept local ""file:///"" URLs on ingest, I think that would be even better.  There's a security consideration to doing that, but I think as long as the repository could be configured to reject file:/// URLs from all but a set of ""allowed"" local paths and the input was sanitized (removing "".."", etc), we would be ok.   ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-454,Extensible object and datastream states,"In response to http://article.gmane.org/gmane.comp.cms.fedora-commons.devel/1066 Bill wrote:  > It occurs to me with this request that the states we use currently use for > objects in Fedora are primarily for user convenience. Is there anything > stopping us from allowing a repository admin to define the states in which > an object can exist? This is a long way from being workflow, but I could see > it facilitating the creation of a simple customized workflow on top of > Fedora, especially with the ability to do access control based on state.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-455,method to programatically determine disseminator response mime type,"Per the conversation in this thread on the Fedora user's forum:    http://sourceforge.net/mailarchive/forum.php?thread_name=e513ac80fa0a.49a64b77%40wiscmail.wisc.edu&forum_name=fedora-commons-users  I would like a simple way to get the response mime type for a disseminator through the Fedora API-A toolkit.  Two options have been discussed:  1.  Get the recorded mime type(s) in the method's deployment object, either from the METHODMAP or WSDL datastreams, add it to the ObjectMethodDefs data structure returned by listMethods().  Pros:  fast, low overhead, internal to Fedora  Cons:  response mime types registered in the deployment object won't necessarily match what the disseminator really returns; no way to pick which mime type in a given list is the right one at that given moment for the given object.  2.  Get the mime type from the HTTP headers by sending a HEAD request to the web service backing the disseminator.  Pros:  mime type returned guaranteed to be correct  Cons:  high overhead (network connection, HTTP transaction)  Ideally, both options would be available.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-456,"Make retainPIDs optional, default to retain all","The retainPIDs configuration in fedora.fcfg should default to retain all PIDs.  RetainPIDs is an old ""feature"", but mostly tends to complicate life and confuse people when they ingest an object and the PID given back isn't the one they sent in.  Therefore, it should be dropped from the default fedora.fcfg.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-457,Remove unnecessary testing dependencies on external hosts,"Several of the system tests currently rely, unnecessarily, on access to external hosts.  When such a dependency exists, it should be for a good reason (e.g. to test something that can't be tested vs localhost)  Offending tests include:   fedora.test.api.TestManagedDatastreams#testModifyDatastreamByReference   fedora.test.api.TestManagementNotifications#testDatastreamMethodNotifications   fedora.test.api.TestAPIM#testDatastreamMethods",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-458,ArrayIndexOutOfBounds when indexDCFields=false,"The indexDCFields value in fedora.fcfg controls whether DC fields are actually indexed in the underlying database or not.  Normally, this is true (the default), but when set to false, indexing of modified objects fails with an ArrayIndexOutOfBoundsException.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-459,Wrong RELS-EXT datastream attributes set with add/purgeRelationship,"When calling API-M's addRelationship and purgeRelationship methods, the mime type is invariably set to ""text/xml"" and the prior FormatURI is not always respected.  The date of the datastream version is also set to the current time (new Date()) rather than the time the API request was originally received (this is the correct value to use).  If the operation causes RELS_EXT to be created, the mime type should be automatically set to ""application/rdf+xml"" and the format uri to the RELS_EXT_1_0.uri.  If the operation causes RELS_EXT to be modified, the mime type and format uri should be set to the value of the previous datastream version (unchanged).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-460,SwingAdmin shows blank ingest/export dialogs in Linux,"I've observed this on two separate Ubuntu 8.10 installations with Java 5.  A failure to pack() the content panel (and instead use setSize()) of a JOptionDialog causes the entire panel to show up blank.  This makes it impossible to graphically ingest or export using Ubuntu with Java 5.  This is not a problem on the same machine, with Java 1.6.0_10, however, pack() is safe to use across all environments, so this should be changed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-463,Pull the REST API code into trunk,"The REST API is currently built as a stand-alone JAR which is included as a library in the Fedora repository trunk. The code in the REST API, however, is only useful as part of Fedora, it does not stand on its own. Because of this, there is no particular benefit to having the code live in its own project, and including it as part of trunk would make maintenance simpler.  This task is to move the code from the Fedora REST API into trunk and update the build to function correctly. One portion of the build that needs consideration is when a new WADL is constructed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-464,Broken relative includes in stylesheets -- only absolute paths work,"GSearch results are transformed using stylesheets. Said stylesheets include other stylesheets using <xsl:include/> elements. Unfortunately, only full absolute paths appear to work for the purpose of inclusion; relative includes don't.  E.g. in basicGfindObjectsToHtml.xslt at https://fedora-commons.svn.sourceforge.net/svnroot/fedora-commons/services/genericsearch/tags/release-2.2/FgsConfig/configBasic/rest/basicGfindObjectsToHtml.xslt line 12 reads:  <xsl:include href=""CONFIGPATH/rest/basicCommon.xslt""/> CONFIGPATH is replaced at configuration time to become the full path. This configuration step appears un-necessary -- I should be able to use a relative include such as:  <xsl:include href=""basicCommon.xslt""/> since basicCommon.xslt in the same directory as the including stylesheet basicGfindObjectsToHtml.xslt.  On the grand scheme of things, not a big deal. It's just one extra bit of configuration right? Unfortunately, I'd like to offer my opinion that it's configuration such as this (compounded over many files) that makes the software hard to install and use in the end.   In this particular case, it's easy enough to fix. The attached patch sets the system ID on the including stylesheet, which allows to successfully process relative includes.   Note about patch: the first part applies to GTransformer.java and sets the system ID, which solves the issue. The second part applies to Config.java and disables the proactive checking of stylesheets. I'll voluntarily admit this is rather aggressive, and it should be reworked. I merely didn't want to deal with the code duplication between GTransformer.java and Config.java, as it would have complicated the patch quite a bit. ",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-465,OAIProvider compatibility with Fedora 2.2.4,"Because Fedora 2.2.4 uses Mulgara instead of Kowari, the OAIProvider (v1.1) isn't forward-compatbile.  The tucana#before and tucana#after predicates have changed to mulgara#before and mulgara#after, so the date-related queries don't work.",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-466,Shell scripts don't properly pass through args with spaces,"Phil reports:  I have found a bug in all the 3.1 client shell scripts. e.g. fedora-find.sh synopsis at:   http://fedora-commons.org/confluence/display/FCR30/Client+Command-line+Utilities  suggests (with FCREPO-86 applied) this example should work:   fedora-find localhost 8080 userid password ""pid fType title description"" ""fedora"" http  It does not work because the code (with FCREPO-86 applied) says:   (exec $JAVA_HOME/bin/java ... $1 $2 $3 $4 $5 $6 $7)  The exec means that the fieldList ($5) gets expanded as follows before execution (which is wrong -- it should not be expanded, but rather be seen by the shell as a single argument):   pid fType title description  It also means that wild carding with ""?"" and ""*"" for the search string ($6) will match files in the current working directory instead of being passed through to the java application.  The fix is to quote all the shell arguments, thus:   (exec $JAVA_HOME/bin/java ... ""$1"" ""$2"" ""$3"" ""$4"" ""$5"" ""$6"" ""$7"")  I expect that this bug is present in all the shell scripts.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-467,Missing objects from Tutorial 2,"With Fedora 3.1, the SDep.xml, SDef.xml, CModel.xml and other xml files were omitted from the distribution.  It looks like these were lost in the migration of the documentation to the wiki.  They need to be reviewed and included in the distribution, or along with the tutorial.  Stuart wrote: > I decided to try and regenerate the example3 tutorial documents myself and update them for  > the 3.1 implementation of Fedora. I am not sure that they are perfect (i.e. completely schema  > compliant) but they load into Fedora 3.1 fine and work.  Please find a .zip file attached with  > the documents I came up with.  (see attachment)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-468,Merge contributions from the ARROW project to OAIProvider,"Please refer to this mailing list thread: http://sourceforge.net/mailarchive/forum.php?thread_name=4ff60e1c0903300655v4db4d33bs876c95ad5a7f622a%40mail.gmail.com&forum_name=fedora-commons-developers  Background:  Oliver Lucido and Harry Sidhunata of the ARROW project made modifications to Fedora's OAIProvider service to support the following:  1) Configuration of set membership via DC values instead of RELS-EXT. This is simply a configuration change to the proai.properties file (detailed in the attachment), but in order to work reliably, requires special processing by the Fedora OAIProvider in order to deal with DC values that contain whitespace characters.  The patch replaces such characters, when they occur, with underscores so they are syntactically valid with respect to the OAI-PMH protocol, which does not allow spaces in setSpec names.  2) The use of the Fedora object's PID as the oai itemID.  This is convenient because it avoids the problem of the appearance of duplicate records when a) using the default configuration (which uses dc:identifier) and b) multiple dc:identifiers exist in record object's DC datastreams. ",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-469,Add ConfigQ test that runs vs. Quick Install,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-470,port problem caused by router redirection ,"We have the following network architecture:  FEDORASERVER:8015 <------> YYY:ROUTER:80 <----> XXX:INTERNET  As you can see, our router redirects all requests to the fedora server mapping port 80 to port 8015.  Fedora replies have the protocol, host and port harcoded, but these values are extracted from the last hop and are of the form http://FEDORASERVER:8015/fedora/.... These URL's are not accessible from the outside.  Examples of requests with the problem:  - http://fedoraserver/fedora/get/pidns:134/fedora-system:3/viewItemIndex  - http://fedoraserver/fedora/get/pidns:134/DS  - http://fedoraserver/fedora/get/pidns:134/fedora-system:3/viewMethodIndex  In order to solve the problem we suggest to remove the method 'getReposBaseURL' from classes 'DefaultAccess.java' and 'DynamicAccessImpl.java'. We don't know if these changes can cause a undesired behaviour. Use at your own risk.  Regards, Gerard ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-471,Replace whitespace in setSpecs with underscores,See FCREPO-468,legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-472,Option of using PID directly as itemID,See FCREPO-468.,legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-473,Document additional set membership config options,"As per FCREPO-468: - Document how to use DC (vs RELS-EXT) as the source of set membership info - Document how to config the provider to use a ""top-down"" approach vs the default, ""bottom-up"" approach for getting set membership info.  Currently, the documentation that needs to be updated lives here:  https://fedora-commons.org/confluence/display/FCSVCS/OAI+Provider+Service+1.2",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-474,Remove extraneous namespace declaration on record elements,"Richard Green reports:  We have recently had a small issue with oaiprovider when the British Library tried to harvest our thesis metadata.  Using the ListRecords verb results in a set of records each wrapped as  <record xmlns=""http://www.openarchives.org/OAI/2.0/ <http://www.openarchives.org/OAI/2.0/>  "">    ... </record>  Instead of just  <record> ... </record>  This caused them some problems because one of their transforms wasn't set up to deal with this response which seems, from the OAI-PMH spec, to be non-standard.  To fix this issue, Simon removed the following from Line 173 of FedoraOAIDriver.java :-  out.println(""<record xmlns=\""http://www.openarchives.org/OAI/2.0/\"">"");  And replaced with:-  out.println(""<record>"");  ",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-475,Self-signed SSL cert has expired,"A new SSL cert needs to be generated as the current cert provided by Fedora expired in January, 2009.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-476,Fold API-A/M-Lite into the REST API,"As the REST API gets pulled into trunk, there will no longer need to be a distinction between the REST API and API-A-Lite. This task involves removing the duplicate methods, moving the methods only in API-A-Lite into the REST API, and updating related stylesheets to make everything consistent.  This includes getDissemination and other unimplemented items noted on this page:  https://fedora-commons.org/confluence/display/FCR30/REST+API  Goal is to deprecate API-A/M Lite.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-477,New hasModel resource attribute not recognized in XACML policies - patch,"With the introduction of the new CMA, the contentModel-resource-attribute disappeared and it has been replaced by ""hasModel"". However, the ResourceAttributeFinderModule was never called to resolve such an attribute during policy evaluation because it didn't register for it.   The attached patch fixes the problem. It is now possible to write XACML policies that look at the content model(s) of an object like this:  ...         <ResourceMatch MatchId=""urn:oasis:names:tc:xacml:1.0:function:string-equal"">           <AttributeValue DataType=""http://www.w3.org/2001/XMLSchema#string"">info:fedora/cmodel:Container</AttributeValue>           <ResourceAttributeDesignator AttributeId=""info:fedora/fedora-system:def/model#hasModel""             DataType=""http://www.w3.org/2001/XMLSchema#string"" MustBePresent=""false""/>         </ResourceMatch> ...  Tom",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-478,No SPARQL Support for CONSTRUCT ,"Issuing a SPARQL query for a CONSTRUCT results in an empty response from the tuple query type service and a Exception is thrown when attempting to use the triples query service:  (Via Tuples:) e.g. http://databank.ouls.ox.ac.uk:8080/fedora/risearch?lang=sparql&format=sparql&type=tuples&query=construct%20{%20?x%20dc:title%20?name%20}%20WHERE%20{%20?x%20dc:title%20?name%20}  SPARQL query:   CONSTRUCT { ?x dc:title ?title } WHERE { ?x dc:title ?title }  [' make a graph of all triples with dc:title as a predicate.']  Response: <?xml version=""1.0"" encoding=""UTF-8""?> <sparql xmlns=""http://www.w3.org/2001/sw/DataAccess/rf1/result"">   <head>     <variable name=""subject""/>     <variable name=""predicate""/>     <variable name=""object""/>   </head>   <results>   </results> </sparql>  (regardless to how many dc:title triples are there: e.g. an spo query to pull up 10 dc:title matches - http://databank.ouls.ox.ac.uk:8080/fedora/risearch?lang=spo&format=RDF/XML&type=triples&limit=10&query=*%20%3Cdc:title%3E%20* )  (Via Triples:) http://databank.ouls.ox.ac.uk:8080/fedora/risearch?lang=sparql&format=sparql&type=triples&query=construct%20{%20?x%20dc:title%20?name%20}%20WHERE%20{%20?x%20dc:title%20?name%20}  org.trippi.TrippiException: Unsupported triple query language: sparql   org.trippi.impl.mulgara.MulgaraSession.findTriples(MulgaraSession.java:94)   org.trippi.impl.base.ConcurrentTriplestoreReader.findTriples(ConcurrentTriplestoreReader.java:145)   fedora.server.resourceIndex.ResourceIndexImpl.findTriples(ResourceIndexImpl.java:300)   fedora.server.resourceIndex.ResourceIndexModule.findTriples(ResourceIndexModule.java:317)   org.trippi.server.TrippiServer.find(TrippiServer.java:132)   org.trippi.server.http.TrippiServlet.doFind(TrippiServlet.java:512)   org.trippi.server.http.TrippiServlet.doGet(TrippiServlet.java:377)   fedora.server.access.RISearchServlet.doGet(RISearchServlet.java:99)   org.trippi.server.http.TrippiServlet.doGet(TrippiServlet.java:269)   org.trippi.server.http.TrippiServlet.doPost(TrippiServlet.java:572)   javax.servlet.http.HttpServlet.service(HttpServlet.java:710)   javax.servlet.http.HttpServlet.service(HttpServlet.java:803)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)   org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)   org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)   org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)   org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)   org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)   org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)   org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)   org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)   org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)   org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)   java.lang.Thread.run(Thread.java:619) ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-479,No SPARQL Support for ASK ,"SPARQL ASK queries return False, regardless to actual match and the response format is not compliant to the SPARQL guidelines for ASK responses.  Spec: http://www.w3.org/TR/rdf-sparql-query/#ask  From a basic query, the following is found (manually) to exist in the triplestore:  <info:fedora/dataset:1> <http://purl.org/dc/elements/1.1/identifier> ""dataset:1"" .  Performing a SPARQL query:  ASK { <info:fedora/dataset:1> dc:identifier ""dataset:1"" }  via: http://databank.ouls.ox.ac.uk:8080/fedora/risearch?lang=sparql&format=sparql&type=tuples&query=ASK%20{%20%3Cinfo:fedora/dataset:1%3E%20dc:identifier%20%22dataset:1%22%20}  Response: <?xml version=""1.0"" encoding=""UTF-8""?> <sparql xmlns=""http://www.w3.org/2001/sw/DataAccess/rf1/result"">   <head>     <variable name=""k0""/>   </head>   <results>     <result>       <k0 datatype=""http://www.w3.org/2001/XMLSchema#boolean"">false</k0>     </result>   </results> </sparql>  Expected response (from the SPARQL spec): <?xml version=""1.0""?> <sparql xmlns=""http://www.w3.org/2005/sparql-results#""         xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""         xsi:schemaLocation=""http://www.w3.org/2001/sw/DataAccess/rf1/result2.xsd"">   <head>   </head>    <boolean>true</boolean>  </sparql>  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-480,No SPARQL Support for DESCRIBE,"SPARQL DESCRIBE queries result in an empty response:  DESCRIBE <info:fedora/dataset:1>  via: http://databank.ouls.ox.ac.uk:8080/fedora/risearch?lang=sparql&format=sparql&type=tuples&query=DESCRIBE%20%3Cinfo:fedora/dataset:1%3E  Response: <?xml version=""1.0"" encoding=""UTF-8""?> <sparql xmlns=""http://www.w3.org/2001/sw/DataAccess/rf1/result"">   <head>     <variable name=""subject""/>     <variable name=""predicate""/>     <variable name=""object""/>   </head>   <results>   </results> </sparql>  Simulated response via an SPO query - ""<info:fedora/dataset:1> * *""  via: http://databank.ouls.ox.ac.uk:8080/fedora/risearch?lang=spo&format=RDF/XML&type=triples&query=%3Cinfo:fedora/dataset:1%3E%20*%20*  <?xml version=""1.0"" encoding=""UTF-8""?> <rdf:RDF  xmlns:rdf=""http://www.w3.org/1999/02/22-rdf-syntax-ns#"">  <rdf:Description rdf:about=""info:fedora/dataset:1"">  <rdf:type rdf:resource=""http://vocab.ouls.ox.ac.uk/dataset/scheme#DataSet""/>  <label xmlns=""info:fedora/fedora-system:def/model#"">Dataset: Tick1 audio corpus</label>  <hasModel xmlns=""info:fedora/fedora-system:def/model#"" rdf:resource=""info:fedora/fedora-system:FedoraObject-3.0""/>  <lastModifiedDate xmlns=""info:fedora/fedora-system:def/view#"" rdf:datatype=""http://www.w3.org/2001/XMLSchema#dateTime"">2009-04-07T00:17:14.197Z</lastModifiedDate>  <ownerId xmlns=""info:fedora/fedora-system:def/model#"">fedoraAdmin</ownerId>   <state xmlns=""info:fedora/fedora-system:def/model#"" rdf:resource=""info:fedora/fedora-system:def/model#Active""/>  <createdDate xmlns=""info:fedora/fedora-system:def/model#"" rdf:datatype=""http://www.w3.org/2001/XMLSchema#dateTime"">2009-04-07T00:08:43.667Z</createdDate>  <identifier xmlns=""http://purl.org/dc/elements/1.1/"">dataset:1</identifier>  <disseminates xmlns=""info:fedora/fedora-system:def/view#"" rdf:resource=""info:fedora/dataset:1/DC""/>  <disseminates xmlns=""info:fedora/fedora-system:def/view#"" rdf:resource=""info:fedora/dataset:1/RELS-EXT""/>  <title xmlns=""http://purl.org/dc/elements/1.1/"">Dataset: Tick1 audio corpus</title>  <physicalPath xmlns=""http://vocab.ouls.ox.ac.uk/dataset/scheme#"">/</physicalPath>   <label xmlns=""http://www.w3.org/2000/01/rdf-schema#"">/</label>  <created xmlns=""http://purl.org/dc/terms/"">2006-2-24</created> </rdf:Description>  </rdf:RDF>",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-481,FieldSearch fails when 'pid' not selected,Janna Wemekamp reports:  Fedora's search functions fail with the following error if the pid column isn't requested as part of the result set:      javax.ws.rs.WebApplicationException: fedora.server.errors.StorageDeviceException: Error with sql database. The column name pid was not found in this ResultSet.  This is true of the 'search' web interface and the REST API.  Eg. http://localhost:8080/fedora/objects?title=true&identifier=true&terms=&query=pid~demo%3A*&maxResults=20 http://localhost:8080/fedora/search?title=true&identifier=true&terms=&query=pid~demo%3A*&maxResults=20 ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-483,Rework Fedora FAQs,"Fedora's FAQs are in a state of disrepair.  They need to be fixed.  The list of new FAQs should include: - High-level stuff from Thorny - Technical FAQs identified by developers (including what's actually frequently asked on the mailing list, etc)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-484,Update Mulgara to 2.1.1,Update Mulgara (currently 2.0.8) to 2.1.0 when released (imminent).,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-485,Refactoring to Support More Fully-Modularized External Content Manager,"https://fedora-commons.org/confluence/display/DEV/mail/11503765  > [...] As it stands in 3.1, the ValidationUtility class has a > hard-coded rejection of file urls, and the DisseminationService class > fetches external content via it's own WebClient (rather than using the > ExternalContentManager).  These two quirks prevent (as far as I can > tell) an ExternalContentManager module from making non-http content > available as datastreams.   > Would it be reasonable to split FCREPO-453 into 2 issues, so that the > changes allowing an ExternalContentManager module to use non-http urls > were separated from the actual implementation of such a module?   So, just to make sure, the basic strategy you're thinking of is:   First, refactor so that all datastream access (for content stored outside fedora's control) goes consistently through ExternalContentManager.  This includes all runtime access to ""R"" and ""E"" datastreams, as well as ""M"" datastreams when they are ingested by reference.   Next, add file:// (and potentially other) resolutions to an impl of ExternalContentManager (why not DefaultExternalContentManager?), with adequate administrative control over which dirs on the local machine can be loaded from when the URL happens to be a file:/// one. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-486,References to in-fedora resources don't work properly in alternate app server contexts,"General, portable, ""relative"" links to in-fedora content were previously handled by variable substitution.  e.g. in a redirect datastream or WSDL text body ""http://local.fedora.server/fedora/risearch"" would be translated at runtime or at serialization time (depending on context) to ""http://localhost:8080/fedora/risearch"", and vice versa.  Now, with repository app server context (e.g. the '/fedora' part) a configurable option, the existing substitution mechanism breaks down.  Since it does NOT substitute local app server context, the app server context will remain an assumption hard-coded in the object and links will fail if the object is ingested into a repository with a different app server context.  That is to say, if an object contains ""http://local.fedora.server/fedora/risearch"", and is ingested into a repository that has app server context ""fedora32"", the resulting URL as dereferenced at runtime will be   ""http://localhost:8080/fedora/risearch"", which is WRONG.  It should be ""http://localhost:8080/fedora32/risearch.    This can be addressed by a) introducing a variable substitution for context only, as in ""http://local.fedora.server/local.fedora.context/risearch"" or b) abandoning explicit variable substitution, and adopt relative or absolute path conventions.  In the case of (b) suggested conventions as discussed at a recent committers meeting (http://fedora-commons.org/confluence/x/w4mv) are    - absolute paths are interpreted as belonging to the same server and port as the fedora instance (equivalent to current local.fedora.server substitution).  i.e. (""/saxon/transform?x=y"" might translate to ""http://localhost:8080/saxon/transform?x=y)   - relative paths are interpreted as belonging to the fedora app server context.  i.e. (""risearch?x=y"" might translate to ""http://localhost:8080/fedora32/risearch?x=y)  CAVEAT The general consensus was to go with (b), path conventions.  However, either (a) or (b)  presents a compatibility problem with previous versions of Fedora, in that objects exported and complying with (a) or (b) conventions will be broken if exported and ingested into any earlier Fedora version.  The reason for this is that earlier fedora versions would not support either expansion scheme, and would not be able to interpret the URLs appropriately.  At present, there doesn't seem to be a good way to support differing app server contexts and link expansion without breaking compatibility.  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-487,Implement relative-path solution to deployment-independantlinks,"Implementing solution (b) from FCREPO-486.  Will adopt relative-path conventions to signify URLs that point within the fedora app server context, or outside it (but on the same server/port).  Will use following conventions: absolute path = same server port, but NOT in app server context relative path = in app server context  Notes: - This solution will, at a minimum,  affect WSDL interpretation, object translation, and validation. - relative URLs were previously NOT allowed in referenced content datastreams.  This will force exported foxml using the relative-path conventions to be INCOMPATIBLE with previous fedora versions. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-678,SPARQL queries with filter condition on xml:lang don't work,"The following sparql query uses a filter to select all the objects having the dc:title expressed in italian (""it"") language:  select ?o ?t from <#ri>  where {?o <dc:title> ?t . filter( langMatches( lang(?t), ""it"") )}  The query executed by http://localhost:8080/fedora/risearch returns 0 results, while the same query without the filter condition gives the following results: (note: there are several nodes with xml:lang = 'it')  <sparql xmlns=""http://www.w3.org/2001/sw/DataAccess/rf1/result"">   <head>     <variable name=""o""/>     <variable name=""t""/>   </head>   <results>     <result>       <o uri=""info:fedora/shoah:45651""/>       <t xml:lang=""it"">Intervista a Aldo Isaia Zargani, Rome - Italy</t>     </result>     <result>       <o uri=""info:fedora/shoah:41732""/>       <t xml:lang=""en"">Interview with Miezyslaw Rudnicki, Rome - Italy</t>     </result>     <result>       <o uri=""info:fedora/shoah:24954""/>       <t xml:lang=""en"">Interview with Leo Lev Zelikowski, Montreal - Canada</t>     </result>     <result>       <o uri=""info:fedora/shoah:44169""/>       <t xml:lang=""it"">Intervista a Franco Bemporad, Florence - Italy</t>     </result>    [CUT]  Which is the correct way to filter on xml:lang with sparql/Mulgara in Fedora 3.1?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-488,Consistent Exception Handling,"Exception handling practices need to be defined and applied consistently to the codebase.  Look at ""Effective Java Exceptions"" as an example.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-489,WSDL Discrepencies,"There is a discrepancy between the wsdl generated by fedora, and the wsdl generated by axis. i.e. http://host/fedora/services/access?wsdl and http://host/fedora/wsdl?api=API-A.  Why is that? Is this actually a bug or by design. There really isn't much documentation on consumption of the services as well, so maybe that would help.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-490,"APIA Consumption Error (SOAP Error) with .NET, invoking FieldSearch","Using the wsdl at: http://host/fedora/services/access?wsdl, and using FieldSearchQuery.conditions and Condition.@operator, property, and value combinations, the service returns ""org.xml.sax.SAXException: Found character data inside an array element while deserializing.""  This may be an issue with the WSDL or it may be an issue with how .NET is creating the proxy class, but either way, it doesn't work.   --------  Code:  FedoraAPIAService a = new FedoraAPIAService(); FieldSearchQuery fsq = new FieldSearchQuery();  Condition c = new Condition(); c.@operator = ComparisonOperator.has; c.property = ""subject""; c.value = ""*"";  fsq.conditions = new Condition[] { c };  string[] sr = { ""pid"", ""title"", ""subject"" };  FieldSearchResult fsr = a.findObjects(sr, ""50"", fsq);  --------  When using ""terms"" it doesn't work either. Also, if I use the fedora generated WSDL, .terms and .conditions doesn't exist. There is just a .Items property.  When I pass a condition object to this, the proxy throws an in appropriate type exception.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-491,fedora-export.sh fails when selecting 'archive' as the context with the two FOXML formats,"login-bryan:; fedora-export.sh fedora.icpsr.umich.edu:80 fedoraAdmin XXXXXXXX icpsr-test:study8475 info:fedora/fedora-system:FOXML-1.1 public . http Starting Fedora Exporter... Exporting icpsr-test:study8475 to ./icpsr-test_study8475.xml Exported icpsr-test:study8475  Works just fine.  login-bryan:; fedora-export.sh fedora.icpsr.umich.edu:80 fedoraAdmin XXXXXXXX icpsr-test:study8475 info:fedora/fedora-system:FOXML-1.1 archive . http Starting Fedora Exporter... Exporting icpsr-test:study8475 to ./icpsr-test_study8475.xml [Fatal Error] :427:3: The element type ""foxml:datastreamVersion"" must be terminated by the matching end-tag ""</foxml:datastreamVersion>"". ERROR: org.xml.sax.SAXParseException : The element type ""foxml:datastreamVersion"" must be terminated by the matching end-tag ""</foxml:datastreamVersion>"". Exported icpsr-test:study8475  Fails with FOXML-1.0 too.  If I use the METS or ATOM formats, everything works OK.  The object is here:  http://fedora.icpsr.umich.edu/fedora/get/icpsr-test:study8475 ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-492,"Allow DC, RELS-EXT, etc, to be Managed Content","At the moment, all special datastreams for Fedora are assumed to be inline XML.  But it shouldn't matter to Fedora whether they're inline or managed.  In particular, if they're allowed to be managed content, memory requirements can be drastically reduced in situations where many revisions to such datastreams exist within an object.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-493,Migrate Fedora's Builds to Maven,Use m2 instead of ant.  Initial scope is for the repository distribution.  Services can come afterward.  Notes from initial discussion: http://fedora-commons.org/confluence/x/Joiv,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-494,"FieldSearch query connections held unnecessarily, leading to connection pool exhaustion","While using Fedora Administrator and after performing lots of operations on objects (i.e. viewing, updating, purging...) the client hangs up and the progress bar shows ""Find Objects..."".   After calling netstat on the server, the list shows 100 sockets in CLOSE_WAIT state. [100 - default value of 'maxActive' instances in the connection pool] ...lines... 89  tcp        1      0 ::ffff:127.0.0.1:43562      ::ffff:127.0.0.1:3306       CLOSE_WAIT  ...lines... Mysql server (in this case) shows no open connections, so the problem occurs on the application side as the number of maximum active connections have been reached .  The same thing happens while using external Tomcat, Jetty and JBoss instead of included tomcat.  Furthermore, the connections become hanged regardless of the database (tested MySql, McKoi from fedora3.1 distribution and Derby from 3.2).  The problem came out during a writing of a java connection client to the repository with the usage of FedoraAPIA and FedoraAPIM from the FedoraClient class.   Increasing the maximum number of active instances in pool (for instance up to 3000) will not solve this problem, as a scenario causing this bug to come up can be easily found (e.g. lots parallel client calls).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-495,Allow the REST API to stream datastreams directly into the backend store,"Based on the current implementation of the Management interface, the REST API must push datastreams into a temporary file before calling addDatastream or modifyDatastream. If, instead, the Management interface provided a way to pass the stream directly, the file could be stored into the final storage location directly, eliminating the need for an extra store and retrieve step. This would be of great benefit to those needing to do bulk loading activities.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-496,Permgen grows when Fedora deployed/undeployed w/o restarting Tomcat,"Reported by Graham Triggs:  When repeatedly deploying/undeploying the Fedora webapp (without restarting Tomcat), the JVM permgen size continues to grow.  This can lead to an eventual out-of-memory condition.  This is caused by a failure of classes to be unloaded.  Graham has seen this before, and has dealt with it by using a ""cleanup context listener"" that gets invoked at shutdown time.  Part of this is due to JDBC drivers not being automatically unregistered when the webapp is stopped (this is what the attached java file deals with).  Part also appears to be caused by a JAXP DocumentBuilderImpl reference that is being held by a ThreadLocal.  This reference hasn't been tracked down fully yet.  While investigating this issue, Graham came across a flaw in the shutdown code that can prevent clean shutdown if ManagementModule doesn't shut down properly:  ""...during the shutdown code, the ManagementModule hadn't been fully initialised, so it was then throwing an exception during shutdown (not an MSE), so all the remaining modules never had their shutdown code called (and so the Thread wasn't stopped, and Tomcat couldn't stop).  The local fix is to add a null check to ManagementModule's shutdown procedure:      public void shutdownModule() throws ModuleShutdownException {         if (invocationHandlers != null) {             for (AbstractInvocationHandler h : invocationHandlers) {                 h.close();             }         }     }  Thus preventing an NPE that can occur. Although the shutdown method in Server should probably be more defensive and catch Throwables (not just MSEs) to ensure that all remaining modules are at least attempted to be cleaned up.""",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-497,Content disposition header for filename.extension downloads of datastreams,"Suggested by Matt Zumwalt at OR09:  To allow people to use a preferred filename and extension when downloading datastreams from Fedora, the REST API should provide a Content-Disposition HTTP header that includes the preferred filename and extension.  The filename can come from the datastream label, if provided.  The extension can either come from the datastream label (if provided), or a mime-type-to-extension map that's configurable on the server.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-498,Use c3p0 and move away from dbcp for Fedora's connection pooling,"Suggested by AaronZ at OR09.  Apache's DBCP has problems, c3p0 is better.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-499,Optional schema (xsd) validation on ingest,"Fedora doesn't do validation of arbitrary datastreams at ingest time, but this is a commonly requested feature.  Fedora should allow one to configure whether to xsd-validate datastreams at ingest time.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-500,Support for PUT/POST/DELETE (writable) disseminators,"To support a wider array of use cases, Fedora should allow PUT/POST/DELETE verbs to be used in disseminators.  See related issue: FCREPO-405",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-501,Fedora as WAR without need to run installer,"Based on a discussion BillB, ChrisW, TimD, Asger, and others had at OR09:  Move toward having a war file for Fedora that doesn' t need to be modified.  1) Make AuthN stuff plug in via an always-configured servlet filter that delegates to what's configured 2) Don't use Tomcat for SSL (recommend Apache for this) 3) Make ""fedora home"" conventionally at /fedora (and don't include it in the war by default)  There was also some discussion that needs to be further rationalized re: running multiple Fedoras in one Tomcat.  A couple ways to go:  a) require that people edit the war file in these cases (to point to a different fedora.fcfg) b) have a convention where it's stored in /fedora/config/fedora-context.fcfg  Looking at this again, I like a) because it seems to be needed anyway if people need to install in a dir that isn't /fedora (e.g. /usr/local, or whatever convention their sysadmin uses)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-502,Eliminating demo-object dependencies on external hosting,"This issue is to address the dependency that the demo-objects, and hence the unit tests, have on externally hosted content. This makes the builds vulnerable to the availability of other systems.  Note: The reason this issue has higher priority is because with the current demo-objects, not all ConfigB tests pass (fedora.test.api.TestXACMLPolicies) since demo:31 refers to an item not currently available (http://www.fedora-commons.org/demo/misc/batikBatik.svg).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-503,Installer defaults to deprecated oracle.jdbc.driver.OracleDriver,"When performing a custom installation on the Oracle platform, the default driver is oracle.jdbc.driver.OracleDriver.  In current Oracle JDBC releases, this has been deprecated / removed. The default should be updated to oracle.jdbc.OracleDriver",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-504,Allow Fedora to be deployed as a generic WAR,"From Asger Blekinge-Rasmussen:  (In a discussion at OR'09) we came up with a total redesign of the fedora install procedure. Here goes, from memory:  1. Fedora is just a .war file. There is no installer. (Distribution includes the Fedora WAR and Fedora.fcfg file.) 2. You install said war file in a tomcat. (Renaming the WAR file as necessary to indicate the preferred context name) 3. Upon init of the war file, fedora reads /fedora/fedora.fcfg, or another location specified in the war file's web.xml (or specified by command line or environment variable) 4. This config file specifies, among all the things it already does, the Fedora Home dir. 5. If this dir does not exist, it is created and populated with the nessesary stuff from the war file.  The purpose of the current installer is primarily to set up the web.xml. That settings have to be set up in the web.xml is unfortunate, but unavoidable. (The installer also creates and moves files to fedora home, but this can be done during WAR startup.)  The features that are set up, again from memory: 1. SSL endpoints 2. Other endpoints 3. Servlet filters for Authentication  As far as we could establish, the SSL endpoints are somewhat odd, since people would probably use the tomcat in SSL, rather that the specific web application.  The other endpoints, we envisage, are default enabled. The fedora.fcfg specify which class should handle requests for each endpoint, and thus certain endpoints could have stub  implementations per default.  Preferences which were used to set up the servlet filters in the installer could be added to fedora.fcfg then read by a single filter which is always available.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-505,Fedora ontology casing,"Two relationships specified in the Fedora ontology (http://www.fedora.info/definitions/1/0/fedora-relsext-ontology.rdfs) have inconsistent casing:  HasDescription HasMetadata  All the other relationships start with a lower-case character (e.g. hasPart, isAnnotationOf).  This will potentially cause some confusion, since RDF is case-sensitive.   ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-506,Fedora Client does not bundle the xpp3_min-* jar,"Fedora client bundles these libs   <pathconvert pathsep="","" property=""client-libs.list"">     <path id=""client-libs.path"">       <pathelement location=""${lib.activation}"" />       <pathelement location=""${lib.axis}"" />       <pathelement location=""${lib.batik}"" />       <pathelement location=""${lib.commons-codec}"" />       <pathelement location=""${lib.commons-dbcp}"" />       <pathelement location=""${lib.commons-discovery}"" />       <pathelement location=""${lib.commons-httpclient}"" />       <pathelement location=""${lib.commons-logging}"" />       <pathelement location=""${lib.log4j}"" />       <pathelement location=""${lib.commons-pool}"" />       <pathelement location=""${lib.getopt}"" />       <pathelement location=""${lib.jai_codec}"" />       <pathelement location=""${lib.jai_core}"" />       <pathelement location=""${lib.javamail}"" />       <pathelement location=""${lib.jaxrpc-api}"" />       <pathelement location=""${lib.jhbasic}"" />       <pathelement location=""${lib.mulgara}"" />       <pathelement location=""${lib.openrdf-model}"" />       <pathelement location=""${lib.saaj-api}"" />       <pathelement location=""${lib.saxon}"" />       <pathelement location=""${lib.slf4j-api}"" />       <pathelement location=""${lib.slf4j-jdk14}"" />       <pathelement location=""${lib.sunxacml}"" />       <pathelement location=""${lib.trippi-core}"" />       <pathelement location=""${lib.wsdl4j}"" />       <pathelement location=""${lib.xerces}"" />       <pathelement location=""${lib.xml-apis}"" />     </path>     <map from=""${lib.dir}${file.separator}"" to="""" />   </pathconvert>   <fileset dir=""${lib.dir}"" id=""client-libs.fileset"" includes=""${client-libs.list}"" />  XmlPullParserException, which is used by trippi which is used in the risearch interface in the fedora client recide in xpp3_min as shown by this stacktrace  Caused by: java.lang.NoClassDefFoundError: org/xmlpull/v1/XmlPullParserException         at org.trippi.TupleIterator.fromStream(TupleIterator.java:152)         at fedora.client.FedoraClient.getTuples(FedoraClient.java:681)         at net.sourceforge.ecm.repository.FedoraSoapImpl.query(FedoraSoapImpl.java:337)  Thus you cannot use the fedora client getTuples method until this jar is bundled. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-507,Simple Manual Multiplexing,"Allow managed content to be sent to a client-selected store on the backend.  The requirement for this feature would be that the logic can occur ""above"" Fedora.  So there needs to be a way to signal Fedora on a per-managed-datastream basis, which backend store the content needs to be saved in.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-508,Easy-to-use integration with Djatoka JPEG 2000 service,Look into ways   http://sourceforge.net/apps/mediawiki/djatoka/index.php?title=Fedora_Integration,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-510,"With AuthZ off, REST API allows execution of unauthenticated requests","I'm playing with our Fedora 3.2 instance and the REST API.  I'm using the Firefox Poster add-on to do an http POST of some simple valid FOXML to the (example) http://fedorabox:8080/fedora/objects/newpid:foobar  URI and am running into problems.  The first time I attempt to do the POST, I get the error ""The PID 'newpid:foobar' already exists in the registry; the object can't be re- created."" even though it is a brand new object.  However, if I search Fedora for the object, I do find it was created.  When I look through the logs, I see that Fedora tries to create the object twice with this one request.  If I try to POST a second object with a new pid and new FOXML, the requests succeeds without error.  Fedora only tries the ingest once.  My guess is that the initial authentication handshake with the first POST causes Fedora to attempt the ingest twice.  The second POST succeeds since the browser is already authenticated, and doesn't need to go through the handshake.  I ran into this because I have some client software that authenticates with every post (since it's not a browser) and I keep running into this problem.  I did not have this issue with 3.0 or 3.1.  I have included the stacktrace error below.  Has anyone else run into this?  Any help appreciated.  Thanks, Willy  javax.ws.rs.WebApplicationException: fedora.server.errors.ObjectExistsException: The PID 'newpid:foobar' already exists in the registry; the object can't be re-created.        at fedora .server.rest.BaseRestResource.handleException(BaseRestResource.java:122)        at fedora .server .rest.FedoraObjectResource.createObject(FedoraObjectResource.java:416)        at sun.reflect.GeneratedMethodAccessor109.invoke(Unknown Source)        at sun .reflect .DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 25)        at java.lang.reflect.Method.invoke(Method.java:597)        at com .sun .jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider $ResponseOutInvoker._dispatch(EntityParamDispatchProvider.java:157)        at com .sun .jersey .server .impl .model .method .dispatch .ResourceJavaMethodDispatcher .dispatch(ResourceJavaMethodDispatcher.java:67)        at com .sun .jersey .server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:124)        at com .sun .jersey .server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java: 71)        at com .sun .jersey .server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java: 111)        at com .sun .jersey .server .impl .uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java: 63)        at com .sun .jersey .server .impl .application.WebApplicationImpl._handleRequest(WebApplicationImpl.java: 555)        at com .sun .jersey .server .impl .application.WebApplicationImpl.handleRequest(WebApplicationImpl.java: 514)        at com .sun .jersey .server .impl .application.WebApplicationImpl.handleRequest(WebApplicationImpl.java: 505)        at com .sun .jersey .spi.container.servlet.ServletContainer.service(ServletContainer.java: 359)        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)        at org .apache .catalina .core .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java: 269)        at org .apache .catalina .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)        at fedora .server .security .servletfilters.FilterRestApiFlash.doFilter(FilterRestApiFlash.java:78)        at org .apache .catalina .core .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java: 215)        at org .apache .catalina .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)        at fedora .server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java: 234)        at org .apache .catalina .core .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java: 215)        at org .apache .catalina .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)        at fedora .server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java: 234)        at org .apache .catalina .core .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java: 215)        at org .apache .catalina .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)        at fedora .server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java: 234)        at org .apache .catalina .core .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java: 215)        at org .apache .catalina .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)        at fedora .server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java: 234)        at org .apache .catalina .core .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java: 215)        at org .apache .catalina .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)        at org .apache .catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java: 210)        at org .apache .catalina.core.StandardContextValve.invoke(StandardContextValve.java: 174)        at org .apache .catalina .authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)        at org .apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java: 127)        at org .apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java: 117)        at org .apache .catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java: 151)        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java: 870)        at org.apache.coyote.http11.Http11BaseProtocol $Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)        at org .apache .tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)        at org .apache .tomcat .util .net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java: 81)        at org.apache.tomcat.util.threads.ThreadPool $ControlRunnable.run(ThreadPool.java:685)        at java.lang.Thread.run(Thread.java:619) Caused by: fedora.server.errors.ObjectExistsException: The PID 'newpid:foobar' already exists in the registry; the object can't be re- created.        at fedora .server.storage.DefaultDOManager.getIngestWriter(DefaultDOManager.java: 909)        at fedora .server.management.DefaultManagement.ingest(DefaultManagement.java:136)        at sun.reflect.GeneratedMethodAccessor111.invoke(Unknown Source)        at sun .reflect .DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 25)        at java.lang.reflect.Method.invoke(Method.java:597)        at fedora .server .messaging .NotificationInvocationHandler .invoke(NotificationInvocationHandler.java:70)        at $Proxy0.ingest(Unknown Source)        at fedora.server.management.ManagementModule.ingest(ManagementModule.java: 338)        at fedora .server .rest.FedoraObjectResource.createObject(FedoraObjectResource.java:411)        ... 44 more",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-679,Issues in Fedora Commons installation,"Hello everyone,  I am looking for a fedora-commons forum or something like this for dummies-users like me.  It's the first time I try this software and I have done all procedures for quick and custom installation. First I have done all operations listed here for quick installation (see http://www.youtube.com/watch?v=Utoymym_yaI) but when i go to the page ""localhost:8080/fedora/describe"" I always get this message: "" javax.servlet.ServletException: Unable to get Fedora Server instance.The Fedora server is not yet running""- but ""Startup.bat"", the tomcat server, works fine.  What is my problem? There are problems with java 1.6? When i try custom installation for using postgresql i get the same error. I am pretty sure that the error is in the installation procedure...but where?? The guide online is too poor for users that have no experience with this environment... Thank you very much and sorry for my bad english.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-512,Extra Quotes Added to Literal RELS-EXT Values,When using the Fedora Administrator GUI application to add untyped literal objects to RELS-EXT relationships the literal value you supply is surrounded by quotes. On subsequent edits (or additions of other relationships) using the GUI the initial quotes are surrounded by yet another pair of quotes. The original quotes are then escaped and persisted. This happens as many times as you use the GUI to modify the relationships.      See attached screenshot for example.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-513,Document Fedora-DuraCloud Plugin (In release notes),Document/point to how to use DuraCloud as the/a backing store for Fedora.  Note that this option will require participation in the DuraCloud pilot program ... we don't yet know how folks will get involved in that.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-514,Bundled Derby database fails after period of usage.,"After a period of usage, Fedora 3.2.1 becomes sluggish and unpredictable.  Ordinary requests such as  http://127.0.0.1:8080/fedora/objects/new?label=test&ownerID=fedoraAdmin&state=A  Cause a StorageDeviceException, deriving from derby returning ""ERROR 40XL1: A lock could not be obtained within the time requested"".  See stack trace below.  There is still storage space on the device.  The errors only occur after I've used the image for a while (usually when I get to around 550 objects).  I am mostly running the test suites for active-fedora and ruby-fedora against it.   Fedora Spits out this error (after Fedora hangs for about a minute):  Jul 16, 2009 11:31:18 AM com.sun.jersey.server.impl.application.WebApplicationImpl onException SEVERE: Internal server error javax.ws.rs.WebApplicationException: fedora.server.errors.StorageDeviceException: Error attempting FieldSearch update of changeme:525   fedora.server.rest.BaseRestResource.handleException(BaseRestResource.java:122)   fedora.server.rest.FedoraObjectResource.createObject(FedoraObjectResource.java:416)   sun.reflect.GeneratedMethodAccessor75.invoke(Unknown Source)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   java.lang.reflect.Method.invoke(Method.java:585)   com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$ResponseOutInvoker._dispatch(EntityParamDispatchProvider.java:157)   com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)   com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:124)   com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:71)   com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111)   com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:63)   com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:555)   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:514)   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:505)   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:359)   javax.servlet.http.HttpServlet.service(HttpServlet.java:803)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   fedora.server.security.servletfilters.FilterRestApiFlash.doFilter(FilterRestApiFlash.java:78)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:234)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:234)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:234)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:234)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)   org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)   org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)   org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)   org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)   org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)   org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)   org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)   org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)   org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)   org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)   org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)   java.lang.Thread.run(Thread.java:613) Caused by: fedora.server.errors.StorageDeviceException: Error attempting FieldSearch update of changeme:525   fedora.server.search.FieldSearchSQLImpl.update(FieldSearchSQLImpl.java:256)   fedora.server.search.FieldSearchSQLModule.update(FieldSearchSQLModule.java:151)   fedora.server.storage.DefaultDOManager.doCommit(DefaultDOManager.java:1413)   fedora.server.storage.SimpleDOWriter.commit(SimpleDOWriter.java:443)   fedora.server.management.DefaultManagement.ingest(DefaultManagement.java:152)   sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   java.lang.reflect.Method.invoke(Method.java:585)   fedora.server.messaging.NotificationInvocationHandler.invoke(NotificationInvocationHandler.java:70)   $Proxy0.ingest(Unknown Source)   fedora.server.management.ManagementModule.ingest(ManagementModule.java:338)   fedora.server.rest.FedoraObjectResource.createObject(FedoraObjectResource.java:411)  ... 44 more Caused by: java.sql.SQLException: A lock could not be obtained within the time requested   org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)   org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)   org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)   org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)   org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)   org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)   org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)   org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)   org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Unknown Source)   org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:101)   fedora.server.utilities.SQLUtilityImpl.i_addRow(SQLUtilityImpl.java:264)   fedora.server.utilities.SQLUtilityImpl.i_replaceInto(SQLUtilityImpl.java:144)   fedora.server.utilities.SQLUtility.replaceInto(SQLUtility.java:91)   fedora.server.search.FieldSearchSQLImpl.update(FieldSearchSQLImpl.java:240)  ... 55 more Caused by: ERROR 40XL1: A lock could not be obtained within the time requested   org.apache.derby.iapi.error.StandardException.newException(Unknown Source)   org.apache.derby.impl.services.locks.ConcurrentLockSet.lockObject(Unknown Source)   org.apache.derby.impl.services.locks.AbstractPool.lockObject(Unknown Source)   org.apache.derby.impl.store.raw.xact.RowLocking3.lockRecordForWrite(Unknown Source)   org.apache.derby.impl.store.access.btree.index.B2IRowLocking3._lockScan(Unknown Source)   org.apache.derby.impl.store.access.btree.index.B2IRowLocking3.lockScan(Unknown Source)   org.apache.derby.impl.store.access.btree.LeafControlRow.growRoot(Unknown Source)   org.apache.derby.impl.store.access.btree.LeafControlRow.splitFor(Unknown Source)   org.apache.derby.impl.store.access.btree.BTreeController.start_xact_and_dosplit(Unknown Source)   org.apache.derby.impl.store.access.btree.BTreeController.doIns(Unknown Source)   org.apache.derby.impl.store.access.btree.BTreeController.insert(Unknown Source)   org.apache.derby.impl.store.access.btree.index.B2IController.insert(Unknown Source)   org.apache.derby.impl.sql.execute.IndexChanger.insertAndCheckDups(Unknown Source)   org.apache.derby.impl.sql.execute.IndexChanger.doInsert(Unknown Source)   org.apache.derby.impl.sql.execute.IndexChanger.insert(Unknown Source)   org.apache.derby.impl.sql.execute.IndexSetChanger.insert(Unknown Source)   org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow(Unknown Source)   org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore(Unknown Source)   org.apache.derby.impl.sql.execute.InsertResultSet.open(Unknown Source)   org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)  ... 63 more ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-515,Allow the API-M.getDatastream method of the REST API to be handled as if it were an API-A method for authentication purposes,"The API-M.getDatastream method, also known as getDatastreamProfile, provides information about a datastream similar to the way getObjectProfile provides information about an object. When API-A auth is off, the getObjectProfile method does not require authentication, but the getDatastreamProfile does, since it is part of API-M. This has caused quite a bit of confusion for users of the web administrator as they are allowed to search for and look at objects without an authentication prompt, but attempting to look at the datastream profile requires authentication (even though downloading the datastream content does not.) This odd behavior can be relieved by allowing getDatastreamProfile to be handled as an API-A method in the REST API for the purposes of authentication.  Of course, this brings up the question of whether this method really belongs in API-M and if it should be moved to API-A for the SOAP API as well. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-516,Fresh install of Fedora 3.2.1 missing Jena packages for successful Tomcat deployment?,"I've just done a fresh install of Fedora 3.2.1 using the internal Tomcat installation that is provided with Fedora.  The installation was completely successful, but when I start up Tomcat, an error in my logs:  Jul 20, 2009 3:56:12 PM org.apache.catalina.startup.HostConfig deployWAR INFO: Deploying web application archive fedora.war  ************************** ** FEDORA STARTUP ERROR ** **************************  Fedora startup failed fedora.server.errors.ServerInitializationException: java.lang.RuntimeException: fedora.server.Server.<init>(Server.java:665)  Digging through my fedora.log provided the following:  INFO 2009-07-20 15:55:01.842 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] (Server) Post-Initializing fedora.server.resourceIndex.ResourceIndexModule FATAL 2009-07-20 15:55:17.921 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] (Server) Fatal error while starting server java.lang.NoClassDefFoundError: com.hp.hpl.jena.graph.Node         at java.lang.J9VMInternals.verifyImpl(Native Method)         at java.lang.J9VMInternals.verify(J9VMInternals.java:69)         at java.lang.J9VMInternals.initialize(J9VMInternals.java:131)         at org.mulgara.resolver.LocalJRDFDatabaseSession.<init>(LocalJRDFDatabaseSession.java:134)         at org.mulgara.resolver.Database.newJRDFSession(Database.java:1022)         at org.mulgara.server.local.LocalSessionFactory.newJRDFSession(LocalSessionFactory.java:227)         at org.trippi.impl.mulgara.MulgaraSessionFactory.newSession(MulgaraSessionFactory.java:180)         at org.trippi.impl.base.ConfigurableSessionPool.grow(ConfigurableSessionPool.java:202)         at org.trippi.impl.base.ConfigurableSessionPool.<init>(ConfigurableSessionPool.java:61)         at org.trippi.impl.mulgara.MulgaraConnector.init(MulgaraConnector.java:158)         at org.trippi.TriplestoreConnector.init(TriplestoreConnector.java:24)         at fedora.server.resourceIndex.ResourceIndexModule.getConnector(ResourceIndexModule.java:137)         at fedora.server.resourceIndex.ResourceIndexModule.postInitModule(ResourceIndexModule.java:99)  So, it appears that the jena.jar package was not available to Tomcat.  A quick search on the machine returned no such package.  Downloading version 2.6.0 from jena.sourceforge.net and placing it in Tomcat's common/lib directory and doing a restart resolved the issue.  I am reporting this against Fedora 3.2.1 but it also occurred with 3.2 (and perhaps earlier versions, although I was running a 2.2.x instance prior to this so did not test others).  If I can provide any other information, please let me know.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-517,Way of testing requests for Authorization w/o running them,"Carsten Friedrich wrote to fedora-commons-developers on Jul 23 '09:  In many cases it would be good to know if an operation is allowed before it is attempted. Especially when designing a client application that talks to Fedora it can be quite frustrating for a user to fill in a large form only to learn when pressing ""submit"" that he is actually not allowed to perform this operation. Ideally the client tests this before displaying the form and disables it (or the submit button) to save the user the pointless effort. Can we add a policy API which allows users to do so?  It seems that this could be done with minimal effort since all the functionality is already there. All that's needed is to expose the authorization checks as separate web-service calls.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-518,Update documentation to reflect FCREPO-441 (RELS-INT),Update documentation wiki to include RELS-INT,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-519,Problem connecting a Nokia phone as mass storage device,"When I connect my Nokia 5300 phone as mass storage device I get: Jul 29 08:25:31 pc458345 kernel: usb 8-2: new full speed USB device using uhci_hcd and address 8                                        Jul 29 08:25:31 pc458345 kernel: usb 8-2: New USB device found, idVendor=0421, idProduct=04b9                                           Jul 29 08:25:31 pc458345 kernel: usb 8-2: New USB device strings: Mfr=1, Product=2, SerialNumber=3                                      Jul 29 08:25:31 pc458345 kernel: usb 8-2: Product: Nokia 5300                                                                           Jul 29 08:25:31 pc458345 kernel: usb 8-2: Manufacturer: Nokia                                                                           Jul 29 08:25:31 pc458345 kernel: usb 8-2: SerialNumber: 352734010324133                                                                 Jul 29 08:25:31 pc458345 kernel: usb 8-2: configuration #1 chosen from 1 choice                                                         Jul 29 08:25:31 pc458345 kernel: scsi9 : SCSI emulation for USB Mass Storage devices                                                    Jul 29 08:25:36 pc458345 kernel: scsi 9:0:0:0: Direct-Access     Nokia    Nokia 5300       0000 PQ: 0 ANSI: 4                           Jul 29 08:25:36 pc458345 kernel: sd 9:0:0:0: [sdb] 494080 512-byte hardware sectors: (252 MB/241 MiB)                                   Jul 29 08:25:36 pc458345 kernel: sd 9:0:0:0: [sdb] Write Protect is off                                                                 Jul 29 08:25:36 pc458345 kernel: sd 9:0:0:0: [sdb] Assuming drive cache: write through                                                  Jul 29 08:25:36 pc458345 kernel: sd 9:0:0:0: [sdb] 494080 512-byte hardware sectors: (252 MB/241 MiB)                                   Jul 29 08:25:36 pc458345 kernel: sd 9:0:0:0: [sdb] Write Protect is off                                                                 Jul 29 08:25:36 pc458345 kernel: sd 9:0:0:0: [sdb] Assuming drive cache: write through                                                  Jul 29 08:25:36 pc458345 kernel: sdb:                                                                                                   Jul 29 08:25:36 pc458345 kernel: sd 9:0:0:0: [sdb] Attached SCSI removable disk                                                         Jul 29 08:25:36 pc458345 kernel: sd 9:0:0:0: Attached scsi generic sg2 type 0                                                           Jul 29 08:25:37 pc458345 kernel: usb 8-2: reset full speed USB device using uhci_hcd and address 8                                     ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-520,Recommended use of entity references for special characters in web admin,"As reported by Richard Green on the dev mailing list, the web admin fails with an error when attempting to include encoded characters, using name encoding, within XML datastream content. Using number encoding for these characters works fine. See a list of name and number encodings here: http://www.ascii.cl/htmlcodes.htm.  As an example, adding the line <dc:rights>&#169; Fedora Commons</dc:rights> to a DC datastream works fine, but attempting to add <dc:rights>&copy; Fedora Commons</dc:rights> fails with the error ""The entity 'copy' was referenced but not declared"". A few name encoded characters do work (such as &lt; and &gt;) but most do not.  The same errors are thrown when attempting this through the swing admin.  A note from Peter Cliff on this issue:   You need to define entities with names (&copy;) etc.  See:  http://www.xml.com/pub/a/98/08/xmlqna2.html http://www.tizag.com/xmlTutorial/xmlentity.php  So my guess is that somewhere some XML parsing/creating is happening behind the scenes of that client and it is throwing the whole thing off when the XML processing fails on account of an undefined entity?  I couldn't find any entity definitions for the HTML named ones in the src/xsd/ (aside from the reference in xhtml1-strict.xsd). Do there need to be some?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-521,"Merge API-A and M across the board, simplifying AuthN",See FCREPO-515  This gets rid of the notion (over time) of two separate web-facing apis for Fedora (A and M). This needs to happen after FESL is integrated.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-522,DSIDs can now no longer terminate in .xml and behave properly,It is possible to create a new datastream terminating in .xml - eg file.xml  The html page for this datastream is unobtainable -> eg /objects/pid/datastreams/file.xml  as it incorrectly looks for a datastream without the .xml eg 'file' and states that 'file' doesn't exist.  /objects/pid/datastreams/file.xml.xml does resolve to the xml version of the file.xml ds properties.  ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-523,POST to /objects/pid/datastreams/dsid is counter-intuitive,"From the RFC for HTTP 1.1:  The POST method is used to request that the destination server accept    the entity enclosed in the request as a new subordinate of the    resource identified by the Request-URI in the Request-Line.     If a resource has been created on the origin server, the response    SHOULD be 201 (Created) and contain an entity which describes the    status of the request and refers to the new resource, and a Location    header (see section 14.30).  Whilst an initial create is conformant to the spec as the posted resource becomes GETable at an alternate location (/content), not returning a Location header is highly confusing for new users/developers.  POST for creation is typically reserved for POSTing to a collection URL, which will return a URL of the created resource (if created)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-525,User-facing utility for creating 3 special Fedora objects,"Cmodel, Sdef, SDep  Could be implemented as part of the Fedora WebAdmin GUI.  A simple form would be a big improvement.  Maybe leverage ezservice?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-526,DemoSOAPClient doesn't compile,"Greg Hamer wrote: ... I have tried unsuccessfully to run the Example SOAP Client (as documented here: http://www.fedora-commons.org/confluence/display/FCR30/Example+SOAP+Client )  Can anyone confirm for me that the ""Example SOAP Client"" can run successfully against  a ""Quick Install"" installation?  One error that I am getting is running compile-demo-soapclient.bat.  That is: %FEDORA_HOME%\client\demo\soapclient>compile-demo-soapclient.bat  The error returned is:  C:\apps\Fedora\client\demo\soapclient\DemoSOAPClient.java:243: cannot find symbol symbol : variable FEDORA_DEFAULT_CONTEXT location: interface fedora.common.Constants String context = Constants.FEDORA_DEFAULT_CONTEXT; ^1 error Finished compile of demo soap client.  Looking at Interface fedora.common.Constants I see no property FEDORA_DEFAULT_CONTEXT.  I do, however, see FEDORA_DEFAULT_APP_CONTEXT.  Might this be an error in the class DemoSOAPClient.java?  If yes, should I add this as an issue in the Bug Tracker?  Docs here for Interface fedora.common.Constants: http://fedora-commons.org/documentation/3.2/javadocs/fedora/common/Constants.html  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-527,Looser CModel-SDef coupling in the CMA,"In the current CMA model, the ""providesService"" arc from a CModel object to an SDef object is necessary in order to add additional methods to a set of objects.  But the two arcs from the SDep to the SDef and CModel are actually enough to tie these together implicitly.  Doing it this way could allow people to think about content modeling concerns (the ""stuff"" in the objects) as a separate activity from adding methods to a set of objects.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-528,Better Documentation/Examples on relationship API,"Update this page:  http://fedora-commons.org/confluence/display/FCR30/API-M#API-M-RelationshipManagement  With:  - Under the ""Relationship Management"" heading, make it clear and link to RDF (which relationships are allowed, difference in DC, etc). - In the params, make it clear which need to be URIs - Include examples in the doc (taken from JUnit)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-536,New supported database: Microsoft SQL Server,Idaho National Laboratory has successfully integrated Fedora with Microsoft SQL Server.  This item is to test and include their efforts into the baseline.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-530,Adding a RELS-EXT relationship with a literal object fails validation due to platform default character encoding,"SimpleDOWriter is converting between strings and bytes without specifying the character encoding - the platform default is used.  The original encoding is ignored resulting in invalid UTF-8 strings.  See this thread for more info, example code and a potential fix: http://sourceforge.net/mailarchive/forum.php?thread_name=439139C994945E41B9886BE89789549B01C5E07882%40EXNSW-MBX05.nexus.csiro.au&forum_name=fedora-commons-developers  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-531,CMA and server should support optional datastreams sensibly,"At present, Fedora's CMA does not formally allow optional datastreams.  It is very important to the Hydra Project (and I think to Asger's group in Denmark too?) that it should.  At present, because content models are not enforced, you can effectively have optional dss providing that you do not call an optional one that has not been implemented.  If you do call a missing ds I believe you get a 500 error.  We in Hydra would prefer that Fedora return an empty response ( eg <xml></xml>).  To match this, the content model definition would need to support something like:   <dsTypeModel ID=""techMetadata"" type=""optional"">              <form MIME=""text/xml""/>  </dsTypeModel>             This would make for very much simpler, more flexible, content modelling.  Example use case 1:  Hydra will define a common metadata object for all content.  This will contain all the dss that we think a good repository would want (locally an installation can, of course, supplement them).  One of these dss would be 'contentMetadata' which is applicable only to objects that of themselves can generate a splash page.  Better to have one metadata model with 'contentMetadata' optional than have to maintain two?  Example use case 2:  Hydra will define a 'simple image' content model which will be used to deliver the same image at a variety of resolutions.  There may or may not be a protected 'original' or 'archive' copy (possibly in a different format) in the same object.  Better one 'simple image' object with an optional archive datastream than to maintain two distinct models?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-532,"Get rid of "".xml"" shortcut on REST API","Ben O'Steen noted in FCREPO-522 that the .xml shortcut is problematic for the REST API's /objects/pid/datastreams/{dsid} (apim:getDatastream, which gets datastream metadata) endpoint.  It's problematic when the datastream id ends with .xml.  We discussed this on the Sept15th call and decided to get rid of the .xml shortcut as a solution.  This issue is to extend that, for consistency, across the REST API.  There are places where it's NOT problematic from a functional perspective, but the lack of consistency would be troubling from a design perspective.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-533,Add getContentModels and hasContentModel methods,"Please see background discussion here:  https://fedora-commons.org/confluence/display/DEV/mail/13140053  ---  As promised way back, I have patched Fedora with content model checks.  When original Fedora want to list the content models for an object, it queries all objects referenced through the hasModel relation. I have changed to code to use a getContentModels() method on the object. I have added a hasContentModel(ObjectNode cm) method, to check if an object has a given content model, a check that is performed often.  This change should not in any way change the behaviour of Fedora. It is a necessary prelude to adding inheritance to the content models, through.  The patch is attached. It is developed against trunk. It has been tested, but not extensively. Rather, the code changes have been reviewed.  Regards",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-534,"Out of box deployable war, without a separate installer","FCREPO-504 removed all customization/configuration from the war file, and placed it into FEDORA_HOME.  This allows a single generic war file to represent the fcrepo server, which can be deployed or upgraded independently from its configuration.  The role of the installer is to setup FEDORA_HOME, as well as define the mapping between the fcrepo server war files the FEDORA_HOME directory.  The fcrepo server war file depends on FEDORA_HOME existing in order to function  This task shall allow the fcrepo war file to self-bootstrap a FEDORA_HOME without the need to explicitly run a separate installer.  This could be achieved by either (a) automatically deploying a default configuration to a known or temporary directory or (b) having some functionality in the war file that effectively fulfills the role of an installer complete with option selection",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-535,"Implement addRelationship, etc methods to complete REST API","See this page for which:  https://fedora-commons.org/confluence/display/FCR30/REST+API  This is a prereqisite to completing the REST interface.  We need to have a story about why a method isn't supported anymore, or it needs to be implemented.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-537,"Certain ingests may report failure, but retain the object in the registry, filesystem, and RI in an unreadable state.","The error occurred again, and this time we are able to reproduce it.  As  far as I can tell, it looks like when Fedora checks and verifies that a  foxml file is well-formed, it then creates a stub object, then checks  the datastreams.  If validation of the datastreams fails under certain  conditions, Fedora returns an error, but leaves the stub object in the  file system and in the database.  To reproduce this: The steps to reproduce the error are (using attached files)  1. Compare the content of DemoFail.xml and DemoSuccess.xml. They should  differ only in the location of the attribute xmlns:xlink: on the element <foxml:digitalObject> (DemoFail) or <mods:mods> (DemoSucess).  2. Ingest object demo:failObject from DemoSuccess.xml; it should be  successful.  3. Purge the object demo:failObject.  3. Ingest object demo:failObject from DemoFail.xml; it will fail because  of the location of the xlink namespace declaration.  4. Since the object was not ingested, try to repeat step 2. It will fail  with an ObjectAlreadyInLowlevelStorageException. At this point, you can  neither ingest nor purge the object demo:failObject. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-539,Fedora-system owl ontology,Although the Fedora-system relationships and properties are documented here:  http://fedora-commons.org/confluence/display/FCR30/Triples+in+the+Resource+Index  ...it would be helpful if they were expressed in owl as well.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-540,REST API support is broken (Jersey error),Sample stacktrace from attempting to ingest a demo object via the REST API  SEVERE: The ResourceConfig instance does not contain any root resource classes. ERROR 2009-10-09 15:35:18.619 [http-8080-2] ([/fedora]) StandardWrapper.Throwable com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.   com.sun.jersey.server.impl.application.WebApplicationImpl.processRootResources(WebApplicationImpl.java:613)   com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:492)   com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:319)   com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:652)   com.sun.jersey.spi.container.servlet.ServletContainer.load(ServletContainer.java:540)   com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:207)   org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1172)   org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:808)   org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)   org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)   org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)   org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)   org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)   org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)   org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)   org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)   org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)   java.lang.Thread.run(Thread.java:613) ERROR 2009-10-09 15:35:18.620 [http-8080-2] ([RestServlet]) Allocate exception for servlet RestServlet com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.   com.sun.jersey.server.impl.application.WebApplicationImpl.processRootResources(WebApplicationImpl.java:613)   com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:492)   com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:319)   com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:652)   com.sun.jersey.spi.container.servlet.ServletContainer.load(ServletContainer.java:540)   com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:207)   org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1172)   org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:808)   org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)   org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)   org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)   org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)   org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)   org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)   org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)   org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)   org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)   java.lang.Thread.run(Thread.java:613) ,legacy - OSGi,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0
FCREPO-541,"Drop unused control group ""B"" from FOXML schema","This was added to the FOXML schema back in '05, but has never been used or defined.  It should be dropped from both the 1.0 and 1.1 schema.  http://fedora-commons.svn.sourceforge.net/viewvc/fedora-commons/fedora/trunk/server/src/main/resources/xsd/foxml1-0.xsd?revision=2848&view=markup",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-542,fedora.home context-param is required,"as of rev 7921 (FCREPO-68), the fedora.home context-param is effectively required, although fedora.server.ServerController.init() and fedora.common.Constants.FedoraHome.getValue() suggests otherwise:  Determines the value of ""Fedora Home"" based on the          * servlet.fedora.home system property (checked first)          * fedora.home system property (checked next) or the          * FEDORA_HOME environment variable (checked last).  However, ServerController.init() uses System.setProperty on the key ""servlet.fedora.home"" to the value of the fedora.home context-param defined in web.xml. If the context-param is not present in web.xml, a NullPointerException is raised (since getServletContext().getInitParameter(""fedora.home"") would return null). If the context-param is empty, servlet.fedora.home is set to the empty string and the other two options (fedora.home system property and FEDORA_HOME environment variable) are never evaluated. Effectively, the fedora.home context-param is the only way to define ""Fedora Home"".",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-543,Stabilize REST API (non-beta),"In order to consider the REST API stable (non-beta), we need to finish several pieces of it and make sure certain bugs are addressed.  After this point, we will not make backward-incompatible changes without giving sufficient warning to users.  Ideally, this means marking functionality as deprecated for a release, so people have time to adjust their client code.  In the committer discussion on Nov 10 '09, we agreed that stabilizing the REST API does *not* require that the relationship-related methods are exposed in it.  A future version of Fedora may extend the REST API to add these.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-548,WADL distributed with Fedora doesn't work,Kai noticed this...need to look into it futher.  Would be nice to verify that this works in time for 3.3.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-549,"RELS-EXT is not validated on creation, only validated when updated","See recent report on dev list from Richard Jones for Fedora 3.2  Reproduced on 3.2.1 and on the trunk (post RELS-INT integration).  Richard reports that adding a new RELS-EXT datastream using the REST API with a dateTime literal that is invalid, eg 2009-10-05T16:02:26+0100, is not validated.  However updating the datastream (eg adding a new relationship) then results in a validation error.  Reproduced using the admin client (so this is not limited to the REST API): create a new object, add RELS-EXT with invalid date time, does not result in a validation error.  However subsequently amending RELS-EXT does throw a validation error.  The bug is not limited to dateTime, this also occurs for integer values (eg 1.23 is allowed), and also occurs when adding relationships with predicates that are not allowed in RELS-EXT, so it would appear that RELS-EXT is not validated at all when it is created for the first time.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-550,Change bundled Tomcat to v6.0,"A lot of people are starting to use Tomcat 6 now, esp. with OSGi.. we need to move to Tomcat 6 as the default/tested bundled servlet container for Fedora.  Doing this will probably involve switching some lib dependencies.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-551,Akubra replaces LLStore as primary blob storage abstraction,"In Fedora 3.2, Akubra was integrated as an implementation of the LLStore interface.  This work completes the transition to Akubra as the primary blob storage abstraction in Fedora by:  - Removing the LLStore Module and replacing it with an Akubra-based one - Ensuring that blob size is exposed via the API (to support FCREPO-64)  To ensure a smooth transition for existing Fedora users, it MUST be possible to:  - Continue using old LLStore implementations with Fedora   (so an Akubra implementation backed by an LLStore implementation can be used for at least a release, while LLStore is being deprecated) - Migrate from any Akubra impl to any other Akubra impl (combined with the above, this makes it possible to migrate from LLStore-based storage to straight Akubra-based storage).  This is also useful for migrating storage wholly from one impl to another; a useful function in itself.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-552,Configurable parameters for the Fedora internal http client,"I ran into a curious performance issue when several students were testing a digital collection interface we have developed.  When all the students accessed the same search results page at the same time (a ""canned"" search page), the application would freeze up for several minutes.  The search results page contained 10 thumbnails, all of which were served up by Fedora via a disseminator.  After several hours of targeted load testing and debugging, I narrowed down the source of the problem to communication between Fedora and the backend web service that delivers the thumbnails.  I started digging through the source code, and found fedora.common.http.WebClient:  public class WebClient {      /** Seconds to wait before a connection is established. */     public int TIMEOUT_SECONDS = 20;      /** Seconds to wait while waiting for data over the socket (SO_TIMEOUT). */     public int SOCKET_TIMEOUT_SECONDS = 120;      /** Maxiumum http connections per host */     public int MAX_CONNECTIONS_PER_HOST = 5;      /** Maxiumum total http connections */     public int MAX_TOTAL_CONNECTIONS = 20;      /** Whether to automatically follow HTTP redirects. */     public boolean FOLLOW_REDIRECTS = true;      /**      * Maximum number of redirects to follow per request if FOLLOW_REDIRECTS is      * true.      */     public int MAX_REDIRECTS = 3;   ... }  Suspecting that Fedora had run out of connections for making requests to my backend web service, I manually changed WebClient.java to bump up MAX_CONNECTIONS_PER_HOST to 256, and MAX_TOTAL_CONNECTIONS to 256, recompiled, then put the changed class file in place, restarted Tomcat, and re-executed my load tests.  The problem disappeared.  I'd like to request the following features be added to a future release of Fedora:  1.  Make the internal web client parameters configurable in fedora.fcfg (TIMEOUT_SECONDS, SOCKET_TIMEOUT_SECONDS, MAX_CONNECTIONS_PER_HOST, FOLLOW_REDIRECTS, MAX_REDIRECTS)  2.  Throw a meaningful exception that can be captured in the logs whenever one of the above constraints is exceeded. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-553,Standard SPARQL Protocol Endpoint,"Fedora's risearch interface supports SPARQL the query language if the underlying triplestore (Mulgara) does.  However, having a standard SPARQL endpoint for the repository would be better.  Discussed at October Special Topic meeting with Paul Gearon.  Note that when you configure Fedora to use Mulgara in remote mode, it is already possible to use Mulgara's SPARQL endpoint directly.  This feature is about having a standard (or discoverable?) SPARQL protocol endpoint for any Fedora repository, whether the underlying triplestore is embedded or not.  One method we've discussed that would support discoverability of this interface is to provide the URI of the endpoint in the Fedora ""describe"" API response.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-556,Implement REST method/service invocation (was: getDissemination),17 nov 2009 Committer Call: GET/POST /objects/{pid}/methods/{sdef}/{method} : invokes method GET /objects/{pid}/methods/{sdef} : lists methods defined in sdef,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-558,Implement REST method compareDatastreamChecksum,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-562,AUDIT datastream does not archive the values changed,"Methods like modifyObject modifies non-versionable fields in a object (state, label, owner). Modify datastream can do the same, as not all fields are part of a datastream version.  The AuditRecord does not at present archive the old values (or even the call parameters), making it impossible to get the previous value of the field. I propose that we adment the audit record with information about the fields changed. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-563,Alternative REST api,"I proposed an alternative for the existing REST api, detailed here http://fedora-commons.org/confluence/display/DEV/Alternative+REST+API  It is just the specification at the moment, not an implementation. I would like it to live alongside the current REST api, and perhaps, at a later date replace it.   There is a discussion of the proposal at http://www.mail-archive.com/fedora-commons-developers@lists.sourceforge.net/msg00545.html  I do not envisage this API to be done by Fedora 3.3",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-564,Eclipse build is broken,"In the course of migrating our build from Ant to Maven (viz. FCREPO-394), Fedora no longer builds correctly in Eclipse. I believe this should be treated as a regression. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-565,"Drop ""Lite"" APIs (API-A-Lite/API-M-Lite)","After the REST API is functionally complete, it will be unnecessary and confusing to have the old ""Lite"" APIs.  They should be noted as deprecated for a release, then removed.  As of Dec 09, functionality that does not yet exist in the REST API, but is included in the ""Lite"" apis, includes:  - describeRepository (we have discussed having this be a dissemination on a special, well-known object.  Another option I'd like to consider is whether the info provided here can be reasonably provided via a GET on /fedora/objects?format=xml)...if we consider the /fedora/objects resource to be representative of the repository)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-566,Trunk fails to build on Windows if path contains spaces,Building fails on Windows if the path contains spaces.  Not tested if this is also the case on Linux.  Building with:    mvn clean install and    mvn install -P fedora-installer  The actual error shown is:  30-Oct-2009 09:43:07 org.apache.axis.utils.JavaUtils isAttachmentSupported WARNING: Unable to find required classes (javax.activation.DataHandler and javax .mail.internet.MimeMultipart). Attachment support is disabled. [INFO] ------------------------------------------------------------------------ [ERROR] BUILD ERROR [INFO] ------------------------------------------------------------------------ [INFO] Error generating Java code from WSDL.  Embedded error: Error running Axis C:\work space\fedora-repository\resources\fedora-types.xsd (The system cannot fi nd the file specified),legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-567,Maven target/goal(s) for building all distribution files and md5s,"We need to have a working, documented way of building all distributable artifacts for the Fedora release.  Right now it's possible to build the installer, but we also need to distribute (at least):  - a source code release (zip) - the fedora-messaging client - the fedora-journaling-rmi receiver jar - an associated .md5 checksum file for each distributed file  The automatically-built filenames should be exactly the filenames we want to distribute.  We need: 1) A decision on which exact files and filenames we're distributing for 3.3 2) An automatic way to generate them, as build goals/targets 3) Documentation of how to generate them, in the ""Build the final distribution"" section of the ""Fedora Release Process"" document at http://fedora-commons.org/confluence/display/FCREPO/Fedora+Release+Process",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-568,json output format for risearch ,"risearch supports plain and delimited text, and Sparql as output formats.  Adding JSON would streamline the incorporation of risearch results into tools on other platforms, particularly so if support for JSONP callbacks were included.  Depending on the future of risearch, this may be dependent on http://fedora-commons.org/jira/browse/FCREPO-553",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-569,fedora/risearch GET query returns incorrect result when querying on literal object that contains multibyte utf-8 sequences,"Issuing a ""GET"" iTQL query to fedora/risearch, constraining the object on a string literal that is a multibyte utf-8 string returns incorrect results.  To reproduce, create an object with the following relationship in RELS-EXT:  (the byte sequence for the literal below is 0xE2, 0x80, 0x9C, 0xCE, 0x910x20, 0xC2, 0xBF, 0xE2, 0x80, 0x9D which is: left double quotes; capital alpha; space; inverted question mark; right double quotes)  <info:fedora/some:pid> <urn:bar> '""?  ""'  The sample iTQL query for this is: select $s from <#ri> where $s <urn:bar> '""?  ""'  Issuing this in the fedora/risearch web interface (ie via POST) works fine - the tuple is returned.  The GET version of this is as follows (url-encoded) http://localhost:8080/fedora/risearch?query=select+%24s+from+%3C%23ri%3E+where+%24s+%3Curn%3Abar%3E+%27%E2%80%9C%CE%91+%C2%BF%E2%80%9D%27&type=tuples&lang=itql&flush=true&format=Sparql  This returns no results.  This currently impacts integration tests for example fedora.test.api.TestRelationships.testAddRelationship() when tests are added for multibyte utf-8 literals.  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-570,Add methods to SOAP API for manipulating RELS-INT relationships,"The SOAP API contains methods for manipulating relationships in RELS EXT.  These could either be extended, or new methods created, for relationships in RELS-INT.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-571,Custom db - SQL Interface on Fedora objects,"For speed reasons we wanted a database that contains a part of the information Fedora contains in its foxml objects. We had considered gSearch and tried Mulgara, but came into problems. I longed for a database, as they are best for the kind of use-case we were saddled with. I came up with an idea and looked at Fedora's ability to do this for the dublin core datastream. I figured that it would be easy to extend that feature a bit, so that Fedora might do it for any kind of metadata. This was indeed not too difficult and with a few extra classes and a only a few changes of the original code this was realised.   The idea is that DefaultDOManager.dbspec is extended with this line:      <include href=""server/config/custom-db.xml"" />  Then in that file under the Fedora home config dir you can put your own database schema, which is an extension of the database schema used in the dbspec file. Of course you may then also add more include statements to the custom-db.xml file, so that you may configure parts of the database in separate files.  In the dbspec files the main setup is of tables which have columns. I have added values to those columns through defining value getters. Currently I have implemented only once such value getter that uses an xPath expression. The expression retrieves from the foxml or from a datastream of the foxml one or more values. This values getting code does not necessarily run for all digital objects. It is possible to choose one or more content models and/or datastream ids that must be present for the tables to be updated by the digital object, thus allowing for a tables to be updated only by a specific kind of digital object. Here is an example of table with two columns (not necessarily a practical example):  <table name=""easyFiles"" contentModel=""info:fedora/fedora-system:easyfile"" datastreamId=""file"">     <column name=""pid"" type=""varchar(64)"" notNull=""true"" index=""easyfile_pid"" binary=""true"">  <comment>The PID of the file object. Primary key of this table.</comment>     </column>      <column name=""filename"" type=""varchar(256)"" notNull=""true"" index=""filename"" default=""-"">         <value>              <valuegetter type=""xPath"" xPath=""//easyfile:filename"" nsPrefix=""easyfile"" nsUri=""http://easy.dans.knaw.nl/files"" delimiterType=""row"" />           </value> </column>  A table with the name ""easy_files""  is made that is filled for the digital obejcts that have the content model ""info:fedora/fedora-system:easyfile"" and have a datastream ""file"". The xPath expression ""//easyfile:filename"" runs over the file datastream and puts its values in the ""filename"" column. If multiple values are found it delimits those values by creating multiple rows (silly example I know).  The pid column must be present and is the only hardcoded column. It is maintained by the custom-db code.  As said before an xPath expression may return several values. For that two kinds of delimiters may be used. A row delimiter (meaning several rows are created for each value) and a normal delimiter (meaning a string value, by default a comma, is inserted after every value). Also a values tag may contain several valuegetter tags, which can be delimited in the same two ways. If two columns return two rows each those two column values are added together as one row. A possibility would be to add valuegetters for the second row that return a default value for that row if nothing was found, thus creating the possibility of composing rows almost any which way one wants.Of course one might also choose to use different types of valuegetters next to each other, but currently there is only the xPath implementation. The xPath implementation will typically cover most cases where somebody just wants to retrieve some basic information about their digital objects from a database. However, other types of implementations would be necessary if one would want to work with hierarchical data.   A pid must always be present, but does not need to be the primary key (primaryKey attribute of the table). It is up to the user how the data is composed into tables. Foreign keys may also be defined, though I found that I needed to fix a small bug in the code for this too work for PostgreSQL, since this code probably had been lying dormant in Fedora for years. I have tested this only with PostgreSQL, so I do not know if the Fedora code base has any more such bugs. My code did not need any addition to the Fedora database code except for this bugfix. One other advantage of having primary keys, foreign keys and also the notNull attribute is that if the values gotten from the foxml do not correspond to your database schema the database will thrown an exception which then makes it impossible to ingest the object. This is a free kind of data validation, though, admittedly, a bit weak. However using Fedora to do your database housekeeping is much more reliable than doing it yourself. If it gets in Fedora it gets into your database and if it didn't get in Fedora it didn't get into the database.  It's almost impossible for Fedora and the database to get out of sync. And if they do for some magical reason (get out of sync) one can still rebuild the database with the Fedora rebuild tool.  So with this simple system it is possible to do almost any kind of database synchronization based on Fedora data. I have seen many projects based on Fedora that employ a database alongside Fedora in order to speed up the querying process. I therefore think this might be useful for many such projects.  An extension to this would be possible through the search interface that comes with Fedora. It could be made to search through tables that the user defines. This wouldn't be a replacement of gSearch, but a simple alternative for those who need to achieve results quick. This was not needed for our project, since we use gSearch, so I have not taken the liberty to do so.   The attached source is based on the released source of Fedora 3.2.1. The code has been documented, optimized (for not doing the same stuph more than once) and tested (though unit tests are missing). The gist of it can be found under fedora.server.customdb.   Last but not least it should be mentioned that we use this feature already and have seen no problems with it so far. It also does not interfere in anyway with the normal functioning of Fedora. If one does not put anything in custom-db.xml then Fedora does not touch the custom-db code at all, so deciding to adopt this feature into the Fedora codebase does not endanger the overall project at all. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-572,melcoe-pep-server-config.wsdd should be a generated target,/melcoe-pep/base/melcoe-pep-server-config.wsdd is currently a static file rather than generated as is server-config.wsdd in FCREPO,legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-573,Maven-ize FeSL projects,"melcoe-pdp, melcoe-pdp, and fedora-jaas should be Mavenized",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-574,melcoe-pep unnecessarily depends on fedora-client.jar,"From what I can tell, the dependency is on fedora.common.Constants, so we need at most common.jar",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-575,Import FeSL projects into Fedora Commons source control,"Currently, the FeSL code is hosted at muradora.org. I think we need an svndump to import into a Fedora Commons vcs.  Probably Chi or Nish to do the dump (& filter) and Chris to do the import?",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-576,Remove dbxml or make it an optional dependency,"This has been discussed before, just making a note of it here. This should go hand-in-hand with the move to make policies first-class objects in the Fedora repository. Ideally, we'd give the repository manager the option to cache policies in memory or use dbxml for repositories with a lot of policies.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-577,Make XACML policies first-class Fedora digital objects,"Currently, policies are stored in dbxml. Policies should be first-class Fedora objects in the repository.  General feedback about the namespace for policy objects would be most welcome.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-578,Update version of Mulgara to 2.1.3 (or later),"Current version of Mulgara supported by Fedora 3.2.x is 2.1.1  If using an external instance of Mulgara, there is a bug in the REST interface, XML entities in the result set are not correctly encoded as entities (eg ""&"" in a literal in a result appears as ""&"" not ""&amp;"") which results in mal-formed XML documents.  This is fixed in Mulgara 2.1.3  - http://mulgara.org/release.html#v2.1.3  This is not an issue that directly impacts Fedora (eg RISearch behaves correctly, SPARQL results format correctly includes the XML entity.  However it does impact applications that want to directly query Mulgara using Mulgara's REST interface.  Presumably requires a Trippi upgrade as well.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-579,Api Method for creating new object,"A simple method for creating a new object, as opposed to ingest. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-580,Update Mulgara to 2.1.4,Update Mulgara to 2.1.4.  This includes updating Trippi to support 2.1.4,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-581,Default XACML policies involving localhost don't work in IPv6 environments,"Reported by several people on the list, most recently Alex O'Neill and Paul Pound:  http://permalink.gmane.org/gmane.comp.cms.fedora-commons.devel/1450  Christian Rohrer has verified that this can be fixed by adding the following after the similar 127.0.0.1 line in the relevant XACML:              <AttributeValue DataType=""http://www.w3.org/2001/XMLSchema#string"">::1</AttributeValue>  This should allow local connections to API-M by default, regardless of whether the loopback ip address is specified in the IPv4 way, or the IPv6 way.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-582,Alternative (non-fedora) webapp context no longer experimental,"This new feature has proven stable since Fedora 3.2 was released, and as of 3.3, will no longer be considered experiemental.  Thus, references to its experimental nature need to be removed from the text shown when running the installer, and the installation docs need to be updated as appropriate.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-583,REST API: Object Profile does not show content model,"The object profile on the REST API does not show the content model, although the html stylesheet has a placeholder for it. This information is currently not avilable in the ?format=xml representation either.  It needs to be added.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-584,Update bundled Derby to 10.5.3.0,Use the latest stable version of Derby.  This may fix FCREPO-514.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-585,Review the REST documentation against the REST code,"The REST api documentation is seriously lacking, and in places incorrect. While the REST api was in beta, this was acceptable, but I we want to stabilize the API for production use, we must do better documentation.   We should do a review of the REST code, in order to ensure that the documentation describes the various cases. We should ensure that output format is properly documented, and adhere to schemas or the like.  The current docs can be found here: http://www.fedora-commons.org/confluence/display/FCR30/REST+API  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-586,Add Soap method AddDatastreamByValue,"The current AddDatastream method in soap should actually be named AddDatastreamByReference, and correspond to the existing ModifyDatastreamByReference. There is no partner for ModifyDatastreamByValue.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-587,DOValidatorSchematron error on Fedora startup with WebLogic,"When trying to start Fedora deployed in WebLogic, Andreas Nef has reported the following stack trace:  INFO 2009-10-16 15:46:10.586 [[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'] (Server) Post-Initializing fedora.server.storage.translation.DOTranslatorModule INFO 2009-10-16 15:46:10.586 [[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'] (Server) Post-Initializing fedora.server.messaging.MessagingModule INFO 2009-10-16 15:46:10.599 [[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'] (BasicServer) Ingesting new system object: fedora-system:ContentModel-3.0 ERROR 2009-10-16 15:46:10.896 [[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'] (DOValidatorSchematron) Schematron validation failed javax.xml.transform.TransformerException: java.lang.RuntimeException: Namespace for prefix 'foxml' has not been declared.   com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:717)   com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)   fedora.server.validation.DOValidatorSchematron.createValidatingStyleSheet(DOValidatorSchematron.java:203)   fedora.server.validation.DOValidatorSchematron.setUp(DOValidatorSchematron.java:161)   fedora.server.validation.DOValidatorSchematron.<init>(DOValidatorSchematron.java:76)   fedora.server.validation.DOValidatorImpl.validateByRules(DOValidatorImpl.java:334)   fedora.server.validation.DOValidatorImpl.validate(DOValidatorImpl.java:251)   fedora.server.validation.DOValidatorModule.validate(DOValidatorModule.java:188)   fedora.server.storage.DefaultDOManager.getIngestWriter(DefaultDOManager.java:789)   fedora.server.BasicServer.preIngestIfNeeded(BasicServer.java:155)   fedora.server.BasicServer.postInitServer(BasicServer.java:99)   fedora.server.Server.<init>(Server.java:629)   fedora.server.BasicServer.<init>(BasicServer.java:40)   sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)   sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)   sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)   java.lang.reflect.Constructor.newInstance(Constructor.java:513)   fedora.server.Server.getInstance(Server.java:1021)   fedora.server.ServerController.init(ServerController.java:208)   javax.servlet.GenericServlet.init(GenericServlet.java:241)   weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)   weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)   weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)   weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)   weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)   weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)   weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:521)   weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1913)   weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1887)   weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1805)   weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3041)   weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1374)   weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:452)   weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:204)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:60)   weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)   weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:117)   weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:204)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:60)   weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)   weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:629)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:206)   weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:40)   weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)   weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)   weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)   weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:140)   weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:106)   weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:143)   weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)   weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)   weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)   weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)   weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:181)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:12)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:67)   weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)   weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)   weblogic.work.ExecuteThread.run(ExecuteThread.java:173) Caused by: java.lang.RuntimeException: Namespace for prefix 'foxml' has not been declared.   com.sun.org.apache.xml.internal.serializer.SerializerBase.getNamespaceURI(SerializerBase.java:895)   com.sun.org.apache.xml.internal.serializer.SerializerBase.addAttribute(SerializerBase.java:422)   preprocessor.template$dot$0()   preprocessor.applyTemplates()   preprocessor.applyTemplates()   preprocessor.transform()   com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet.transform(AbstractTranslet.java:602)   com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:710)  ... 62 more --------- java.lang.RuntimeException: Namespace for prefix 'foxml' has not been declared.   com.sun.org.apache.xml.internal.serializer.SerializerBase.getNamespaceURI(SerializerBase.java:895)   com.sun.org.apache.xml.internal.serializer.SerializerBase.addAttribute(SerializerBase.java:422)   preprocessor.template$dot$0()   preprocessor.applyTemplates()   preprocessor.applyTemplates()   preprocessor.transform()   com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet.transform(AbstractTranslet.java:602)   com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:710)   com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)   fedora.server.validation.DOValidatorSchematron.createValidatingStyleSheet(DOValidatorSchematron.java:203)   fedora.server.validation.DOValidatorSchematron.setUp(DOValidatorSchematron.java:161)   fedora.server.validation.DOValidatorSchematron.<init>(DOValidatorSchematron.java:76)   fedora.server.validation.DOValidatorImpl.validateByRules(DOValidatorImpl.java:334)   fedora.server.validation.DOValidatorImpl.validate(DOValidatorImpl.java:251)   fedora.server.validation.DOValidatorModule.validate(DOValidatorModule.java:188)   fedora.server.storage.DefaultDOManager.getIngestWriter(DefaultDOManager.java:789)   fedora.server.BasicServer.preIngestIfNeeded(BasicServer.java:155)   fedora.server.BasicServer.postInitServer(BasicServer.java:99)   fedora.server.Server.<init>(Server.java:629)   fedora.server.BasicServer.<init>(BasicServer.java:40)   sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)   sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)   sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)   java.lang.reflect.Constructor.newInstance(Constructor.java:513)   fedora.server.Server.getInstance(Server.java:1021)   fedora.server.ServerController.init(ServerController.java:208)   javax.servlet.GenericServlet.init(GenericServlet.java:241)   weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)   weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)   weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)   weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)   weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)   weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)   weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:521)   weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1913)   weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1887)   weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1805)   weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3041)   weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1374)   weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:452)   weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:204)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:60)   weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)   weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:117)   weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:204)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:60)   weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)   weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:629)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:206)   weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:40)   weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)   weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)   weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)   weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:140)   weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:106)   weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:143)   weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)   weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)   weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)   weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)   weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:181)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:12)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:67)   weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)   weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)   weblogic.work.ExecuteThread.run(ExecuteThread.java:173) ERROR 2009-10-16 15:46:10.940 [[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'] (DOValidatorImpl) VALIDATE: ERROR - failed Schematron rules validation. fedora.server.errors.ObjectValidityException: java.lang.RuntimeException: Namespace for prefix 'foxml' has not been declared.   fedora.server.validation.DOValidatorSchematron.createValidatingStyleSheet(DOValidatorSchematron.java:206)   fedora.server.validation.DOValidatorSchematron.setUp(DOValidatorSchematron.java:161)   fedora.server.validation.DOValidatorSchematron.<init>(DOValidatorSchematron.java:76)   fedora.server.validation.DOValidatorImpl.validateByRules(DOValidatorImpl.java:334)   fedora.server.validation.DOValidatorImpl.validate(DOValidatorImpl.java:251)   fedora.server.validation.DOValidatorModule.validate(DOValidatorModule.java:188)   fedora.server.storage.DefaultDOManager.getIngestWriter(DefaultDOManager.java:789)   fedora.server.BasicServer.preIngestIfNeeded(BasicServer.java:155)   fedora.server.BasicServer.postInitServer(BasicServer.java:99)   fedora.server.Server.<init>(Server.java:629)   fedora.server.BasicServer.<init>(BasicServer.java:40)   sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)   sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)   sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)   java.lang.reflect.Constructor.newInstance(Constructor.java:513)   fedora.server.Server.getInstance(Server.java:1021)   fedora.server.ServerController.init(ServerController.java:208)   javax.servlet.GenericServlet.init(GenericServlet.java:241)   weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)   weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)   weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)   weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)   weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)   weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)   weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:521)   weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1913)   weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1887)   weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1805)   weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3041)   weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1374)   weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:452)   weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:204)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:60)   weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)   weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:117)   weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:204)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:60)   weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)   weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:629)   weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)   weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:206)   weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:40)   weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)   weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)   weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)   weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:140)   weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:106)   weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:143)   weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)   weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)   weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)   weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)   weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:181)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:12)   weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:67)   weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:516)   weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)   weblogic.work.ExecuteThread.run(ExecuteThread.java:173) FATAL 2009-10-16 15:46:10.942 [[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'] (Server) Server failed to initialize fedora.server.errors.ServerInitializationException: Failed to ingest system object(s)   fedora.server.BasicServer.postInitServer(BasicServer.java:104)   fedora.server.Server.<init>(Server.java:629)   fedora.server.BasicServer.<init>(BasicServer.java:40)   sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)   sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)   sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)   java.lang.reflect.Constructor.newInstance(Constructor.java:513)   fedora.server.Server.getInstance(Server.java:1021)   fedora.server.ServerController.init(ServerC...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-588,Certain triples are not removed from RI,"After purging or updating objects with an empty label, the obsolete fedora-system:def/model#label triples remain in the resource index",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-589,Examine serializer and deserializer functionality with regard to null or empty properties,"Serializers and Deserializers treat null and empty properties in perhaps an unintuitive way.   In some cases, null input values are translated into empty strings, in others (e.g state) they are treated as some other default value.   We should determine if its worthwhile to clean this up.  See testNullObjectProperties() in TestXMLDODeserializer.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-590,HTML view of listDatastreams does not show link when label is empty,"When requesting the list of datastreams in an object, the HTML view does not show the link for getting further information about any datastream with an empty label.  This is because the hyperlink in this view is on the datastream label.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-591,Duplicate artifact id's in fcrepo-server POM prevent build from source in Eclipse,"I don't remember this happening on my Mac, but building from trunk source fails because of duplication of the sesame and commons-collections dependencies.  Commenting out the duplicate dependency elements fixes the problem.  Relevant build log excerpt:  [INFO] Scanning for projects... [ERROR] The build could not read 1 project -> [Help 1] [ERROR]   The project org.fcrepo:fcrepo-server:3.3-SNAPSHOT (C:\fcrepo\fcrepo\fcrepo-server\pom.xml) has 2 errors [ERROR]     'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: commons-collections:commons-collections:jar -> duplicate declaration of version 3.1 [ERROR]     'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.fcrepo:openrdf-sesame-onejar:jar -> duplicate declaration of version 2.2.1 [ERROR]  [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-592,Storage: Use UTC creation-date for foxml/datastream paths,"On Dec 7, 2009, Egbert Gramsbergen wrote to fedora-commons-users:  I noticed something strange in the data storage of Fedora.  Objects and datastreams are stored in a directory tree mirroring time down to the level of minutes, the time being creation time for objects and modifiction time for versionable datastreams. This should enable the repository to be reconstructed from the files in case of an emergency. So far so good.  But in my case, the times as implied form the directory tree are exactly one hour ahead of the times in the metadata in foxml. So it seems that ""directory tree"" time is local time (CET in my case) and ""metadata"" time is UTC. So if I really have to reconstruct the repository from the files, Fedora has to know about the timezone in which the repository was made. It seems brittle to me, and unnecessary. Why not use the same time for both? Or do I miss something?  btw, I use Fedora 3.0.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-593,RI and SQL rebuilds fail due to classloader issues,"Rebuilding the resource index fails due to null pointer exceptions.  This appears to be traceable to the fedora classes being loaded by the bootstrap loader (via the endorsed override), which causes calls to Class.getLoader to return null ( see http://java.sun.com/javase/6/docs/api/java/lang/Class.html#getClassLoader%28%29 ).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-594,DefaultDOManager - object not invalidated from doreader cache upon purge,"Using the DefaultDOManager, digital objects are not removed from the DOReaderCache when purged.  They are, however, removed from the DOReaderCache when added or modified.  This results in cached copies of disseminations persisting and being served by Fedora, even after the purge has been committed.  This is problematic for our repository.  We have set up external indexing to initiate immediately after changes to Fedora.  Our indexer uses Fedora services to retrieve information about digital objects for indexing.  Because of this error, our indexer is indexing purged objects immediately after they are purged, yet the indexer does not know that the object has been purged because Fedora is still serving stale services.  Could this be fixed in the doCommit method of the DefaultDOManager class?  From what I can tell, it looks as if something like the following clause could be added to the OBJECT REMOVAL section of code to resolve the problem:  // INVALIDATE DOREADER CACHE if (m_readerCache != null) {   m_readerCache.remove(obj.getPid()) }",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-595,Installer claims that the install directory for FEDORA_HOME is not empty on OS X,"When running the Fedora installer and prompted to select the location of Fedora home directory, the installer warns that the directory is not empty, even when a new directory has just been created.   In fact, the directory isn't technically empty, but contains the hidden file .DS_STORE on OS X. However, this should simply be ignored.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-596,"fcrepo-security-* unit ""tests"" are failing/missing","In fact, melcoe.test.ContextHandlerTest and melcoe.test.ContextUtilTest aren't proper JUnit tests. They should either be refactored or replaced.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-597,Follow Maven Standard Directory Layout,"Unless there is compelling reason not to, Fedora should follow the Maven standard directory layout as described here: http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html  Examples of where Fedora seems to arbitrarily diverge:  1) assemblies in src/main/resources/assemblies rather than src/main/assemblies 2) config files almost everywhere except src/main/config 3) LICENSE.txt 4) use of src/main/resources as a general dumping ground (e.g. shell scripts), rather than for resources (e.g. properties files) intended to be made available on the classpath",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-599,ImageManipulation service fails with FeSL enabled,"Integration tests which use the imagemanip service fail when FeSL is enabled. Call to the imagemanip service hang until eventually timing out.  With FeSL enabled, an individual request to http://localhost:8080/imagemanip/ImageManipulation?op=resize&newWidth=50&url=http://localhost:8080/tomcat.gif hangs and eventually times out.  Workarounds for imagemanip: - remove fedora.war - disable fesl - comment out calls to PopulatePolicyDatabase.addDocuments(); and pdp = new PDP(config.getDefaultPDPConfig()); in MelcoePDPImpl","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-600,RISearch queries with FeSL ignore format parameter,"With FeSL enabled, fedora.test.api.TestRISearch is failing. Queries that ask for a specific format such as ""count"" are rewritten to return RDF/XML.  For example, the query:  http://localhost:8080/fedora/risearch?type=triples&lang=spo&format=count&stream=on&query=*%20*%20* always returns RDF/XML (format=Turtle, etc. is also rewritten)",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-601,Client scripts steal focus in OS X,"When running most of the command-line scripts (such as fedora-find.sh), the JVM in OS X starts to initialize as if it is a windowed application: The menu bar title is briefly changed to include the class name of the application (for example, fedora.client...AutoFinder), even though the java code that is executing has no real need for a windowed environment.  This problem does not occur in Windows or Linux, nor with the server scripts in OS X.  Kai reported the following cause for anything that uses FedoraClient (including the client scripts):  On the Fedora side the following happens: FedoraClient.getAPIM() calls FedoraClient.getSOAPStub() which calls APIAStubFactory.getStubAltPath(). Here a check Administrator.INSTANCE == null occurs which initializes the static variables of the Administrator class. Some of them happen to be AWT based, so X (or headless) is needed which can clearly be seen by the ""focus stealing"" effect on OSX. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-602,DemoSOAPClient depends on demo objects that no longer exist,"The DemoSOAPClient uses demo objects that have long gone, when it is run errors are reported that objects no longer exist.  Code for this demo needs refactoring to use current demo objects.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-603,"Standalone, reusable, Java client library for Fedora","We've had various forms of Java-based Fedora Clients in the past.  The most obvious ones in the current codebase are ""DemoSOAPClient"" (see FCREPO-602) to ""FedoraClient"".  The purpose of a standalone java Fedora client would be to give Java developers a way to interact with a Fedora repository's web service (REST/SOAP) APIs in their own code, without needing to set up the SOAP and/or REST interactions themselves.  The current class, fedora.client.FedoraClient is not adequate for this job, because it is currently intertwined with the Fedora Admin GUI, both at build time (fcrepo-client-admin), and at runtime (see FCREPO-601).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-604,Support for memento (X-Accept-Datetime) in Fedora's REST api,"Wherever HTTP GET is used and the optional asOfDateTime URL parameter is accepted, Fedora should also be able to deal with the X-Accept-Datetime http request header, as specified by memento: http://arxiv.org/abs/0911.1112",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-605,Web Admin dialog appears to hang when creating managed datastream,"When using the web admin to add a managed datastream from a local file (using Firefox) the dialog which allows you to select the file is never removed, even after the file upload to Fedora has completed. This makes it appear as if the file upload is hung, but the datastream is actually created properly, the dialog box is simply not removed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-606,Web Admin error viewing redirect datastream content ,"When attempting to view the content of a Redirect-type datastream via the web admin, an error is produced: ""Security error accessing url"" even if the redirect points to url with no security requirements.   To Reproduce: Use the web admin to create an R datastream with location set to: http://www.yahoo.com, then attempt to view the content.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-607,"REST getObjectProfile method has a datetime attribute in the return value, but this is not present in the schema","get /objects/{pid}?asOfDateTime=somedate  gives  <objectProfile pid=""demo:testObject"" datetime=""somedate"">   <objLabel>label</objLabel>   <objOwnerId>fedoraAdmin</objOwnerId>   <objModels>     <model>info:fedora/demo:ContentModel</model>   </objModels>   <objCreateDate>2008-09-29T03:49:450Z</objCreateDate>   <objLastModDate>2014-09-19T01:18:330Z</objLastModDate>   <objDissIndexViewURL>http://localhost:8080/fedora/get/demo:testObject/fedora-system:3/viewMethodIndex/2008-09-29T03:49:450Z</objDissIndexViewURL>   <objItemIndexViewURL>http://localhost:8080/fedora/get/demo:testObject/fedora-system:3/viewItemIndex/2008-09-29T03:49:450Z</objItemIndexViewURL>   <objState>A</objState> </objectProfile>   and the datetime attribute is not present in the schema",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-609, Purge object will throw general exception if force=true,"force=true tells to purge, even if this breaks a data contract. This feature is not supported yet, but rather than performing a normal purge, a general exception is thrown.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-610,"ObjectHistory only includes datastream timestamps, and only from currently active datastreams","Changes to Object Properties are not recorded in the object history. These are unversioned properties, so this is somewhat understandable.  Only datastreams set to Active (or having no state) when the request is made is included in the object history. This should at least  be a parameter.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-611,ListDatastreams list datastream mime-type but not format uri,Mimetype and Format URI are equally useful attributes on a datastream. But the listDatastreams method only returns the mimetype for each datastream. ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-614,ConfigC test failures/errors,"Current test results for mvn integration-test -P configC  Failed tests:    testModifyDatastreamByReference(fedora.test.api.TestRESTAPI)  Tests in error:    testGetNextPID_BadAuthZ(fedora.test.api.TestHTTPStatusCodesConfigC)   fedora.test.fesl.policy.TestPolicies(junit.framework.TestSuite)   fedora.test.fesl.policy.TestPolicies(junit.framework.TestSuite)  Tests run: 195, Failures: 1, Errors: 3, Skipped: 0 ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-615,"With FeSL enabled, authentication is required for every resource","When FeSL in enabled in the installer, the generated Fedora web.xml sets the AuthFilterJAAS with a wildcard url-pattern which requires authentication for every resource, even if APIA-Auth is not required.  For example, if you set API-A authentication to false (the installer default), but enable FeSL, requests to API-A resources such as http://localhost:8080/fedora/search still require authentication. Also, requests to resources such as http://localhost:8080/fedora/ri/index.xsl also require authentication.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-616,Installer-generated web.xml drops namespace and schemaLocation declarations,"The Fedora installer generated web.xml drops all attributes from the web-app element exception version and id, e.g. <web-app id=""WebApp_ID"" version=""2.4""> even though the original web.xml (fcrepo-server/src/main/webapp/WEB-INF/web.xml) reads:  <web-app id=""WebApp_ID"" version=""2.4""   xmlns=""http://java.sun.com/xml/ns/j2ee"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""   xsi:schemaLocation=""http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd""> ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-617,"""Other"" servlet container option does not provide local services webapps","When the ""other"" option is selected during Fedora installation, the option to deploy local services is never presented. While Fedora can't deploy to ""other"" servlet containers, it should at least provide the local services (e.g. saxon, fop, imagemanip) webapps for manual deployment, just as it does for the the Fedora webapp.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-618,Content-Disposition tests in fedora.test.api.TestRESTAPI fail on WebLogic,"All of the content disposition tests fail on WebLogic, i.e. testDatastreamDisseminationContentDispositionFromRels, testDatastreamDisseminationContentDispositionFromLabel, testDatastreamDisseminationContentDispositionFromId",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-619,ServiceDeployment WSDL cannot specify relative URIs in http:address,"I've developed a report servlet that implements a service deployment.  This servlet is deployed on the same Tomcat with Fedora.  It happens to be deployed within the Fedora context, but for the purposes of this bug it could be anywhere on the same server.  I was trying to make the service deployment's WSDL more portable by specifying the http:address with a relative URI.    <wsdl:service name=""StorageReport"">     <wsdl:port binding=""this:StorageReport_http"" name=""StorageReport_port"">       <http:address location=""/fedora/storagereport""/>     </wsdl:port>   </wsdl:service>  This use of relative URIs seems acceptable according to the WSDL spec: http://www.w3.org/TR/wsdl#_Toc492291094  I guess I would have expected the relative URI to resolve against the Fedora context URI or perhaps the REST URI of the service operation itself (probably not needed).  What I found is that relative URIs cause a NPE in some utility code.  If a resolve step were added at the top of ServerUtility.isURLFedoraServer(String url) it would fix this issue.  java.lang.NullPointerException   fedora.server.utilities.ServerUtility.isURLFedoraServer(ServerUtility.java:130)   fedora.server.access.dissemination.DisseminationService.assembleDissemination(DisseminationService.java:669)   fedora.server.access.DefaultAccess.getDissemination(DefaultAccess.java:447)   fedora.server.access.FedoraAccessServlet.getDissemination(FedoraAccessServlet.java:742)   fedora.server.access.FedoraAccessServlet.doGet(FedoraAccessServlet.java:449)   javax.servlet.http.HttpServlet.service(HttpServlet.java:617)   javax.servlet.http.HttpServlet.service(HttpServlet.java:717)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:234)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:234)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)   fedora.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:234)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)   org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)   org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)   org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)   org.apache.catalina.valves.RequestFilterValve.process(RequestFilterValve.java:269)   org.apache.catalina.valves.RemoteHostValve.invoke(RemoteHostValve.java:81)   org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)   org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)   org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)   org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)   org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)   org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)   java.lang.Thread.run(Thread.java:619) ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-620,Tomcat 6 server.xml:SSLEnabled defaults to false with non-bundled Tomcat,"Keith Johnston (keithjoh at hawaii dot edu) reported via ""Contact Us"":  It appears that the variable SSLEnabled, for the ssl connector, is new to tomcat 6. I find that it defaults to ""false"" and must be set to ""true"" in the server.xml file for the handshake to proceed. The Fedora 3.2 installer did not write this value to the updated server.xml file in the installation. A note might be made of this on the installation guide for those users attempting to load Fedora with existing Tomcat 6. Cheers.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-621,Move to Java 6+ (Java 5 no longer supported),"Fedora already works with Java 6, but we are considering discontinuing support for Java 5 for several reasons:  1) As of Nov 3, 2009, J2SE 5 has reached its End Of Service Life (EOSL).  This means there will be no more public updates to Sun's J2SE 5. 2) Finding and installing Java 5 on the various operating systems is becoming increasingly difficult. 3) Java 6 has several API and annotation improvements we'd like to be able to take advantage of in the source code.  (For example, IOException now has a constructor that accepts a Throable cause, and @Override can now apply to interface method implementations)  For now, this would also reduce the number of different configurations we'd need to test prior to release, thus shortening the release cycle.  In early January 2010, the committers agreed that this is the direction we want to go, but we should first poll our users to see what, if any, problems this might create for them.  Upon deciding to move to Java 6, the following changes should be made immediately:  A) Change the pom to compile to java 6 bytecode (and thus require a Java 6 JDK) B) Remove the JDBC3/4 code-rewriting hack in the build C) Modify the CI tests to run using Java 6",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-622,Java repackaging: org.fcrepo,"For consistency with the groupId now used for the Fedora Repository project, change all packages starting with ""fedora."" to ""org.fcrepo.""  This is not only a Java change.  It will also require changes to poms, assemblies, and possibly other xml files in the codebase.  [ Impact ]  1) People using fedora.client.FedoraClient in their code will need to use the newly-named class. 2) Legacy LLStore plugins will need to be updated.  Preferably to plug in via Akubra, but if that can't be done, we should try to provide a solution that allows the use of these older plugins (like a legacy llstore jar, and an akubra adapter) 3) Other alternative classes/modules for Fedora will need to be compiled with the new interface/class names.  For example, if people have developed their own DDLGenerator implementations that are maintained outside the main codebase, those will need to be slightly changed and re-compiled to make them work.  The release notes should have a general note about this.  However, cases like #2 may come up in the process of doing this, where we decide a ""legacy adapter"" approach would be helpful, so people don't have to change thier code.  None are currently known.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-623,Journaling RMI transport writer does not send close() events,RMI transports will always fail when rolling over to a new journal file.  A receiver will terminate the connection with an exception indicating refusal to write to a new journal while another is still open.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-624,"For consistency, use info:fcrepo, not info:fedora","On the Jan 5 '10 committer call, Asger pointed out that Kare mentioned this when talking about consistent naming...the info:fedora URIs would ideally be info:fcrepo.  We need to consider the impact of doing this and decide if the consistency is worth the cost.  [ Impact ]  1) Need to register a new info: prefix with the NISO info URI registry 2) Need to decide how to deprecate ""info:fedora""...just drop it, or support both for some period of time? 3) Existing RDF queries would need to change",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-625,Use fcrepo.org for namespace URIs and schema URLs,"Currently, namespace URIs and schema URLs use fedora.info and (older) comm.nsdl.org.  Ideally, they all point to the same host, which is consistent with our groupId and java packaging structure, org.fcrepo (http://fcrepo.org/etc)  We need to consider the impact of this and whether it's worth changing the formats in place.  Another alternative is to just decide that all future XML formats, etc, will use some new convention for the namespaceURI and schemaLocation, based at fcrepo.org.  [ Scope ]  All XML schemas we publish. All WSDL we publish.  [ Impact ]  The FOXML format would need to be versioned. Other schemas' (method map, rest api responses, etc) would need to be versioned We'd either need to provide the ability to use the old version and new version simultaneously, or a way to migrate from the old version.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-626,"Message digest algorithms HAVAL, TIGER and WHIRLPOOL are not supported","The hash algorithms HAVAL, TIGER and WHIRLPOOL are currently not supported by Fedora although the documentation suggests otherwise. Out of the box JDK6 provides support for MD2, MD5, SHA-1, SHA-256, SHA-384, SHA-512. Other algorithms can be supported by plugging in a provider, like jacksum[1] as described here[2].  The alternative course of action would be to remove these checksum algorithms from the documentation and the code in fedora/server/storage/types/Datastream.java  [1] http://www.jonelo.de/java/jacksum/ [2] http://java.sun.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-627,Fedora REST-style object viewer does not properly handle encoded slashes in the pid value.,"Using the Object View interface (from Firefox 3.6)  with a PID value of hdl:2200%2F20061002130521143T     ...fedora/get/hdl:2200%2F20061002130521143T  ...returns a page containing the ""View..."" options.  Selecting the first one: ""View the Datastreams List for this Object"" returns a stack trace: ""... javax.ws.rs.WebApplicationException: fedora.server.errors.MalformedPidException: PID object-id cannot contain '/' character.   fedora.server.rest.BaseRestResource.handleException(BaseRestResource.java:162)   fedora.server.rest.DatastreamResource.listDatastreams(DatastreamResource.java:100)   sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ... "" (full trace attached)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-628,FieldSearch query with bad syntax does not immediately release connection to pool,"Martin Tilma ( m dot tilma at func dot nl ) reported this to fedora-commons-users on Feb 4th, 2010:  Hello,  I have an issue with with fedora 3.3 after sending a few wrong findObject webservice requests. Fedora seems to block when you send a lot of ""wrong"" requests.  The request: <soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">   <soap:Body>     <ns2:findObjects xmlns:ns2=""http://www.fedora.info/definitions/1/0/types/"">       <resultFields>         <item>pid</item>       </resultFields>       <maxResults>50</maxResults>       <query>         <conditions>           <condition>             <property>label</property>             <operator>eq</operator>             <value>?</value>           </condition>         </conditions>       </query>     </ns2:findObjects>   </soap:Body> </soap:Envelope>  Response: <soapenv:Envelope xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"">    <soapenv:Body>       <soapenv:Fault>          <faultcode>soapenv:Server.userException</faultcode>          <faultstring>fedora.server.errors.QueryParseException: The = operator cannot be used with wildcards.</faultstring>          <detail>             <ns1:hostname xmlns:ns1=""http://xml.apache.org/axis/"">jones</ns1:hostname>          </detail>       </soapenv:Fault>    </soapenv:Body> </soapenv:Envelope>  It is complaining about the ""?"" in the value when using a Equals Condition. (to fix this you have to escape the ""?"" with a slash ""\?"")  The response seems valid and correct to me. But after sending a lot requests (using soap-ui with 5 threads running for one minute) fedora stops responding and the requests will time out.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-629,Ambiguous API call log messages,"Each API call is logged by Fedora at the end of its invocation.  The first part of the message always states ""Completed [operation]"". In case of a failed API call this may suggest success and therefore potentially confuse the person looking at the logs. It would be clearer if the log message would also include the outcome, like ""Completed [operation], outcome: [failed|success]"".  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-630,Switch to SLF4J with Logback as primary logging framework,"SLF4J is a modern logging framework that, among other things, allows applications to cope with dependent libraries that hardcode dependencies on specific frameworks.  Fedora currently uses Log4J, and has to jump through hoops in order to get the logging frameworks (commons-logging, java.util.logging) of its dependent libraries to log to the same place.  Ideally, all fcrepo code should use the SLF4J api when logging is needed, and be agnostic about the underlying logging implementation.  Appropriate runtime dependencies can then be included in the classpath to get the desired implementation to be used for all logging operations, whether coming from the org.fcrepo classes, or from classes they depend on.  This can be done in a sane way with the help of SLF4J's legacy bridges[1].  Since the Fedora server has runtime dependencies on libraries that hardcode use of java.util.logging (sun-xacml), commons-logging (commons-httpclient and more), and log4j (mulgara), a bridge should be used for each of these frameworks so that all calls to them effectively go through SLF4J.  Lastly, there is the matter of the actual logging implementation to use (i.e., the ""sink"" for SLF4J).  It appears that Logback[2] is the way to go here: a) It's being actively developed as a replacement for log4j, by its founder. b) Generally, when a legacy bridge is used for SLF4J, the actual implementation cannot be used as the ""sink"", for reasons described at [1].  [1] http://www.slf4j.org/legacy.html [2] http://logback.qos.ch/ ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-631,namespace declaration in DC datastream added even if present,"While trying to set the PrOAI provider up for fedora I encountered a problem regarding the xsi namespace. It seems that The FedoraOAIDriver adds this namespace to the stream, even if it already present. This in done in line 283 in the method writeRecordMetadata. it seems  like a check whether the namespace is already present is the solution.",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-632,FeSL Special Topics Review,Review branch for 2010-02-09 Special Topics review of FeSL,"legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-633,Refactor poms to use Maven's dependencyManagement where appropriate,Use dependencyManagement in the parent pom where possible to reduce redundancy and inconsistencies,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-635,Allow dissemination of AUDIT info for each object,"On Tue, Feb 9, 2010 at 4:41 PM, Scott Hammel (scott at clemson dot edu) wrote: > Is there any way to fetch or query the content of the AUDIT datastream via > the Fedora APIs?  One can currently only get the AUDIT info for an object by exporting the object XML and extracting it from that.  It would more convenient if it were possible to get this information by itself, like you can for any other datastream in Fedora.  The only difference from an API perspective would be that modifying the AUDIT datastream would be prevented by policy by default.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-636,Enable policy enforcement by declaration in RELS-EXT and RELS-INT,"Once policies are represented in the repository as objects (FCREPO-577), we should enable objects and datastreams to declare or ""subscribe"" to policies via RELS-EXT and RELS-INT (assuming an as-yet-to-be-decided predicate).","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-637,Create an object that represents the repository itself,"Among the set of ""bootstrap"" objects that Fedora should include is an object that represents the repository itself. Another step in allowing a repository to be self-documenting. It would also extend FCREPO-636 to represent repository-wide policies.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-638,"Fedora basic search interface returns results with old-style ""/fedora/get"" URLs instead of new REST interface URLs",The Fedora search interface at /fedora/search returns results URLs as /fedora/get/{pid}.  It should use the new REST API URLs - ie /fedora/objects/{pid}  org.fcrepo.server.access.FieldSearchServlet:411 generates the URL,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-639,Allow log re-configuration without restart,Allow users to change Fedora's log configuration (e.g. from INFO to DEBUG) without having to restart.  This capability is directly supported by Logback.  The default logback.xml configuration shipped with the Fedora server should do this.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-640,Some IPv6 loopback addresses fail to match for default policies,"Although ::1 has been verified to work in IPv6 environments (see FCREPO-581), the default policies deny-apim-if-not-localhost and deny-reloadPolicies-if-not-localhost will not work as expected (authorization fails) in environments where the client IP address comes in as a long-form IPv6 loopback address.  The long form of the IPv6 loopback address is 0:0:0:0:0:0:0:1, and can also be provided as 0:0:0:0:0:0:0:1%0 (the latter is the case on my mac, when using Firefox to hit a local Fedora repository instance).  These default policies should be updated to work in such cases.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-641,AuthFilterJAAS prevents the server from starting when FEDORA_HOME is not set," This is the AuthFilterJAAS entry from web.xml     <filter>       <filter-name>AuthFilterJAAS</filter-name>       <filter-class>org.fcrepo.server.jaas.AuthFilterJAAS</filter-class>       <init-param>         <description>OPTIONAL. A comma separated list of class names for user principals.        First one that is found is effective only.</description>         <param-name>userClassNames</param-name>         <param-value>org.fcrepo.server.jaas.auth.UserPrincipal</param-value>       </init-param>       <init-param>         <description>OPTIONAL. A comma separated list of url-patterns to ignore</description>         <param-name>excludeUris</param-name>         <param-value>/getDS</param-value>       </init-param>     </filter>  For some reason, the filter does not read the context param     <context-param>       <param-name>fedora.home</param-name>       <param-value>/home/abr/Servers/fcrepo3.3-1</param-value>     </context-param> But instead crashes when FEDORA_HOME is not set. The rest of the system works from the context param, so this is somewhat surprising.  One of the trumped features of Fedora 3.3 was the ability to deploy several servlets. If we still depend on the environment variable, and not the context param, this feature is lost. For that reason, this bug has been marked as major.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-642,Convert existing jars into OSGi bundles,Note: this is a meta-task to track individual osgi-ifications of Fedora jars and dependencies.,"legacy - Fedora,legacy - OSGi",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0
FCREPO-643,Get rid of cli-loader (no longer needed with Java 6),"In Fedora 3.3, we introduced a cli-loader, which got around the problem of putting many jars into the classpath when running some of the commandline scripts.  Now that Fedora is Java 6+, and Java 6 supports wildcards when specifying the classpath, this is no longer needed.  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-644,Model-Driven Service Definition/Deployment Implementations,"At the London committer's meeting, there was a consensus that improvements to service deployment should move past incremental improvements to the default WSDL implementation and allow for entirely different service descriptions.  The first step towards this is separating the service-related interfaces used by other modules out from the default 3.0 implementation classes, with the eventual goal of a module-based approach accommodating discrete service deployment models.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-645,Treat DSLocation as an opaque value whenever possible,"Currently, the value of DSLocation for managed datastreams is assumed to follow a particular scheme in serializers and deserializers, and elsewhere.  These assumptions should be removed, and DSLocation should be simply passed on as an opaque value wherever possible.   For example, several deserializers generate DSLocation values for managed datastreams as ""PID + DSID + DSVersionID"" (an assumption) rather than re-using the serialized value (treating it as opaque). ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-646,Remove undocumented/unused/broken ReportServlet,"ReportServlet is a feature from an old release of Fedora that has never been documented or tested, and doesn't work.  The original intent was to list objects in the repository by certain criteria.  It probably worked prior to 3.x, but even then was not documented or tested.  The information it used to provide can be determined today by hitting the FieldSearch and/or RISearch interfaces of Fedora.  The servlet, supporting classes, stylesheets, and web.xml entry should be dropped from the codebase.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-647,Remove unused/unnecessary ThreadMontitor,"This module was written many versions ago as a diagnostic utility and demonstration of Fedora's original module framework.  It was never documented or used, and modern jvms have much better monitoring facilities built in these days.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-648,Initial move to a modern dependency injection framework,"Use standard, well-known frameworks/libraries to:   * Resolve inter-module dependencies via dependency injection   * Provide hooks to initialize/de-initialize modules when the webapp container starts and stops   * Allow re-configuration and plugging in of alternative modules without re-compiling  For more in-depth information on this work, please see: http://fedora-commons.org/confluence/x/JAAbAQ  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-649,"Deprecate ""LITE"" REST APIs","Deprecate the LITE REST APIs - deprecate in next release by using 301 - Moved Permanently responses, then remove completely in a future release.  This will support having a single dereferencable URI for a Fedora resource which can then be used as the definitive resource identifier.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-650,Define canonical dereferenceable URIs for Fedora resources,Update documentation to state that the REST API GET methods for Fedora digital objects and datastreams can be used as dereferenceable URIs for resources.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-652,Restructure resource index as a set of named graphs,"Restructure the resource index as a set of named graphs, utilising ""views"" to produce a combined view - see http://fedora-commons.org/confluence/display/DEV/Supporting+the+Semantic+Web+and+Linked+Data ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-653,Construct Resource Index triples based on a declarative specification,"Move to a declarative specification for which triples get created for each object, possibly utilising the CMA to allow definition within system and user content models.  see http://fedora-commons.org/confluence/display/DEV/Supporting+the+Semantic+Web+and+Linked+Data",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-655,Support HTTP URIs for resources in resource index,"Based on the GET URIs exposed in the REST API, support use of these URIs as resource identifiers in the resource index.  See http://fedora-commons.org/confluence/display/DEV/Supporting+the+Semantic+Web+and+Linked+Data  This could involve - rewriting of query output to convert info:fedora/ URIs to HTTP resource URIs - rewriting of query input to convert HTTP URIs to info:fedora URIs  The info:fedora URI form should be retained for portability etc",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-656,"Support for indexing ""arbitrary"" RDF datastreams in the resource index","Currently RDF datastreams that are indexed in the resource index (RELS-EXT, RELS-INT) must have either a Fedora object or datastream as the subject.  If the resource index is restructured as a set of named graphs this restriction could be removed, allowing richer RDF metadata to be propagated to the resource index.  See http://fedora-commons.org/confluence/display/DEV/Supporting+the+Semantic+Web+and+Linked+Data",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-657,"Remove/hide unused methods from DefaultDOManager, RepositoryReader","There are a few methods in DefaultDOManager that are are unused (and can be removed) or should be private.   Additionally, String[] listObjectPIDs() in RepositoryReader does not seem to be used outside of tests, and it would be very convenient to remove.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-658,"Create a Service manager for mapping CModels to SDeps,","The task of looking up deployments for a given CModel (which involves maintaining and persisting a map) is currently performed by DOManager.   It would be cleaner and more flexible to put this functionality (which is by no means trivial) in its own module.  This module would be responsible for any persistence of maps it needs, and thus would need to be able to participate in the rebuild process.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-660,Regression: setting FEDORA_HOME via context-param fails,"The setting of FEDORA_HOME is supported by three means: 1) fedora.home context init-param in web.xml 2) via a system property (e.g. -Dfedora.home=/foo) 3) environment variable (e.g. export FEDORA_HOME=/bar)  To reproduce: define fedora.home in web.xml, ensure that the FEDORA_HOME environment variable is not set, start Fedora. Tomcat should report ""SEVERE: Error filterStart"", Jetty reports ""failed AuthFilterJAAS javax.servlet.ServletException: FEDORA_HOME environment variable not set"".  Quick workaround if FeSL is not being used is to simply comment out the AuthFilterJAAS filter from Fedora's web.xml.  Prior to FeSL, none of the servlet filters required the value of FEDORA_HOME. Moreover, if the value of FEDORA_HOME is set via system property or environment variable, the problem does not manifest itself. Currently, ServletController retrieves the fedora.home context-param and sets the ""servlet.fedora.home"" System Property to make the value available to Constants.FedoraHome. However, if we can't guarantee that ServletController is loaded first, then the fedora.home context-param will not be available to the filters.  Note: the load-on-startup element only controls servlet load order, and doesn't ensure a servlet will load before any of the filters.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-661,Out-of-box SWORD interface,"A SWORD interface has become a pretty standard expectation for repositories these days.  A SWORD integration for Fedora has already been done, and was integration tested once: https://fedora-commons.org/confluence/display/FCSVCS/SWORD-Fedora+1.2  This feature is to include the interface automatically as an option at install time, along with integration tests to continuously ensure that it works with each future Fedora release.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-662,Extend REST API to provide simple support for remote or tiered storage status information.,"Extend the REST API to provide simple protocol support for remote or tiered storage status information.  Likely this would return a 503 status code and a retry-after header if an authorized access operation was unable to retrieve a datastream from managed storage that was recognized as valid within the timeout period.  The work is primarily to provide support through the Fedora Repository core for the function.  In related work outside the scope of this issue, it will be required that the low-level storage plug-in be able to provide a suitable signal.  Additional efficiencies could be gained by supporting this in a HEAD request at least for datastream disseminations and considered for dissemination-type services.  This improvement is to enable minimal support for tiered storage plug-in which may have the datastream ""file"" off-line and may not be able to stream it before the timeout.  The same ideas may be applied later to other back-end service calls especially for Web (external datastreams) from sources that return a 503 and retry-after too.   http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-663,Remove XML/HTML documents from Java code and use templates instead,"There are a number of occurrences where xml or html documents/fragements are embedded within the code. This has an impact on maintainability,readability,testability and separation of concerns. Most documents could easily be factored out by using a template engine, such as StringTemplate (http://www.stringtemplate.org).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-664,Drop the old servletfilter AuthN package in favor of FeSL's AuthN,"Default to using org.fcrepo.server.security.jaas.* (FeSL's authN) instead of org.fcrepo.server.security.servletfilters.* (original authN).  This includes: 1) Making FeSL's authN the out-of-box authN configuration, with xml user file pre-configured 2) Deprecating the old servlet filters (or completely removing them ...?) 3) Updating Fedora's system docs to explain how to use/configure/customize this  See related discussion here: http://www.mail-archive.com/fedora-commons-developers@lists.sourceforge.net/msg00779.html","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-665,DefaultDOManager logging WARNings for valid dsLocations,"As reported on the fc-users mailing list (http://thread.gmane.org/gmane.comp.cms.fedora-commons.user/5187), DefaultDOManager is logging WARNings on modifies for dsLocations that don't begin with a URL scheme. Looks like this change dates to r8450.  The warning could be useful to keep, but we should be excepting valid internal dsLocations.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-666,Maven build warnings for ${version} ${pom.version} ${artifactId},Maven reports various WARNings for the build:  [WARN] The expression ${version} is deprecated. Please use ${project.version} instead. [WARN] The expression ${artifactId} is deprecated. Please use ${project.artifactId} instead. [WARN] The expression ${pom.version} is deprecated. Please use ${project.version} instead.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-668,Improved Authentication Challenge Control,"From https://fedora-commons.org/confluence/display/~cwilper/2010/03/18/Authentication+Challenge+Control+-+A+Thought+Experiment  Fedora's SOAP API has historically been split into two: API-A and API-M. The REST API, being resource-oriented, naturally isn't. And the control over which endpoints can be set to require authentication is inconsistent across the two. The old ""Authenticate for API-A? Authenticate for API-M?"" options no longer make sense when you look at Fedora's APIs as a whole.  Here's one way the situation could be improved.     1. For the SOAP API (all read-oriented and write-oriented methods), always require authentication.    2. For the REST API, on a per-verb basis (POST/PUT/DELETE/GET), offer the following options at install time:          1. Proactive Challenge: Always require authentication.          2. Reactive Challenge: Only require authentication if an un-authenticated request failed due to AuthZ rules. ","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-669,Do a Java version sanity check at install time,See this thread:  http://article.gmane.org/gmane.comp.cms.fedora-commons.user/5205  Java version incompatibility would be much easier for users to diagnose if the installer did a quick sanity check.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-670,Better error reporting when database connection test fails at install time,"When the database connection test fails at install time, only the message of the exception is printed.  In some cases, this obscures the cause of the problem and makes it difficult to diagnose.  The installer should provide more detail in these cases.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-671,Allow use of FeSL AuthN without FeSL AuthZ during install,"While FeSL is in the experimental phase, it would be helpful if people could try out the authentication part without the authorization part.  It is possible to configure this after the fact today, as evidenced by this thread: http://article.gmane.org/gmane.comp.cms.fedora-commons.devel/1609  ..but the process is manual.  This improvement would add an install-time option to enable FeSL authentication without needing to enable its authorization.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-672,Installer should provide a sanity check of runtime environment,It's desirable for the installer to have access to runtime environment evaluation to warn users of potential problems just prior to install.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-673,REST getNextPID with invalid PID namespace throws error but results in update to PIDGEN table,"Reported by Janna Wernekamp, see http://sourceforge.net/mailarchive/message.php?msg_name=4BAFF0A3.7040504%40gmail.com for report of this.  The error is being thrown by the Messaging NotificationInvocationHandler after the method has been invoked.  Looks like the namespace is not being validated before the method is called.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-674,Implement API-M getDatatsreams in REST API,"The REST api should allow you to get the API-M version of an object's datastream list, including information about datastream controlGroup",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-675,Implement getDatastreamHistory on REST API,Currently the REST api does not provide a way to get a datastream's version history -- you've got to parse the foxml to get that info.  getDatastreamHistory should be exposed at  /objects/{pid}/datastreams/{dsID}/versions  ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-676,Add PID namespace to the resouce index,"When generating triples for an object in the resource index, include a triple that specifies the PID namespace.  Requested by Janna Wemekamp -see http://sourceforge.net/mailarchive/message.php?msg_name=4BB65010.8040806%40gmail.com  For example: $pid <fedora-model:hasPIDNamespace> 'c4oc'  The namespace and predicate will need to be decided.  The Fedora model namespace seems appropriate as this includes other object properties, comments welcomed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-677,Fedora embedded SQL database is not in Fedora's data directory,"If Fedora is installed using the embedded derby SQL database, the data directory for derby is at $FEDORA_HOME/derby.  This should instead be under $FEDORA_HOME/data - particularly to simplify server backup.  NB:  implementation of this could require a migration of the existing data directory on installation - the upgrade guides specify a complete rebuild (including SQL database) when moving from 2.x to 3.x; for upgrading 3.x the instructions include configuring fedora.fcfg to point to the existing SQL database so it would seem safe to simply implement this change (in the default fedora.fcfg).    As long as the issue is documented in the release notes, folks can decide whether to leave the database at its existing (pre-upgrade) location (modifying fedora.fcfg to point at it); or move the database to the new location.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-680,REST API throws NPE when adding new datastream without providing media- and mime type,"if neither mediaType nor mimeType are provided and the datastream to be added is new, Fedora will throw a NPE because it tries to access the mime type of the nonexisting datastream.   see: http://fisheye.fedora-commons.org/browse/FCREPO/trunk/fcrepo-server/src/main/java/org/fcrepo/server/rest/DatastreamResource.java?r=8493, line 389   Here is the log:  - >> ""POST /fedora/objects/changeme:1006/datastreams/FFFFF?versionable=true&controlGroup=R&dsLocation=http%3A%2F%2Flocalhost%3A8080 HTTP/1.1[EOL]""  - >> ""Accept: */*[EOL]""  - >> ""Content-Length: 0[EOL]""  - >> ""Host: localhost:8080[EOL]""  - >> ""Connection: Keep-Alive[EOL]""  - >> ""User-Agent: Apache-HttpClient/4.0 (java 1.5)[EOL]""  - >> ""Cookie: JSESSIONID=DA331916CEDC7FA7365C4071A052C51A[EOL]""  - >> ""Cookie2: $Version=1[EOL]""  - >> ""Authorization: Basic xxxx=[EOL]""  - >> ""Accept-Encoding: gzip,deflate[EOL]""  - >> ""[EOL]""  - << ""HTTP/1.1 500 Internal Server Error[EOL]""  - << ""Server: Apache-Coyote/1.1[EOL]""  - << ""Content-Type: text/plain[EOL]""  - << ""Transfer-Encoding: chunked[EOL]""  - << ""Date: Tue, 06 Apr 2010 14:40:39 GMT[EOL]""  - << ""Connection: close[EOL]""  - << ""[EOL]"" 2010-04-06 16:40:39,260 DEBUG  HTTPBuilder - Parsed data to instance of: class java.io.InputStreamReader  - << ""1167[EOL]""  - << ""javax.ws.rs.WebApplicationException: java.lang.NullPointerException[\n]""  - << ""[0x9]at org.fcrepo.server.rest.BaseRestResource.handleException(BaseRestResource.java:164)[\n]""  - << ""[0x9]at org.fcrepo.server.rest.DatastreamResource.addOrUpdateDatastream(DatastreamResource.java:480)[\n]""  - << ""[0x9]at org.fcrepo.server.rest.DatastreamResource.addDatastream(DatastreamResource.java:322)[\n]""  - << ""[0x9]at sun.reflect.GeneratedMethodAccessor57.invoke(Unknown Source)[\n]""  - << ""[0x9]at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[\n]""  - << ""[0x9]at java.lang.reflect.Method.invoke(Method.java:597)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$ResponseOutInvoker._dispatch(EntityParamDispatchProvider.java:157)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:124)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:71)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:63)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:555)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:514)[\n]""  - << ""[0x9]at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:505)[\n]""  - << ""[0x9]at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:359)[\n]""  - << ""[0x9]at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)[\n]""  - << ""[0x9]at org.fcrepo.server.security.servletfilters.FilterRestApiFlash.doFilter(FilterRestApiFlash.java:79)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)[\n]""  - << ""[0x9]at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)[\n]""  - << ""[0x9]at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)[\n]""  - << ""[0x9]at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)[\n]""  - << ""[0x9]at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)[\n]""  - << ""[0x9]at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)[\n]""  - << ""[0x9]at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)[\n]""  - << ""[0x9]at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)[\n]""  - << ""[0x9]at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)[\n]""  - << ""[0x9]at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)[\n]""  - << ""[0x9]at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)[\n]""  - << ""[0x9]at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)[\n]""  - << ""[0x9]at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)[\n]""  - << ""[0x9]at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)[\n]""  - << ""[0x9]at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)[\n]""  - << ""[0x9]at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)[\n]""  - << ""[0x9]at java.lang.Thread.run(Thread.java:637)[\n]""  - << ""Caused by: java.lang.NullPointerException[\n]""  - << ""[0x9]at org.fcrepo.server.rest.DatastreamResource.addOrUpdateDatastream(DatastreamResource.java:389)[\n]""   ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-681,Update documentation to reflect message digest algorithms that are supported,"From FCREPO-626:  ""The hash algorithms HAVAL, TIGER and WHIRLPOOL are currently not supported by Fedora although the documentation suggests otherwise""  Update documentation to reflect this.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-682,MySQL: Alter column type in doFields to LONGTEXT,"Batch ingests of large ""archival"" base-64 encoded objects were failing with a StorageDeviceException error. The following was also appearing in fedora.log: com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'dcRelation' at row 1  In the table doFields, the column type for dcRelation was altered from TEXT to LONGTEXT and ingests were successful. Could Fedora automatically create the table with this column type?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-684,"Clone object, as an alternative to ingest","Fedora is difficult to work with in a CRUD workflow. There are no way to create a new object. This fix would provide an api function, that allow the user to copy a fedora object. Thus, certain objects can be specified as template objects with default values.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-687,"Create ""Upload"" method in REST API",The existing API-M-LITE includes a /fedora/management/upload method - for uploading files to a temporaroy location and providing a URL that can then be used for other API methods that require a URL for content (rather than sending the content directly),legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-688,REST API completion (3.4),"Parent issue to group all REST API completion issues for release 3.4  These issues should be ones deemed necessary to complete the REST API - but not bugs with the REST API unless they are serious enough to make the particular method unusable.  Need to determine which of these issues should be completed as part of 3.4 - particularly to get to the stage where the existing ""LITE"" APIs can be deprecated.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-689,Enable optimistic locking for modify operations,"Extend Fedora API to support simple, optimistic locking for operations such as modify datastream. We've discussed implementing proper transaction support in Fedora for years (e.g. supporting JTA throughout), but supporting the very common use case of multiple users concurrently editing an object/datastream could be largely accomplished by supporting some form of optimistic locking.  As it stands, Fedora applications have to take elaborate steps to ensure one user doesn't step all over another user's work, and ultimately, can't guarantee this won't be the case.  For example, extend the relevant API methods to take a nillable lastModifiedDate. If null, the method behaves as it currently does (i.e. no check), else, if the resource's lastModifiedDate is later than the request's, fail with an HTTP 409 Conflict.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-690,REST API purgeDatastream returns 204 instead of 404 for a non-existent datastream on a valid pid,"DELETE on  /fedora/pid/datastreams/dsID correctly returns a 404 when pid is not found, but returns a 204 when the pid is valid but dsID is not, which is the same as a successful result for a vaild pid/dsID",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-691,"Too-long DC, other values can cause triplestore to reach inconsistent state","When using MPTStore as the Resource Index option, with a database (like Postgres or Oracle) that enforces a maximum length on column values, the triplestore can get into an inconsistent state because the asynchronous ""flush"" of the triples to update doesn't succeed due to a DB error.  Currently, the only way of dealing with this is to track down the problematic object(s) in the repository, remove or correct them in the underlying storage, and do a resource index rebuild.  Ideally, Fedora would have an option to either reject or auto-truncate such too-long values and avoid this inconsistency problem altogether.  This doesn't occur when using Mulgara as the underlying database because it doesn't have such length limits, however the option would be very helpful for people who have chosen another underlying triplestore.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-692,Add atom:category fedora-types:pid to JMS fedora.apim.update ingest message,"The JMS fedora.apim.update message triggered on ingest does not have the fedora-types:pid atom category set. For consistency with the other messages, it'd be helpful to add this.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-694,Option to truncate or reject doFields updates based on length,"Different databases will behave differently based on whether the to-be-stored (or indexed) values exceed internal limits.  This improvement allows one to set a desired behavior (to truncate or reject) fields that exceed length limits.  Implementation should have the length limit specified in the dbspec file, and the desired behavior (truncate or reject) specified in fedora.fcfg.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-695,"Expose an ""evaluate"" method in the API for FeSL","The Muradora codebase included an ""evaluate"" API method which allowed specification of subject, roles, actions, pid and (optional) dsid to determine if the specified action would be permissible in the given context.  The code is present in FeSL eg at org.fcrepo.server.security.xacml.pep.ContextHandlerImpl.evaluate  This method would be useful for front-end applications so that, for instance, a user interface appropriate to a user's permissions can be presented.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-696,Adding datastream with managed content throws Exception when providing a checksum,"The following was reported on the mailing list:  I'm using Fedora 3.3 and I'm having a little bit of trouble with using checksummed managed datastreams through the REST client directly or the Flex client, and before digging further, I'd like to find out if any one else has run into anything similar:  Using the REST API:  INFO 2010-05-11 19:03:41.341 [http-8080-2] (DefaultManagement) Completed addDatastream(pid: file:5, dsID: File, altIDs: , dsLabel: fo-to-solr.xsl, versionable: true, MIMEType: application/xml, formatURI: null, dsLocation: file:/opt/scripts/fo-to-solr.xsl, controlGroup: M, dsState: A, checksumType: MD5, checksum: 2903fd799d56a1fa15cd614a346cc71a, logMessage: null) ERROR 2010-05-11 19:03:41.341 [http-8080-2] (DatastreamResource) Unexpected error fulfilling REST API request  fedora.server.errors.ValidationException: Checksum Mismatch: ExceptionReadingStream  ---  Using the Fedora Admin Flex client: INFO 2010-05-11 19:07:00.070 [http-8080-1] (DefaultDOManager) Committing modification of file:5 INFO 2010-05-11 19:07:00.072 [http-8080-1] (DefaultDOManager) Getting managed datastream from internal uploaded location: uploaded://6 INFO 2010-05-11 19:07:00.101 [http-8080-1] (DefaultDOManager) Replaced managed datastream location with internal id: file:5+File+File.0 ERROR 2010-05-11 19:07:00.117 [http-8080-1] (DefaultExternalContentManager) URI is not hierarchical java.lang.IllegalArgumentException: URI is not hierarchical [...] WARN 2010-05-11 19:07:00.129 [http-8080-1] (Datastream) IOException reading datastream to generate checksum  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-697,Web admin client does not correctly handle PIDs with octet-escaped characters,"To reproduce:  Create a new object, specifying the PID as: changeme:one%2Ftwo  Error message:  ""Could not retrieve object '' from the repository.  Either the object does not exist, or you do not have permission to view it.""  It seems that th object is in fact created correctly - and is visible under ""Search"".  However the web admin client is unable to open the object, probably because it is not URL-encoding the PID in calls to the REST API.  It is possible to search for and view the object using /fedora/search and /fedora/objects",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-698,info:fedora registration contains outdated information,The info:fedora-registration needs to be updated. http://info-uri.info/registry/OAIHandler?verb=GetRecord&metadataPrefix=reg&identifier=info:fedora/ Contains old information and dead links.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-699,PUT /objects/{pid}/datastreams/{dsid} sets versionable to true if it is not specified (REST API),Reported by Jasper Op de Coul - http://fedora-commons.1317035.n2.nabble.com/versionable-attribute-on-modifyDatastream-td5066130.html#a5066130  Test case: (1) curl -u fedoraAdmin:fedoraAdmin -T dc.xml -v http://localhost:8080/fedora/objects/changeme:1/datastreams/DC?dsState=A\&versionable=false - verify datastream versionable is set to false (2) curl -u fedoraAdmin:fedoraAdmin -T dc.xml -v http://localhost:8080/fedora/objects/changeme:1/datastreams/DC - datastream state has now been updated to true (it should not have been)  See FCREPO-608 for a similar issue with object state.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-700,REST api export specifies the wrong media type for atomZIp archives,"When using the REST api to export objects, the  content-type header in the response always contains ""text/xml"".  In the case of atomZip-1.1 format, this should be ""application/zip"" instead.    For a locally installed Fedora using default parameters, this can be observed by: http://localhost:8080/fedora/objects/fedora-system:FedoraObject-3.0/export?format=info%3Afedora%2Ffedora-system%3AATOMZip-1.1  This bug can cause some undesirable effects in the browser.  For example - When exporting from the admin client, the default file name may  end in "".xml"" instead of "".zip"" - When using the browser to view an export url as above, it may display an ""xml not well formed"" message rather than presenting a save file dialogue box  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-701,REST API purgeDatastream - invalid date format for start time purges all versions of a datastream,"Calling purgeDatastream with a start date-time parameter in a format that Fedora doesn't recognize results in Fedora using a start date-time of null and purging *all* versions of the datastream.  For example, I have a datastream with versions created at: 2010-05-19T20:41:42.903Z, 2010-05-19T20:41:42.540Z, and 2010-05-19T20:41:42.140Z  If I call purgeDatastream with a startDT parameter of 2010-05-19T20:41:42.000540Z (which should remove the 2 newer versions, but format is not quite right), *all* versions of the datastream are purged.  I get the same behavior if I use a date in another format, e.g. 2010-05-19 20:57:34.739000+00:00 (even for a time that is newer than all the datastream versions).  Here is the output for the purgeDatastream call from the fedora log:  Completed purgeDatastream(pid: eulcoretest:11565, datastreamID: TEXT, startDT: null, endDT: null, logMessage: Purged datastream (ID=TEXT), versions ranging from the beginning of time to the end of time.  This resulted in the permanent removal of 3 datastream version(s) (2010-05-19T16:41:42.140Z, 2010-05-19T16:41:42.540Z, 2010-05-19T16:41:42.903Z) and all associated audit records.)  As a side note, it might be helpful to indicate in the documentations that Fedora *will* accept a date-time that includes 3 digits of microseconds (same format as what it returns in datastream history) ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-702,Update version of Mulgara,"Update Fedora to use the latest version of Mulgara, currently 2.1.8.  Significant fixes over version 2.1.4 (current version) include - the TQL endpoint now works correctly, in 2.1.4 this generated invalid XML in some circumstances, particularly subqueries; improved optimisation of queries that use UNION, which could impact FCREPO-652 and FCREPO-651",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-704,Ingesting a managed content datastream via REST fails with files larger than 2GB,Reported by Graeme West http://fedora-commons.1317035.n2.nabble.com/Large-datastream-ingest-issue-Bad-request-unable-to-fulfill-REST-API-request-java-lang-NumberFormatE-td5094256.htm  Ingesting a file larger than 2GB fails with java.lang.NumberFormatException.  The source of this is in RestUtil -  rContent.size = Integer.parseInt(lengthHeaders.get(0));  This should be long rather than int (along with inner class RequestContent size field and related methods).,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-705,Extend Config A test coverage to include REST API support,Extend test coverage in config A to include exercising the REST API - ideally the REST API should be tested under a variety of authorisation and authentication scenarios.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-706,Datastream bindings for methods passing as URL use old-style LITE API,"When a method passes a datastream to a service as a URL reference, the URL it uses is the old LITE API-A (fedora/get) - this should be updated to use the new REST API URLs.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-707,ListDatastreams xml response is not schema valid,"listDatastreams request (format=xml) returns a response that does not validate. For example, http://localhost:8080/fedora/objects/fedora-system:ContentModel-3.0/datastreams?format=xml  returns a response that is missing the default namespace declaration, and the schemaLocation has an invalid location (at least via REST API)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-708,REST API purgeDatastream returns HTTP 204 No Content instead of the dates of the deleted versions,"Unlike the SOAP version which returns the dates of the purged datastream versions, the REST API request only returns a 204.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-709,REST API returns datastreamProfile that is not schema-valid,"Similar to FCREPO-707, datastreamProfile (which is returned by a number of the datastream methods) doesn't declare its namespace. Also, a published instance of datastreamProfile.xsd to provide for the schemaLocation appears to be missing.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-710,REST API getObjectProfile xml response is not schema valid,Namespace declaration is missing from output.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-711,The responsedate from The OAI Identify response is wrong.,"The responsedate in The internal OAI providers Identify answer is wrong. It seems that the calculated timezone and daylight savings offsets are added to the localdate, instead of subtracted.  Example:  Local time here 13:22  Ingested two objects into fedora. lastModified date 11:23 (which is UTC)   query OAI Provider with:  http://localhost:9080/fedora/oai?verb=Identify   and the answer is:   <responseDate>2010-05-31T15:13:46Z</responseDate>  The offending code is located in:    /src/java/fedora/oai/OAIResponder.java, line 631   where         UTCDate.setTime(localDate.getTime() + tzOffset);   should be replaced with         UTCDate.setTime(localDate.getTime() - tzOffset); ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-713,Responses to various API requests are not schema-valid,"XML responses to API methods such as getObjectHistory, getObjectProfile are not schema valid.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-716,OAI Provider handle the from and until arguments wrong.,"The OAI Provider handle the from and until arguments wrong.  We've tried to use the from and until parameters with the ListRecords verb.  The behaviour now seems to filter objects on CreationDate and not LastModificationDate as expected.  The Filtering is done in the getDatePart method in FedoraOAIProvider.java in line 340, where the FieldSearchQuery is built. The query uses dcmDate instead of mDate, which is why it filters on creationDate. If the dcmDate in the from and until part are substituted mDate the FedoraOAIProvider works as expected.  A patch file solving the problem is attached",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-718,Refactor management of temp and uploaded files,"Code for managing temp and uploaded files is somewhat distributed through the codebase, it would be better to have this in a single unit of code - a temp file management class (with an interface) to manage creating, reading and cleaning up temporary files.  Examples:  DefaultManagement - creates and reads uploaded files, including time-based expiry of these files DatastreamManagedContent - creates and reads uploaded files through DefaultManagement (thus requires authorization for the API-M methods) FOXMLDODeserializer creates temp files (for inline binary managed content) (and other Deserializers) DefaultDOManager deletes temp files (managed inline binary content)  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-721,Ensure latest versions of schema files are available at http://www.fedora-commons.org/definitions/1/0/,Ensure all schema files for REST API responses are available online.  Candidate list to check (please add any others known about):  datastreamHistory.xsd datastreamProfile.xsd fedoraObjectHistory.xsd fedoraRepository.xsd getNextPIDInfo.xsd listDatastreams.xsd listMethods.xsd ojbectItemIndex.xsd objectMethods.xsd objectProfile.xsd,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-722,Allow ModifyDatastreamByValue to update managed content datastreams,"ModifyDatastreamByValue (APIM) can currently only modify X datastreams.  For managed content datastreams should be possible to modify with this method.  Ensure REST API is also tested with this.  Note: The REST API allows this, but has to use special coding for the time being because the management module does not directly support it.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-723,Journaling unit tests cannot handle multiple instances of repo on same server,fcrepo-server/src/test/java/fedora/server/journal/readerwriter/multifile/TestLockingFollowingJournalReader.java -> fedoraTestingJournalFiles cannot handle multiple instances of repo on same server. The folder fedoraTestingJournalFiles is created in a tmp directory. The first instance to create this folder blocks other instances depending on write permissions.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-724,Provide a rebuild utility to compute and store SIZE attributes for managed content datastreams,"FCREPO-64 means that SIZE attributes are now computed and stored for managed content datastreams.  However pre-existing managed datastream versions won't have this attribute, so the size won't be correctly reported.  Therefore provide some kind of rebuild/migration tool to calculate SIZE for existing M datastream versions that don't have the SIZE attribute and save in the FOXML.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-725,Provide dynamic generation of datastream size for E and R datastreams.,"FCREPO-64 introduces persisting size of M datastreams in FOXML and reporting these via API calls.  Implement SIZE attribute for E and R datastreams:  eg when the SIZE attribute is requested, do a HEAD request on the external content (following redirects as necessary) and report the HTTP response Content-Length header.  Ensure these attributes are provided by HEAD requests for datastream dissemination via the REST API.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-726,Provide solution to allow legacy LLStore plug-ins to work with new java package names,"Java package names in 3.4 have been changed, so legacy LLStore plug-ins will no longer work.  Provide some kind of adapter to allow these to work.  Pasted from FCREPO-622:  2) Legacy LLStore plugins will need to be updated. Preferably to plug in via Akubra, but if that can't be done, we should try to provide a solution that allows the use of these older plugins (like a legacy llstore jar, and an akubra adapter) ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-727,"Provide a link to datastream content from the ""list datastreams"" view","Prior to release 3.2, the datastream ID on ""list datastreams"" linked through to datastream content.  Since then the link is to the ""datastream profile"" which then contains a link to datastream content - however where API-A does not require authorization this means it is no longer possible for a user to navigate to datastream content.  A link to both the profile and the content should be provided on ""list datastreams"".  For consistency with releases prior to 3.2, ID link should be to content, with an additional ""profile"" link.  For consistency with release 3.2 onwards, ID link should be to profile (as it is), with an additional ""content"" link.  Thoughts welcomed on which is more appropriate.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-729,"Partial, on-line rebuild support","Currently, Fedora's rebuild tool works across the entire repository only.  One must stop the repository, run a full rebuild, then start the repository.  It would be nice if one could do any of the following: 1) Add to, or remove from, the list of foxml and managed content directories that are scanned by the rebuilder. 2) If an on-line rebuild is requested, don't delete all the indexes first.  Instead, accept a list of foxml and/or managed content directories to scan.  For each item encountered, remove it from the indexes and re-add it, as necessary.  NOTE: This feature request was originally submitted as ""Ability to add new directories (on-demand) for rebuilder"", after a committer discussion about partial rebuild support.  The new description widens the scope of the original request...it may be broken down into sub-issues if it make sense (for example) to implement adding new directories and partial rebuilds separately.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-731,TestZip tmp files are not deleted and not unique,"Temporary files and folders in fcrepo-server/src/test/java/fedora/utilities/TestZip.java package fedora.utilities have hard coded names and are not deleted upon exit.   I suggest a complete rewrite using File.createTempFile with System.nanoTime(). As is now the this class is not particularly easy to maintain or patch.  For now I've patched it as follows:  <snippet>         private final String TMP_DIR = System.getProperty(""java.io.tmpdir"");          private final String ZIP_FILE = TMP_DIR + File.separator + ""test"" + System.nanoTime() + "".zip"";          private final String TEST_DIR = TMP_DIR + File.separator + ""test"" + System.nanoTime();         ...         File foo = new File(testDir, ""foo"");         File bar = new File(testDir, ""bar"");         File baz = new File(bar, ""baz""); </snippet>  and that's not very pretty! Something like this might be better:  <snippet>         //private final String TMP_DIR = System.getProperty(""java.io.tmpdir"");          private final String ZIP_FILE = File.separator + ""test.zip"";          private final String TEST_DIR = File.separator + ""test"";         ...         File foo = File directory = File.createTempFile(""foo"", System.nanoTime(), System.getProperty(""java.io.tmpdir"") );          File bar = File directory = File.createTempFile(""bar"", System.nanoTime(), System.getProperty(""java.io.tmpdir"") );          File baz = File directory = File.createTempFile(""baz"", System.nanoTime(), System.getProperty(""java.io.tmpdir"") );  </snippet>  though a more extensive rewrite would be preferable.  Please refer to http://fedora-commons.org/jira/browse/FCREPO-723 for a similiar issue.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-732,Parameter datastreamDefaultFilename mis-spelt as datstreamDefaultFilename in fedora.fcfg,But fortunately consistently mis-spelt in code also in DatastreamFilenameHelper in the REST package.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-733,Get validate to also validate the ontologies for RELS-INT,As the title says. The stuff that did not make it in as the first part of ECM,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-734,Bug in relative SchemaLocation paths in Enhanced Content Model schemas,"Content models can associate schemas with datastreams. This happens with the <extension name=""SCHEMA> element.  The schema will always be defined in a <reference type=""xsd"" datastream=""SCHEMASTREAM""/> element.  As these datastreams can be internal, I have added an ability to import other local schemas. So, if you write  ... schemaLocation=""../SCHEMASTREAM2""/>, the validator will parse this as a reference to the datastream SCHEMASTREAM2 in the same object.  But if the validator is currently reading a schema that is NOT stored in Fedora, but which import another schema through a relative URL, the same bit will be invoked  so, if some schema outside Fedora uses ... schemaLocation=""../simpleDC.xsd""/>, the validator will attempt to request the ""simpleDC.xsd"" datastream from the content model. If there is no datastream with this name, the URL will be resolved normally. But if there is, the datastream will be used instead of the local schema. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-735,Test config files are out-of-date,"The resources/scripts/test properties files are out of date.  For instance they use fesl.enabled, whereas the installer now uses fesl.authn.enabled and fesl.authz.enabled.  Maybe we could have an installer-generated warning so when reading a properties file during installation, if an expected value is not found and the default is used, this could be reported?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-736,System test failures when fesl authn enabled (fesl authz disabled),FeSL AuthN is the default for 3.4 (see FCREPO-671) but this results in some integration test failures:   Eg ConfigA  Failed tests:   testFindObjects(org.fcrepo.test.api.TestRESTAPI)   testResumeFindObjects(org.fcrepo.test.api.TestRESTAPI)   testFindObjectsBadSyntax(org.fcrepo.test.api.TestRESTAPI)   testUpload(org.fcrepo.test.api.TestRESTAPI)  Failed tests:   testXACMLAPIMAccess(org.fcrepo.test.api.TestXACMLPolicies)  Tests in error:   testXACMLMultiOwnerAccess(org.fcrepo.test.api.TestXACMLPolicies)   testXACMLUnmodifiableContentModel(org.fcrepo.test.api.TestXACMLPolicies)  Not investigated the reason for these - could be issues with the tests rather than fesl AuthN?,"legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-738,The REST api create xml return values by hand,"There is a class DefaultSerializer, in the REST api. It's job is to convert fedora datastructures to xml and html return values for the REST api. It does this by initializing a stringbuffer and appending strings as it parse the datastructure. This procedure works, but should be improved to some sort of automatic conversion or generation.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-739,documentation wrong for Fedora-modify,"There is a bug in the documentation for Fedora-modify for version 3.3 ( https://wiki.duraspace.org/display/FCR30/Client+Command-line+Utilities ). The documentation says:  ""# validate-only-option - an _optional _ parameter indicating whether to only validate the directives file or to immediately process the file. The parameter can have any non-blank value. If present, the directives file will be validated only. If omitted, the directives file will be immediately processed.""  In fact, the opposite iis true. If absent, the director of file will be validated. If *present*, the directive file will be processed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-740,Allow policies from multiple parents (multiple collection membership),"Currently the request context resources are built from (a) the PID (and dsID) of the object and (b) the same with all parents.  According to the XACML 2.0 spec, multiple parent lineages should be included, ie if a resource test:res is a member of test:col1 and test:col2, then we should be generating - test:res - test:col1/test:res - test:col2/test:res  Currently only a single parent lineage is calculated (using the first parent relationship discovered in the relationships).  This would allow resources to be members of multiple collections, and to use policies from all parent collections.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-741,"REST endpoint getRelationships throws ""Unsupported output format: Sparql""","When executing the request:  ""GET /fedora/objects/fedora-system:FedoraObject-3.0/relationships?format=sparql"" the following stack trace is thrown:   javax.ws.rs.WebApplicationException: org.trippi.TrippiException: Unsupported output format: Sparql   org.fcrepo.server.rest.BaseRestResource.handleException(BaseRestResource.java:168)   org.fcrepo.server.rest.RelationshipResource.getRelationships(RelationshipResource.java:103)   sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   java.lang.reflect.Method.invoke(Method.java:597)   com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:175)   com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)   com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:163)   com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:71)   com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111)   com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:63)   com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:689)   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:647)   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:638)   com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:309)   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:425)   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:590)   javax.servlet.http.HttpServlet.service(HttpServlet.java:717)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)   org.fcrepo.server.security.servletfilters.FilterRestApiFlash.doFilter(FilterRestApiFlash.java:79)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)   org.fcrepo.server.security.jaas.AuthFilterJAAS.doFilter(AuthFilterJAAS.java:287)   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)   org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)   org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)   org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)   org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)   org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)   org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)   org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)   org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)   org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)   java.lang.Thread.run(Thread.java:637) Caused by: org.trippi.TrippiException: Unsupported output format: Sparql   org.trippi.TripleIterator.toStream(TripleIterator.java:150)   org.trippi.TripleIterator.toStream(TripleIterator.java:116)   org.fcrepo.server.rest.RelationshipResource.getRelationships(RelationshipResource.java:98)  ... 35 more  All other formats (xml, rdf/xml, turtle, n-triples) seem to work.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-742,REST endpoint purgeRelationship does not indicate if the relationship was purged,"The current implementation of the purgeRelationship REST endpoint does not indicate if a relation was actually purged. It returns ""204 no content"" in all cases. It should however return whether the operation succeeded or not (as supported by the respective APIM method).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-743,TriplestoreConnector is not Spring-friendly,"proposing some small changes to TriplestoreConnector for Fedora 3.5 release: * deprecate init(Map), add setConfiguration(Map) and getConfiguration(Map) * allow for constructor injection of config map on impls that support it * add an open() method, so that configuration might be inspected by client code before use (existing impls can be updated to call open() within their getReader/Writer methods).  Also, removing log4j dependency in favor of slf4j seems desirable (and relatively easy).  I'm not done with the other patch (json), but I think this stuff is important enough to prioritize it.",legacy - Trippi,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0
FCREPO-744,Remove references to internal Sun XML APIs,import com.sun.org.apache.xml.internal.serialize.OutputFormat; import com.sun.org.apache.xml.internal.serialize.XMLSerializer;  Bumping priority: will be irresponsible to leave these in the 3.x line when it ends. They should be replaced with the apache impls.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-745,"Bundled Tomcat has enableLookups=""true"" in server.xml","This setting should be changed to false, so Tomcat doesn't attempt a reverse DNS lookup for each request.  This can be a real performance limiter.  See related thread on fedora-commons-users list: http://fedora-commons.1317035.n2.nabble.com/Hostname-lookups-appears-to-be-affecting-performance-can-it-be-turned-off-td5321171.html#a5321171",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-747,Improve repository scalability for individual operations and for multithreaded operations.,"In testing particularly with Sun, the core Fedora Repository has proven to be significantly slower than the underlying file storage subsystem.  Also, multi-threaded performance has proven to top out at 7-12 connections.  The repository needs to be analyzed to locate the reasons for performance bottlenecks and refactored to achieve performance levels closer the underlying storage capabilities.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-749,The ownerId object property is added automatically with no value when not supplied during FOXML ingest.,"When using the REST API via the MediaShelf Fedora client, the ownerId object property is created even though it is not in the supplied FOXML.  It is given the value of an empty string.  It would expect either to default to the login credential or not be added automatically.  I have not tested yet from the command line or other clients to isolate the problem.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-750,Ability to clear the FeSL response cache,"The FeSL PEP contains a response cache.  Evaluation requests and responses are cached, so that repeating the same request will result in returning a cached item rather than re-evaluating the request.  Environment variable PEP_NOCACHE can be set to true to completely disable the cache.  Currently when policies are added, edited etc, the cache is not invalidated, with the impact that existing cache entries not reflecting the policy change could be returned (ie incorrect evaluation response).  The default cache expiry time is 10 minutes, so policy changes are not guaranteed completely effective until after this time.  Provide some means of clearing the cache, eg a configurable option so that (optionally) when a policy is added etc the cache is cleared. ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-751,"Identify a ""recommended"" Java client library for the 3.4 release","Identify a ""recommended"" Java client library for people to use for the 3.4 release.  Mark existing Fedora client code as deprecated.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-752,Validation of checksum as a repository setting,"When creating a datastream, the API allows the user to specify a checksum, and a checksum type. If these are specified, Fedora will automatically validate the checksum against the contents. For some usecases, this is the wanted behaviour.  When working with large external datastreams however, this become a serious bottleneck. If I know the checksum of the remote file, I want to be able to tell this to Fedora, so that it is stored in the standard way, without having Fedora download the entire terabyte long datastream to make sure that I gave the correct checksum.  What I would like to see is a fcfg param, autoValidateChecksums, that specify if user provided checksums should be validated, or just accepted.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-753,Credentials not passed through for API-A REST calls when FeSL AuthN enabled,"With FeSL AuthN enabled and API-A auth required turned off, it is not possible to authenticate for API-A REST calls.    Tested by supplying pre-emptive auth credentials (BASIC, DIGEST) using WizTools.org RESTClient - Fedora is not picking up the supplied login ID.  One impact of this is that if an object is deleted, access is (correctly) restricted by a XACML policy for unauthenticated users, however it is not possible to authenticate (eg as administrator) to view the object profile.  Thus once an object is deleted in the web admin client, the client can no longer retrieve the resource.  It would seem that the fix for FCREPO-615, http://fedora-commons.svn.sourceforge.net/viewvc/fedora-commons?revision=8467&view=revision, results in skipping retrieving preemptively-supplied credentials.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-754,No authentication for UserServlet with FeSL AuthN and API-A auth turned off,The UserServlet does not require authentication (and will not pick up any pre-emptively supplied credentials).  See FCREPO-753 also.,"legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-755,RELS-EXT/INT support for other RDF formats,"From Steve's recent message to the user list[1]: ""Alternatives could include N3 and N-Triples, both of which tend to be more readable (and therefore potentially easier to author) than RDF/XML - possibly useful to those less experienced in creating RDF/XML.   This would not be possible with the current 3.3 release, as the RELS-* datastreams must be XML as they are ""X"" datastreams (N3 and N-Triples are not XML), but could be an option for 3.4 onwards now that we support M datastreams for RELS-*.   (Additionally, RDF/XML has limitations as to to what RDF can be serialized as RDF/XML.)""  [1] http://fedora-commons.1317035.n2.nabble.com/fcrepo-user-FOXML-RELS-EXT-member-of-two-collections-tt5373319.html#a5376035",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-756,Batch purge objects from command line,"Modify the class org.fcrepo.client.utility.AutoPurger to optionally take as an argument the path to a file containing a list of PIDS of objects to be purged, in lieu of a single pid.  Open the file, loop through the PIDs and purge each one, logging a message for each purge event.  Throw an exception if the file specified on the command line does not exist or cannot otherwise be read.  Update the fedora-purge.* scripts to accept the optional file parameter on the command line.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-757,"Add ""isCollection"" to the Fedora relationships ontology","Currently ""isCollection"" is not present in the Fedora relationships ontology at http://fedora-commons.org/definitions/1/0/fedora-relsext-ontology.rdfs.  However it's a term that does seem to get used fairly frequently to allow discovery of resources that have children.  See the recent post by Gill Hamilton to the users list.  The wiki page FAQ item on this does in fact use this predicate although it is not defined in the ontology (https://wiki.duraspace.org/pages/viewpage.action?pageId=17530955) and Muradora also made use of this undefined predicate.  Should we therefore consider updating the ontology to include this?  Or should we recommend that people use a predicate from their own namespace (and update the wiki FAQ item also)?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-758,FeSL policy validation issues,* Policies not being validated (configuration had validation turned off) * Validation exceptions being swallowed (but logged) in dbxml update decorator * Invalid/incorrect access-fedora-internal-call policy * Invalid test policy in TestHTTPStatusCodesConfigC,legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-759,FeSL incorrect handler mapping for REST modifyDatastream,"The REST methods for modifyDatastream and setDatastreamState both are a PUT to /objects/{pid}/datastreams/{dsid}.  setDatastreamState has a query parameter of dsState.  modifyDatastream can optionally supply this parameter also.  When modifyDatastream includes this parameter, org.fcrepo.server.security.xacml.pep.rest.filters.ObjectsFilter.getObjectsHandler incorrectly identifies the method as setDatastreamState and thus returns the incorrect handler.  Impact is fairly low as permissions for both of these methods are likely to be the same.  In fact we have an overlap of permissions as modifyDatastream can also do setDatastreamState, we probably want a single handler for both (ie the modifyDatastream handler should probably handle setDatastreamState also).",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-760,Policy managers can create policies pertaining to any resources (no ability to restrict policy management),"FeSL action ""admin"" enables users to manage (create) policies.  There is currently no restriction on the contents of the <Resources> section of the XACML policies being created - ie it is not possible to enable policy management for a restricted set of resources.  This is a potential security flaw - anyone with policy management permissions can create policies that affect any resource in the repository.  As a first step this should be clearly highlighted in the documentation.  Ideally it should be possible to specify a policy that enables policy management access for policies that pertain to a specified set of resources (eg a collection, all members of a collection).",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-761,It is possible to specify apparently valid XACML policies that will never be effective,"FeSL (partially) implements the XACML 2.0 hierarchical resource profile [1]  This enables resources to be specified as a ""uri"" [2] in policies [3], including specifying resources using regular expression matches [4].  Only a subset of potential regex hierarchical URI specifications are used in the GenericPolicyFinderModule (actually -> PolicyManager -> DbXmlPolicyIndex) [5] which means that it is possible to create a policy using a resource URI with a regex which will never be located by the policy finder - thus the policy will never actually be used.  Example:  To specify all members of a collection, it is necessary to specify the full URI path, including all parents, so for an example collection demo:collection which is itself a member of demo:topCollection, it is necessary to specify: /demo:topCollection/demo:collection/.*  to specify all members of demo:collection.  If demo:collection were to be moved into demo:otherTopCollection the policy would no longer work.  It should be possible to specify members of a collection using only the immediate parent, ie something like .*/demo:collection/.*  (or something similar, regex probably needs tightening up a bit)  However such a regex syntax would not be recognised by the policy finder, so the policy would never be used.  It is not possible to create a policy specifying ""all members of collection xyz"" without specifying all ancestors of collection xyz in the policy.  NB: there will also be an impact on the hierarchical policy combining algorithms potentially if we change this behaviour  [1] http://docs.oasis-open.org/xacml/2.0/access_control-xacml-2.0-hier-profile-spec-os.pdf [2] in fact the ""uri"" used in FeSL isn't a defined Fedora URI, it's a simple path created by prepending all ancestors of the resource, separated by ""/"" [3] using ResourceAttributeDesignator: urn:oasis:names:tc:xacml:1.0:resource:resource-id [4] using ResourceMatch: urn:oasis:names:tc:xacml:2.0:function:anyURI-regexp-match [5] an example of URIs that are generated for searching for policies are as follows for a request context specifying datastream DC in object demo:resource (with full collection membership as above).  Note that these would not catch all potential regex resource specifications that identify the resource:      /demo:topCollection/demo:collection/demo:resource      /demo:topCollection/demo:collection/.*      /demo:topCollection      /demo:topCollection/.*      /demo:topCollection/demo:collection/demo:resource/.*      /demo:topCollection/demo:collection/demo:resource/DC$      /demo:topCollection/demo:collection/demo:resource/DC      /demo:topCollection/demo:collection ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-762,Implement more tightly-defined (ie semantically precise) specification/identification of resources in policies,"Noting FCREPO-761, it is currently possible to specify resources in a policy to using regular expressions.  Indexing/locating policies based on regular expression syntax will be difficult (if not impossible) given the potential range of regular expressions that could be used to specify resources.  Currently only a small subset of regular expressions are searched for.  Instead of using the anyURI-regexp-match in conjunction with hierarchical URIs, it would be better to specify a set of ResourceAttributeDesignators that do not use regular expressions and are therefore (a) more semtically precise and (b) much easier to index and search for.  A full set of use-cases would need defining, but the following could be candidates - all children of resource xyz (ie immediate collection members) - all descendants of resource xyz (ie resources that are members of collections that are also members of xyz)  As part of this we should also consider the requirements of FCREPO-636, ie a policy object applies to a collection xyz through an ""appliesTo""; a policy object applies to collection members through ""appliesToChildrenOf""  ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-763,Ability to validate FeSL policies,"The validate-policy.sh/.bat script that comes with Fedora assumes the v1 XACML schema, but FeSL policies use the v2 XACML schema.  Although FeSL Authorization is still considered experimental, it would be good to have a way for people to validate the newer-style policies.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-764,Improve REST API responses,"The REST API needs improvement is in the area of API response messages, specifically on errors.  From the point-of-view of the REST API consumer, Java stack traces are unhelpful, and they expose the inner workings of Fedora, which consuming applications should neither see nor care about.  A concise response is more helpful to application developers using API.  The response should include these three items, in a form that's easy to parse:  1) an HTTP status code (which can also be obtained from the headers) 2) a local fedora error code, either numeric codes or other strings like ""PIDNotFound"" or ""LabelTooLong"", or both 3) a concise description/explanation.   Here's how an ideal response might look:  <fedora-response type=""action-failed"">   <http-code>415</http-code>   <fedora-error-code>LabelTooLong</fedora-error-code>   <explanation>     Object label must not exceed 255 characters     (foxml:property NAME='info:fedora/fedora-system:def/model#label')   </explanation> </fedora-response> ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-765,"Create an Admin module (similar to Management, Access) for Admin type ""API"" methods","At the committer call 2010-08-10 implementation of FCREPO-724 and FCREPO-686 raised the issue of where administrative methods such as migrating datastream control groups and recalculating managed datastream size should live, and how they should be exposed.  It was felt that these should not live in the main SOAP and REST APIs as they were likely to be more transitive and subject to change, therefore a separate module, with a separate API, should be implemented for these (and should be documented as being subject to change).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-767,Web Admin object state combo cannot be committed the first time unless a second property is changed.,Also affects 3.4 RC.  The combo box which displays and permits changes to an object's state does not work if it is the only change made in a first attempt to commit.  Subsequent changes to the the state combo can be committed even if it is only change being made.  While found during 3.4 testing it affects versions back to 3.2.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-768,Installer defaults to Akubra if no option is specified in an install.properties file,"If Fedora is installed with an install.properties file from a prior release (which does not have a property for the LLStore implementaiton), Akubra will be used by default.  Potentially this could affect users upgrading to this release from 3.3 or before, who may wish to use their existing install.properties during installation.  In this case they almost certainly wouldn't want to be using Akubra, so using the default is dangerous.  We need to show a warning during installation if the property is not present in install.properties.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-769,Provide tool to allow migration from legacy LLStore implementation to Akubra,Akubra becomes the default Low-level storag impementation in the 3.4 release.  However we currently have no means of migrating an existing repository using the legacy implementation to Akubra.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-770,FeSL invalid XACML results in changes to FESLPOLICY datastream even though API call fails,"Adding/editing an invalid FESLPOLICY datastream results in a failure of the API call, however the changes are saved.  This is due to the order in which policies are propagated to dbxml - after the main API call has been made.  Need to cater for the situation where both the API call and/or the propagation to dbxml (where the validation takes place) could fail.  Probably not a blocker for 3.4.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-771,"FeSL - conversion of policy ""name"" to PID incorrect","Fedora objects are created for policies by the FedoraPolicyStore class.  Although currently only used for loading bootstrap policiesfrom files and for testing, the conversion of the policy name to a PID is not safe.  Non-bootstrap-policy names are not correctly picking up the PID namespace, and there is no conversion for non-safe characters.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-772,FeSL potential for policy name/identifier collision,"Interfaces PolicyStore and PolicyIndex in the PDP expose a variety of methods for add/delete/update, which variously take a name parameter or generate one from the identifier in the XACML.  Depending on the code paths actually used in practice it could be possible for an identifier collision.  We should standardise on an identifier - suggest using the Policy object PID (note that PolicyManager methods are not actually exposed, only used during ingest of system policies).  Currently only affects the indexing of policies in DBXML and the policy document names used there - it is possible (again depending on the code paths actually used in practice) that two XACML documents (in two different Fedora objects) could use the same XACML policy identifier and therefore result in a DBXML exception.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-773,"Clean-up of ""orphan directories"" in Akubra","When content is deleted from directories, the directories themselves are not removed, periodically some kind of purge should be done to remove unused directories.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-774,REST Servlet throws exception under access load.,Two exceptions are thrown periodically while accessing Fedora via the REST Servlet.  The system is operating under a moderate-high load but none of its resources are bottlenecked.  Subsequent access operations function normally with the exceptions thrown at random but regular intervals.  The VM is also under load with the ingest of digital object and very small numbers of managed datastreams.  The events seem to correspond to 500 notifications in the client.  There does not seem to be any effect to the ingest operations.  The exceptions are found in the localhost log attached.  The catalina log is attached for completeness.  ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-776,Allow externally-managed content referring to a file URI to be readable by unauthenticated users,"When policy enforcement is turned on, and there is a policy in place to allow file uploads from specified paths, only an authenticated user is allowed to see the created externally-managed datastream.  Attached is a transcript of what takes place, but in summary, I'm allowed, as fedoraAdmin, to create objects with M and E datastreams whose content is uploaded via the file URI;  however, when I attempt to view the Externally Managed datastreams (E) as an unauthenticated anonymous user, I get a ""Policy blocked datastream resolution"" exception in the logs, caused by a ""AuthzDeniedException"":  Caused by: org.fcrepo.server.errors.authorization.AuthzDeniedException:         at org.fcrepo.server.security.PolicyEnforcementPoint.enforce(PolicyEnforcementPoint.java:422) [fcrepo-server-3.4-SNAPSHOT.jar:na]         at org.fcrepo.server.security.DefaultAuthorization.enforceRetrieveFile(DefaultAuthorization.java:1660) [fcrepo-server-3.4-SNAPSHOT.jar:na]         at org.fcrepo.server.storage.DefaultExternalContentManager.getFromFilesystem(DefaultExternalContentManager.java:242) [fcrepo-server-3.4-SNAPSHOT.jar:na]   If I retrieve the E datastream authenticated as the fedoraAdmin, then I can see it.  Datastreams of other types within the same object are visible to the world, as expected.  Creation of externally-managed datatstreams that use a file URI should be controlled by the file-resolution policies, but once the datastreams are created, they should be visible to the world according to the same rules that apply to M, R, and X datastreams in an object.  See attachments for a transcript of a test showing this behavior, and a sample policy file that replaces deny-unallowed-file-resolution.xml.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-777,REST API:  Determine and set appropriate mime-type when a new managed datastream is added without a specified media or mime type,"If a datastream is created with the REST API and no media or mime type specified, Fedora sets the dsMIME type as ""application/x-www-form-urlencoded"" for datastreams of type M, R, and E.  This MIME type is incorrect for most datastreams.  For datastreams of type E and R, it doesn't matter so much (the content is delivered correctly);  but when you request a M datastream with this type, a header line ""content-disposition: inline; filename=""[something].bin"" is sent, and you are asked if you want to save a file with the content, since the browser cannot determine the MIME type and handle it appropriately.  How should the MIME type be determined, if it is not specified?",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-778,DC Datastream is not validated,The Dublin Core datastream appears not to be validated (looking at org.fcrepo.server.validation.ValidationUtility and elsewhere).  Maybe that is by design?  Noted in 3.4 but probably the case in earlier versions. ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-779,Clean up system test output messages,"The system tests ConfigA/B/C/Q generate a lot of debugging/informational messages through System.out.println, quite a lot of these are probably unnecessary (debugging the tests messages) and tend to flood the output making it difficult to see useful messages.  Also the HTTP client code (particularly the REST API tests) generate a lot of warning messages, which can probably be avoided with some code tidy-up:  WARN 00:21:07.971 (HttpMethodBase) Going to buffer response body of large or unknown size. Using getResponseBodyAsStream instead is recommended.  Again these leave useful messages buried in the output and not very visible.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-780,NPE thrown on disseminations if external web service response does not contain a Content-type header,"Fedora throws a null pointer exception if you call a disseminator that fronts a web service whose response does not contain a ""Content-type"" header.  Attached is output of a test that demonstrates the bug, a patch to fix this issue, and the output of this same test after the patch is installed. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-781,Synchronisation of the access to modification of digital objects.,We would like to avoid the ObjectLockedException thrwon in the DefaultDOManager.getWriteLock method. We thik this could be done by locking processes in the getWriteLock method instead of throwing the exception and releasing them in the releaseWriteLock method when appropriate. We are working on an implementation of this.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-782,Migration tool for version 2.x repositories does not work under 3.4,"Because of the java package renaming, the migration tool used to upgrade 2.x repositories to 3.x does not work (see https://wiki.duraspace.org/display/FCR30/Upgrading+from+2.x).  We could either 1 just update the tool against the latest server jars, and update the references to fedora.fcfg where module etc names have changed 2 update package names in this migration tool as well 3 go the whole way and mavenise it as well.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-783,Installer should check/verify intended location of JDBC connectors,"There are configuration variations in Tomcat supplied with various Linux distros.  In particular the Debian distribution does not have the same location for common jar files as a stand-alone installation of Tomcat 6.  This can lead to installation errors - see issue raised by Graeme West at  http://comments.gmane.org/gmane.comp.cms.fedora-commons.user/5637  The installer should examine $CATALINA_HOME/conf/catalina.properties - the common.loader.property, and deal sensibly with this  Options could include 1 warn if the intended location is not present 2 inform user what config changes are needed for Tomcat 3 offer user ability to specify an alternative path, informing them of the contents of the common.loader property to guide them 4 automatically modify Tomcat configuration  I would suggest 1, then 3 with the option to quit at this point so user can update the Tomcat configuration if necessary (ie 2).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-784,Fedora object 3.0 declare wrong format uri for the POLICY datastream,"This is the current xml                     <dsTypeModel ID=""POLICY"" optional=""true"">                         <form FORMAT_URI=""info:fedora/fedora-system:FedoraRELSExt-1.0"" MIME=""application/rdf+xml""/>                         <extension name=""SCHEMA"">                             <reference type=""datastream"" value=""POLICY-SCHEMA""/>                         </extension>                     </dsTypeModel>  The format uri should of course not be the one for the RELS-EXT datastream",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-786,The jar-only releases are not usefull,"The jars made available for download are really not useful. For maven projects, they would depend on the repository, and get the jars automatically. For non-maven projects, they would be unable to use the jar, as there is no dependencies included.  I have made a patch for this, using maven's assembly plugin",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-787,Adding datastream with referenced content on file system throws Exception when providing a checksum,"Replicates fcrepo-696, with the additional problem that an empty read-only context is insufficient for policy resolution.  I think the solution is to add the ability to attach a context to DatastreamReferencedContent (and arguably to DatastreamManagedContent, which would have the same problem if it enforced a policy regarding the URLs it would fetch).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-788,Misleading error message: Multiple instances of RecordCache not allowed,"When the OAIProvider service starts up, if it is misconfigured, users will see a stack trace when they hit the service, whose message error is ""Multiple instances of RecordCache not allowed"".  This is a misleading error message, and hides the true problem in such cases.",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-789,Object label not escaped properly when set in doRegistry table,"Reported by Nicholas W on fcrepo-user list:  Just discovered this by accident. I am not sure if this is a known problem or not. In Fedora 3.3 If a label ends in a \ (blackslash) the ingest of an object fails with an SQL error.  Ingesting this example:  <?xml version=""1.0"" encoding=""UTF-8""?> <foxml:digitalObject xmlns:foxml=""info:fedora/fedora-system:def/foxml#"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" VERSION=""1.1"" PID=""changeme:9688"" xsi:schemaLocation=""info:fedora/fedora-system:def/foxml# http://www.fedora.info/definitions/1/0/foxml1-1.xsd""> <foxml:objectProperties> <foxml:property NAME=""info:fedora/fedora-system:def/model#state"" VALUE=""Active"" /> <foxml:property NAME=""info:fedora/fedora-system:def/model#label"" VALUE=""Something ending in a slash \"" /> </foxml:objectProperties> <foxml:datastream ID=""DC"" STATE=""A"" CONTROL_GROUP=""X"" VERSIONABLE=""true""> <foxml:datastreamVersion ID=""DC.0"" LABEL=""DC"" MIMETYPE=""text/xml;charset=utf-8""> <foxml:xmlContent><oai_dc:dc xmlns:oai_dc=""http://www.openarchives.org/OAI/2.0/oai_dc/"" xmlns:dc=""http://purl.org/dc/elements/1.1/"">  <dc:title xml:lang=""en"">DC Title</dc:title>  <dc:type>http://purl.org/vocab/frbr/core#Expression</dc:type><dc:identifier>changeme:9688</dc:identifier></oai_dc:dc></foxml:xmlContent> </foxml:datastreamVersion> </foxml:datastream> </foxml:digitalObject>  I get the following error:  Object ingest failed due to: Error (500): <pre>javax.ws.rs.WebApplicationException: fedora.server.errors.StorageDeviceException: Unexpected error from SQL database while registering object: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''Something ending in a slash \')' at line 1        at fedora.server.rest.BaseRestResource.handleException(BaseRestResource.java:162)        at fedora.server.rest.FedoraObjectResource.createObject(FedoraObjectResource...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-790,FeSL AuthN fedora-users.xml not closed properly after each use,"This can lead to the operating system running out of file handles.  Reported by Janna Wemekamp on the fcrepo-user list.  More information and reproduce: http://fedora-commons.1317035.n2.nabble.com/fcrepo-user-FedoraCommons-3-4-with-Akubra-Low-Level-Storage-Java-crash-in-REST-API-s-getNextPID-td5480759.html  This problem does not occur when the old AuthN (non-FeSL) is used, so if using fedora-users.xml with Fedora 3.4, it is recommended to answer ""false"" to ""Enable FeSL AuthN?"" at install time.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-791,Re-work of Fedora Client CLI tools ,"Fedora's CLI utilities should be reworked so that:  - We use one client library throughout (and stop using the old FedoraClient) - Batch operations are supported throughout  This can be accomplished a variety of ways.  Here's a proposal:  A) We use Kai's fedora-cli project as a replacement for the existing client batch/shell scripts. B) Kai's fedora-cli project uses the new MediaShelf-developed java Fedora Client C) Batch operations become scripts passed to fedora-cli.  This would subsume the existing batchmodify functionality, and support the batch purge use case highlighted in FCREPO-756","legacy - Fedora,legacy - java-client",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-792,Cache fedora-users.xml for FeSL AuthN,"As noted in FCREPO-790, FeSL's fedora-users.xml authentication implementation reads this file for every request to the repository.  This file should not have to be re-read and parsed for every request -- the info it contains should be cached in some way for performance.  For example, a reasonable out-of-box behavior would be to refresh from the file if it has been > 60 seconds since the last request.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-793,FieldSearch implementation does not handle utc correctly,"When foxml is ingested, and the `update` method called on FieldSearchSQLImpl, dates registered with the Digital Object are treated differently from dates listed in the DublinCore metadata stream.  If the client supplies identical dates in respectively the DigitalObject created_date field and in a dublin core datastream, the dublin core date will be parsed as a UTC timestamp and the created date will not. This will result in the same timestamp being represented as two different epoch timestamps in the database tables:  dc:date      2010-09-02T02:20:20.202 -utc-> 2010-09-02T04:20:20.202 -getTime()-> 1283394020202 cDate        2010-09-02T02:20:20.202           2010-09-02T02:20:20.202 -getTime()-> 1283386820202  Upon searching for dates (ranges or equality) the `findObjects` method in FieldSearchResultSQLImpl will convert all search term values for dates given in Conditions, to UTC: date  EQUALS 2010-09-02T02:20:20.202 -utc-> 2010-09-02T04:20:20.202  -toSQL-> SELECT ... WHERE dcDates.dcDate = 1283394020202 cDate EQUALS 2010-09-02T02:20:20.202 -utc-> 2010-09-02T04:20:20.202 -toSQL-> SELECT ... WHERE doFields.cDate = 1283394020202  The attached java file demonstrates the FieldSearchSQLImpl use of DateUtility#parseDateStrict( java.lang.String ) ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-794,FeSL loading of bootstrap policies can fail if a 2nd request is made before the initial load has completed,"The initial load of bootstrap policies is kicked off by the first request to the server.  If a second request to the server is made before the load has completed, the load fails.  Subsequent restarts of the server do not resolve the situation.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-795,Integrate FeSL with module/spring architecture,"FeSL is not integrated with the current module architecture.  Once the Spring DI framework is in place, FeSL should be integrated with this architecture.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-796,Fedora objects are not valid xml when using inline datastreams,"Try the attached file.  This is a valid object, and conforms to all the xml specifications. The trick here is that the xsi namespace is not redefined in the DC datastream.   It cannot ingest, as the DCFields class attempts to parse solely the contents of the DC datastream. But the contents of the DC datastream are valid, in the context of the object.  Reproducing this bug in production  1. getObjectXML on ANY fedora object 2. Parse this xml as a document (xsi is defined both on the top level, and in the DC datastream) 3. Do something with the document 4. Convert the document to xml (xsi is only defined on the top level) 5. Ingest the new xml (error, xsi:schemaLocation not bound)  The point here is that the standard XML parsers do NOT know that they MUST repeat the global namespaces in the root elements inside <xmlContent>. They do not know this, because this is not required by the xml specification.    I my repository we use templates, ie. data objects that we clone. We do the clone by exporting the template object, change the pid, and reingest the object. This fails, of course, because upon ingest the xsi:schemaLocation is added to the oai_dc:dc element by Fedora (why?). Parsing the exported object as a document then simplifies the namespace declaration. The resulting object then cannot reingest. We solve it by forcefully removing the xsi:schemaLocation attribute from the DC stream, even through we did not put it there.   If we really want to support Inline xml, we should adhere to the xml specification. The more I think about it, the more problematic inline xml is. We cannot have the xmlcontent of a datastream live separately from context of the object, they are part of the same document, and they will interact. One general solution could be to add namespace declarations for all top level namespaces to the root element of any inline datastream, when the content is requested. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-797,The fedora.server.utilities.TestDateUtility.java is dependant on language setting,"The TestParseDate mehtod in the TestDateUtility class assumes that the machine the test are being executed on has its language settings set to English. The last member of of the array dates, shown below, has the English abbreviation ""Thu"" which cant be parsed in other languages. So the DateUtility.parseDateAsUTC returns null when it is actually doing what it is supposed to.  String[] dates =                 {""1970-01-01T00:00:00.000Z"", ""1970-01-01T00:00:00.00Z"",                         ""1970-01-01T00:00:00.0Z"", ""1970-01-01T00:00:00Z"",                         ""1970-01-01Z"", ""1970-01-01T00:00:00.000"",                         ""1970-01-01T00:00:00.00"", ""1970-01-01T00:00:00.0"",                         ""1970-01-01T00:00:00"", ""1970-01-01"",                         ""Thu, 01 Jan 1970 00:00:00 GMT""};  Solution: Generate the GMT string with Javas Date class. This should insure that the language of the machine doesnt matter in the unittest   The workaround for this is to set your machines language setting to English",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-799,SOAP modify functions should accommodate moving inline XML to Managed Datastreams,Different SOAP calls are used depending on whether the datastream is inline XML or has been moved to a Managed Datastream.  This is inconsistent with the REST interface and requires the user to know the specific implementation of a given Fedora Digital Object.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-800,Field Search experience significant performance problems on large scale repositories.,The performance of Field search degrades significantly on large scale repositories when using queries on fields which are exact matches on indexed columns.  Likely this is due to the creation of very large result sets that cannot be returned in any practical form.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-801,Review the utility of field search in it current form.,Field Search-related functionality in its current form may need to be modified or considered for exclusion from the Fedora core to a supported but external utility.  Its use in queries for non-exact matches can severely impact the repository operations.  It is tied to Dublin Core with limited customizability.  It is useful for administrative functions but those are likely to be a subset of the currently supported columns.  It includes hard-coded HTML generation in the core which does not lend itself to internationalization (I18N) in its current form.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-802,external JMS broker unavailable at startup halts startup,"If Fedora is started with JMS messaging turned on and configured for an external broker with direct connection (and not through a JNDI provider) but that broker is unavailable at startup, the entire server goes back down. That seems like a pretty drastic failure.  To duplicate:  0) Turn off a repository.  1) Turn on the Messaging module and assign an external broker to ""java.naming.provider.url"" in fedora.fcfg, e.g.      <param name=""java.naming.provider.url"" value=""tcp://localhost:61616""/>  2) Make sure the external broker is not available.  3) Start up Fedora.  You'll see something like:  FATAL 2010-09-21 09:59:55.571 [main] (Server) Module (fedora.server.messaging.Messaging) failed to initialize fedora.server.errors.ModuleInitializationException: Could not connect to broker URL: tcp://localhost:61616. Reason: java.net.ConnectException: Connection refused   fedora.server.messaging.MessagingModule.initModule(MessagingModule.java:81)   fedora.server.Module.<init>(Module.java:63)   fedora.server.messaging.MessagingModule.<init>(MessagingModule.java:58) ...  and then a server shutdown. Much better would be to see some kind of warning, then attempts to connect as appropriate with warnings thrown on failures.  It's not known to me whether this behavior is the same with a JNDI-provided ConnectionFactory, because I've never been able to get that stronger configuration to work, which is a whole 'nother problem. {grin} ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-804,Drop McKoi JDBC support,"McKoi is a pure Java database that was originally distributed under GPL2 (newer versions are released under GPL3), while Fedora is distributed under Apache2.  Fedora has never depended on McKoi in order to run -- it has always been an option.  As of Fedora 3.2, the database itself was no longer distributed with Fedora (we switched to Derby as the out-of-box native Java database), but we continued to support integrating with a pre-installed McKoi database.  Although this is only the JDBC driver, and is only provided as an option, there is still legitimate concern that the license of the older version of McKoi (whose JDBC driver we have distributed in the past) is incompatible with Fedora.  To allay these concerns, we have two options:  1) Implement and test compatibility with the newer version of McKoi, which is under GPL3, so we can include the driver and make it easy for people to use at install-time, or 2) Completely remove McKoi support (no JDBC driver, install option, or DDLConverter)  I favor option #2 since we already have a pure Java database that works fine out of box (Derby), and it's unlikely that anyone is still using McKoi -- even if they were, it's not difficult to use the rebuilder to migrate to Derby.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-805,Installer does not check for empty $CATALINA_HOME directory when using the included tomcat,"It is possible to configure the installer to use a $CATALINA_HOME directory outside of $FEDORA_HOME when using the Fedora-supplied Tomcat.  The installer checks, and warns, for an empty $FEDORA_HOME directory, but does not check for an empty $CATALINA_HOME directory when using the included Tomcat.  The installer silently over-writes existing files, but this can lead to eg an updated $CATALINA_HOME/webapps/fedora.war but leaving the existing $CATALINA_HOME/webapps/fedora/ folder in place - ie any existing version is effectively left in place.  Ideally when deploying to either an existing tomcat or using the included tomcat, there should be some sort of warning if (a) an existing fedora.war is present and (b) the fedora webapps directory (from a previous installation) is present, with the option to overwrite the war file (which should automatically delete the webapps directory).  This should also apply to the other wars that are deployed in Tomcat.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-806,Add relationships methods to batchModify directives,It is not possible to use the relationships methods (addRelationship etc) in BatchModify.  These methods should be added (and possibly a cross-check to see if there are any other recently-added API methods that are not currently supported).  See http://sourceforge.net/mailarchive/forum.php?thread_name=6C321C785BFDA548A9DB3C126675968D26DD45%40SRV566.tudelft.net&forum_name=fedora-commons-users  ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-807,"When inline XML is provided for Managed content, it's auto-converted to Inline XML","We now allow DC, RELS-EXT, RELS-INT to be managed content datastreams.  For inline XML datastreams, we allow inline specification of the XML in the FOXML.  It would be useful to allow this also for ""M"" datastreams.  Currently if XML content is found as XML inline, the datastream automatically reverts to inline when managed content is specified.  This is a bug because it's unexpected behavior.  Either Fedora should raise an error in such cases, or it should keep the datastream as managed content even though the payload has been provided as regular inline xml.  Note: If you want to include the content of any format stream (xml, etc) in the FOXML at ingest time, and have it be managed content, you can provide it as base64.  When doing this, it will automatically be sent down to storage as managed content at ingest time.  For FOXML, see http://fedora-commons.org/definitions/1/0/foxml1-1.xsd and look for ""binaryContent"" to see where in the schema this can be specified.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-808,REST getNextPid response does not include default namespace,"I was updating my REST API code for the default namespaces in Fedora 3.4 and discovered that the result from getNextPid does not have the default namespace that I expected it would.  It looks like this is being generated incorrectly.   Here's a sample result:  <pidList  xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://www.fedora.info/definitions/1/0/management/ http://myfedora.server.edu:8080/getNextPIDInfo.xsd"">   <pid>changeme:226</pid> </pidList> ","legacy - Fedora,legacy - java-client",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-809,Option to include managed XML content as inline XML in exported FOXML,We allow exporting with inline managed content as base64; where the datastream mime type indicates XML maybe we should (optionally?) allow exporting with the XML inline. Notwithstanding potential namespace declaration issues... ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-810,FedoraClient.listDatastreams method not working,"We've been using Mediashelf client APIs in our repository. All methods we use are working properly except listDatastreams, which throws an exception as attached below. The test code I'm using is:  ...   ListDatastreamsResponse response = listDatastreams(""york:3"").execute(client); for(DatastreamType dst: response.getDatastreams()) {     System.out.println(dst.getDsid()); }  Thanks,  Frank Digital Library Systems Developer The University of York  ------------------------------------------------------ P.S. The error message is: Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.45 sec <<< FAILURE! testListDatastreams(uk.ac.york.dlib.yodl.utils.fedora.ds.TestMediaShelfFedoraClient)  Time elapsed: 0.193 sec  <<< ERROR! com.yourmediashelf.fedora.client.FedoraClientException: unexpected element (uri:"""", local:""objectDatastreams""). Expected elements are <{http://www.fedora.info/definitions/1/0/access/}OAI-delimiter>,<{http://www.fedora.info/definitions/1/0/access/}OAI-namespaceIdentifier>,<{http://www.fedora.info/definitions/1/0/access/}OAI-sample>,<{http://www.fedora.info/definitions/1/0/access/}PID-delimiter>,<{http://www.fedora.info/definitions/1/0/access/}PID-namespaceIdentifier>,<{http://www.fedora.info/definitions/1/0/access/}PID-sample>,<{http://www.fedora.info/definitions/1/0/access/}adminEmail>,<{http://www.fedora.info/definitions/1/0/access/}fedoraObjectHistory>,<{http://www.fedora.info/definitions/1/0/access/}fedoraRepository>,<{http://www.fedora.info/definitions/1/0/access/}objCreateDate>,<{http://www.fedora.info/definitions/1/0/access/}objDissIndexViewURL>,<{http://www.fedora.info/definitions/1/0/access/}objItemIndexViewURL>,<{http://www.fedora.info/definitions/1/0/access/}objLabel>,<{http://www.fedora.info/definitions/1/0/access/}objLastModDate>,<{http://www.fedora.info/definitions/1/0/access/}objModels>,<{http://www.fedora.info/definitions/1/0/access/}objOwnerId>,<{http://www.fedora.info/definitions/1/0/access/}objState>,<{http://www.fedora.info/definitions/1/0/access/}objectDatastreams>,<{http://www.fedora.info/definitions/1/0/access/}objectMethods>,<{http://www.fedora.info/definitions/1/0/access/}objectProfile>,<{http://www.fedora.info/definitions/1/0/access/}repositoryBaseURL>,<{http://www.fedora.info/definitions/1/0/access/}repositoryName>,<{http://www.fedora.info/definitions/1/0/access/}repositoryOAI-identifier>,<{http://www.fedora.info/definitions/1/0/access/}repositoryPID>,<{http://www.fedora.info/definitions/1/0/access/}repositoryVersion>,<{http://www.fedora.info/definitions/1/0/access/}retainPID>,<{http://www.fedora.info/definitions/1/0/access/}sampleAccess-URL>,<{http://www.fedora.info/definitions/1/0/access/}sampleOAI-URL>,<{http://www.fedora.info/definitions/1/0/access/}sampleSearch-URL>   com.yourmediashelf.fedora.client.response.ListDatastreamsResponse.getObjectDatastreams(ListDatastreamsResponse.java:105)   com.yourmediashelf.fedora.client.response.ListDatastreamsResponse.getDatastreams(ListDatastreamsResponse.java:63)   uk.ac.york.dlib.yodl.utils.fedora.ds.TestMediaShelfFedoraClient.testListDatastreams(TestMediaShelfFedoraClient.java:109)   sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   java.lang.reflect.Method.invoke(Method.java:597)   org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)   org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)   org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)   org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)   org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)   org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)   org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)   org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)   org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)   org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)   org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)   org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)   org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)   org.junit.runners.ParentRunner.run(ParentRunner.java:236)   org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:62)   org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)   org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)   org.apache.maven.surefire.Surefire.run(Surefire.java:177)   sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   java.lang.reflect.Method.invoke(Method.java:597)   org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:345)   org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1009) Caused by: javax.xml.bind.UnmarshalException: unexpected element (uri:"""", local:""objectDatastreams""). Expected elements are <{http://www.fedora.info/definitions/1/0/access/}OAI-delimiter>,<{http://www.fedora.info/definitions/1/0/access/}OAI-namespaceIdentifier>,<{http://www.fedora.info/definitions/1/0/access/}OAI-sample>,<{http://www.fedora.info/definitions/1/0/access/}PID-delimiter>,<{http://www.fedora.info/definitions/1/0/access/}PID-namespaceIdentifier>,<{http://www.fedora.info/definitions/1/0/access/}PID-sample>,<{http://www.fedora.info/definitions/1/0/access/}adminEmail>,<{http://www.fedora.info/definitions/1/0/access/}fedoraObjectHistory>,<{http://www.fedora.info/definitions/1/0/access/}fedoraRepository>,<{http://www.fedora.info/definitions/1/0/access/}objCreateDate>,<{http://www.fedora.info/definitions/1/0/access/}objDissIndexViewURL>,<{http://www.fedora.info/definitions/1/0/access/}objItemIndexViewURL>,<{http://www.fedora.info/definitions/1/0/access/}objLabel>,<{http://www.fedora.info/definitions/1/0/access/}objLastModDate>,<{http://www.fedora.info/definitions/1/0/access/}objModels>,<{http://www.fedora.info/definitions/1/0/access/}objOwnerId>,<{http://www.fedora.info/definitions/1/0/access/}objState>,<{http://www.fedora.info/definitions/1/0/access/}objectDatastreams>,<{http://www.fedora.info/definitions/1/0/access/}objectMethods>,<{http://www.fedora.info/definitions/1/0/access/}objectProfile>,<{http://www.fedora.info/definitions/1/0/access/}repositoryBaseURL>,<{http://www.fedora.info/definitions/1/0/access/}repositoryName>,<{http://www.fedora.info/definitions/1/0/access/}repositoryOAI-identifier>,<{http://www.fedora.info/definitions/1/0/access/}repositoryPID>,<{http://www.fedora.info/definitions/1/0/access/}repositoryVersion>,<{http://www.fedora.info/definitions/1/0/access/}retainPID>,<{http://www.fedora.info/definitions/1/0/access/}sampleAccess-URL>,<{http://www.fedora.info/definitions/1/0/access/}sampleOAI-URL>,<{http://www.fedora.info/definitions/1/0/access/}sampleSearch-URL>   com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:631)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:236)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:231)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:105)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1038)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:467)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:448)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:137)   org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)   org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)   org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(Unknown Source)   org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)   org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)   org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)   org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)   org.apache.xerces.parsers.XMLParser.parse(Unknown Source)   org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:200)   com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:173)   javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)   javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:194)   com.yourmediashelf.fedora.client.response.ListDatastreamsResponse.getObjectDatastreams(ListDatastreamsResponse.java:101)  ... 30 more ",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-811,"POLICY datastreams (possibly others) subject to race conditions when control group is ""R""","Symptons: If the policy datastream in an object is Referenced content, operations involving this object will sometimes throw a AuthzException. There are probably other failures somewhere due to this bug.    Cause: (warning, long rant)  When fedora needs to act on this object, it will fetch the policy (every time, so beware of performance).   PolicyFinderModule.class // if the object exists and has a POLICY datastream, parse and return it {code} private AbstractPolicy loadObjectPolicy(String pid)  throws ServerException {     try {         DOReader reader = m_repoReader.getReader(Server.USE_DEFINITIVE_STORE, ReadOnlyContext.EMPTY, pid);         Datastream ds = reader.GetDatastream(""POLICY"", null);         if (ds != null) {             logger.debug(""Using POLICY for "" + pid);             return m_policyParser                     .copy().parse(ds.getContentStream(),                                m_validateObjectPoliciesFromDatastream);         } else {             return null;         }     } catch (ObjectNotInLowlevelStorageException e) {         return null;     } } {code}  So, the PolicyFinderModule gets a Reader to the Object. It then gets the Datastream from the object. It then gets the inputstream to the datastream contents.  So far, logical and simple.      Down in PolicyParser we find the following code {code} public AbstractPolicy parse(InputStream policyStream, boolean schemaValidate)         throws ValidationException {      // Parse; die if not well-formed     Document doc = null;     try {         doc = m_domParser.parse(policyStream);     } catch (Exception e) {         throw new ValidationException(""Policy invalid; malformed XML"", e);     } {code}  The message ""Policy invalid; malformed XML"" is carried all the way up to the fedora log, but the validation exception is lost. Why is the validation exception lost, you might ask?  The following code from PolicyFinderModule  {code} public PolicyFinderResult findPolicy(EvaluationCtx context) {     PolicyFinderResult policyFinderResult = null;     try {         List<AbstractPolicy> policies = new ArrayList<AbstractPolicy>(m_repositoryPolicies);         String pid = getPid(context);         if (pid != null && !"""".equals(pid)) {             AbstractPolicy objectPolicyFromObject = loadObjectPolicy(pid);             if (objectPolicyFromObject != null) {                 policies.add(objectPolicyFromObject);             }         }  ........     } catch (Exception e) {         policyFinderResult =                 new PolicyFinderResult(new Status(ERROR_CODE_LIST, e                         .getMessage()));     }     return policyFinderResult; } {code}  That catch gets gets the message from the exception, but looses the cause. So, fair, we should not be told why the validation failed. I am not sure if this is a bug, but I feel like the cause should go into the log.     Backing up, why did the validation fail? Debugging revealed the answer.  The stream had been closed. Now, why would the stream ever be closed before read? There is a very good reason for this, known as the MIMETypedStream class.    This code in DatastreamReferencedContent will illuminate the problem  {code} @Override public InputStream getContentStream() throws StreamIOException {     try {         MIMETypedStream stream = getExternalContentManager().getExternalContent(new ContentManagerParams(DSLocation));         DSSize = getContentLength(stream);         return stream.getStream();     } catch (Exception ex) {         throw new StreamIOException(""Error getting content stream"", ex);     } } {code}  To get a content stream, a MIMETypedStream is gotten, and from that the Inputstream is gotten. So, the MIMETypedStream is forgotten, and promptly garbagecollected.    When MIMETypedStream is garbagecollected, the following method will be called {code} /** * Ensures the underlying stream is closed at garbage-collection time * if the stream has not been retrieved. If getStream() has been called * the caller is responsible to close the stream. * * {@inheritDoc} */ @Override public void finalize() {     if(!gotStream) {         close();     } } {code}  Sounds sensible enough. But then we look at getStream  {code}  /**  * Retrieves the underlying stream.  * Caller is responsible to close the stream,  * either by calling MIMETypedStream.close()  * or by calling close() on the stream.  *  * @return The byte stream  */ public InputStream getStream() {     return stream; } {code}  A bug reveals itself. When the MIMETypedStream is garbage collected, it closes it's stream, no matter who is currently using it.    I stated that the MIMETypedStream is at the root of the problem. Let me expand upon that. The fact that MIMETypedStream closes it's contained stream is the issue. Most (all?) java streams will be automatically closed upon finalize. I know that the HTTPInputstream that MIMETypedStream most often front will be closed on finalize already. Generally, it is considered dangerous behaivour to close streams you did not open yourself. The MIMETypedStream does not make any provisions in it's javadoc, that you should not use the inputted inputstream for other purposes as well. If MIMETypedStream wants to have exclusive access to it's inputstream, it should let the callers know this. Secondly, the setter method in MIMETypedStream. What is actually the correct semantics for close, if the mimetypedstream has one inputstream, but is SET to have a new one? Should it close the old one? Should it even have a setter?   I will not commit any fixes until I know if this should go into 3.4.1 or I would in other ways disturb the release process. But of course, the simple fix, that will work 99% of the time is to add  {code} public InputStream getStream() {     gotStream = true;     return stream; } public void setStream(InputStream stream) {     if(!gotStream) {         close();     }     this.stream = stream; } {code}   ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-812,Datastream history HTML response provides incorrect URL for link to datastream content,"The REST API method: /objects/{pid}/datastreams/{dsid}/history incorrectly provides URLs with the query parameter ""asOfVersionDate"", which is incorrect.  It should be ""asOfDateTime"".  This means that the URLs do not return the correct versions (all URLs will return the latest version).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-813,Integrate fedora-client with Jira,Install the beta Jira Git plugin  https://studio.plugins.atlassian.com/wiki/display/JGIT/JIRA+Git+Plugin  Also see: https://studio.plugins.atlassian.com/browse/JGIT-24,legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-815,Connect ReviewBoard to fedora-client repository,None,legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-817,"GetDisseminationHandler.java throws ""Error obtaining parameters"" exception when called with SOAP","The error occurs when the class (in org.fcrepo.server.security.xacml.pep.ws.operations ) attempts to get the parameters from the SOAP request object oMap.   There is a commented out line of code for  ""properties"" which requests parameter 3 from the SOAP request object and then the uncommented line asOfDateTime requests paramter 4.     I'm not 100% familiar with the code, but I tried changing the asOfDateTime line to request parameter 3 instead of 4 and recompiled fedora and replaced the appropriate JAR file in my environment.  The change seems to have fixed the problem. ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-818,DbXmlPolicyIndex query is not built for XACML-2.0 ,"The XACML elements ""AnySubject"", ""AnyResource"" and ""AnyAction"" have been removed from the XACML schema.    The DbXMLPolicyIndex is still building the query looking for the ""any"" elements in the policy to determine if it is a match.  The end result is that policies with no subjects, resources or actions elements in the target are not found by DbXMLPolicyIndex when they should be matched.    Also, it would be beneficial to make the distinction in the XACML Policy Writing guide https://wiki.duraspace.org/display/FCR30/Fedora+XACML+Policy+Writing+Guide that the guide is meant for XACML 1.0 while FeSL uses XACML 2.0 so that people are not confused when the policies they write using the guide dont also work for FeSL.     Attached is a patch to DBXmlPolicyIndex.java that seems to fix the problem.   The main change is in the createQuery function.   I also added a debug log entry for one of the context attributes that was not sent to the logs that I used when debugging the query.   I've also attached a sample policy that recreates the problem.  It is based on the access-public.xml sample provided but is modified to allow read access to any resource in the repository except for the datastreams listed in the condition.   Since there is no ""Resources"" section,  the previous query could never return this policy. ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-819,Memory leak due to Mulgara bug,"We have been running our system with Mulgara. We have been running a very long ingest procedure, and we have been able to see that the time to process one record (actually a few fedora objects) increase from about 3 seconds to 9 seconds after a few hours. Heap dumps and examination revealed that for most of the time was spent by the GC. It turned out that after some hours, the com.sun.corba.se.impl.util.Utility had allocated 566 mb of ram.  Examination about what caused this lead us to http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6534290 It seems there is a bug with corba, where cache miss information is not garbage collected but retained in a static map.  I found this post to be of great help http://old.nabble.com/Memory-leak-when-using-JbossCache-and-JOTM-td9497014.html#a9497014 According to this post, if you do not include the jotm-iiop-stubs.jar, you will have a memory leak. Mulgara uses jotm but does not include that jar. I have currently added it by hand to the lib folder of my fedora instance, and restarted everything. If this fixes the leak, we have a fix, which needs to go upstream to mulgara or be implemented by fedora.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-820,modifyObject API-M with no state change causes XACML policy to be removed from index.,"Calling modifyObject AP-M method with no state change (ie sending ""null"" as the objectState) on an object with a FESLPOLICY datastream causes PolicyIndexInvocationHandler.java to incorrectly remove the policy from the cache.   I dont believe this issue will exist for setting datastream states as well since the dsState can not be null in the setDatastreamState API-M method.  I have attached a patch that seems to fix the problem.   The patch adds a check to make sure that managementMethod.parameters.objectState is not null or empty before touching the policy cache.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-821,FeSL: Upgrade to released version of SUN XACML 2.0 libraries,FeSL currently uses Sun XACML from a particular revision in CVS.  Upgrade to a released version of 2.0.,legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-822,"Ingesting with ""M"" datastream contentLocation set to a file fails with Akubra","Ingesting an object on Windows, managed content datastream, with the datastream defined as follows:        <foxml:contentLocation REF=""file:/D:/Fedora34Test/test/datastream.xml"" TYPE=""URL""/>  Ingest fails.  Reports a ""Policy blocked datastream resolution"" error.  However this is with the deny-unallowed-file-resolution.xml disabled (ie policy deleted; policies reloaded).  Log with debug turned up is below.  The error seemingly at the root of this is (the actual error reporting is confusing): (PolicyFinder) An error occured while trying to find a single applicable policy for a request: Malformed object token: file:/D:/Fedora34Test/test/datastream.xml  This seems to be coming from org.fcrepo.server.storage.lowlevel.akugra.AkubraLowlevelStorage.getBlobId  What is confusing is why the file path ever got through to this class in the first place - I would expect only PIDs or internal datastream identifiers.  Reverting to the legacy storage solves the problem.  Log:  INFO 2010-11-19 10:45:19.310 [http-8080-1] (DefaultDOManager) Committing addition of demo:ingest DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (DOTranslationUtility) makeAbsoluteURLs: input=file:/D:/Fedora34Test/test/datastream.xml, output=file:/D:/Fedora34Test/test/datastream.xml DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (DefaultExternalContentManager) in getExternalContent(), url=file:/D:/Fedora34Test/test/datastream.xml DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (DefaultExternalContentManager) in getFile(), url=file:/D:/Fedora34Test/test/datastream.xml INFO 2010-11-19 10:45:19.310 [http-8080-1] (DefaultExternalContentManager) Checking resolution security on file:/D:/Fedora34Test/test/datastream.xml DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (DefaultAuthorization) Entered enforceRetrieveFile DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (ReadOnlyContext) SINGLE SUBJECT VALUE from map == fedoraAdmin DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) context index set=42 DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) wrapSubjectIdAsSubjects(): fedoraAdmin DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) wrapSubjectIdAsSubjects(): subjectAttribute, id=urn:oasis:names:tc:xacml:1.0:subject:subject-id, type=http://www.w3.org/2001/XMLSchema#string, value=StringAttribute: """" DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) wrapSubjectIdAsSubjects(): subjectAttribute, id=urn:fedora:names:fedora:2.1:subject:loginId, type=http://www.w3.org/2001/XMLSchema#string, value=StringAttribute: ""fedoraAdmin"" DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) request action has urn:fedora:names:fedora:2.1:action:contextId=StringAttribute: ""42"" DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) request action has urn:fedora:names:fedora:2.1:action:api=StringAttribute: ""urn:fedora:names:fedora:2.1:action:api-m"" DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) request action has urn:fedora:names:fedora:2.1:action:id=StringAttribute: ""urn:fedora:names:fedora:2.1:action:id-retrieveFile"" DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) request action has urn:oasis:names:tc:xacml:1.0:action:action-id=StringAttribute: """" DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (PolicyEnforcementPoint) about to ref contextAttributeFinder=org.fcrepo.server.security.ContextAttributeFinderModule@20224a DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (ContextAttributeFinderModule) registering 42 DEBUG 2010-11-19 10:45:19.310 [http-8080-1] (DefaultDOManager) Got DOReader (source=null) for file:/D:/Fedora34Test/test/datastream.xml in 0ms. INFO 2010-11-19 10:45:19.310 [http-8080-1] (PolicyFinder) An error occured while trying to find a single applicable policy for a request: Malformed object token: file:/D:/Fedora34Test/test/datastream.xml DEBUG 2010-11-19 10:45:19.326 [http-8080-1] (PolicyEnforcementPoint) Policy evaluation took 16ms.  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-823,Ingesting object with managed content DC datastream fails if content specified using a file:/// URL,"Reported by Janna Wemekamp http://fedora-commons.1317035.n2.nabble.com/fcrepo-user-Policy-blocked-datastream-resolution-error-on-ingest-of-Managed-DC-datastream-tp5750061p5750061.html   If contentLocation is specified using the file:/ protocol for a managed content DC datastream, the ingest fails.  This is because during ingest DC content is read using DatastreamManagedContent.getContentStream(), which uses an external content manager to get the content.   At that point the content (dsLocation) is still the location provided upon ingest, ie the file:/// URL.  (The content is read to check if eg a dc:identifier is present, and if not, add it).  As this method does not have access to the Context (uses a default read-only context with no credentials) - this is failing authZ for DC specified using file:/// as a content location, even if the appropriate policy is modified to give access to that location (and potentially might fail for http URLs where auth is required?) - XACML policy enforcement will need the context to permit access to the file.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-824,Disseminations should not require a datastream binding,"Currently Fedora disseminations require a datastream binding to operate. This is not always appropriate, and some people find it confusing. Some disseminations may go against the Resource Index or against an external service that requires no more information than a PID to operate. Usually people fulfill the requirement in these cases by binding against a required datastream like DC as a dummy. It would be well to release this constraint in the CMA.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-825,Complete Maven hosting migration to Sonatype with sync to Maven Central,"The primary goal of this epic is to migrate Fedora's Maven artifacts completely to Sonatype and sync them to Maven Central, adhering to as much of the Sonatype Central Sync Requirements as possible. In particular, we aspire to have no library dependencies that are not hosted in Maven Central. We also want to take advantage of Sonatype's snapshot repository hosting option as an automatic part of our continuous integration builds that run at bamboo.duraspace.org.  For reference, here is the Sonatype OSS Maven Repository Usage Guide, which also includes a section on the latest Central sync requirements:    http://docs.sonatype.org/x/SQBl  ...and here is the original Sonatype hosting ticket for org.fcrepo:    https://issues.sonatype.org/browse/OSSRH-307","legacy - Fedora,legacy - java-client,legacy - Trippi",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1
FCREPO-826,Move Tomcat into maven repository instead of in codebase,...in order to make checkouts/clones more palatable moving forward.  This should be done before we update the version of the bundled Tomcat,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-827,Change to a space-per-feature-release model for Fedora documentation,Consider emulating what Atlassian does for Confluence documentation on their wiki.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-828,Automate upload of release artifacts to sourceforge (or point to Sonatype m2 repo),None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-829,Make configA/B/C/Q tests work purely through maven lifecycle,"Move away from shell scripts to invoke tests, to the extent possible.  For commandline utility tests and things that *need* to run outside the context of the test JVM, spawn a process from the test code.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-830,Automate testing of different database and OS configurations,"(especially open source databases, and Windows)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-831,Consistently use the new fedora-client in all code (test and server) that REST API is exercised,"...and as part of this, the old FedoraClient class should be marked as deprecated.","legacy - Fedora,legacy - java-client",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-832,proai oaiprovider character encoding exception when using default encoding other than UTF-8,"1) Fedora contains DC metadata with greek characters 2) Platform default encoding is not UTF-8  Exceptions are thrown in proai - see http://comments.gmane.org/gmane.comp.cms.fedora-commons.user/6026  The OAIProvider contains some code that uses the default encoding when converting to bytes to characters, rather than using UTF-8 (ie assuming that Fedora content is UTF-8) - see FedoraOAIDriver.java line 275).  This is causing issues when a default encoding other than UTF-8 is used.  Sample file to provoke the issue attached.  Work-around is to supply -Dfile.encoding=utf-8 to the JVM (eg add this to CATALINA_OPTS) ",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-833,Startup fails with Tomcat 5.5 when ResourceIndex is enabled,As reported on the fedora-users mailing list by Lasse Aagren (http://article.gmane.org/gmane.comp.cms.fedora-commons.user/6049). I've confirmed this behavior on OS X using Tomcat 5.5.27 and 5.5.31 and the startup failure only occurs when the RI is enabled.  It's probably to do with a change in the Tomcat-provided jars in 5.5 vs 6.0. Stacktrace from original report:  10:51:45.534 [main] ERROR org.fcrepo.server.Server - Module (org.fcrepo.server.resourceIndex.ResourceIndex) failed to initialize org.fcrepo.server.errors.ModuleInitializationException: Error initializing RI        at org.fcrepo.server.resourceIndex.ResourceIndexModule.postInitModule(ResourceIndexModule.java:112) [fcrepo-server-3.4.1.jar:na]        at org.fcrepo.server.Server.<init>(Server.java:636) [fcrepo-server-3.4.1.jar:na]        at org.fcrepo.server.BasicServer.<init>(BasicServer.java:41) [fcrepo-server-3.4.1.jar:na]        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.6.0_0]        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) [na:1.6.0_0]        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [na:1.6.0_0]        at java.lang.reflect.Constructor.newInstance(Constructor.java:532) [na:1.6.0_0]        at org.fcrepo.server.Server.getInstance(Server.java:1004) [fcrepo-server-3.4.1.jar:na]        at org.fcrepo.server.ServerController.init(ServerController.java:402) [fcrepo-server-3.4.1.jar:na]        at javax.servlet.GenericServlet.init(GenericServlet.java:211) [servlet-api-2.4.jar:2.4.public_draft]        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1139) [catalina.jar:na]        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:966) [catalina.jar:na]        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3956) [catalina.jar:na]        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4230) [catalina.jar:na]        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:760) [catalina.jar:na]        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:740) [catalina.jar:na]        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:544) [catalina.jar:na]        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:831) [catalina.jar:na]        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:720) [catalina.jar:na]        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:490) [catalina.jar:na]        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1149) [catalina.jar:na]        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311) [catalina.jar:na]        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:120) [catalina.jar:na]        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1022) [catalina.jar:na]        at org.apache.catalina.core.StandardHost.start(StandardHost.java:736) [catalina.jar:na]        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014) [catalina.jar:na]        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443) [catalina.jar:na]        at org.apache.catalina.core.StandardService.start(StandardService.java:448) [catalina.jar:na]        at org.apache.catalina.core.StandardServer.start(StandardServer.java:700) [catalina.jar:na]        at org.apache.catalina.startup.Catalina.start(Catalina.java:552) [catalina.jar:na]        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_0]        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [na:1.6.0_0]        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [na:1.6.0_0]        at java.lang.reflect.Method.invoke(Method.java:616) [na:1.6.0_0]        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295) [bootstrap.jar:na]        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_0]        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [na:1.6.0_0]        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [na:1.6.0_0]        at java.lang.reflect.Method.invoke(Method.java:616) [na:1.6.0_0]        at org.apache.commons.daemon.support.DaemonLoader.start(DaemonLoader.java:177) [commons-daemon-1.0.2.jar:1.0.1] Caused by: org.trippi.TrippiException: Couldn't create local database        at org.trippi.impl.mulgara.MulgaraSessionFactory.createModels(MulgaraSessionFactory.java:212) [trippi-mulgara-1.4.3.jar:na]        at org.trippi.impl.mulgara.MulgaraSessionFactory.<init>(MulgaraSessionFactory.java:80) [trippi-mulgara-1.4.3.jar:na]        at org.trippi.impl.mulgara.MulgaraConnector.init(MulgaraConnector.java:138) [trippi-mulgara-1.4.3.jar:na]        at org.trippi.TriplestoreConnector.init(TriplestoreConnector.java:24) [trippi-core-1.4.3.jar:na]        at org.fcrepo.server.resourceIndex.ResourceIndexModule.getConnector(ResourceIndexModule.java:138) [fcrepo-server-3.4.1.jar:na]        at org.fcrepo.server.resourceIndex.ResourceIndexModule.postInitModule(ResourceIndexModule.java:100) [fcrepo-server-3.4.1.jar:na]        ... 39 common frames omitted Caused by: org.mulgara.query.QueryException: Couldn't create local database        at org.mulgara.server.local.LocalSessionFactory.newSession(LocalSessionFactory.java:199) [mulgara-core-2.1.4.jar:na]        at org.trippi.impl.mulgara.MulgaraSessionFactory.createModels(MulgaraSessionFactory.java:197) [trippi-mulgara-1.4.3.jar:na]        ... 44 common frames omitted Caused by: org.mulgara.server.SessionFactoryException: Could not instantiate TripleStoreImplementation from configuration.        at org.mulgara.server.SessionFactoryFactory.getTripleStoreImplementation(SessionFactoryFactory.java:184) [mulgara-core-2.1.4.jar:na]        at org.mulgara.server.SessionFactoryFactory.newSessionFactory(SessionFactoryFactory.java:231) [mulgara-core-2.1.4.jar:na]        at org.mulgara.server.local.LocalSessionFactory.newSession(LocalSessionFactory.java:195) [mulgara-core-2.1.4.jar:na]        ... 45 common frames omitted Caused by: java.lang.reflect.InvocationTargetException: null        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.6.0_0]        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) [na:1.6.0_0]        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [na:1.6.0_0]        at java.lang.reflect.Constructor.newInstance(Constructor.java:532) [na:1.6.0_0]        at org.mulgara.server.SessionFactoryFactory.getTripleStoreImplementation(SessionFactoryFactory.java:177) [mulgara-core-2.1.4.jar:na] Caused by: java.lang.NullPointerException: null        at org.mulgara.store.xa.FreeList$Phase.use(FreeList.java:1129) [mulgara-core-2.1.4.jar:na]        at org.mulgara.store.xa.ManagedBlockFile$Phase$Token.<init>(ManagedBlockFile.java:528) [mulgara-core-2.1.4.jar:na]        at org.mulgara.store.xa.ManagedBlockFile$Phase.use(ManagedBlockFile.java:288) [mulgara-core-2.1.4.jar:na]        at org.mulgara.store.xa.AVLFile$Phase$Token.<init>(AVLFile.java:457) [mulgara-core-2.1.4.jar:na]        at org.mulgara.store.xa.AVLFile$Phase.use(AVLFile.java:393) [mulgara-core-2.1.4.jar:na]        at org.mulgara.store.stringpool.xa11.XA11StringPoolImpl$TreePhase$Token.<init>(XA11StringPoolImpl.java:1639) [mulgara-core-2.1.4.jar:na]        at org.mulgara.store.stringpool.xa11.XA11StringPoolImpl.selectPhase(XA11StringPoolImpl.java:618) [mulgara-core-2.1.4.jar:na]        at org.mulgara.resolver.StringPoolSessionFactory.selectPhase(StringPoolSessionFactory.java:332) [mulgara-core-2.1.4.jar:na]        at org.mulgara.resolver.Database.selectCommonPhase(Database.java:1424) [mulgara-core-2.1.4.jar:na]        at org.mulgara.resolver.Database.recoverDatabase(Database.java:1367) [mulgara-core-2.1.4.jar:na]        at org.mulgara.resolver.Database.<init>(Database.java:942) [mulgara-core-2.1.4.jar:na]        at org.mulgara.resolver.Database.<init>(Database.java:536) [mulgara-core-2.1.4.jar:na]        at org.mulgara.resolver.Database.<init>(Database.java:321) [mulgara-core-2.1.4.jar:na] ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-834,Add State and OwnerID to SOAP getObjectProfile,The REST method for getObjectProfile includes State and OwnerID in its response.  The underlying Access method retrieves these values.    The corresponding API-A SOAP method does not return these values.  NB this will be a breaking API change.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-835,Migrate Fedora Source Code to GitHub,Migrate all source code currently hosted under the fedora-commons project at sourceforge to github.  Vote passed on December 7th: http://www.mail-archive.com/fedora-commons-developers@lists.sourceforge.net/msg00990.html  Further detail can be found at https://wiki.duraspace.org/display/FCREPO/Migration+to+GitHub,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-836,fedora3.1.4 installer does not handle package installed tomats well,"The current fedora (3.4.1) installation script does not handle non standard tomcat installations well. There is an assumption of a particular directory structure. However package installed tomcats, for example tomcats installed with the  Ubuntu package installer, may arrange their directory structures differently. This causes problems locating resources such as lib files, which manifest when fedora is started up or the fedora command line scripts (notably rebuild.sh) are run. It would be useful if it was possible to configure the installation script so that  such directory structures could be specified before the script was run.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-837,Standardize on LF for all text-based formats in the git repository,"Based on Chris&Aaron discussion about this thread: http://git.661346.n2.nabble.com/possible-gitattributes-eol-bug-with-new-eol-crlf-lf-support-td5516458.html  We decided this would be a good approach:  1. Modify all text as per the thread suggestion to use LFs 2. Modify our pom to automatically dos-ify the batch files in the assembly using the lineEnding attribute documented here: http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html 3. Publish recommended settings for git users, which are to set core.autocrlf to ""input"" (that is, force LF for line endings on check in only) if you're running Mac/Linux, and to set it to ""true"" (that is, force LF when checking in, but convert to native CRLF when checking out).  But if you're running git 1.7.2+, it's not required that you set it in your global config at all.  Instead, you can rely on the .gitattributes file described below. 4. Add a .gitattributes file to auto-convert all known text-based formats' line endings for people running git 1.7.2+ who haven't set core.autocrlf globally.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-838,Allow both parent-child and child-parent relationships in forming hierarchical resource identifiers for FeSL policies,"config-melcoe-pep.xml defines the predicates that are used in forming the XACML hierarchical resource identifier used in specifying policies for example for collection members in the form /collection:1/.* - which specifies ""all children of collection:1"".  The relationships are used in identifying what the children are.  For example ""isMemberOf"".  Currently only child-parent relationships are allowed (and incorrectly identified as parent-child relationships).  It would be useful to also allow parent-child relationships for those situation where it is the RELS-EXT of the collection that identifies its members rather than the children using isMemberOf to specify the parent.  (The current relsext relationship ontology has both isMemberOf and hasMember).  Changes: 1. Correct existing config files and code to identify current relationships as child-parent instead of parent-child 2.  Add ability to specify parent-child relationships",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-839,Allow FeSL relationship resolver to make use of the resource index if enabled,"Currently the FeSL relationship resolver makes use of the API-M relationships methods to query an object;s relationships (eg when determining hierarchical resource id and in the resource index attribute finder).  If the resource index module is enabled, the resolver should instead use the resource index directly.  This will enable more flexibility in defining how hierarchical resource identifiers should be formed, and will allow greater flexibility in the resource index attribute finder.  Currently there is a restriction that the relationships need to be in the object that is the XACML resource.  Note that this should fall back to using the API-M methods if the RI is disabled, so that FeSL is not dependent on the RI.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-840,Allow more complex specification of attributes in the FeSL FedoraRIAttributeFinder,"The FedoraRIAttributeFinder permits a flexible means of defining XACML policies based on resource information from the Resource Index.  Currently this is limited to specification of an rdf property/predicate - eg to determine an object's last modified date, or a datastream's mime-type.  When the resource index is enabled, it would be useful to allow more complex queries - for example to determine some property of a parent object, etc.  Add the ability to specify - SPARQL queries - TQL queries  These would have a parameter marker for the xacml resource ID, and would return a single ""column"" of results.  EG: select $value from <#ri> where [resource] <rels:isMemberOf> $parent and $parent <some:property> $value  ([resource] is the XACML resource identifier from the request in this case - the info:fedora resource URI)  This feature should be optional as it will only work if the RI is enabled  (note that SPO queries are not included, as the current functionality effectively provides this)",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-841,FeSL FedoraRIAttributeFinder attempts to locate RI attributes using hierarchical resource paths,"FeSL uses the XACML 2.0 hierchical resource profile.  This means that an incoming PID is converted to a set of XACML resource IDs, including both the PID itself and the hierarchical path to the pid.  The FedoraRIAttributeFinder attempts to locate attribute values based on all of the resource IDs - so when it attempts this based on a hierarchical path, an exception is found as the resource is not a valid Fedora PID.  This results in failure of policy evaluation.  (""indeterminate"").  The attribute finder should only attempt to find attributes for valid Fedora subjects, ie PIDs and DSIDs, and should return an empty bag for anything else.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-842,"If a previous ""add"" to the policy index (dbxml) fails, subsequent updates fail as the existing doc can't be deleted","Adds to DBXML can fail, eg if they are not schema-valid (or due to some problem with DBXML).  This is leaving Fedora objects with an existing policy datastream, but no corresponding dbxml policy.  When the datastream is later updated, the dbxml update is failing as no existing policy could be found to first remove before adding.  Change the update to be a ""safe"" update, ie only delete if already exists.  Theoretically we could instead fail the saving of the Fedora policy datastream, but safer to at least have the policy datastream preserved (and in fact we would want to (1) save the policy datastream and check that this works before updating dbxml and then (2) if dbxml fails revert the policy datastream change.  Difficult without transactions.)",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-843,Ban all known slf4j bindings except logback,"If multiple slf4j bindings are in the classpath at runtime, slf4j behaves unexpectedly.  Although none of our transitive dependencies currently pull in other slf4j bindings, it could happen, unnoticed, as new dependencies are added.  This change ensures that the build fails (so it gets noticed) if bindings besides logback are brought into Fedora's dependency tree.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-844,Usage documentation has parameters for FedoraCredentials in wrong order,"Referring to http://mediashelf.github.com/fedora-client/usage.html  In the example, parameters for FedoraCredentials are given as user, password, baseURL, they should be baseURL, user, password.",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-845,Memory leak in OwlApi used by ECM,"Hi  I am very sorry to report that I have just discovered a memory leak in the ECM code. Actually, not in the ECM code, but in a library that ECM depends on.  The problem lies in the owlapi library, which I added to Fedora. Every time a validation is performed, a new Ontology idenfier is autogenerated by OWLAPI, and stored in a static map. This information is never used, in fact it is sufficiently protected to prevent if from ever being used. But still, perform enough validations, and your system will choke.  I have contacted the OWLAPI mailing list with the bug. As for Fedora, we could either just keep going for now, or we could perform our own fix.  The bug:  The IRI class contain the following static map  private static Map<String, String> prefixCache = new HashMap<String,String>();  This bit of the constructor is the ONLY use of this map              String cached = prefixCache.get(prefix);             if (cached == null) {                 prefixCache.put(prefix, prefix);             }             else {                 prefix = cached;             }  For a longrunning process, I have seen the map grow to 553 MB ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-846,Concurrency issues with DBXML,"Reported by Nigel Thomas  Concurrent policy modifications and reads cause deadlocks with DBXML.    The current FeSL code does not manage deadlocks (or even attempt to detect them).  This can result in a corrupt policy index, or a ""permanent deadlock"" state where restarting the Fedora server fails to clear the DBXML deadlock - so first access to the repository never completes.  Attached are amended versions of DbXmlManager and DbXmlPolicyIndex that include wrapping operations in transactions, detection of deadlocks and transaction abortion when deadlocks occur (against release 3.4.1).",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-847,Supplying auxiliary attributes for XACML via Context.FEDORA_AUX_SUBJECT_ATTRIBUTES can never work,"I've verified this issue with Bill Niebel, the author of the code in question. He agrees with my assessment and we have a patch available. The bug occurs in:  org.fcrepo.server.security.servletfilters.FilterFinalize.doThisSubclass()  wherein incoming requests are locked (with an invocation of ExtendedHttpServletRequestWrapper.lockWrapper()) _before_ the auxiliary attributes are added to them. This causes an exception to be thrown without exception (pun thoroughly intended). The solution is to move the locking of the request to the end of the doThisSubclass() method. With that in place, the system works as advertised here:  https://wiki.duraspace.org/display/FCR30/Authentication+and+User+Attributes  I haven't the gearing up right now to run a full test series, so that has yet to be done, but I can make that time if it's desired.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-848,Tidy-up FeSL policy validation,"1) FeSL policy validation currently requires web access (for the XACML 2.0 schema).  Other XML validation in Fedora works off local copies of schemata.  Add the required XACML schemata to the Fedora distribution and modify the validation to use the local copies.  2) Validation currently takes place in both the policy store and the policy index.  Now that policies are in Fedora object datastreams it would make more sense to validate when the datatream is being pushed to the policy index (currently within the FeSL management decorator), and remove validation from these lower levels.  (Also, if validation is disabled we should also check xml-well-formed-ness).",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-849,"Updating an ""M"" DC datastream with versionable = false fails","Reported by Janna Wemekamp, see http://permalink.gmane.org/gmane.comp.cms.fedora-commons.user/6275  Updating a DC datastream stored as Managed Content fails if the datastream is not versionable.  This is due to a RI update error.  The triple update compares the ""before"" and ""after"" states of an object.  Currently it does this after managed content datastream changes have been persisted - so the ""before"" state is unavailable, and it therefore fails.  We could move the update to happen before the managed datastreams are saved, however if there is an error/exception later in the code, this means that the RI will be out of sync with the object contents.  (note that for a purge, this does in fact happen in this sequence - so we potentially already have the problem that if a purge fails then the RI is out of sync).  Moving the update to happen before the managed datastreams are updated is probably ok as a short-term solution, but ideally we need some kind of transactional behaviour - maybe we modify the RI update code so that it can (a) get a list of updates (adds and deletes) and then (b) later persist those updates.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-850,PreparedStatements Everywhere!,Audit all code that touches databases within the codebase and change to use prepared statements.  Mainly for security reasons...recent bugfix releases of Fedora have been necessitated by our not having done this in the past.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-851,FeSL's implementation of XACML Hierarchical Resource Profile is non-compliant,"FeSL makes use of the XACML Hierarchical Resource Profile (HRP) - http://docs.oasis-open.org/xacml/2.0/access_control-xacml-2.0-hier-profile-spec-os.pdf and http://docs.oasis-open.org/xacml/3.0/xacml-3.0-hierarchical-v1-spec-cs-01-en.pdf  This is used in evaluation permissions of members of collections, particularly when evaluating the precedence of policies in a hierarchy of collections and resources.  FeSL uses the ""URI path"" variant of this (as opposed to parent and ancestor attributes).  The XACML specification states that the resource-id used in the path to the resource (in the request context, and in the policy) MUST be a URI.    However FeSL specifies resource-id attribute values as (for example, individual path components are PIDs):  /ns:TopCollection/ns:SubCollection/ns:someResource  ... which is not a URI  It could form the ""path"" component if a suitable URI scheme was chosen for this hierarchical resource-id within FeSL.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-852,Developer documentation updates reflecting GitHub migration,"Now that Fedora's source code is managed via git on GitHub, several documents on the wiki need to be updated (they still reference subversion).  As Steve recently pointed out:  A quick trawl gives the following:   https://wiki.duraspace.org/display/FCREPO/Committer's+Guide (Chris - Updated to reference GitHub and the Best Practices document) https://wiki.duraspace.org/display/FCREPO/Fedora+Release+Process (Chris - TBD) https://wiki.duraspace.org/pages/viewpage.action?pageId=13765655 (Eddie) https://wiki.duraspace.org/pages/viewpage.action?pageId=1310878 (Chris - Removed; doc out of date) https://wiki.duraspace.org/display/FCR30/Configuring+Low+Level+Storage (Chris - Updated with legacy verbage)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-853,Fedora misuse ERROR statements for logging,"Fedora will often report ERROR for simple operations that can hardly be called an error.  As fedora is a server system, there are really two kinds of ERRORS  1. User request failed 2. Server got broken  For a maintenance perspective, I want my maintenance department to monitor the fedora log for problems with the fedora server. These should not monitor the logs for users timing out or not knowing the correct password.  I feel we should rework the log statements, or provide a way for the user-request problems to be filtered to a separate file.  Examples of how fedora logs errors  Exhibit 1 I pressed ""next"" after the session timed out. Do the server operator need to informed of this server error?  ERROR 2011-01-20 13:10:24.055 [http-7880-4] ([FieldSearchServlet]) Servlet.service() for servlet FieldSearchServlet threw exception org.fcrepo.server.errors.UnknownSessionTokenException: Session is expired or never existed.         at org.fcrepo.server.search.FieldSearchSQLImpl.resumeFindObjects(FieldSearchSQLImpl.java:342) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.search.FieldSearchSQLModule.resumeFindObjects(FieldSearchSQLModule.java:167) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.storage.DefaultDOManager.resumeFindObjects(DefaultDOManager.java:1800) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.access.DefaultAccess.resumeFindObjects(DefaultAccess.java:729) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.access.FieldSearchServlet.doGet(FieldSearchServlet.java:347) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.access.FieldSearchServlet.doPost(FieldSearchServlet.java:708) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at javax.servlet.http.HttpServlet.service(HttpServlet.java:637) [servlet-api.jar:na]         at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) [servlet-api.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) [catalina.jar:6.0.29]         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:6.0.29]         at org.fcrepo.server.security.jaas.AuthFilterJAAS.doFilter(AuthFilterJAAS.java:295) [fcrepo-security-jaas-3.4.2-SNAPSHOT.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:6.0.29]         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:6.0.29]         at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) [catalina.jar:6.0.29]         at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) [catalina.jar:6.0.29]         at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563) [catalina.jar:6.0.29]         at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) [catalina.jar:6.0.29]         at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [catalina.jar:6.0.29]         at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [catalina.jar:6.0.29]         at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) [catalina.jar:6.0.29]         at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857) [tomcat-coyote.jar:6.0.29]         at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) [tomcat-coyote.jar:6.0.29]         at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) [tomcat-coyote.jar:6.0.29]         at java.lang.Thread.run(Thread.java:619) [na:1.6.0_15]   Exhibit 2 A user failed to login. Is this really an ERROR?  ERROR 2011-01-24 10:48:53.016 [http-7880-11] (AuthFilterJAAS) Login Failure: all modules ignored  Exhibit 3 WARN, not ERROR, but attempted to load an object that does not exist.   WARN 2011-01-24 10:53:33.513 [http-7880-3] (FedoraObjectResource) Resource not found: demo:5; unable to fulfill REST API request org.fcrepo.server.errors.ObjectNotInLowlevelStorageException: demo:5         at org.fcrepo.server.storage.lowlevel.akubra.AkubraLowlevelStorage.retrieve(AkubraLowlevelStorage.java:383) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.storage.lowlevel.akubra.AkubraLowlevelStorage.retrieveObject(AkubraLowlevelStorage.java:160) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.storage.lowlevel.akubra.AkubraLowlevelStorageModule.retrieveObject(AkubraLowlevelStorageModule.java:84) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.storage.DefaultDOManager.getReader(DefaultDOManager.java:646) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.access.DefaultAccess.getObjectProfile(DefaultAccess.java:637) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.rest.FedoraObjectResource.getObjectProfile(FedoraObjectResource.java:184) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at sun.reflect.GeneratedMethodAccessor147.invoke(Unknown Source) [na:na]         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_15]         at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_15]   Exhibit 4 Malformed pid, that is clearly a Server ERROR.  ERROR 2011-01-24 10:53:49.862 [http-7880-11] (FedoraObjectResource) Unexpected error fulfilling REST API request org.fcrepo.server.errors.MalformedPidException: PID delimiter (:) is missing.         at org.fcrepo.server.Server.getPID(Server.java:1358) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.access.DefaultAccess.getObjectProfile(DefaultAccess.java:633) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.rest.FedoraObjectResource.getObjectProfile(FedoraObjectResource.java:184) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at sun.reflect.GeneratedMethodAccessor147.invoke(Unknown Source) [na:na]         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_15]         at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_15]   Exhibit 5 Same as above  ERROR 2011-01-24 10:53:49.866 [http-7880-11] (WebApplicationImpl) Internal server error javax.ws.rs.WebApplicationException: org.fcrepo.server.errors.MalformedPidException: PID delimiter (:) is missing.         at org.fcrepo.server.rest.BaseRestResource.handleException(BaseRestResource.java:168) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.rest.FedoraObjectResource.getObjectProfile(FedoraObjectResource.java:197) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at sun.reflect.GeneratedMethodAccessor147.invoke(Unknown Source) [na:na]         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_15]         at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_15]   Exhibit 6 Uh, getting an non-existant datastream. Is this really an ERROR?  ERROR 2011-01-25 13:29:35.655 [http-7880-1] (FedoraAPIABindingSOAPHTTPImpl) Error getting datastream dissemination org.fcrepo.server.errors.DatastreamNotFoundException: [DefaulAccess] No datastream could be returned. Either there is no datastream for the digital object ""fedora-system:FedoraObject-3.0"" with datastream ID of ""VIEW ""  OR  there are no datastreams that match the specified date/time value of ""null ""  .         at org.fcrepo.server.access.DefaultAccess.getDatastreamDissemination(DefaultAccess.java:1150) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.access.FedoraAPIABindingSOAPHTTPImpl.getDatastreamDissemination(FedoraAPIABindingSOAPHTTPImpl.java:156) [fcrepo-server-3.4.2-SNAPSHOT.jar:na]         at org.fcrepo.server.access.FedoraAPIABindingSOAPHTTPSkeleton.getDatastreamDissemination(FedoraAPIABindingSOAPHTTPSkeleton.java:186) [fcrepo-common-3.4.2-SNAPSHOT.jar:na]         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_15]         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [na:1.6.0_15]         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_15]         at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_15]   ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-854,Update wiki documentation to reflect new testing procedures,...as implemented by Aaron recently.  The development space for the next version of Fedora's documentation is here:  https://wiki.duraspace.org/display/FEDORADEV,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-855,API-M JMS messages do not include certain parameters of the original call,"As per the Messaging module documentation, the Atom messages emitted over JMS in connection with API-M calls include _almost_ everything one would need to recreate the call. Except:  '  Each <category> corresponds to a method's argument:     * The term indicates the argument value. However, null values are indicated as ""null"", and non-null xsd:base64Binary values are indicated as ""[OMITTED]"".'  -from https://wiki.duraspace.org/display/FCR30/Messaging  so that a message consumer has almost, but not quite enough information to know exactly what happened in the case of 'ingest' and 'modifyDatastreamByValue' calls. It would be better to allow JMS messages to contain a full report of the method call. I understand that this could produce some really large messages, so it would be best to allow this as a configurable option.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-856,Improve upgrade process/documentation,"Improve the upgrade process and documentation for Fedora.  Some of the existing documentation isn't as explicit as it should be (eg identifying explicitly what to change in fedora.fcfg).  As far as the process goes, I would suggest the following would be a good target:  After an upgrade:  - the new Fedora installation is at the location previously occupied by the previous Fedora installation, including paths to datastores (object, datastream), paths/locations/URLs/names of databases, etc. - the previous Fedora installation can be completely removed (ie everything under $FEDORA_HOME, including any sub-folders containing previous datastream/object store, database, etc)  ie, after upgrading a version of software I would expect everything to look as it did prior to the upgrade.   This may not be possible in all cases depending how far back someone is upgrading from, and the changes in a new release.  A recent thread on upgrading:  http://sourceforge.net/mailarchive/forum.php?thread_name=001701cbc2ab%242ce4cf20%240301010a%40asusp4t533&forum_name=fedora-commons-users  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-857,"Objects with ""D"" state remain deleted in OAIProvider indefinitely","On Feb 1, 2011, Luca Lelli reported this to fcrepo-user list:  in a project we are using Fedora Commons 3.3 with PROAI for providing data to be harvested. We have seen that in some situations the cache of PROAI is not syncronized with Fedora Repository: i.e. some Fedora objetcs in PROAI cache are not present or if present are not aligned with the related Fedora objects. This seems to be more probable when some Fedora objects which are in state D (deleted)  are again activated i.e. the object state is modified to 'A'. The modification date of Fedora Object is correctly modified. But the PROAI cache signals always deleted. Peharps thre are some issues with proai.properties parameters configuration? E.g. we are using proai.driverPollSeconds = 600 and the other Back-End Update Behavior parameters are left with default values (proai.maxWorkers = 5, proai.maxWorkBatchSize = 10, proai.maxFailedRetries = 3, proai.maxCommitQueueSize = 120, proai.maxRecordsPerTransaction = 60, proai.driverPollingEnabled = true).  Mailing list thread: http://fedora-commons.1317035.n2.nabble.com/fcrepo-user-problems-with-proai-properties-parameters-configuration-td5982309.html",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-859,Custom error pages do not work for /fedora/objects/.....,"The error pages located (standard installation) in the fedora/jsp directory do not show up when the new REST api is used, e.g. /fedora/objects/<PID>/methods/<Sdef>/<method> with a wrong method name. Instead, the old-style /gedora/get/<PID>/<Sdef>/<method> with a wrong method name gives the error page as intended. The same holds for any url witth /fedora/objects/<anything>",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-860,Update mime-to-extensions.xml file to include recent Microsoft Office mime types and extensions,"Recent versions of Microsoft Office include a number of new file extensions:  *.docx, *.pptx, *.xlsx, etc that are associated with new mime types.  The more common new file mime-types should be added to the FEDORA_HOME/server/config/mime-to-extensions.xml file so that the correct suffix is appended to the file name when the Content-Disposition header is generated for downloaded datastream content.  See http://technet.microsoft.com/en-us/library/ee309278%28office.12%29.aspx for a list extensions and mime types.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-861,Refactor to use spring beans throughout Fedora codebase,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-862,Remove references to LITE APIs from (1) tests; (2) demo objects and (3) core code,"The integration tests, demo objects, and some of the core Fedora code still make use of the LITE APIs, which are to be deprecated.  These should be converted to use endpoints in the new REST API.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-863,"REST API doesn't use jsps on error (404, etc)","When calling the REST API, if an error occurs (such as a 404, as when hitting /fedora/objects/demo:nosuchobject ), the response body is not formatted using the JSPs as expected.  Contrast this to what happens when hitting a URL that doesn't fall under the REST API, like /fedora/foo  This was originally reported by Egbert Gramsbergen to the fcrepo-user list on Feb 7th, 2011.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-867,findObjects search does not allow including an apostrophe,"It seems like there should be some way to escape an apostrophe for inclusion in a findObjects search, but none of the obvious ways for escaping an apostrophe work.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-868,add findObjects NOT operator,"It would be nice to have a ""not"" operator in the findObjects search that would allow searching for all objects where a particular value is not present.  It would also be nice if the ""not"" operator could be used to find all items where a particular field is empty or not present at all (e.g., something like rights!'public domain' or rights!'')",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-869,Upgrade bundled Tomcat to version 7,Upgrade bundled version of Tomcat to version 7; ensure Fedora runs with an external instance of Tomcat version 7.  See this thread for potential issue with directory permissions: http://sourceforge.net/mailarchive/message.php?msg_id=27140622  And some notes from the Apache Tomcat docs on directory ownership by root and the Tomcat user: http://tomcat.apache.org/tomcat-7.0-doc/security-howto.html#Non-Tomcat_settings,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-870,XmlUsersFileModule depends on FEDORA_HOME environment variable,"org.fcrepo.server.security.jaas.auth.module.XmlUsersFileModule depends on the FEDORA_HOME environment variable being set, rather than following the convention of using org.fcrepo.common.Constants.FEDORA_HOME which attempts to determine the value of ""Fedora Home"" as follows:          * servlet.fedora.home system property (checked first)          * fedora.home system property (checked next) or the          * FEDORA_HOME environment variable (checked last).  As a result, this can cause Fedora to fail to start if the environment variable is not set. In scenarios where the FEDORA_HOME environment variable is set and multiple Fedoras are deployed to the same system, they will all end up (unintentionally) using the same copy of FEDORA_HOME/server/config/fedora-users.xml file.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-871,DC Datastream modifications do not add dc:identifier with the PID,"On ingest if the DC datastream is missing, or if it does not contain a dc:identifier field with the object's PID then a dc:identifier field is added with the PID.  However datastream modifications do not follow the same behaviour; for instance if an update is performed with DC XML with a missing dc:identifier, it is not automatically added.  It should be.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-872,Clean up devdocs in source tree,"Many of the files under resources/doc/devdocs are outdated and useless. They should be dropped, with the exception of the Eclipse settings, which are still relevant.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-873,Thread-safety issue in Trippi - RIOTripleIterator,"A number of JVM crashes due to SIGSEGV.  On looking at the logs, most of them have the following in common:  Java frames: (J=compiled Java code, j=interpreted, Vv=VM code) j  java.lang.Thread.start0()V+0 j  java.lang.Thread.start()V+32 j  org.trippi.io.RIOTripleIterator.<init>(Ljava/io/InputStream;Lorg/openrdf/rio/RDFParser;Ljava/lang/String;)V+116 j  org.trippi.TripleIterator.fromStream(Ljava/io/InputStream;Ljava/lang/String;Lorg/trippi/RDFFormat;)Lorg/trippi/TripleIterator;+98 J  org.fcrepo.server.storage.RDFRelationshipReader.readRelationships(Ljava/io/InputStream;)Ljava/util/Set; J  org.fcrepo.server.storage.types.BasicDigitalObject.getRels(Ljava/lang/String;)Ljava/util/Set;  Lookiing at the source (https://github.com/fcrepo/trippi/blob/master/src/java/org/trippi/io/RIOTripleIterator.java) I wonder if we have a thread-safety issue around m_finishedParsing:  In the constructor: - parsing is kicked off in a separate thread - getNext() is called  getNext() reads m_finishedParsing. the parsing thread sets m_finishedParsing to true when done  Although getNext() is synchronized, there's no protection around the parsing thread setting m_finishedParsing, so potentially an issue if the parsing completes whilst getNext() is reading m_finishedParsing.     ",legacy - Trippi,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0
FCREPO-877,Datastream history and object history REST API calls are inconsistent,"Reported by Stuart Chalk.  One uses /history, the other users /versions (and the documentation is wrong).  See https://wiki.duraspace.org/display/FCR30/REST+API?focusedCommentId=24347009#comment-24347009  This would be a breaking API change.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-878,Build/Test process improvement suggestions,"The recent build/test  improvements to automate deploying Fedora instances and running the integration tests on them are a significant improvement.  But whenever you get something, you always want more!  Suggestions for some improvements: * single test config failure prevents other tests running - eg if a test in configA fails, configB/C/Q don't run * install from single copy of installer jar - currently installer is copied to locations for configA/B/C/Q - things would run a little faster if we could install from a single copy of the installer rather than needing to copy it to four different locations * disabled configs still go through a build, eg -DconfigA=false does result in the tests not running for configA, but it seems to go through a build process; again things would be a little faster if this didn't happen  Overall desire here is to decrease the round-trip time for fixing an issue with a single integration test case.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-879,Implement describeRepository in REST API,describeRepository is not implemented in the REST API - implement it.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-880,Upgrade FeSL to use Berkeley DB XML 2.5.16,Upgrade so that FeSL can use the later version of dbxml.,"legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-881,Support risearch queries,Add support for querying the ResourceIndex via fedora-client.,legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-883,Support Stomp for Messaging Service,Stomp (http://stomp.codehaus.org/) is a messaging protocol with wide client support (http://stomp.codehaus.org/Clients). It's already well supported by ActiveMQ. Fedora should support Stomp when messaging is provided as an embedded (in VM) broker.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-884,Enhance FilePolicyIndex,"FeSL has a default policy index implementation of FilePolicyIndex (since 3.5) .  This is a basic memory-cached, file-backed policy index.  It always returns the full set of policies known to it (it does no filtering based on the request) - similar to the legacy XACML implementation.  As such it is suitable for a relatively small number of policies.  This index could be enhanced to provide indexing and better caching to provide a performant alternative to an XML database-backed policy index.  The full functionality of an XML database is not required to support FeSL - what is required is indexed access to policies based on (configurable) resource, subject, action, environment attributes.  An option could be to do the indexing in an SQL database.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-887,SOAP + MTOM,MTOM:  http://www.w3.org/TR/soap12-mtom/  is now the definitive standard on how to transmit non-XML information through SOAP. It would be well for Fedora's SOAP Web services to support MTOM.,"legacy - Fedora,legacy - java-client",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-888,Fedora 3.5.0 Documentation Updates,3.5.0 docs go here until release: https://wiki.duraspace.org/display/FEDORADEV,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-891,Note the Tomcat 6.0.24 and later memory leak warnings,"From Scott & Steve:  I assume you're testing this with Tomcat 6.0.24 or higher, correct?  I've noticed this too, and did some research on it:  as of version  6.0.24, Tomcat by default runs memory leak detection on everything and  logs the results to its log file.  These errors you're seeing have  probably always been there, but are only logged with newer versions of  Tomcat.  The Tomcat wiki page  http://wiki.apache.org/tomcat/MemoryLeakProtection has a good  explanation of the memory leak detection/protection features, and a  breakdown of the kinds of situations it detects, and possible fixes.  In short, I decided these errors were nothing that needed to be  addressed immediately, but we should probably keep an eye on them going  forward, and do what we can to clean them up as we refactor code.  Many  of the errors may be generated by third-party classes in jars  distributed with Fedora, in which case our hands may be tied as to the  amount of fixing we can do.  -- Scott  Steve Bayliss wrote: I'm seeing some SEVERE log messages on shutting down Tomcat in Tomcat's catalina log file.  (as an aside, when running integration tests with the tests doing their own install of Fedora, I'm not seeing any tomcat log files at all - it would be useful if we had these to check for any issues).  The messsages are pasted below.  Can anyone else verify this?  Steve  28-Mar-2011 08:42:01 org.apache.coyote.http11.Http11Protocol pause INFO: Pausing Coyote HTTP/1.1 on http-8080 28-Mar-2011 08:42:01 org.apache.coyote.http11.Http11Protocol pause INFO: Pausing Coyote HTTP/1.1 on http-8443 28-Mar-2011 08:42:02 org.apache.catalina.core.StandardService stop INFO: Stopping service Catalina 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE: The web application [/fedora] appears to have started a thread named [Thread-2] but has failed to stop it. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE: The web application [/fedora] appears to have started a thread named [ActiveMQ Scheduler] but has failed to stop it. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE: The web application [/fedora] appears to have started a thread named [JotmBatch] but has failed to stop it. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE: The web application [/fedora] appears to have started a thread named [JotmClock] but has failed to stop it. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE: The web application [/fedora] appears to have started a thread named [Write-lock Reaper] but has failed to stop it. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE: The web application [/fedora] appears to have started a thread named [VMTransport] but has failed to stop it. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE: The web application [/fedora] appears to have started a thread named [VMTransport] but has failed to stop it. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE: The web application [/fedora] appears to have started a thread named [Persistence Adaptor Task] but has failed to stop it. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap SEVERE: The web application [/fedora] created a ThreadLocal with key of type [org.apache.axis.utils.XMLUtils.ThreadLocalDocumentBuilder] (value [org.apache.axis.utils.XMLUtils$ThreadLocalDocumentBuilder@161477a]) and a value of type [org.apache.xerces.jaxp.DocumentBuilderImpl] (value [org.apache.xerces.jaxp.DocumentBuilderImpl@19bb4f0]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap SEVERE: The web application [/fedora] created a ThreadLocal with key of type [null] (value [ch.qos.logback.core.UnsynchronizedAppenderBase$1@1841515]) and a value of type [java.lang.Boolean] (value [false]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap SEVERE: The web application [/fedora] created a ThreadLocal with key of type [org.apache.derby.iapi.sql.dictionary.TableDescriptor$1] (value [org.apache.derby.iapi.sql.dictionary.TableDescriptor$1@843e7b]) and a value of type [java.util.WeakHashMap] (value [{=null, ={1, 2, 3}, =null, ={1, 6}, ={1}, =null, =null, ={1, 2}}]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap SEVERE: The web application [/fedora] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@2232d8]) and a value of type [org.apache.derby.iapi.services.context.ContextManager] (value [org.apache.derby.iapi.services.context.ContextManager@3fe94a]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 28-Mar-2011 08:42:04 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap SEVERE: The web application [/fedora] created a ThreadLocal with key of type [org.apache.derby.iapi.sql.dictionary.TableDescriptor$1] (value [org.apache.derby.iapi.sql.dictionary.TableDescriptor$1@843e7b]) and a value of type [java.util.WeakHashMap] (value [{={1}}]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 28-Mar-2011 08:42:07 org.apache.coyote.http11.Http11Protocol destroy INFO: Stopping Coyote HTTP/1.1 on http-8080 28-Mar-2011 08:42:07 org.apache.coyote.http11.Http11Protocol destroy INFO: Stopping Coyote HTTP/1.1 on http-8443",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-892,org.fcrepo.server.validation.ecm.jaxb contains schema-generated classes,Generated classes should be generated as part of the Maven build process,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-893,Refactor authN/authZ servlet filters.,The servlet filters for authN/authZ in Fedora are somewhat elderly and more complicated than they need be. This is a master-issue to organize the work of refactoring them.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-894,Deprecate org.fcrepo.server.security.servletfilters.ldap,The package org.fcrepo.server.security.servletfilters.ldap contains functionality that is entirely superseded by that available in FESL. This package should be pruned from the source tree and documentation should be updated to prefer FESL strongly.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-895,Deprecate org.fcrepo.server.security.servletfilters.pubcookie,"The package org.fcrepo.server.security.servletfilters.pubcookie is totally unsupported and out of maintenance. It has never been documented, the author Bill Neibel is not sure that it actually works at all, and we know of no installation using it. This package should be pruned from the source tree.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-896,Create use case using XMLUsersFile for servlet filter refactoring,We require a use case showing the use of XMLUsersFile for refactoring the servlet filters.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-898,Improve efficiency of building parent hierarchies as part of XACML request building,"For FeSL policy evaluation, a hierarchical resource-id attribute is built from the PID (and datastream if relevant) of the object.  This is done by querying for parents of the objects, using the relationships specified in config-melcoe-pep.xml.  Currently, a separate query is issued for each parent-child relationship specified.  In the current implementation this means a separate parsing of the RELS datastreams for each query.  It would be more efficient to get all of the relationships in a single query.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-899,Create use case using HTTP-upstream authN/authZ-attribute-supply,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-900,"Mark ""classic"" AuthN servlet filters as deprecated","Discussed on April 5th committer call. This would not change any functionality, but would serve to notify people who might be inclined to develop against the classic AuthN classes that they're going away soon and they may want to spend their time on more forward-looking stuff.  At a later point, we could decide to more forcefully deprecate these by sticking them in a .deprecated sub-package...so they're still usable if people are in a real bind. This was a suggestion by Scott Prater on the mailing list recently.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-902,FeSL policy finder xpath is incorrect/restrictive,"The XPath generated for policy queries in the xml database are restrictive and in certain cases will not return matching policies.  Example: If a policy specifies an attribute id not usually supplied in the request it will not be matched when it should be (the policy query is built on attributes supplied by the PEP; ie before additional attribute-finding has taken place).  An attribute in the policy which is not specified in the request should always result in a match (since the finder is unable to determine if the policy matches due to lack of information in the request).  The attribute conditions part of the query needs to include an additional clause specifying ""if a policy attribute is not present in the request"". ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-903,Improve efficiency of FeSL policy finder (XPath),"Current XPath does not take account of and/or conditions in the policy.  Instead it treats all attributes specified in the policy as ""or"" conditions.  Case 1: Policy specifies Resources   Resource     ResourceMatch       AttID1 = ""xyz""   Resource     ResourceMatch       Att2D1 = ""pqr""  This is an ""or"" condition, so any request containing ""xyx"" OR ""pqr"" should match.  This case is currently satisfied  Case 2: Policy specifies Resources   Resource     ResourceMatch       AttID1 = ""xyz""     ResourceMatch       Att2D1 = ""pqr""  This is an ""and"" condition, so a request containing ""xyx"" AND ""pqr"" should match; but a request matching on only one of the attributes should not.  This case is currently not satisfied - the finder will return too many policies as it will match on a request with either of the attributes specified.  Additionally, the current ""match"" logic is not constrained to a single ResourceMatch (or SubjectMatch, etc) - so for the policy: Resources   Resource     ResourceMatch       AttID1 = ""xyz""   Resource     ResourceMatch       AttID2 = ""pqr""  The policy will match the request if the request has AttID1=""pqr"" - incorrectly.  Though this is unlikely to be a major problem in practice as the identifier spaces used for different attributes in general do not have common values. ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-904,Implement ResourceFinder modules in FeSL,"The Sun XACML implementation has resource finders/modules:  http://sunxacml.sourceforge.net/javadoc/com/sun/xacml/finder/ResourceFinder.html http://sunxacml.sourceforge.net/javadoc/com/sun/xacml/finder/ResourceFinderModule.html  These are used specifically for dealing with hierarchical resources and getting the desendents etc for building hierarchical resources (either using the ""path"" URI profile, or using the ancestor profile).  The current implementation does not make use of these; instead the PEP builds a set of hierarchical resource IDs based on the PID/DS using custom code.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-906,Fix memory leaks,"The version bump of Tomcat in Fedora 3.5 reveals memory leaks on shutdown.  Some of these may be in code outside of Fedora, but we should review these and fix where possible.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-907,Internal server error when accessing managed datastreams for objects with the pid namespace 'file',"I ingested some objects with the pid namespace ""file"" with a managed content datastream. As far as I can tell, the ingest was successful (perhaps because of the patch for https://jira.duraspace.org/browse/FCREPO-696), but when I try to access the datastream using either the API-A-LITE or REST API (e.g. http://localhost:8180/fedora/objects/file%3Abarcode111480/datastreams/Exiftool.rdf/content) , I receive an HTTP 500 error and this message:  javax.ws.rs.WebApplicationException: org.fcrepo.server.errors.StreamIOException: [DatastreamManagedContent] returned  the error: ""org.fcrepo.server.errors.HttpServiceNotFoundException"". Reason: [DefaultExternalContentManager] returned an error.  The underlying error was a org.fcrepo.server.errors.HttpServiceNotFoundException  The message was  ""[FileExternalContentManager] returned an error.  The underlying error was a java.lang.IllegalArgumentException  The message was  ""URI is not hierarchical""  .  ""  .     [ Full stack trace from fedora.log at bottom ].  If I re-ingest the object in a different namespace, I do not receive the error.    =======   ERROR 2011-04-13 13:23:09.047 [MainThread] (DefaultExternalContentManager) URI is not hierarchical java.lang.IllegalArgumentException: URI is not hierarchical   java.io.File.<init>(File.java:363) [na:1.6.0_22]   org.fcrepo.server.storage.DefaultExternalContentManager.getFromFilesystem(DefaultExternalContentManager.java:235) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.storage.DefaultExternalContentManager.getExternalContent(DefaultExternalContentManager.java:146) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.storage.types.DatastreamManagedContent.getContentStream(DatastreamManagedContent.java:175) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.storage.types.DatastreamManagedContent.getContentStream(DatastreamManagedContent.java:129) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.access.DefaultAccess.getDatastreamDissemination(DefaultAccess.java:1165) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.rest.DatastreamResource.getDatastream(DatastreamResource.java:232) [fcrepo-server-3.4.2.jar:na]   sun.reflect.GeneratedMethodAccessor34.invoke(Unknown Source) [na:na]   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_22]   java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_22]   com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:175) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:163) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:71) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:63) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:689) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:647) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:638) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:309) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:425) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:590) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   javax.servlet.http.HttpServlet.service(HttpServlet.java:820) [servlet-api-2.5-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1098) [jetty-6.1.3.jar:6.1.3]   org.fcrepo.server.security.servletfilters.FilterRestApiFlash.doFilter(FilterRestApiFlash.java:79) [fcrepo-server-3.4.2.jar:na]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089) [jetty-6.1.3.jar:6.1.3]   org.fcrepo.server.security.jaas.AuthFilterJAAS.doFilter(AuthFilterJAAS.java:295) [fcrepo-security-jaas-3.4.2.jar:na]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:211) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.Server.handle(Server.java:285) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:821) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:208) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:378) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:226) [jetty-6.1.3.jar:6.1.3]   org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442) [jetty-util-6.1.3.jar:6.1.3] ERROR 2011-04-13 13:23:09.052 [MainThread] (DatastreamResource) Unexpected error fulfilling REST API request org.fcrepo.server.errors.StreamIOException: [DatastreamManagedContent] returned  the error: ""org.fcrepo.server.errors.HttpServiceNotFoundException"". Reason: [DefaultExternalContentManager] returned an error.  The underlying error was a org.fcrepo.server.errors.HttpServiceNotFoundException  The message was  ""[FileExternalContentManager] returned an error.  The underlying error was a java.lang.IllegalArgumentException  The message was  ""URI is not hierarchical""  .  ""  .     org.fcrepo.server.storage.types.DatastreamManagedContent.getContentStream(DatastreamManagedContent.java:193) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.storage.types.DatastreamManagedContent.getContentStream(DatastreamManagedContent.java:129) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.access.DefaultAccess.getDatastreamDissemination(DefaultAccess.java:1165) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.rest.DatastreamResource.getDatastream(DatastreamResource.java:232) [fcrepo-server-3.4.2.jar:na]   sun.reflect.GeneratedMethodAccessor34.invoke(Unknown Source) [na:na]   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_22]   java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_22]   com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:175) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:163) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:71) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:63) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:689) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:647) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:638) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:309) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:425) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:590) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   javax.servlet.http.HttpServlet.service(HttpServlet.java:820) [servlet-api-2.5-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1098) [jetty-6.1.3.jar:6.1.3]   org.fcrepo.server.security.servletfilters.FilterRestApiFlash.doFilter(FilterRestApiFlash.java:79) [fcrepo-server-3.4.2.jar:na]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089) [jetty-6.1.3.jar:6.1.3]   org.fcrepo.server.security.jaas.AuthFilterJAAS.doFilter(AuthFilterJAAS.java:295) [fcrepo-security-jaas-3.4.2.jar:na]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:211) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.Server.handle(Server.java:285) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:821) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:208) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:378) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:226) [jetty-6.1.3.jar:6.1.3]   org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442) [jetty-util-6.1.3.jar:6.1.3] Caused by: org.fcrepo.server.errors.HttpServiceNotFoundException: [DefaultExternalContentManager] returned an error.  The underlying error was a org.fcrepo.server.errors.HttpServiceNotFoundException  The message was  ""[FileExternalContentManager] returned an error.  The underlying error was a java.lang.IllegalArgumentException  The message was  ""URI is not hierarchical""  .  ""  .     org.fcrepo.server.storage.DefaultExternalContentManager.getExternalContent(DefaultExternalContentManager.java:155) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.storage.types.DatastreamManagedContent.getContentStream(DatastreamManagedContent.java:175) [fcrepo-server-3.4.2.jar:na]  ... 42 common frames omitted Caused by: org.fcrepo.server.errors.HttpServiceNotFoundException: [FileExternalContentManager] returned an error.  The underlying error was a java.lang.IllegalArgumentException  The message was  ""URI is not hierarchical""  .     org.fcrepo.server.storage.DefaultExternalContentManager.getFromFilesystem(DefaultExternalContentManager.java:266) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.storage.DefaultExternalContentManager.getExternalContent(DefaultExternalContentManager.java:146) [fcrepo-server-3.4.2.jar:na]  ... 43 common frames omitted Caused by: java.lang.IllegalArgumentException: URI is not hierarchical   java.io.File.<init>(File.java:363) [na:1.6.0_22]   org.fcrepo.server.storage.DefaultExternalContentManager.getFromFilesystem(DefaultExternalContentManager.java:235) [fcrepo-server-3.4.2.jar:na]  ... 44 common frames omitted ERROR 2011-04-13 13:23:09.056 [MainThread] (WebApplicationImpl) Internal server error javax.ws.rs.WebApplicationException: org.fcrepo.server.errors.StreamIOException: [DatastreamManagedContent] returned  the error: ""org.fcrepo.server.errors.HttpServiceNotFoundException"". Reason: [DefaultExternalContentManager] returned an error.  The underlying error was a org.fcrepo.server.errors.HttpServiceNotFoundException  The message was  ""[FileExternalContentManager] returned an error.  The underlying error was a java.lang.IllegalArgumentException  The message was  ""URI is not hierarchical""  .  ""  .     org.fcrepo.server.rest.BaseRestResource.handleException(BaseRestResource.java:168) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.rest.DatastreamResource.getDatastream(DatastreamResource.java:250) [fcrepo-server-3.4.2.jar:na]   sun.reflect.GeneratedMethodAccessor34.invoke(Unknown Source) [na:na]   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_22]   java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_22]   com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:175) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:163) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:71) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:63) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:689) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:647) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:638) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:309) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:425) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:590) [jersey-bundle-1.0.3.1.jar:1.0.3.1]   javax.servlet.http.HttpServlet.service(HttpServlet.java:820) [servlet-api-2.5-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1098) [jetty-6.1.3.jar:6.1.3]   org.fcrepo.server.security.servletfilters.FilterRestApiFlash.doFilter(FilterRestApiFlash.java:79) [fcrepo-server-3.4.2.jar:na]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089) [jetty-6.1.3.jar:6.1.3]   org.fcrepo.server.security.jaas.AuthFilterJAAS.doFilter(AuthFilterJAAS.java:295) [fcrepo-security-jaas-3.4.2.jar:na]   org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:211) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.Server.handle(Server.java:285) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:821) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:208) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:378) [jetty-6.1.3.jar:6.1.3]   org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:226) [jetty-6.1.3.jar:6.1.3]   org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442) [jetty-util-6.1.3.jar:6.1.3] Caused by: org.fcrepo.server.errors.StreamIOException: [DatastreamManagedContent] returned  the error: ""org.fcrepo.server.errors.HttpServiceNotFoundException"". Reason: [DefaultExternalContentManager] returned an error.  The underlying error was a org.fcrepo.server.errors.HttpServiceNotFoundException  The message was  ""[FileExternalContentManager] returned an error.  The underlying error was a java.lang.IllegalArgumentException  The message was  ""URI is not hierarchical""  .  ""  .     org.fcrepo.server.storage.types.DatastreamManagedContent.getContentStream(DatastreamManagedContent.java:193) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.storage.types.DatastreamManagedContent.getContentStream(DatastreamManagedContent.java:129) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.access.DefaultAccess.getDatastreamDissemination(DefaultAccess.java:1165) [fcrepo-server-3.4.2.jar:na]   org.fcrepo.server.rest.DatastreamResource.getDatastream(DatastreamResource.java:232) [fcrepo-server-3.4.2.jar:na]  ... 39 common frames omitted Caused by: org.fcrepo.server.errors.HttpServiceNotFoundException: [DefaultExternalContentManager] returned an error.  The underlying ...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-908,Failure to use https protocol when datastream points to local URL,"As reported by Swithun Crowe on April 13th 2011:  I was having trouble with the demo objects - everything seemed to work, apart from being able to view the list of objects in the demo SmileyStuff collection. Looking at the list with URL  /fedora/get/demo:SmileyStuff/demo:Collection/list  worked, but  /fedora/objects/demo:SmileyStuff/datastreams/LIST/content  didn't. It gave this error:  Error getting http://itspc-cs2.st-andrews.ac.uk:443/fedora/get/demo:SmileyStuff/demo:Collection/list  It is using a secure port, but the protocol is still http, with no s.  I traced this back to fcrepo/fcrepo-server/src/main/java/org/fcrepo/server/storage/DefaultExternalContentManager.java, in method getFromWeb, where there is a colon where there shouldn't be one. The protocol string returned by params.getProtocol doesn't include the : after the protocol, so the comparison fails when it should succeed.  This is a patch for it:  --- DefaultExternalContentManager.java.orig     2011-04-13 10:42:07.000000000 +0100 +++ DefaultExternalContentManager.java  2011-04-13 10:42:19.000000000 +0100 @@ -313,7 +313,7 @@                      new Boolean(beHash.get(""callSSL""))                              .booleanValue();              if (backendSSL) { -                if (params.getProtocol().equals(""http:"")) { +                if (params.getProtocol().equals(""http"")) {                      url = url.replaceFirst(""http:"", ""https:"");                  }                  url = ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-909,FeSL REST and SOAP AuthZ missing handlers and filters,"Missing handlers/filters in FeSL AuthZ are resulting in a bypass of authorisation (and therefore a hole in the security)  Handlers for API methods are configured in config-melcoe-pep.xml, which maps operations to the handler class for the REST and SOAP API methods.  Instead an error should be reported (and access should not be granted to the method).  Relevant code is in the REST PEP and the SOAP PEP implementations - this is where the null is tested for and the pass-through is implemented.  Sub-issues to this one identify the missing handlers/filters/mappings to handlers and filters that require implementation.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-916,Review web.xml mappings for /objects/nextPID and /objects/nextPID.xml,"For some, possibly historical, reason, there are mappings for the above paths to the RestServlet.  Other REST methods are mapped using an /objects/* path - so in fact this would also pick up the above.  Suspect there is various fix-up code to deal with this special case in the REST handling, and also in the FeSL filter/handler mappings which will all need revising if we remove the two special-case mappings.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-919,Review MIMETypedStream implementation,"Discussed on committer call 2011/04/26 - http headers overlap with properties in this class, which could lead to confusion in the future.  Potentially there are two implementations - one for a non-http stream and one for a stream which is intended to pass through http headers.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-920,No FeSL filter for /management/control,None,legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-921,Update ActiveMQ,See 5.5.0 release notes: https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12311210&styleName=Html&version=12315626,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-922,Support xml configuration of ActiveMQ,"In addition to the broker URI configuration currently supported by Fedora, also provide support for XML configuration of ActiveMQ. See: http://activemq.apache.org/xml-configuration.html",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-923,Library updates for 3.5.0,Umbrella issue for miscellaneous library updates for 3.5.0,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-924,Update Spring,Update Spring libraries from 3.0.3.RELEASE to 3.0.5.RELEASE,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-925,Update Abdera,Update Abdera from 1.1 to 1.1.2,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-926,Update Derby,Update Derby from 10.5.3.0_1 to 10.7.1.1,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-927,Update jackson-mapper-asl,Update jackson-mapper-asl from 1.5.2 to 1.5.8,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-928,Update Axiom libraries,Update Axiom libraries from 1.2.8 to 1.2.10,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-929,No FeSL handlers for relationships methods,"No handlers defined for REST API methods addRelationship, getRelationships, purgeRelationships",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-930,Maven build warnings for missing plugin versions,"Maven is reporting various build warnings because of missing plugin version declarations (and in the case of fcrepo-server, an additional warning because of a duplicate declaration of the exec-maven-plugin), e.g.:  [WARNING] Some problems were encountered while building the effective model for org.fcrepo:fcrepo-common:jar:3.5-SNAPSHOT [WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-jar-plugin is missing. @ line 199, column 15  [WARNING] Some problems were encountered while building the effective model for org.fcrepo:fcrepo-server:jar:3.5-SNAPSHOT [WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:exec-maven-plugin @ line 311, column 15",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-933,Refactor FeSL and existing XACML attribute finder modules,"In 3.5, the FeSL Relationships attribute finder module was enhanced to allow relationship-query-based attributes; and a similar relationships attribute finder module was added for the existing XACML implementation.  As these both conform to the same XACML interface, this code should be refactored to provide a single attribute finder module, with Spring configuration.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-934,Web admin client will not ingest objects if the extension is not .xml,"If a foxml file is ingested using the web admin client from a file with an extension other than "".xml"", a new empty object is created rather than an object created from the foxml file.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-935,Search path /objects (with no parameters) not matching a REST operation handler,"/objects/?param1=blah&param2=blah matches, but a path /objects does not match (the GET method test expects some parameters, whereas no parameters is valid)  So the /objects search page gives an error.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-936,Move API serializers into a separate package,"1) REST XML output serialization is via org.fcrepo.server.rest.DefaultSerializer 2) REST Serialization to HTML is (1) plus an xslt, in the individual handlers for the rest methods 3) See FCREPO-886 - there is additional serialization in the default disseminators  We should consider the serialization as independent from the API, and move the serialization code (and possibly refactor) into (perhaps) org.fcrepo.server.storage.types.serializers - as it seems that it is classes in org.fcrepo.server.storage.types that require serialization.  This should be refactored to include the to-HTML serialization.  This could form the basis of a standard serialization package able to handle a variety of formats, HTML, XML, text, JSON, etc etc.  org.fcrepo.server.access.defaultdisseminator.ObjectInfoAsXML() should be removed; and the code scanned for any other serialization that should be refactored into the new serialization package.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-938,Installation Path,An IllegalStateException (see attached file) is thrown during start up if the path C:\Program Files (x86)\fedora is used for installation.  ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-939,Allow FeSL RI Attribute finder queries to be based on object URI as well as resource URI,"TQL/SPARQL queries can be used to define XACML resource IDs.  These queries have substituted into them (at run-time) the ID of the resource, ie the info:fedora URI.  So an object has an object URI, a datastream has a datastream URI.  This can lead to cumbersome queries in some cases - for instance where a policy is to apply to the object and all components of the object one has to deal with the case where the URI may be a datastream or an object, and if a datastream determine the object.  Enhance the current behaviour to also allow substitution of the object URI.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-942,Web application context loading can fail on some Windows environments,"Fedora does not start because Spring cannot find any beans that should exist in the web application context.    the installer creates a context param file in $FEDORA_HOME/tomcat/config/Catalina/localhost/fedora.xml.  Spring looks for a parameter contextConfigLocation, which the installer specifies to point to $FEDORA_HOME/server/config/spring/web/*.xml  In some Windows environments, the fileststem path is mangled, and looks something like ""c://c:/fedora-3.5/server/config/spring/web/*.xml]""  The context file is created by the installer in fcrepo-installer, Tomcat.java, installFedoraContext()",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-943,Review and update FeSL bootstrap policies,"The existing XACML engine has a set of bootstrap/default policies.  FeSL also includes a set of bootstrap/default policies, however these are not identical to the existing XACML engine.  Review the differences between these, and bring FeSL bootstrap policies in line with the default set.  Move any policies that are not needed to an examples directory (eg permitting access for staff, student; the example collections policy etc).",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-944,Export Serializer fails on large datastreams owing to limitation of int as array index,"Scott Hammel says: ""Running some export tests using Fedora's REST export API, I get a negative array index Java exception when doing an ""archive"" export of an object at around 400 MB (>320 MB, < 450 MB).  Fedora is version 3.4 something; running on 32-bit CentOS 5.5, Sun Java 1.6, 21  Is it just me or has anyone else seen something like that?  Thanks, Scott""",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-948,Policy index rebuilder fails,FeSL policy index rebuilder fails with the following stack trace.  As far as I can tell (and I've not had chance to look at this in any detail yet) I think it is something to do with the spring config not picking up the bean for this particular rebuilder.  Or perhaps this particular rebuilder is in need of some spring-ification - org.fcrepo.server.security.xacml.pdp.data.PolicyIndexRebuilder  Error: java.lang.NullPointerException  java.lang.NullPointerException         at org.fcrepo.server.utilities.rebuild.Rebuild.getOptions(Rebuild.java:2 22)         at org.fcrepo.server.utilities.rebuild.Rebuild.getUserInput(Rebuild.java :379)         at org.fcrepo.server.utilities.rebuild.Rebuild.main(Rebuild.java:447)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl. java:39)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces sorImpl.java:25)         at java.lang.reflect.Method.invoke(Method.java:597)         at org.fcrepo.server.utilities.rebuild.cli.CLILoader.main(CLILoader.java :77),legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-949,GetDissemination does not correctly handle query string parameters,"Reported by Damian Kaliszan on the user's list.  The code incorrectly uses the string ""key"" when building a map of params, instead of the ""key"" method parameter.  Patch from Damian attached.",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-950,Evaluate replacements for JRDF,"http://jrdf.sourceforge.net/status.html  JRDF is inactive as of 8 May 2011. JRDF is used in Trippi, FESL, and, the storage and resourceIndex packages. Fedora's JRDF libraries are bundled up with Mulgara (?).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-951,Create REST API equivalent of getDatastreams API-M method,The REST API does not have the equivalent of API-M getDatastreams.  Instead it is necessary to list datastreams using the /objects/pid/datastreams endpoint and then iterate each of the datastreams.  Add getDatastreams to the REST API.  For discussion: - should this be a different endpoint to the /objects/pid/datastereams endpoint? - or should we add a URL parameter on the same endpoint? - need to consider any AuthZ implications (as listDatastreams is API-A and getDatastreams is API-M),legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-952,Exception when modifying an object 32767 times,"The database internally uses a SMALLINT for the systemVersion in the doRegistry table. This value is incremented every time you modify an object, and overflows when you reach 32767 modifications. This was reproduced using a small piece of code that added and removed a relation from and object repeatedly.  The stacktrace is: org.fcrepo.server.errors.StorageDeviceException: Error creating replication job: The resulting value is outside the range for the data type SMALLINT.         at org.fcrepo.server.storage.DefaultDOManager.doCommit(DefaultDOManager.java:1376) [fcrepo-server-3.4.2.jar:na]         at org.fcrepo.server.storage.SimpleDOWriter.commit(SimpleDOWriter.java:508) [fcrepo-server-3.4.2.jar:na]         at org.fcrepo.server.management.DefaultManagement.purgeRelationship(DefaultManagement.java:1755) [fcrepo-server-3.4.2.jar:na]         at sun.reflect.GeneratedMethodAccessor51.invoke(Unknown Source) [na:na]         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_24]         at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_24]         at org.fcrepo.server.messaging.NotificationInvocationHandler.invoke(NotificationInvocationHandler.java:68) [fcrepo-server-3.4.2.jar:na]         at $Proxy0.purgeRelationship(Unknown Source) [na:na]         at org.fcrepo.server.management.ManagementModule.purgeRelationship(ManagementModule.java:476) [fcrepo-server-3.4.2.jar:na]         at org.fcrepo.server.management.FedoraAPIMBindingSOAPHTTPImpl.purgeRelationship(FedoraAPIMBindingSOAPHTTPImpl.java:551) [fcrepo-server-3.4.2.jar:na]         at org.fcrepo.server.management.FedoraAPIMBindingSOAPHTTPSkeleton.purgeRelationship(FedoraAPIMBindingSOAPHTTPSkeleton.java:463) [fcrepo-common-3.4.2.jar:na]         at sun.reflect.GeneratedMethodAccessor50.invoke(Unknown Source) [na:na]         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_24]         at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_24]         at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397) [axis-1.3-PATCHED.jar:na]         at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186) [axis-1.3-PATCHED.jar:na]         at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323) [axis-1.3-PATCHED.jar:na]         at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32) [axis-1.3-PATCHED.jar:na]         at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118) [axis-1.3-PATCHED.jar:na]         at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83) [axis-1.3-PATCHED.jar:na]         at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:453) [axis-1.3-PATCHED.jar:na]         at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281) [axis-1.3-PATCHED.jar:na]         at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699) [axis-1.3-PATCHED.jar:na]         at javax.servlet.http.HttpServlet.service(HttpServlet.java:637) [servlet-api.jar:na]         at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327) [axis-1.3-PATCHED.jar:na]         at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) [servlet-api.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) [catalina.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:na]         at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235) [fcrepo-server-3.4.2.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:na]         at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235) [fcrepo-server-3.4.2.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:na]         at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235) [fcrepo-server-3.4.2.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:na]         at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235) [fcrepo-server-3.4.2.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:na]         at org.fcrepo.server.security.servletfilters.FilterSetup.doFilter(FilterSetup.java:235) [fcrepo-server-3.4.2.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:na]         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:na]         at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) [catalina.jar:na]         at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) [catalina.jar:na]         at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525) [catalina.jar:na]         at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128) [catalina.jar:na]         at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [catalina.jar:na]         at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [catalina.jar:na]         at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) [catalina.jar:na]         at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849) [tomcat-coyote.jar:na]         at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) [tomcat-coyote.jar:na]         at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454) [tomcat-coyote.jar:na]         at java.lang.Thread.run(Thread.java:662) [na:1.6.0_24]  I have attached a patch that modifies the type to INT. There is also a modification of the DefaultDOManager that passes the original SQLException as cause to the StorageDeviceException that is thrown, so the stack trace is preserved",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-953,Create an AttributeFinderModule based on XML content of datastream,An attribute finder module eg allowing xpath-based exposure of xml content as a XACML resource id.  See mailing list thread http://comments.gmane.org/gmane.comp.cms.fedora-commons.user/6711  Similar to what's been done for the relationships-based attributes.,legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-954,Populate metadata to Akubra API,"We have a use case to expose Fedora datastream/objects to science data tools that are dependent on a meaningful file system and MIME indicators by file extension. For example, Earth and Atmospheric Science community has a tool to read a special format called NetCDF that represents multiple-dimensional arrays and there are data tools serve them via HTTP, but needs to scan the file system for that type of files, rather than read a HTTP stream.  I would therefore like to have the the hints argument in the Akubra API  to be populated with the mime type and the parent PID, in order to implement a special storage on the file system for this kind of tool. The Parent PID is to be used to form a correct collection hierarchy, and the MIME type is to be used to write the file extension.  We have had an implementation (using the Fedora 3.4.2 legacy storage system) that used the internal low-level storage API, which needs to be move into Akubra as a true sustainable solution. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-955,audit trail does not store ingest if no save message is passed,"When you ingest a new object without passing a log message, the audit trail doesn't get created and the ingest event is not logged in the audit trail.  However, if you ingest the same object with a log message, then the audit trail is created correctly and the ingest event is added to the audit trail with all the information you'd expect.  We've known about this for a while and were just working around it by ensuring we always include a log message in the ingest call - it didn't occur to me to report it as a bug until I was talking to Asger.  I can duplicate this easily in the REST api; I don't know for sure if it happens when you use other APIs.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-956,jboss repository no longer available,The JBoss repository http://repository.jboss.org/maven2 is no longer available according to http://community.jboss.org/en/build/blog/2011/06/01/blocking-repositoryjbossorgmaven2. It prevents to build the fcrepo project in case necessary dependencies were not already available in local .m2 repository.  I am attaching a patch of pom.xml that resolves the issue for the master branch.  Older releases (tags) can be affected too. Maybe there should be a notice to put the new repository to local .m2/settings.xml if you do not intend to update older tags.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-957,Ability to access more subject attributes in FeSL policies,As it is now it is only possible to access fedoraRole from a subjects attributes in FeSL. It would be desirable to be able to get access to other attributes as well to create more complex policies.,legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-958,Allow configuration of Messaging datastores with no messageTypes specified,"The messageTypes parameter of data store configurations specifies what types of API-M message (access, update) the datastore will receive.  However it is not possible to omit this (or specify """"): an exception is thrown on initialisation, as the String.split returns an array of a single zero-length string if it is specified as """" and NPE if the parameter is omitted.  It would be useful to configure datastores that do not receive API-M messages for custom messaging implementations - eg use messaging.send(destination, message) to send a new kind of message to the new destination (datastore); without the datastore also receiving the existing API-M messages. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-959,Rebuilder does not start when using embedded Derby,"Immediately after a fresh install of 3.5-SNAPSHOT, I started, then stopped Fedora, then attempted to run the rebuilder. It paused for a few seconds, then exited with the following error:  org.fcrepo.server.errors.ModuleInitializationException: Error while attempting to check for and create non-existing table(s): org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Failed to start database '/Users/cwilper/fedora/derby/fedora3' with class loader org.fcrepo.server.utilities.rebuild.cli.CLILoader@59bca5f1, see the next exception for details.)         at org.fcrepo.server.utilities.rebuild.RebuildDOManager.postInitModule(RebuildDOManager.java:128)         at org.fcrepo.server.Server.<init>(Server.java:644)         at org.fcrepo.server.Server.<init>(Server.java:697)         at org.fcrepo.server.utilities.rebuild.RebuildServer.<init>(RebuildServer.java:55)         at org.fcrepo.server.utilities.rebuild.RebuildServer.getRebuildInstance(RebuildServer.java:141)         at org.fcrepo.server.utilities.rebuild.Rebuild.getServer(Rebuild.java:212)         at org.fcrepo.server.utilities.rebuild.Rebuild.getRebuilder(Rebuild.java:263)         at org.fcrepo.server.utilities.rebuild.Rebuild.main(Rebuild.java:446)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)         at java.lang.reflect.Method.invoke(Method.java:597)         at org.fcrepo.server.utilities.rebuild.cli.CLILoader.main(CLILoader.java:77)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-960,"Weekly ""Fresh"" build with local m2 repo cleared out",http://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-961,Maven cannot find javax.resource:connector-api,Building fcrepo from source fails with the following error:  [ERROR] Failed to execute goal on project fcrepo-common: Could not resolve dependencies for project org.fcrepo:fcrepo-common:jar:3.5-SNAPSHOT: Could not find artifact javax.resource:connector-api:jar:1.5 in central (http://repo1.maven.org/maven2) -> [Help 1]  (you may need to clean out your local Maven repository to reproduce this error)  fcrepo-server's POM defines the connector-api dependency.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-962,Re-evaluate need for pre-filtering on the way to the message broker (e.g. API-M method type),Feels like this kind of filtering could be done between the broker and the recievers...,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-963,Setting ownerId in REST API ingest request does not work,"Setting the ownerId get variable on a REST API ingest request does not work and returns default ownerId value. (https://wiki.duraspace.org/display/FCR30/REST+API#RESTAPI-ingest)  Looks like only a small code fix is required at https://github.com/fcrepo/fcrepo/blob/master/fcrepo-server/src/main/java/org/fcrepo/server/rest/FedoraObjectResource.java#L293  Also, it looks like ownerId is coded as ownerID on lines 247 and 283 and might also need to be changed.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-964,Memory leak in fedora-client,"MediaShelf fedora-client memory leak detected at http://mediashelf.github.com/fedora-client/xref/com/yourmediashelf/fedora/c lient/FedoraClient.html#102. When multiple new clients are created and removed (assuming gc has happened), references to eu.medsea.mimeutil.detector.MagicMimeMimeDetector still persist in the heap.   See attached chart from MAT, after running some stress test's on our servers and processing the resulting heap.  For a quick fix I have changed fedora client to use a single instance of new MimeUtil2(); by making it static and using a static initialiser to register the mime detector. This has helped, however may introduce unforeseen threading issues in MimeUtil2 perhaps on the method MimeUtil2.getMimeTypes.",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-965,Changing object label in Web Admin client to contain accents,"Ends up with trash symbols being given inserted.   Seems to be related to different URLencoding/decoding schemes.  For example, the URLencoding of   (a acute) given by Flash's escape function is %E1 (RFC2396), but it would seem that the UTF-8 scheme of %C3%A1 is expected/required.  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-969,Investigate memory leaks,"Noting FCREPO-890 and FCREPO-891 - the new bundled version of Tomcat reports SEVERE messages on shutdown indicating potential memory leaks.  These should be investigated, and where these are due to Fedora they should be fixed.  For issues outside of Fedora code probably useful to inform the relevant provider of the software component.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-972,Update documentation,"Update the documentation. This release is focused on out-of-the-box users, so the configuration process is simplified, and documentation shall reflect this.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-973,URIResolver shall also be configurable for the Solr plugin,URIResolver shall also be configurable for the Solr plugin. This was originally done for the Lucene plugin. S.Lamb@hull.ac.uk reported it missing for Solr and supplied a patch.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-974,"Add support for XML mime type ""application/xml""","Add support for XML mime type ""application/xml"" in xslt helper functions (previously only text/xml supported)",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-975,"An index field named ""PID"" shall not be required for the Solr plugin.","An index field named ""PID"" shall not be required for the Solr plugin.  The required field name is stated in the uniqueKey element in solr's schema.xml file.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-976,Delete index entries for Inactive foxml objects for the Solr plugin.,Delete index entries for Inactive foxml objects for the Solr plugin. There is a <delete> element defined for the purpose.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-977,Add the index property fgsindex.stopwordsLocation,Add the index property fgsindex.stopwordsLocation Use it with the selected analyzer Custom StopwordsAnalyzer is an alternative,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-978,PDF text extraction shall avoid sending exceptions,"PDF text extraction shall avoid sending exceptions. When exceptions are thrown during text extraction, they shall be caught and empty index field returned with a log warning. Before, exceptions were sent back to the indexing stylesheet, which would cancel the indexing, now the index document will just lack the full text index field. Text extraction from PDF documents shall put spaces instead of characters 00-31 (except 09, 10 and 13), because they have caused exception during indexing.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-979,Simplified configuration for out-of-the-box users,"Simplified configuration for out-of-the-box users. Users shall just run a shell script, which will collect the necessary information in order to run the ant script that will insert the values in the config files. Thus, users do not have to customize and run the ant script.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-980,Upgrade to latest pdfbox,Upgrade to latest pdfbox.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-981,Upgrade to latest Lucene and Solr,"Upgrade to latest Lucene and Solr. It may be wise to take it in two steps, because they changed a lot from 2.* to 3.* So in the first place, upgrade to Lucene 2.9.4 and Solr 1.4.1",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-982,Upgrade to latest Zebra,"Upgrade to latest Zebra. Probably a very simple task, since Zebra did not change much.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-983,Upgrade to latest Fedora,Upgrade to latest Fedora. It may be a good idea to upgrade first to Fedora 3.3. Included is upgrade of other relevant libs included in Fedora.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-986,Increased flexibility to derive the configuration of a repository,"Discussion at the committers' Skype meeting of 26 Jul 2011 included questions about the flexibility of Fedora's configuration mechanism. This issue is a holding tank for that discussion, which will go farther as time allows. Some points raised:  1) The purpose of FEDORA_HOME is not entirely clear and agreed. FEDORA_HOME contains configuration, slowly-changing state (e.g. repository-wide policies), and (often) quickly-changing state like the primary object store.  2) Fedora's installation procedures are bound up with configuration. We're not perfectly sure what a perfect installation procedure looks like, and the best road forward for configuration may depend on that. Chris mentioned the desire for an easy way for (human) installers to align Fedora's state on the filesystem with FHS-- e.g. configuration in etc, changing state in var, and so forth. Eddie pointed out that this is all very well-- for *nix. Chris also pointed out that many Java webapps offer a means by which a simple default configuration is engaged if no alternative  3) There are some questions about technique and the best use of Spring to fulfill our designs for configuration.  4) Eddie mentioned the idiom often found in scripted webapps in which code is placed on the filesystem (or in a container) and then configuration (as a human act) occurs on the first load of the app. It was widely agreed that this is a very pleasant way to deploy and would be attractive to many.  5) Adam make the wild-eyed claim that OSGi offers powerful configuration services, and that it would be as well to move forward with that in mind and be prepared to shift configuration into that framework, since OSGi is where Fedora is headed.  6) It was generally agreed that more discussion is in order!  ","legacy - Fedora,legacy - FeSL,legacy - OSGi,legacy - Trippi",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0
FCREPO-988,Create a backwards-compatible schema for REST/listDatastreams that can accommodate datastream profiles,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-989,Support for JDK 7,"After installing JDK 7 i'm unable to build the fcrepo project from scratch using maven. Build stops at fcrepo-common because of:  [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project fcrepo-common: Compilation failure [ERROR] /home/ruckus/dev/projects/fcrepo-github/fcrepo/fcrepo-common/src/main/java/org/fcrepo/utilities/DriverShim.java:[33,7] error: DriverShim is not abstract and does not override abstract method getParentLogger() in Driver ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-990,URIResolver for Saxon Servlet to allow for additional datastream bindings to be provided to xslt,"Fedora's CMA has two methods for dealing with authentication for external services called from object methods:  Either datastream mediation is used (which mints a temporary callback URI for the datastream), or the external service needs to authenticate against Fedora.  The Saxon servlet has provision to authenticate against Fedora, however this is only done for the source document and stylesheet document - additional documents specified on the Saxon URL (and therefore retrieved using the xslt document() function) do not authenticate.  Thus it is impossible to pass in additional datastreams to the xslt or indeed source content from elsewhere using the document() function if authentication is required.  Another use case is for the xslt to source content from Fedora REST API methods using the xslt document() function.  A custom URI resolver could be created which uses exactly the same configuration and mechanism as is currently used for the source and stylesheet documents, which would get around this limitation.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-991,listMethods should gracefully handle missing CModel objects,"Currently listMethods fails (stack trace below) if a CModel object is not found.  It should gracefully handle missing CModel objects (eg specifying a CModel URI simply to identify the type of object without actually wanting to create a CModel object).  This means if an object subscribes to a set of CModels, and any single one of these doesn't exist as a Fedora CModel object it is not possible to list/execute methods for those that do exist.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-992,"Selection between xslt processors, xalan or saxon","Current xslt processor is xalan, which has XPath 1.0. Requests for XPath 2.0 lead to a need for a choice of saxon.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-993,GSearch 2.2 wsdl breaks with axis2,GSearch 2.2 works with axis1. Investigate if we can/should upgrade to axis2 ( http://axis.apache.org/axis2/java/core/ )   From:  Alistair Young <alistair.young@uhi.ac.uk>  Subject:  [fcrepo-user] gsearch 2.2 wsdl breaks with axis2  Date:  7. aug 2011 17.58.29 CEST  To:  Support and info exchange list for Fedora users. <fedora-commons-users@lists.sourceforge.net>   Does anyone know if there's a fix or workaround for the gsearch wsdl? Running axis2 + xmlbeans over it gives this error:  org.apache.xmlbeans.XmlException: error: cvc-identity-constraint.4.2.2: Duplicate key 'gfindObjects' for key constraint 'element@http://www.w3.org/2001/XMLSchema'  running the same config over Fedora API-A and API-M works fine. ,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-994,Purging more than 200 files concurrently depletes the DB Pool and causes inconsistencies.,"When purging Objects rapidly the DB Thread Pool gets exhausted first a log message like ""Max DB Threads (200) reached..."" get printed before  the system then says something along the lines ""could'nt delete object  from Database. but this should be ok"". After that the system is in an inconsistent state and e.g. search requests end in a HTTP 500 Server Error.  I will add a test case soon...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-996,Add setAllowLeadingWildcard to configuration of the Lucene plugin,Add setAllowLeadingWildcard to configuration of the Lucene plugin  There is a request to be able to set org.apache.lucene.queryParser.QueryParser.setAllowLeadingWildcard() so that queries can start with '*' or '?'.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-997,"For externally-referenced content, Fedora passes through underlying service's mime-type in preference to the one defined in the datastream definition",I was hoping to have Fedora be the canonical source of a file's mime type and let the underlying http-based storage service only be concerned with storing and slinging bits around. It seems however that Fedora passes the mime type set by the underlying storage service no matter what's set in the datastreamVersion in the object XML.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-998,RI Module fails to start if log level is set to DEBUG,"If the log level is set to DEBUG, the resource index module fails to start.  Also once the server has started in this state it fails to shutdown cleanly.  Exceptions reported:  Tomcat log:  ************************** ** FEDORA STARTUP ERROR ** **************************  Fedora startup failed org.fcrepo.server.errors.ModuleInitializationException: Error initializing RI          at org.fcrepo.server.resourceIndex.ResourceIndexModule.postInitModule(Re sourceIndexModule.java:127)          at org.fcrepo.server.Server.<init>(Server.java:644)          at org.fcrepo.server.BasicServer.<init>(BasicServer.java:41)          at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)           at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstruct orAccessorImpl.java:39)          at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingC onstructorAccessorImpl.java:27)          at java.lang.reflect.Constructor.newInstance(Constructor.java:513)          at org.fcrepo.server.Server.getInstance(Server.java:1239)          at org.fcrepo.server.ServerController.init(ServerController.java:403)          at javax.servlet.GenericServlet.init(GenericServlet.java:212)          at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper. java:1173)          at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:99 3)          at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContex t.java:4350)          at org.apache.catalina.core.StandardContext.start(StandardContext.java:4 659)          at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase .java:791)          at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:77 1)          at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546)           at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.ja va:637)          at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.j ava:563)          at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498 )          at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)          at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java :321)          at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl eSupport.java:119)          at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)           at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)          at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)           at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445 )          at org.apache.catalina.core.StandardService.start(StandardService.java:5 19)          at org.apache.catalina.core.StandardServer.start(StandardServer.java:710 )          at org.apache.catalina.startup.Catalina.start(Catalina.java:581)          at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)          at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl. java:39)          at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces sorImpl.java:25)          at java.lang.reflect.Method.invoke(Method.java:597)          at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)          at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) Caused by: java.lang.UnsupportedOperationException: This MulgaraConnector is rea d-only!          at org.trippi.impl.mulgara.MulgaraConnector.getWriter(MulgaraConnector.j ava:104)          at org.fcrepo.server.resourceIndex.ResourceIndexImpl.<init>(ResourceInde xImpl.java:74)          at org.fcrepo.server.resourceIndex.ResourceIndexModule.postInitModule(Re sourceIndexModule.java:120)          ... 35 more     Fedora log:  DEBUG 2011-09-14 18:11:41.036 [main] (DefaultListableBeanFactory) Finished creating instance of bean 'org.fcrepo.server.resourceIndex.TripleGenerator' DEBUG 2011-09-14 18:11:41.067 [main] (SessionFactoryFinder) Attempting to connect via RMI DEBUG 2011-09-14 18:11:42.177 [main] (SessionFactoryFinder) Failed to connect via RMI javax.naming.ServiceUnavailableException: null   at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:101) [na:1.6.0_17]   at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:107) [na:1.6.0_17]   at javax.naming.InitialContext.lookup(InitialContext.java:392) [na:1.6.0_17]   at org.mulgara.server.driver.SessionFactoryFinder.newSessionFactory(SessionFact oryFinder.java:147) [mulgara-core-2.1.4.jar:na]   at org.trippi.impl.mulgara.MulgaraSessionFactory.<init>(MulgaraSessionFactory.j ava:75) [trippi-mulgara-1.5.4.jar:na]   at org.trippi.impl.mulgara.MulgaraConnector.open(MulgaraConnector.java:242) [trippi-mulgara-1.5.4.jar:na]   at org.trippi.impl.mulgara.MulgaraConnector.getWriter(MulgaraConnector.java:97) [trippi-mulgara-1.5.4.jar:na]   at org.fcrepo.server.resourceIndex.ResourceIndexImpl.<init>(ResourceIndexImpl.j ava:74) [fcrepo-server-3.5.jar:na]   at org.fcrepo.server.resourceIndex.ResourceIndexModule.postInitModule(ResourceI ndexModule.java:120) [fcrepo-server-3.5.jar:na]   at org.fcrepo.server.Server.<init>(Server.java:644) [fcrepo-server-3.5.jar:na]   at org.fcrepo.server.BasicServer.<init>(BasicServer.java:41) [fcrepo-server-3.5.jar:na]   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.6.0_17]   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAcces sorImpl.java:39) [na:1.6.0_17]   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstruc torAccessorImpl.java:27) [na:1.6.0_17]   at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [na:1.6.0_17]   at org.fcrepo.server.Server.getInstance(Server.java:1239) [fcrepo-server-3.5.jar:na]   at org.fcrepo.server.ServerController.init(ServerController.java:403) [fcrepo-server-3.5.jar:na]   at javax.servlet.GenericServlet.init(GenericServlet.java:212) [servlet-api.jar:2.5.MR2]   at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:11 73) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java: 4350) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardContext.start(StandardContext.java:4659) [catalina.jar:6.0.29]   at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:7 91) [catalina.jar:6.0.29]   at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:637) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:563 ) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321) [catalina.jar:6.0.29]   at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSuppor t.java:119) [catalina.jar:6.0.29]   at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardHost.start(StandardHost.java:785) [catalina.jar:6.0.29]   at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardService.start(StandardService.java:519) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardServer.start(StandardServer.java:710) [catalina.jar:6.0.29]   at org.apache.catalina.startup.Catalina.start(Catalina.java:581) [catalina.jar:6.0.29]   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_17]   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39 ) [na:1.6.0_17]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl .java:25) [na:1.6.0_17]   at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_17]   at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289) [bootstrap.jar:6.0.29]   at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) [bootstrap.jar:6.0.29] Caused by: java.rmi.ConnectException: Connection refused to host: localhost; nested exception is:   java.net.ConnectException: Connection refused: connect   at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601) [na:1.6.0_17]   at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198) [na:1.6.0_17]   at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184) [na:1.6.0_17]   at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322) [na:1.6.0_17]   at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source) [na:1.6.0_17]   at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:97) [na:1.6.0_17]   ... 43 common frames omitted Caused by: java.net.ConnectException: Connection refused: connect   at java.net.PlainSocketImpl.socketConnect(Native Method) [na:1.6.0_17]   at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333) [na:1.6.0_17]   at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195) [na:1.6.0_17]   at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182) [na:1.6.0_17]   at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366) [na:1.6.0_17]   at java.net.Socket.connect(Socket.java:525) [na:1.6.0_17]   at java.net.Socket.connect(Socket.java:475) [na:1.6.0_17]   at java.net.Socket.<init>(Socket.java:372) [na:1.6.0_17]   at java.net.Socket.<init>(Socket.java:186) [na:1.6.0_17]   at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketF actory.java:22) [na:1.6.0_17]   at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketF actory.java:128) [na:1.6.0_17]   at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595) [na:1.6.0_17]   ... 48 common frames omitted DEBUG 2011-09-14 18:11:42.239 [main] (SessionFactoryFinder) Attempting to fallback to local javax.naming.ServiceUnavailableException: null   at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:101) [na:1.6.0_17]   at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:107) [na:1.6.0_17]   at javax.naming.InitialContext.lookup(InitialContext.java:392) [na:1.6.0_17]   at org.mulgara.server.driver.SessionFactoryFinder.newSessionFactory(SessionFact oryFinder.java:147) [mulgara-core-2.1.4.jar:na]   at org.trippi.impl.mulgara.MulgaraSessionFactory.<init>(MulgaraSessionFactory.j ava:75) [trippi-mulgara-1.5.4.jar:na]   at org.trippi.impl.mulgara.MulgaraConnector.open(MulgaraConnector.java:242) [trippi-mulgara-1.5.4.jar:na]   at org.trippi.impl.mulgara.MulgaraConnector.getWriter(MulgaraConnector.java:97) [trippi-mulgara-1.5.4.jar:na]   at org.fcrepo.server.resourceIndex.ResourceIndexImpl.<init>(ResourceIndexImpl.j ava:74) [fcrepo-server-3.5.jar:na]   at org.fcrepo.server.resourceIndex.ResourceIndexModule.postInitModule(ResourceI ndexModule.java:120) [fcrepo-server-3.5.jar:na]   at org.fcrepo.server.Server.<init>(Server.java:644) [fcrepo-server-3.5.jar:na]   at org.fcrepo.server.BasicServer.<init>(BasicServer.java:41) [fcrepo-server-3.5.jar:na]   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.6.0_17]   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAcces sorImpl.java:39) [na:1.6.0_17]   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstruc torAccessorImpl.java:27) [na:1.6.0_17]   at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [na:1.6.0_17]   at org.fcrepo.server.Server.getInstance(Server.java:1239) [fcrepo-server-3.5.jar:na]   at org.fcrepo.server.ServerController.init(ServerController.java:403) [fcrepo-server-3.5.jar:na]   at javax.servlet.GenericServlet.init(GenericServlet.java:212) [servlet-api.jar:2.5.MR2]   at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:11 73) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java: 4350) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardContext.start(StandardContext.java:4659) [catalina.jar:6.0.29]   at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:7 91) [catalina.jar:6.0.29]   at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:637) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:563 ) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277) [catalina.jar:6.0.29]   at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321) [catalina.jar:6.0.29]   at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSuppor t.java:119) [catalina.jar:6.0.29]   at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardHost.start(StandardHost.java:785) [catalina.jar:6.0.29]   at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardService.start(StandardService.java:519) [catalina.jar:6.0.29]   at org.apache.catalina.core.StandardServer.start(StandardServer.java:710) [catalina.jar:6.0.29]   at org.apache.catalina.startup.Catalina.start(Catalina.java:581) [catalina.jar:6.0.29]   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_17]   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39 ) [na:1.6.0_17]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl .java:25) [na:1.6.0_17]   at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_17]   at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289) [bootstrap.jar:6.0.29]   at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) [bootstrap.jar:6.0.29] Caused by: java.rmi.ConnectException: Connection refused to host: localhost; nested exception is:   java.net.ConnectException: Connection refused: connect   at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601) [na:1.6.0_17]   at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198) [na:1.6.0_17]   at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184) [na:1.6.0_17]   at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322) [na:1.6.0_17]   at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source) [na:1.6.0_17]   at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:97) [na:1.6.0_17]   ... 43 common frames omitted Caused by: java.net.ConnectException: Connection refused: connect   at java.net.PlainSocketImpl.socketConnect(Native Method) [na:1.6.0_17]   at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333) [na:1.6.0_17]   at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195) [na:1.6.0_17]   at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182) [na:1.6.0_17]   at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366) [na:1.6.0_17]   at java.net.Socket.connect(Socket.java:525) [na:1.6.0_17]   at java.net.Socket.connect(Socket.java:475) [na:1.6.0_17]   at java.net.Socket.<init>(Socket.java:372) [na:1.6.0_17]   at java.net.Socket.<init>(Socket.java:186) [na:1.6.0_17]   at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketF actory.java:22) [na:1.6.0_17]   at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketF actory.java:128) [na:1.6.0_17]   at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595) [na:1.6.0_17]   ... 48 common frames omitted ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-999,Ability to specify FeSL caching options in config instead of environment variable,"FeSL's XACML caches policy evaluation results, so that policies are not re-evaluated for repeated access to the same resource etc.  This is currently configurable - the caching can be disabled by setting PEP_NOCACHE=true as an environment variable.  This should instead be an option in a config file, FeSL should not depend on environment variables.",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1000,"Fedora Admin (Swing) Client datastream mimetypes for Word, Excel and Powepoint are inconsistent w/ server mimetype extension mappings","org.fcrepo.client.objecteditor.DatastreamsPane includes the following mime types: ""application/ms-word"", ""application/ms-excel"", ""application/ms-powerpoint""  However, FEDORA_HOME/server/conf/mime-to-extensions.xml uses the following: application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, which appear to be the more recognized variant. Moreover, Richard Green reports that at least IE 9.0.8112.16421, Safari 5.1 (7534.50) and Chrome 14.0.835.186m don't correctly recognize application/ms-word.  DatastreamsPane.ALL_KNOWN_MIMETYPES should be modified so that the above mimetypes accord w/ mime-to-extensions.xml.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1001,FCFG to Spring conversion utility,"A simple utility for converting module configurations in fedora.fcfg to Spring bean configuration files.  This utility should allow conversion of all or a selected part of fedora.fcfg to a Spring bean XML format, akin to the files in $FEDORA_HOME/config/spring/  We discussed this utility as part of FCREPO-954, so it could be used by people upgrading from Fedora 3.5...but we think it has general utility beyond just the conversion of DefaultDOManager's configuration to a Spring config file. It could also be used for:  1) Plugging in alternative module implementations in Fedora 3.5+, such as utilities that might come out of the Fedora Create community.  2) A starting point for the eventual conversion of all of fedora.fcfg to Spring configuration files.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1003,Utility for detecting and repairing inconsistencies (eg filesystem vs SQL database inconsistencies),"A utility that could report inconsistencies between the SQL object registry and the storage layer.  Optionally provide abilities to fix inconsistencies, eg - remove entry from SQL DB if no files found - add entry to SQL DB if files found but no object registered",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1004,Fedora object generator,"I should be able to build a suite of Fedora test objects according to configuration parameters which include composition of datastreams (e.g. X, M, E, R), relations to other objects, along with distribution of said objects that are also configurable (e.g. 100,000 objects, where 10% are of type T1, 50% type T2, etc).  In the case of M datastreams, we should be able to specify inlined base64 or not.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1005,"Compatibility with latest versions of Fedora, Lucene, Solr, Zebra, PDFBox","Compatibility with latest versions of Fedora, Lucene, Solr, Zebra, PDFBox",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1006,Useful end-user search page generation from indexing stylesheet,Useful end-user search page generation from indexing stylesheet. This was part of the plan in https://conferences.tdl.org/or/OR2011/OR2011main/paper/view/416/127 for GSearch 2.3 (FCREPO-979 Simplified configuration for out-of-the-box users)  but it was decided to release 2.3 without it due to time constraints.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1007,Performance measurements and possibly improvements,Performance measurements and possibly improvements,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1008,Filtering of search results by access constraints,Filtering of search results by access constraints.  This was part of the plan in https://conferences.tdl.org/or/OR2011/OR2011main/paper/view/416/127 for GSearch 2.4. Based on work presented at OR2008 : http://pubs.or08.ecs.soton.ac.uk/104/  Problem: Search results contain hits that the user does not have the access rights to see  Solution: Extend access rights to search results by filtering,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1009,Interaction with the Resource Index,"Interaction with the Resource Index. The idea is to search a GSearch index by embedding a Lucene query in an iTQL query ,  and the opposite, to search the Resource Index by embedding an iTQL query in a Lucene query.  Example of iTQL query with embedded Lucene query: select $object1 $object2 from <#ri> where $object1 <fedora-model:hasModel> <info:fedora/MyNS:XContentModel> and $object1 <fgsearch-MyIndex:matches> 'author:Jones AND fulltext:(salt AND water)' and $object2 <fedora-model:hasModel> <info:fedora/MyNS:YContentModel> and $object1 <my-model:hasRelationTo> $object2 This overcomes the two weaknesses that Lucene cannot do joins,  and that the full-text option of the Resource Index uses Lucene in a limited manner  (e.g. you cannot search on the full document text behind a pdf datastream,  and you cannot exploit numerous features of Lucene and Solr).",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1010,Use Apache Tika for extraction,"Apache Tika is a toolkit that can extract text and metadata from a wide variety of mimetyped formats (including PDF, via PDFBox). Employing Tika as an extraction engine in GSearch would immediately expand enormously the possible range of material over which GSearch could operate, and going forward, GSearch would benefit from new parsers and better-performing parsers created as part of that effort.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1014,Begin regularly releasing built org.fcrepo artifacts to Maven Central,"Starting with 3.6, we should begin routinely publishing our artifacts to Maven Central as part of the release process. According to Greg Pendlebury on the fcrepo-dev list, Sonatype does not consider having non-central dependencies a deal-breaker for deploying artifacts to Maven Central. Therefore, this can actually happen before we get rid of non-central dependencies.  For reference, see how Greg did it here for 3.5: http://fedora-commons.1317035.n2.nabble.com/fcrepo-dev-Fedora-Client-Maven-Bundles-td6581243.html  This task should add appropriate info to poms, ensure Sonatype is doing central sync for org.fcrepo, and document the steps necessary to build/release the artifacts in the Fedora Release Process document on the wiki.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1015,"Define ""manual upload fitness criteria"" for non-central third-party libs",None,"legacy - Fedora,legacy - java-client,legacy - Trippi",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1
FCREPO-1016,Document all third-party libs not in Maven Central,None,"legacy - Fedora,legacy - java-client,legacy - Trippi",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1
FCREPO-1017,Automatically deploy artifact snapshots to Sonatype snapshot repo via Bamboo,None,"legacy - Fedora,legacy - java-client,legacy - Trippi",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1
FCREPO-1018,Management of GSearch configurations in Fedora objects,"This issue is created in response to the message below. I want to implement a simple ""solution"" to these needs. The ""solution"" consists in creating Fedora objects to hold the current configuration files as datastreams. In this way, they can be managed with Fedora tools, and they can be part of RELS-EXT and RELS-INT relationships and XACML policy controls. Whether the ""solution"" covers the needs fully can be an interesting discussion.   From: ""ajs6f@virginia.edu"" <ajs6f@virginia.edu> Date: 12. okt 2011 16.41.11 CEST To: ""fedora-commons-developers@lists.sourceforge.net Developers"" <fedora-commons-developers@lists.sourceforge.net> Cc: Support and info exchange list for Fedora users. <fedora-commons-users@lists.sourceforge.net> Subject: Re: [fcrepo-dev] GSearch planning Reply-To: ""fedora-commons-developers@lists.sourceforge.net"" <fedora-commons-developers@lists.sourceforge.net>  Here's a less straightforward idea, which I haven't put into a Jira issue because it warrants discussion, if it evenis to become part of the roadmap.  At OR in Austin, I presented an indexing system (based partly on ideas from GSearch, but not on the GSearch codebase) that we at UVa are working on. One of the key principles of this system is that because discovery and presentation for repository contents are increasingly based on indexes, and because discovery and presentation are parts of curation (viewed broadly), it is worthwhile to move the configuration of indexing workflows inside the repository being indexed, so that indexing configuration ""lives"" alongside the indexed contents and can be managed through the same services. (In the example of our system, RELS-INT RDF connects metadata datastreams in indexable objects with indexer objects that contain indexing transformations.)  I'd like to propose that the roadmap for GSearch include the task of making it possible for users to move configuration for indexing transformations (_not_ necessarily configuration for the connections between indexes and repositories, but only the configuration of indexing transformations) _inside_ the repositories being indexed.  One key affordance that would become available would be to manage indexing transformations through the same APIs as are used for repository contents. Because changing an index transformation would no longer require altering material in the local GSearch install, but only the repository, all of the wonderful functionality that Fedora already supplies in of the core repository services would become available (e.g. XACML policy controls, metadata associations, a nice RESTful API, etc.).   Doing this would require much careful thought as to how to model and structure representations of indexing transformations in the repository context, but it could have great benefits, as tools to manage indexing would be able to rely on work already done and in progress for the management of ordinary repository contents.   --- A. Soroka Online Library Environment the University of Virginia Library  ",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1019,Exploration of complex GSearch use cases,"This issue is created in response to the messages below. I want to explore complex GSearch use cases and sketch or implement solutions, based on existing and/or potential GSearch functionality. Such functionality includes many-repositories-to-many-indexes, indexing xslt stylesheets creating index documents across Fedora datastreams and/or objects, managing GSearch configurations in Fedora objects (FCREPO-1018), and interaction between the resource index and the Lucene/Solr index(es) (FCREPO-1009).   From: ""ajs6f@virginia.edu"" <ajs6f@virginia.edu> Date: 24. okt 2011 02.19.24 CEST To: Support and info exchange list for Fedora users. <fedora-commons-users@lists.sourceforge.net> Subject: Re: [fcrepo-user] [fcrepo-dev] GSearch planning Reply-To: Support and info exchange list for Fedora users. <fedora-commons-users@lists.sourceforge.net>  The intention of bringing the structure of the indexing workflow out of XSLT into the RDF relationships between objects is not primarily to provide for complex cases, although it can do that. It is, instead, to make that structure part of the curation of the objects themselves.  The interest of this move follows on the claim that the presentation of objects increasingly is dependent on indexing (in part because so many ""front-end"" frameworks for Fedora rely on indexes to immediately construct many user-facing web pages, and not on direct retrieval from the repository, e.g. Hydra or Islandora), and that therefore indexing workflow deserves to be curated alongside data contents in the _strongest practical way_. I claim further that the strongest possible way to curate relationships between content datastreams and indexing transforms in a Fedora repository is in explicit RDF, and that this is practical.  I quite agree that a powerful but unwieldy or opaque style of configuration may be worse than a weaker but more transparent style, but I believe that with enough thought and attention for the specific modeling of workflow, we could provide graceful factoring in configuration through which simple GSearch indexing workflows would incur very little expense (and even less than they now do) but sophisticated workflows remain possible.  --- A. Soroka Online Library Environment the University of Virginia Library     On Oct 23, 2011, at 8:05 PM, Conal Tuohy wrote:  On 17/10/11 11:48, ajs6f@virginia.edu wrote: Heartily seconded!  In the architecture we're exploring at UVa, we use RELS-INT to define relationships between datastreams and indexing transforms. The relevance to this issue lies in RELS-EXT. By indexing RELS-EXT as a datastream (and assuming that the molecular ""para-object"" that is responsible for a given index record is constructed via RELS-EXT relationships) we can obtain information about the other objects that may be involved in any index record to which a given object is associated. I'm in agreement that keeping the analysis of object relationships for indexing purposes in indexing XSLT is _not_ the best way, and instead we look to combine this technique with the use of Enhanced Content Model Views to create the kind of multiobject records to which Jonathan is pointing by hiding the explicit structure of the ""para-object"" from the indexing XSLT. This may or may not be the best possible solution for the problem, so I'm just offering it as a place to begin discussion.   --- A. Soroka Online Library Environment the University of Virginia Library     On Oct 16, 2011, at 8:15 PM, Jonathan Green wrote:  Something that I think needs to be considered when moving forward with gsearch is that the index may not always share a 1 to 1 relationship with objects in fedora. In a very atomistic content model perhaps the solr document is actually composed of parts from many related objects. These types of decisions are currently very hard to make in XSLTs. In what way hard? Can you expand a little on the difficulties you see?  While I think XSLTs have a place in transforming metadata, there needs to be something more. One issue to keep to in mind here is the 80/20 rule. If Fedora's  indexing system is complex enough to allow for all manner of complex  cases, then it may be needlessly complex for many simple cases. A more  complex system would make complex indexing easier, but if it also makes  simpler cases harder (even just harder to understand a configuration  system), then the OVERALL ease-of-use might actually decrease. I don't  think it's possible to strike a perfect balance, but a technology like  XSLT might be a useful catch-all: it can handle simple cases very  simply, but can also be extended arbitrarily (including, for instance,  transcluding metadata from related Fedora objects or other XML datasources).  In very many cases, the mapping of Fedora objects to Solr documents is  very simple and won't, for instance, involve any aggregation. But the  mapping from Fedora objects to Solr documents is in principle arbitrary;  you might choose to do pretty much anything, quite legitimately. You  might have metadata schemas of any type; you might use the RDF store,  you might have external authority files, etc. This is where, I think, a  system which is sufficiently configurable to be fully general could well  end up as complex as an XSLT-based system would be, but without many of  the advantages of XSLT (code libraries, books and mail-lists, programmer  experience, etc).  It might be enough to ship Fedora with a basic set of XSLT transforms,  and a few sample transforms showing how to use the resource index, etc. --   Conal Tuohy eResearch Business Analyst Victorian eResearch Strategic Initiative +61-466324297 ",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1020,Out-of-memory exceptions due to FeSL PEP buffering datastreams in memory,"See report from Greg Jansen here:  http://sourceforge.net/mailarchive/message.php?msg_id=28272473  The code looks like it is buffering the datastream in memory, which is clearly a bad thing.  It should be passing the stream through.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1021,Split Java REST client into two artefacts - main REST API and a separate Messaging client,"fedora-client (https://github.com/mediashelf/fedora-client) currently produces a single artifact that also bundles messaging client code. fedora-client should produce two artifacts, one for working with the REST APIs (API-A, API-M) and another for working with the Messaging module.",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-1022,Deprecate Messaging client,"Replace with MediaShelf messaging client  Don't deprecate immediately, let people know first and keep in for a release or two to allow people to swap over.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1023,No Support for Latest W3C SPARQL Query Results XML Format,The current Sparql result format for queries in the RI index does not conform to the W3C recommendation at http://www.w3.org/TR/rdf-sparql-XMLres/,"legacy - Fedora,legacy - Trippi",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0
FCREPO-1026,Make validation more pluggable/configurable,"Currently validation is somewhat configurable:  A custom validation module could be written and configured in fedora.fcfg.  This isn't that flexible as it means that if the existing validation was also to be carried out, then that would need to be called by the custom validator.  A better design pattern might be something like the management Decorator pattern we already used.  We also might consider allowing validators to operate on the digital object, rather than a file or inputstream - it may be more convenient for the validator to access the object itself rather than FOXML.  We perhaps also might distinguish between different types of validation, eg validation of the FOXML vs validation of the object - the FOXML is a serialisation of the object, it is not the object itself.   Existing validation on doCommit() (DefaultDOManager) only happens in debug - but the validator is invoked on ingest separately.  The existing validation could be refactored so that the XML validation and schematron validation become decorator implementations.  We should also consider relationships validation (which is carried out by the ValidationUtility, and not included in the DOValidatorImpl).  Perhaps the REST validate endpoint could also be extended (and configurable) to validate using the above as well as the current ECM validation.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1028,Documentation,Update documentation for 2.4,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1032,UUID Type 1 timestamp-based Path ID Mapper,"Given a Type 1 UUID pid, e.g. demo:8e25cab0-167d-11e1-be50-0800200c9a66, I would like to have the object stored on the filesystem based on the uuid-encoded timestamp, e.g. $FEDORA_HOME/data/objectStore/2011/11/24/info%3Afedora%2Fdemo%3A8e25cab0-167d-11e1-be50-0800200c9a66.  The timestamp-based path mapping should be configurable, e.g. yyyy/MM/dd, and yyyy/MM/dd is a reasonable default. The Path ID Mapper must be able to accommodate non-type1 UUID identifiers as well, falling back to the default, hash-based algorithm.  Rationale: We mint UUIDs for >95% of our repository objects. It's also the case that it's only the most recently ingested/modified objects that are most frequently accessed. Given the scale of our repository, we'd like to be able to make storage policy decisions (slow/fast storage, backup policies) based on the age (i.e. importance) of the object. This also allows us to prioritize the restore of objects in a disaster recovery scenario. ",legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1035,"Support additional, configurable invalidation of objects in the DOReaderCache","In addition to the maxCachedSeconds parameter to DOReaderCache, we would like to have support for invalidating objects in the cache by other means: - Max number of requests: for example, after an object has been requested 100 times, remove it from the cache - Total time: for example, 500 seconds, no matter how many requests. - A combination of all three: the first to occur invalidates the cache.  Rationale: In a scenario in which Fedora is replicated other than with Journaling, Fedora is not aware of object modifications, and therefore does not invalidate the DOReaderCache for those modified objects. In the current implementation, requests for an object will refresh the object in the cache and therefore, a very popular object (despite being stale) might never be removed from the cache.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1036,"With FeSL AuthZ, authentication is required for API-A despite apia.auth.required=false on installation","Fedora installed with FeSL AuthN and FeSL AuthZ; API-A authentication required set to false when installing.  However Authentication is requested for all API-A requests.  (with FeSL AuthZ turned off and legacy XACML enabled, this is not the case)",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1038,Calling HEAD on getDatastreamDissemination in REST API calls GET on the underlying service for datastreams in control group E,"Performing a HEAD call on the getDatastreamDissemination REST API does not seem to result in a HEAD call on the underlying resource for control group E. Instead it seems like a HTTPClient instance is spun up and the whole underlying HTTP request for a GET completes before the server returns a response. This is kind of deadly for large files.  Maybe there's another api I should be invoking? Anyway, this seems like an unintended behavior.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1039,Support for MySQL 5.5 (use ENGINE=InnoDB),"MySQL 5.5 no longer supports the word ""type"" when declaring that a table should be an InnoDB one. In order to make it work, you have to use the word ""engine"".  See related thread here: http://fedora-commons.1317035.n2.nabble.com/fcrepo-user-Fedora-OAI-provider-errors-td7039344.html",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-1040,listDatastreams fails with NPE when a policy specifies a subset of datastreams to give access to.,"The attached policy basically allows access to apia methods to user ""public"" in group ""public"", but only if - the request does not specify a datastream ID; or - the request specifies a datastream ID in the ""permitted"" list (which is only DC in the example)  When doing a listDatastreams, logging in as public, there is an NPE caused by the post-method results filtering.  java.lang.NullPointerException  org.fcrepo.server.security.xacml.pep.rest.objectshandlers.ListDatastreams.filterHTML(ListDatastreams.java:294)  org.fcrepo.server.security.xacml.pep.rest.objectshandlers.ListDatastreams.handleResponse(ListDatastreams.java:203)  org.fcrepo.server.security.xacml.pep.rest.filters.ObjectsFilter.handleResponse(ObjectsFilter.java:111)  org.fcrepo.server.security.xacml.pep.rest.PEP.doFilter(PEP.java:172)  org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)  org.fcrepo.server.security.jaas.AuthFilterJAAS.doFilter(AuthFilterJAAS.java:305)  org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)  org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:109)  org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)  org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)  org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)  org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1042,FeSL authN sessioning is undocumented ,"The authN sessioning (based on a ""secret"" HTTP header) capability in the FeSL authN servlet filter is not documented except in the source code. ","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1043,Object properties are not available as XACML resource attributes,"Well, in fact some of them are - using the FedoraRIAttributeFinderModule, and the default configuration of this exposes ownerID and state for example.  However this introduces a dependency on the resource index.  Also the attributeID used is info:fedora/fedora-system:def/model#ownerId, which is not the standard Fedora XACML resource attribute ID for owner.  In the legacy XACML implementation, the org.fcrepo.server.security.ResourceAttributeFinderModule handles getting these basic object properties.  This appears to be missing from FeSL.  FeSL should at least support (without requiring the RI) the resource attributes that are available under legacy XACML.  Maybe it is just a case of adding in the existing ResourceAttributeFinderModule to FeSL configuration?",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1044,modifyObject incorrectly uses the ownerID XACML resource attributeID URI for the new ownerID property supplied by the API method,"1) Legacy XACML incorrectly uses the resource attribute ID for ownerID for the new ownerID property - it should supply the new ownerID property as a different URI (see for example the way state is handled - different URIs for existing resource state and new resource state). 2) FeSL does the same  Note that this bug will only show up if an ownerID value is supplied as a parameter of the modifyObject method - if none is present then the legacy XACML engine will pick up the existing value from the object.  FeSL's default configuration is to supply this value using the URI ""info:fedora/fedora-system:def/model#ownerId"" - which will always give the current (not the new) ownerID.  This means that modifyObject API operations cannot be restricted by policies based on the existing ownerID of the object, as the value from the request will be used if present instead of the existing object's ownerID.","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1047,Auto checksums don't work on ingest,"Auto-checksumming is configured (autoChecksum = true, checksumAlgorithm = MD5) but when I ingest object via xml with datastream content but no contentDigest included in the foxml, I get a ""DISABLED"" / ""none"" checksum instead of the automatic, default checksum that I should be getting. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1048,Internal OAI Provider does not conform to the Open Archives Interface,"OAI Provider does not conform to the Open Archives Interface.  The OAI Provider in Fedora does not conform to the Interface in several respects: First of the Date the objects are filtered by is CreationDate and NOT LastModification date.  from http://www.openarchives.org/OAI/openarchivesprotocol.html#Datestamp: ""Harvesters may use datestamps to harvest only those records that were created, deleted, or modified within a specified date range.""  Which isn't possible because filtering is done on CreationDate. This problem was reported before (FCREPO-716), but the bugfix was not applied. Furthermore the datestamp published in the OAI headers was also the creationDate which of course should be LastModificationDate.  The earliestDatestamp in the Identify answer is also wrong. In the class FedoraOAIProvider, The earliestDatestamp is created by a call to new Date(), so everytime you ask for the earliestDatestamp you would just get now.  from http://www.openarchives.org/OAI/openarchivesprotocol.html#Identify: ""earliestDatestamp : a UTCdatetime that is the guaranteed lower limit of all datestamps recording changes, modifications, or deletions in the repository. A repository must not use datestamps lower than the one specified by the content of the earliestDatestamp element. earliestDatestamp must be expressed at the finest granularity supported by the repository.""  Which in no way is supported by the current implementation.  I've supplied a patch which I believe addresses these issues.  The ""Best"" earliest timestamp can be found through a rather heavy fieldsearch search, but instead I've used the idea in the FedoraOAIProvider which adds a 'dcmDate>'2001-01-01'"" to fieldsearch searches. I've defined an earliestDate field (set to 2001-01-01), which is used as the earliestDatestamp value in the Identify answer, and this value is also used to restrict the fieldsearch querys.  We would really like this patch to be applied, and, if for some reason, the patch does not address certain important issues, please respond so I can create a patch that everybody is happy with. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1049,Improve the control over writeLimit in getDatastreamFromTika,"Improve the control over writeLimit in getDatastreamFromTika.  Currently, a writeLimit of 100k characters is enforced by Tika, and those characters are not available in the index field,  when exception is thrown.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1051,Installer incorrectly requires user to provide a database user password,"When running the installer, if user selects MySQL as the database platform, the installer doesn't allow the user to proceed if they enter an empty string for 'password' even though this is allowed by MySQL and is the default behaviour for many desktop development environments.    Database -------- Please select the database you will be using with    Fedora. The supported databases are Derby, MySQL, Oracle and Postgres.      If you do not have a database ready for use by Fedora or would prefer to    use the embedded version of Derby bundled with Fedora, enter 'included'.  Options : derby, mysql, oracle, postgresql, included  Enter a value ==> mysql   MySQL JDBC driver ----------------- You may either use the included JDBC driver or your own copy.               Enter 'included' to use the included JDBC driver, or, enter the location    (full path) of the driver.   Enter a value [default is included] ==>      Database username ----------------- Enter the database username Fedora will use to connect to the Fedora database.  Enter a value ==> drupaluser   Database password ----------------- Enter the database password Fedora will use to connect to the Fedora database.  Enter a value ==>   Error: Must specify a value Enter a value ==>   Logging into the database with no password is allowed in MySQL.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1053,Remove PEP_NOCACHE environment variable configuration for disabling FeSL policy results caching,System property fedora.fesl.pep_nocache added in 3.6; as Fedora should have no dependencies on environment variables this should be removed in a future release.  This is a placeholder issue to remove the (deprecated) use of environment variable PEP_NOCACHE=true in a future release.  See ContextHandlerImpl#init() for where this is currently used.,legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1055,Shared resource for XML operations,Currently object FOXML validation (via schematron - xslt - and schemata - xsd) is inefficient as the stylesheets are compiled for every validation.  Create some kind of shared resource for XML operations such as transformations and validations with some kind of caching mechanism so that compiled invariant XML resources can be re-used.  In the future this component could form a good candidate for separate OSGi service(s).,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1057,ECM validation of MIMEType does not allow objects to specify charset if none is specified in the CModel,"It would be useful for * Data object datastreams to be able to specify charset in the MIMEType, so their contents can properly be interpreted * CModels to only specify the media-type in the MIMEType; ie charset can vary per data object  Current ECM validation of this is an exact match, so this is not possible.  Email thread on this issue: http://sourceforge.net/mailarchive/message.php?msg_id=28567702  Suggest we should when validating:  * parse the MIMEType fields, based on the format: ** type/subtype; name1=value1; name2=value2 * Validate as follows: ** type/subtype should be matched exactly (could be future enhancements to define a hierarchy of mimetypes for validation) (or maybe we allow wildcards, eg text/* or */xml ?) ** If CModel specifies a param eg name1 then (1) object datastream must specify the param with the same value ** Datastream is allowed to specify addtional params that are not in the CModel specification (but if datastream specifies a param name and the same param name is in the CModel specification then there must be an exact match) ** could be future enhancements to this, eg specifying lists of acceptable param values - could even do this now with a specification such as ""text/xml; charset=utf-8|utf-16"" ** could potentially allow wildcard specification of parameter values, which would be interpreted as such - the datastream *must* have the parameter, but can have any value, eg ""text/xml; charset=*""  Minimal requirement from my perspective is:  CModel specifies mimetype:  ""text/xml"" Datastream specifies mimetype ""text/xml; charset=utf-8""  And this is accepted as valid.  But mimetype ""application/xml; charset=utf-8"" is not valid.  A thought... we could just encode the CModel mimetype as a regexp - and that gives all the flexibility we need?  Or is this a bit ugly?  And some extra attribute etc to specify interpretation a regexp?    ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1058,DOReaderCache Cleanup,"DOReaderCache breaks JEE compliance by implementing an unmanaged thread, which is restricted in EJB spec:   - http://stackoverflow.com/questions/533783/why-spawning-threads-in-j2ee-container-is-discouraged  - http://java.sun.com/blueprints/guidelines/designing_enterprise_applications/ejb_tier/qanda/restrictions.html  Furthermore the usage of List is quite peculiar, where type and semantics are dependent on the index of the object in the list. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1059,Newline characters in FOXML result in triples that can't be deleted from the resource index when object is updated/purged,"Having an object label with newline character sequences in the FOXML, eg &#13;&#10; or &#10; ingests correctly and a triple is created for the label.  However when modifying the label (or purging the object) the label triple is not deleted.  It looks like there is some mangling of the newline character sequence, probably causing the triple delete to fail as Fedora's string for the label isn't matching the value in the resource index.  Verified with both the Windows and Linux newline character sequences above.  See also: http://www.mail-archive.com/fedora-commons-users@lists.sourceforge.net/msg03659.html for Jonathan Green's report of this and a test object to reproduce this.  Added as priority Major as this affects the integrity of the resource index.  Potentially there could be other cases of this, tests should be added for this, including these characters (and possibly others) in DC triples and in RELS-* datastream triples.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1060,Messaging Client-Server Integration Tests,"Now that we're recommending people using the messaging client that's part of the fcrepo-client project (see FCREPO-1022), it would be a good time to have automated integration tests that verify functionality.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1061,Create examples for Cargo-based integration tests,Convert one or more integration test config suites from Ant/installer-based execution over to use Cargo-based execution for use as examples.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1062,invalid XML datastream checksums after migration from inline (X) to managed (M) via migration script,"Migrating XML datastreams from inline (X) to managed (M) using the modify-control-group migration tool results in invalid checksums depending on the options specified when the modify-control-group script is run.    Steps to reproduce this behavior: - create a new test object via the admin interface -  inline DC datastream with a checksum (in my testing, I'm using MD5) - run the fedora-modify-control-group script on the DC datastream for the test object with default options - call compare datastream checksum API on the test object's DC datastream - Fedora reports this as false.  I tested the migration script with a few different options, and it seems that setting the addXMLHeader option to true instead of the default false is sufficient for the checksum to remain valid after the migration (setting both addXMLHeader and reformat options to true also resulted in a valid checksum after the migration).  As a result of this apparent bug, I have large numbers of production XML datastreams that were migrated (quite a while ago) with this script using the default options, and the XML checksums are invalid (something I only discovered more recently while doing full-repository checksum auditing).  We NEED a way to correct those invalid checksums.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1063,FeSL does not support granular policies at the level of individual API methods,"$FEDORA_HOME/sever/config/config-melcoe-pep-mapping.xml specifies a mapping between the full set of API methods/action identifiers used for Fedora API operations and simplified versions of create, read, update, delete, admin  Whilst this is useful for simplified authoring of policies; it has two deficiences:  * The simplified values are presented using the same Action attribute ID as the standard Fedora Action attribute ID - which is misleading/confusing (these simplified values should be a separate attribute ID?) * The original Fedora action IDs are not retained, making it difficult to write granular policies.  For example it's not easy to distinguish between purging an object and purging a datastream, as the same action ID is supplied (in fact the only way currently is to look at the full resource ID and see if there's a datastream on the end, which is not very useful).  So suggeste action would be: 1) The simplified action IDs should be presented using a different a different action attribute ID 2) The original Fedora action IDs should be retained, for more granular-level policies  But: 1) is a breaking change; any existing policies based on these simplified action IDs would break.  So a compromise would be to present both the fedora-original and FeSL-simplified action IDs using the same attribute ID; as the simplified values don't collide with the existing values.   Example: Attribute ID: urn:fedora:names:fedora:2.1:action:id Value: urn:fedora:names:fedora:2.1:action:id-purgeObject  Is translated by FeSL, and presented to the PDP as: Attribute ID: urn:fedora:names:fedora:2.1:action:id Value: delete  (note that the original, granular method-level value is not retained).   There is a kind of work-around currently which is to amend the mappings back to their original values; but this means you loose the simplified attributes, so is only a work-around for specific situations. ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1064,Include attributes for relationships API methods in FeSL - allow policies based on the relationship being manipulated,the Relationships API methods (see purge relationship for an example) do not specify any attributes that identify the actual relationship being manipulated.  It would be useful to add these.  Then one could write policies to specifically control certain types of relationships (eg control who can add members to collections),legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1065,Flush triple to RI before doing RI-based attribute query when evaluating FeSL policies,"Triples don't get flushed to the resource index immediately.  There are occasions where this can impact RI-based policy evaluation.  Eg imagine a parent-child restriction policy that prevents parents being deleted before their children.  There is a case where - all children are deleted - triples not yet flushed to RI - therefore parent delete then fails  There could be other situations also.  Suggest doing a flush as part of the RI-based resource attribute query.  But, would this introduce a performance overhead?  Eg if policies are being evaluated when doing a mass ingest, it could cause a flush on every object.  Maybe instead an optional parameter on the attribute definition?  Or...",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1066,Maven build errors with git-site and m2e lifecycle-mapping,"Maven builds (mvn compile) are currently failing due to two issues:  1) The git-site dependency was on a SNAPSHOT version, and the snapshot has been deleted. Change to use a released version (0.3.1) as fcrepo-misc does. 2) The use of m2e's lifecycle-mapping ""plugin"" incorrectly listed it directly under plugins. It's not an actual plugin, so builds fail if it's there and maven can't find it in any repository. Just having it in the pluginManagement section is sufficient.",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-1067,Create fault codes for Fedora exceptions to be used in Web service error reporting,"After discussion on the 9 Feb 2012 committers' call, the decision was made to provide fault codes for Fedora errors that are independent of the Java exception specifics. These are for use in the Web APIs as a way of distinguishing otherwise similar error conditions on the client side. See:  http://irclogs.duraspace.org/index.php?date=2012-02-09  for more info.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1068,Cant use ORDER BY DESC($variable) using SPARQL,"In fedora/risearch I can't seem to order my results using ORDER BY DESC($variable) or ORDER BY ASC($variable) , which is a SPARQL standard defined here: http://www.w3.org/TR/rdf-sparql-query/#modOrderBy  I can however sort ascending by just using ORDER BY $variable.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1070,REST Ingesting AtomZip fails unless parameter ignoreMime is set to true,"FedoraObjectResource around line 264:  If the ingested file is AtomZip, there's a check that the MIMEType is XML-compatible - this won't usually be the case for AtomZip.  If the test fails, the stream is left as null, and a new blank object is created.  The logic should be changed so that if a binary ingest format has been specified, this check for XML mime type is skipped.  Work-around is to specifty the parameter ignoreMime=true  Can be tested using the web admin client - export an object in AtomZIP format, then try ingesting it; you'll get an NPE (as the ZIP file being read at this point isn't a zip file, it's the template FOXML file created due to the MIME check above resulting in a null inputstream and therefore a template FOXML file being created).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1071,Ingest of AtomZIP files fail with URL validation exception for managed content datastreams,AtomZIP files specify src giving the content location.  Exported objects in AtomZIP format give this as simply the file name (within the zip).  The current validation code tries to validate this location and fails.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1073,Use latest Akubra (akubra-fs bugfixes),The next version of Fedora should include the AKUBRA-1 and AKUBRA-7 fixes available in the latest Akubra release.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1074,debug messages in gsearch 2.4 and 2.4.1,"When I deploy fedoragsearch.war (2.4 or 2.4.1) there are debug messages turned on filling catalina.out. Everything seems to be logged, even some 'binary' data and oaiprovider stuff so the log fills extremely fast. I've tried to remove/edit all log4j.xml and logging.properties I found with no success. The logs from tomcat (and I think also gsearch itself) were turned off but there were still debug messages going in from activemq, axis and other libraries. The only thing finally seemed to helped was using /lib dependencies from gsearch 2.3 and adding only what was necessary from 2.4 (tika-1.0, fcrepo-3.5, lucene-3.5, servlet-api-2.4). Any idea which dependency is turning this on or what is happening?",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1075,FieldSearch ConcurrentModificationException with many queries,"While stress testing Fedora, hitting the fieldsearch interface with many simultaneous requests, a ConcurrentModificationException is sometimes thrown.  See related thread: http://fedora-commons.1317035.n2.nabble.com/fcrepo-user-ConcurrentModificationException-td7351953.html",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1076,UN_TOKENIZED fields break truncated search,"I have an UN_TOKENIZED Lucene index called SENTID which contains, amongst many others, values like 'GHS02' and 'GHS04'. These can be readily searched with the query format SENTCODE:GHS02, but the truncated search SENTCODE:GHS* will not hit them.  Gert Schmeltz Pedersen explained to me last year, that this is due to the fact that all UN_TOKENIZED field queries are subjected to KeywordAnalyzer, which apparently casts your query to lowercase when truncation is used (note, though, that specifying the query as SENTCODE:ghs* does not solve the problem...).  Gert  promised to look into this, and possibly solve it by allowing configuration of other analyzers for specific UN_TOKENIZED fields. This has not been done in 2.4.1, though, unless I completely missed something.  For the time being, I work around this by creating both an uppercase and a lowercase entry for each occurrence of this field. A more general solution would be most welcome.   ",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1077,OAI Provider can add duplicate xsi:schemaLocation and xmlns:xsi,"The FedoraOAIProvider class adds xmlns:xsi and xsi:schemaLocation attributes to oai_dc:dc nodes of DC streams' content:  {code}   if ((dissURI.split(""/"").length == 3) && (dissURI.endsWith(""/DC""))) {     // If it's a DC datastream dissemination, inject the     // xsi:schemaLocation attribute     xml = xml.replaceAll(""<oai_dc:dc "", ""<oai_dc:dc "" + _XSI_DECLARATION + "" "" + _DC_SCHEMALOCATION + "" "");   } {code}  However, if these attributes already exist, they are still added. An attribute can be specified only once for an XML element instance, hence the resulting document is invalid XML.  The code should check for existence of the xmlns:xsi and xmlns:schemaLocation attributes before adding them.",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-1078,A function to return a datastream as an XML tree,Request for a new feature:  From:  Remi Malessa <rem@llgc.org.uk> Subject:  Re: [fcrepo-user] Fedora G Search - XSLT authentication Date:  14. mar 2012 10.29.12 CET To:  Support and info exchange list for Fedora users. <fedora-commons-users@lists.sourceforge.net>  Is there a function to return a datastream as an XML tree ?,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1079,Create fault codes for Fedora exceptions to be used in Web service error reporting,"After discussion on the 9 Feb 2012 committers' call, the decision was made to provide fault codes for Fedora errors that are independent of the Java exception specifics. These are for use in the Web APIs as a way of distinguishing otherwise similar error conditions on the client side. See:  http://irclogs.duraspace.org/index.php?date=2012-02-09  for more info.   Chris Wilper did some work a long time ago to begin internationalization for Fedora's exception hierarchy. It looks like (because this work hinged on providing codes for each exception underneath ServerException) it could be swiftly reused for this purpose, and we'd even get machinery for i18n for free! ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1080,DateUtility's date parsing is buggy,DateUtility.parseDateStrict is not strict (never sets formatter's leniency to false).,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1081,fedora-client-* 0.4 not published for Maven,http://mediashelf.github.com/fedora-client/ mentions that fedora-client-0.4 is the recommended version to use with Fedora 3.5.0. Neither Maven Central (http://search.maven.org/#search|ga|1|fedora-client) nor DuraSpace Third-Party Maven Repository (https://m2.duraspace.org/content/repositories/thirdparty/com/yourmediashelf/fedora/client/fedora-client/) include version 0.4. The last published version is 0.3. It would be great to have the latest dependency available. Thank you.,legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-1082,Upgrade to latest referenced libraries,Upgrade to latest referenced libraries.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1083,Enhance example URIResolverImpl,"Enhance dk.defxws.fedoragsearch.server.URIResolverImpl to handle other URIs than for a Fedora repository. This issue was initiated by a pull request from sarowe at github. This class may be set in index.properties for fgsindex.uriResolver A developer may implement javax.xml.transform.URIResolver and set it instead, see http://xerces.apache.org/xerces2-j/javadocs/api/javax/xml/transform/URIResolver.html ",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1084,Improve handling of datastream bindings for disseminations,"The current behavior of dissemination machinery is to URL-encode datastream addresses if the entire dissemination URL contains ""=("". This is a pretty simple-minded test and makes the use of 'E' datastreams less flexible than otherwise might be the case. The test can be made more subtle.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1085,Upgrade jaxrs library,Jersey 1.8 has POM issues that require mirroring maven repos to build.  Upgrading to Jersey 1.12 or removing Jersey entirely in favor of CXF for JAXRS would solve the problem.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1086,Provide new Fedora client for tests and provide one example test,Provide the new Fedora client for use with repository integration tests. This does _not_ entail moving or merging source code. It only implies using Maven to make the new Fedora client available and writing one sample test using it to be a model for others.,"legacy - Fedora,legacy - java-client",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-1087,Decide on whether to use Jersey or CXF for new Fedora client.,"In order to move forward with the use of the new Fedora client for integration tests, we need to decide on whether to continue to use Jersey as the Web services client library therein or switch, as the server has, to using Apache CXF.","legacy - Fedora,legacy - java-client",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-1088,Convert all REST API integration tests to use new Fedora client,"Once a decision has been reached on which Web services library to use for the new Fedora client, all of the integration tests that work against the REST API should be converted over to use it.","legacy - Fedora,legacy - java-client",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-1089,Pool SAXParsers if possible,"There are a number of places in which we create new SAXPArserFactory objects for non-validating, namespace aware parser creation.  These parser should be pooled, as their creation is expensive.  eg: The various deserializers (FOXML, sdef-WSDL, etc.)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1090,Pool DocumentBuilders Where Possible,"There are a number of places in the code in which we create DocumentBuilderFactories for namespace-aware DocumentBuilders.  We should pool access to these DocumentBuilders (they are reset-able), since creating them is expensive.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1092,Deprecate org.fcrepo.server.security.servletfilters.xmluserfile,The package org.fcrepo.server.security.servletfilters.xmluserfile contains functionality that is entirely superseded by that available in FESL. This package should be deprecated and documentation should be updated to prefer FESL strongly. ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1093,Create integration tests for new authN filter,"The new ""upstream authN"" filter requires integration tests.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1094,"Create new ""upstream authN"" filter as indicated by use case.",None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1097,NPE when rebuilding the ResourceIndex,"After installing the current version from trunk and switching the datastore in fedora.fcfg to ""localPostrgesqlMPTStore"" running server/bin/fedora-rebuild.sh throws the following NPE. It seems org.fcrepo.Server.m_context which is declared as GeneralApplicationContext is null.   Server directory is /home/ruckus/dev/fedora-3.6/server  ---------------------------------------------------------------------  Error: java.lang.NullPointerException  java.lang.NullPointerException   org.fcrepo.server.Server.getBeanNamesForType(Server.java:1659)   org.fcrepo.server.utilities.rebuild.Rebuild.getRebuilder(Rebuild.java:277)   org.fcrepo.server.utilities.rebuild.Rebuild.main(Rebuild.java:459)   sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   java.lang.reflect.Method.invoke(Method.java:597)   org.fcrepo.server.utilities.rebuild.cli.CLILoader.main(CLILoader.java:77) ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1098,ResourceIndex Search has no Query Language set,"After installing fedora with postgresql and switching the datastore to ""localPostgresqlMPTStore"", there are no query languages shown to choose from the Resource Index search (/risearch). see the attached screenshot...",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1101,User-provided JDBC jar not copied during install,"When running the installer and specifying Oracle, I supplied the JDBC driver path on my local system. The connection test succeeded, and installation finished normally. However, when I started Fedora, the ConnectionPoolManager logged a message about the pool not being able to initialize because the driver could not be found.  After the initial startup, manually copying the Oracle jdbc driver jar file into webapps/fedora/WEB-INF/lib was successful.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1102,URL Escaping PIDs Returns 404s,"When testing the Fedora 3.6-preview against Islandora I noticed that Fedora doesn't seem to accept URL encoded PIDs anymore. Islandora URL encodes all the parameters sent to the Fedora REST API.  This works: http://fedora36test:8080/fedora/objects/test:object but this doesn't: http://fedora36test:8080/fedora/objects/test:object  Logs: WARN 2012-06-19 12:45:00.588 [http-8080-2] (JAXRSUtils) No operation matching request path ""/fedora/objects/test%3Aobject"" is found, Relative Path: /test%3Aobject, HTTP Method: GET, ContentType: */*, Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,. Please enable FINE/TRACE log level for more details.  On ingest: This works: curl -u fedoraAdmin:fedoraAdmin -X POST http://fedora36test:8080/fedora/objects/test:object But this doesn't: curl -u fedoraAdmin:fedoraAdmin -X POST http://fedora36test:8080/fedora/objects/test%3Aobject  Logs: WARN 2012-06-19 11:28:47.975 [http-8080-1] (JAXRSUtils) No operation matching request path ""/fedora/objects/test%3Aobject"" is found, Relative Path: /test%3Aobject, HTTP Method: POST, ContentType: */*, Accept: */*,. Please enable FINE/TRACE log level for more details.  This looks like a new issue in 3.6, the above examples work fine against 3.5 and 3.4.2",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1105,Build config for Islandora,Build config for Islandora.  Tailor the properties file so that it is easier to configure GSearch for Islandora.  Add Drupal module for input of properties and call of ant script.,legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1106,"Fedora Returns ""400 Bad Request"" When Calling ModifyDatastream REST Call on DC","When I run this command:  curl -XPUT -u fedoraAdmin:fedoraAdmin http://vm1:8080/fedora/objects/test:pid/datastreams/testdsid?dsLabel=""wallawalla""  I get back a datastream profile and everything is fine.   When I run: curl -XPUT -u fedoraAdmin:fedoraAdmin http://vm1:8080/fedora/objects/test:pid/datastreams/DC?dsLabel=""wallawalla""  I get back: InputStream cannot be null  Full output from the --trace-ascii flag to curl: 00cd: 1.4 OpenSSL/0.9.8r zlib/1.2.5 00ec: Host: vm1:8080 00fc: Accept: */* 0109: <= Recv header, 26 bytes (0x1a) 0000: HTTP/1.1 400 Bad Request <= Recv header, 27 bytes (0x1b) 0000: Server: Apache-Coyote/1.1 <= Recv header, 71 bytes (0x47) 0000: Set-Cookie: JSESSIONID=6BDA7864B37383FC01F13D4E372EC71D; Path=/f 0040: edora <= Recv header, 37 bytes (0x25) 0000: Date: Mon, 25 Jun 2012 20:19:53 GMT <= Recv header, 26 bytes (0x1a) 0000: Content-Type: text/plain <= Recv header, 20 bytes (0x14) 0000: Content-Length: 26 <= Recv header, 19 bytes (0x13) 0000: Connection: close <= Recv header, 2 bytes (0x2) 0000: <= Recv data, 26 bytes (0x1a) 0000: InputStream cannot be null == Info: Closing connection #0 ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1110,Use Cargo Maven plugin to start/stop Fedora for fedora-client integration tests,"Currently, the fedora-client integration tests require a running instance of Fedora. We should use Cargo to automate starting/stopping an instance of Fedora for testing.",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-1111,Use Fedora field search interface to supply records to ProAI,"Because I got timeouts using the ITQLQueryFactory in the Fedora OAI provider, which uses the resource index which was apparently not up for getting 3 million records at once, I decided to write a FedoraSeachQueryFactory which uses the Fedora findObjects API call to retrieve objects from the repository instead of querying the resource index. Because findObjects pages records 100 at a time, there are no timeout issues like with the ITQLFactory. Additionally, if that is all the resource index is being used for, you can save quite some disk space by disabling and removing the resource index.  I think others might find the FedoraSearchQueryFactory useful and I'd be happy to contribute it. I wrote it to be configuration-compatible with the ITQLQueryFactory, i.e. just changing the driver.fedora.queryFactory value to fedora.services.oaiprovider.FedoraSearchQueryFactory should be enough. Obviously complex triple queries won't work, and a few things related to set membership are still hard-coded at this point just to get it working, although this could be improved on. ",legacy - OAIProvider,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0
FCREPO-1112,Wrong checksum on MetsFedoraExt-1.1 export,If we export an object using the MetsFedoraExt-1.1 format and we have a datastream with multiple versions the value of the md5 chucksum is always the checksum of the first version.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1113,"Integration tests fail with ""Cannot find the declaration of element 'fbm:batchModify'.""",When running the integration tests im running into a SaxException. Check the attached test report.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1114,The Swing Admin client failed multiple tests during manual FCREPO 3.6 release tests.,"The Swing Admin client exhibits several failures during manual testing for the 3.6 release.  This list is still being built.  However, substantial parts of the tool continue to function and can provide useful operations.  - Attempt to ingest an object whose PID already exists in Fedora.  The Swing Admin Client will lock up and the only way to exit is to kill its process.  - Most of the ""Console"" functions (SOAP) do not work.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1116,Document movement of Server configuration parms to Spring in 3.6,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1137,"Upgrade to latest Fedora, Lucene and Solr.","Upgrade to latest Fedora, Lucene and Solr. Included is upgrade of other relevant libs included in Fedora. ",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1142,fcrepo 3.6 creates a page with broken links from object search given a final / in the URL,"Whenn you enter http://fedora-server.dom/fedora/objects/ (note the final slash; this can happen by ""hacking off"" the last part of a long URL to navigate back), then a query of the following type is issued by Fedora: http://fedora-server.dom/fedora/objects/?pid=true&title=true&description=true&identifier=true&terms=*&query=&maxResults=20 (Note the / before ?pid) The resulting page contains broken links of the type http://fedora-server.dom/fedora/objects/objects/prefix%3Asuffix (Note the duplication of objects/ in the path)  Following the broken links gives back a completely empty page.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1143,Poor handling of authN choices in installer.,The installer currently allows the selection of experimental upstream authN and the simultaneous selection of FESL. These are not compatible choices and should not be offered together.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1149,Implement proper HEAD request handling in REST API for Datastream Dissemination,Performing a HEAD request always results in a full GET request. Having JAX-RS @HEAD implementations in the REST API would be more efficient,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1150,Write 3.6.1 Release Notes,Write 3.6.1 Release Notes for these completed issues: https://jira.duraspace.org/secure/IssueNavigator.jspa?reset=true&jqlQuery=project+%3D+FCREPO+AND+fixVersion+%3D+11040+AND+resolution+%3D+Fixed+ORDER+BY+priority+DESC,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1151,Add support for getting value of method parameters in fedora-client-messaging,Per discussion on the users list: http://thread.gmane.org/gmane.comp.cms.fedora-commons.user/8013  Add support to fedora-client-messaging so that the value of API-M method parameters can be retrieved.,legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-1152,Ingest with FeSL AuthZ enabled: Object whose PIDs start with a digit are not accessible once created,"When FeSL Authz is enabled, objects whose PIDs start with a digit cannot be accessed or modified once they are created.  The object is created, but attempts to view the object, add a datastream to it, or purge it result in this error:  java.net.URISyntaxException: Illegal character in scheme name at index 0  This exception appears to be thrown when URI.parse() is called in org.fcrepo.server.security.xacml.pep.rest.objectshandlers.GetObjectProfile.handleRequest().",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1153,Transfer fcsu to Fedora remit,"Chris Wilper has written a utility that can, amongst other capabilities, migrate legacy LLStore instances to Akubra. This utility should be brought into Fedora Commons and supported there.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1155,Behaviour change in REST api when updating from 3.5 to 3.6.x,"The change from Jersey to Apache CXF introduced a behaviour change, when requesting a resource with the Accept-Header set to an empty string.   * Jersey converted the empty string Accept-Header to ""Accept: */*"" and therefore responded to such a request with the corresponding object representation and a HTTP 200 Ok.  * Apache CXF does not modify the header value and therefor looks for a resource method annotated with @Produces("""") which can not be found. Therefore CXF returns a HTTP 404 Not Found in this scenario.   According to the HTTP spec at http://www.w3.org/Protocols/rfc2616/rfc2616-sec14 it seems CXF implements the better behaviour, but it should be noted that it is supposed to return a HTTP 406 Not Acceptable instead of a 404.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1156,Performance degradation when adding a lot of datastreams,"When adding a lot of manages datastreams to an object the ingestion throughput performance degrades in a linear fashion.  When e.g. ingesting 1000 managed datastreams with 500KB each the time needed for adding the datastream for the first is ~20ms and this degrades to ~130ms on a local installation.  I created a git hub project to reproduce this, which can be found here:  https://github.com/fasseg/fcrepo-test-ingester.git which can be run as described in the README to reproduce this issue.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1157,id-listObjectInFieldSearchResults action is evaluated without an api attribute,"When an object search is executed under FESL, there is a check both for a findObjects action and listObjectInFieldSearchResults action, the latter used when filtering the search results.  In the second case, there is no api attribute in the XACML evaluation context; it should be APIA. ",legacy - FeSL,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0
FCREPO-1158,PolicyIndexRebuilder fails with a NullPointerException in FCRepo 3.6,"The PolicyIndexRebuilder does not have access to the PolicyIndex it needs, because the RebuildServer does not load the requisite Spring beans. This leads to a NullPointerException.  It can be worked around by copying the PolicyIndex configuration, and configuring an additional bean for the rebuilder like so:  <bean id=""org.fcrepo.server.security.xacml.pdp.data.PolicyIndexRebuilder2""             class=""org.fcrepo.server.security.xacml.pdp.data.PolicyIndexRebuilder"" >             <property name=""policyIndex"" ref=""org.fcrepo.server.security.xacml.pdp.data.PolicyIndex"" />         </bean>","legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1159,FESL Action mapping is misconfigured by default,The default FESL configuration has a typo in the ContextUtil spring configuration: It sets the actionMap property instead of the actionValueMap property.  The result is that FESL is not mapping the granular action ids in the XACML evaluation context.  It can be fixed by simply editing the Spring configuration to use the correct property name. ,"legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1161,"DateTimeUtil does create a lot of ""SimpleDateFormat"" objects",DateTimeUtil does allocate 1 SimpleDateFormat object at least for each datastream/version. Since SimpleDateFormat is not thread-safe as pointed out by Ben this could be done via a ThreadLocal<> rather than a static object reference. I'll check into that and maybe try out other formatter as well.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1162,Add note to fedora.fcfg deprecating it in favor of Spring,Put a comment into fedora.fcfg noting that it is a deprecated configuration mechanism and folks should rely on Spring config going forward. ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1163,"Only FOXML format is supported when calling the REST api's ""/objects/new"" method with a blank body.","When calling HTTP1.1 GET ""/objects/new?format=info:fedora/fedora-system:ATOM-1.0"" with an empty body fedora does not create a new empty fedora object but returns an error message resulting from an empty response body, this works however when using FOXML 1.1.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1166,"XACML documentation uses out of date vocabulary, doesn't show how to get the content model inside of a policy.",Effects Fedora 3.0 to 3.6  References an old vocabulary.  https://wiki.duraspace.org/display/FEDORA36/Fedora+XACML+Policy+Writing+Guide  Should also include this information https://jira.duraspace.org/browse/FCREPO-477  Note that https://jira.duraspace.org/browse/FCREPO-477 the use of res-ext field hasModel isn't shown in the repositories vocabulary.txt ,"legacy - Fedora,legacy - FeSL",0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1167,"Inclusion of ""datatype"" in addRelationship request causing fatal Tomcat error","Including the datatype POST variable with an addRelationship request causes the following tomcat error. Are there URI definitions of the datatypes that exist somewhere?  INFO 2012-11-03 09:31:54.303 [http-8080-1] (DefaultManagement) Completed addRelationship(pid: sjrda:20, relationship: info:fedora/fedora-system:def/relations-external#hasPart, object: Testing, isLiteral: true, datatype: string) WARN 2012-11-03 09:31:54.305 [http-8080-1] (PhaseInterceptorChain) Application {http://www.springframework.org/schema/beans}objectsService has thrown exception, unwinding now org.apache.cxf.interceptor.Fault: Not a valid (absolute) URI: string ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1168,Upgrade to Apache Commons Pool 1.6,"Currently, our deployed version of Apache Commons Pool is 1.3, which is pretty old. This comes from a dependency of commons-dbcp. Other libraries already in play ask for newer versions of Commons Pool (e.g. activemq-pool wants commons-pool 1.5.6).  Commons Pool 1.6 provides a generics-enabled API which is much more pleasant to work with. It might be best if we try to step up to that and ""bring along for the ride"" any libraries which turn out to be incommoded by the change.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1169,Cannot use fedora-rebuild.sh on non standard install,"env-server.sh relies on Fedora being installed in a 'webapps' directory:  set WEBINF=""%CATALINA_HOME%\webapps\%WEBAPP_NAME%\WEB-INF""  when it's installed separately from Tomcat (to allow easier upgrades), e.g.  /WWW/domain.name/fedora  the rebuild fails to run.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1170,Java 7 compatibility,One of the primary goals of the Fedora 3.7 release will be the move from Java 6 to Java 7. This issue is a container for all the issues that will arise in that process.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1171,ActiveMQ upgrade for compatibility with java 7,The version of ActiveMQ that has been included with Fedora is not compatible with Java 7. It must be upgraded for Fedora 3.7 and the consequences to Fedora's dependency profile must be considered and corrected.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1172,API-M purgeRelationship null object not working as expected,"According to the documentation, supplying purgeRelationship with an ""object"" of null should result in purging all relations which match   http://www.fedora-commons.org/documentation/3.0/userdocs/server/webservices/apim/index.html#methods.purgeRelationship  However, when I supply it with null, I get the following:  INFO 2012-11-30 11:11:59.763 [ajp-bio-8009-exec-2] (DefaultManagement) Completed purgeRelationship(pid: uuid:4ecc25e9-cc02-4191-8589-ffbaecac258f, relationship: http://cdr.unc.edu/definitions/1.0/bas e-model.xml#isPublished, object: null, isLiteral: true, datatype: null) ERROR 2012-11-30 11:11:59.764 [ajp-bio-8009-exec-2] (FedoraAPIMBindingSOAPHTTPImpl) Error purging relationships java.lang.IllegalArgumentException: Null ""newLexicalForm"" parameter         at org.jrdf.graph.AbstractLiteral.<init>(AbstractLiteral.java:109) [mulgara-core-2.1.11.jar:na]         at org.fcrepo.common.rdf.SimpleLiteral.<init>(SimpleLiteral.java:22) [fcrepo-common-3.5.jar:na]         at org.fcrepo.server.storage.SimpleDOWriter.createTriple(SimpleDOWriter.java:484) [fcrepo-server-3.5.jar:na] ...  Setting object to not be a literal also fails, although slightly differently:  INFO 2012-11-30 11:07:46.931 [ajp-bio-8009-exec-6] (DefaultManagement) Completed purgeRelationship(pid: uuid:4ecc25e9-cc02-4191-8589-ffbaecac258f, relationship: http://cdr.unc.edu/definitions/1.0/base-model.xml#isPublished, object: null, isLiteral: false, datatype: null) ERROR 2012-11-30 11:07:46.933 [ajp-bio-8009-exec-6] (FedoraAPIMBindingSOAPHTTPImpl) Error purging relationships java.lang.NullPointerException: null         at java.net.URI$Parser.parse(URI.java:3004) [na:1.6.0_37]         at java.net.URI.<init>(URI.java:577) [na:1.6.0_37]         at org.fcrepo.server.storage.SimpleDOWriter.createTriple(SimpleDOWriter.java:489) [fcrepo-server-3.5.jar:na]         at org.fcrepo.server.storage.SimpleDOWriter.purgeRelationship(SimpleDOWriter.java:406) [fcrepo-server-3.5.jar:na]         at org.fcrepo.server.storage.SimpleDOWriter.purgeRelationship(SimpleDOWriter.java:391) [fcrepo-server-3.5.jar:na]         at org.fcrepo.server.management.DefaultManagement.purgeRelationship(DefaultManagement.java:1755) [fcrepo-server-3.5.jar:na] ...  Looking at the source for SimpleDOWriter, there does not seem to be any case to check for the ""object"" being set to null, and AbstractLiteral doesn't seem to care for that:  https://github.com/fcrepo/fcrepo/blob/master/fcrepo-server/src/main/java/org/fcrepo/server/storage/SimpleDOWriter.java#L474  The matching method, FilteredTripleIterator.matches(), also doesn't allow for a positive match when the searching for a null from what I can tell, so if it weren't excepting out earlier it would probably still not purge any relations:  https://github.com/fcrepo/fcrepo/blob/master/fcrepo-server/src/main/java/org/fcrepo/server/utilities/FilteredTripleIterator.java#L99  Our setup is with an external mulgara triple store, running 3.6.1 at the moment",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1174,DOValidatorImpl writes object XML to disk even if it doesn't need to,"org.fcrepo.server.validation.DOValidatorImpl has a FIXME dating back to the days of Sandy Payette (who appears to have written the code):          // FIXME We need to use the object Inputstream twice, once for XML         // Schema validation and once for Schematron validation.         // We may want to consider implementing some form of a rewindable         // InputStream. For now, I will just write the object InputStream to         // disk so I can read it multiple times.           Seems like now is as good a time as any to FIXME. {grin}  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1175,Prevent validation Schematron from being recompiled for every validation,"A particular case of poorly-managed XML resources is in org.fcrepo.server.validation.DOValidatorSchematron, where a Schematron XSLT transform is recompiled over and over again. Chris Wilper proved using YourKit that this creates a serious slowdown in the ingest pipeline. The first simple improvement available is to precompile the transform and to then pool instances of DOValidatorSchematron used in DOValidatorImpl.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1176,Destroy Schematron validators and replace with XML Schema,"After investigation, it appears to be the case that the Schematron validators in:  fcrepo-server/src/main/resources/schematron  accomplish nothing that could not be more easily and more clearly accomplished with XML Schema. The machinery that operates these validators is extremely old and inefficient. The best course of action will be to replace them entirely with modern XML Schema. This will entail alterations to ord.fcrepo.server.validtion and to installer machinery that builds the module configuration for role org.fcrepo.server.validation.DOValidator. It may turn out that the best approach will be to dispense with the module section and turn to Spring config (yay!) for the change.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1177,Create XML Schema that supersedes Schematron,Create XML Schema that supersedes the obsolete Schematron validators.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1178,Library upgrades for 3.7,Master issue for library upgrades for 3.7,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1179,Upgrade asm,Upgrade asm/asm from 3.1 to 3.3.1.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1180,Upgrade sjsxp,Upgrade sjsxp from 1.0.1 to 1.0.2.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1181,Upgrade commons-codec,Upgrade commons-codec from 1.6 to 1.7.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1182,Upgrade commons-dbcp,Upgrade commons-dbcp from 1.2.2 to 1.4,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1183,Upgrade commons-io,Upgrade commons-io from 2.3 to 2.4.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1184,FESL's log patterns in server/config/logback.xml don't log useful information,"The current FeSL debug message definition (commented out by default):      <layout class=""ch.qos.logback.classic.PatternLayout"">       <Pattern>%p %d{yyyy-MM-dd' 'HH:mm:ss.SSS} [%t] (%c{0}\\) %m%n</Pattern>     </layout>  ...does not log useful information:  INFO 2012-12-14 10:40:16.546 [localhost-startStop-1] (AuthFilterJAAS\INFO 2012-12-14 10:40:16.547 [localhost-startStop-1] (AuthFilterJAAS\DEBUG 2012-12-14 10:40:50.783 [http-bio-8080-exec-1] (AuthFilterJAAS\DEBUG 2012-12-14 10:40:50.822 [http-bio-8080-exec-1] (AuthFilterJAAS\DEBUG 2012-12-14 10:41:05.232 [http-bio-8080-exec-2] (AuthFilterJAAS\DEBUG 2012-12-14 10:41:05.232 [http-bio-8080-exec-2] (AuthFilterJAAS\DEBUG 2012-12-14 10:41:05.237 [http-bio-  If the <layout> stanza is changed to the <encoder> pattern used earlier in the file:      <encoder>                                                                  <pattern>%p %d{yyyy-MM-dd' 'HH:mm:ss.SSS} [%t] \(%c{0}\) %m%n</pattern>     </encoder>  ...then useful log information is shown:  INFO 2012-12-14 10:49:43.737 [localhost-startStop-1] (AuthFilterJAAS) initialised servlet filter: org.fcrepo.server.security.jaas.AuthFilterJAAS DEBUG 2012-12-14 10:50:12.552 [http-bio-8080-exec-1] (AuthFilterJAAS) incoming filter: org.fcrepo.server.security.jaas.AuthFilterJAAS DEBUG 2012-12-14 10:50:12.559 [http-bio-8080-exec-1] (AuthFilterJAAS) session-id: E5CDACC6C976F548887FAB498B7E717D DEBUG 2012-12-14 10:50:12.564 [http-bio-8080-exec-1] (AuthFilterJAAS) auth username: admin ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1185,Searching with apostrophe in a search query should be allowed,"I am attempting to search for objects that have the string ""haven't"" in the description field.   If I search for ""haven't"" as a terms search there is no problems. But if I try to search with a query like ""description~haven't"", I encountered the following problem:  First the apostrophe character must be escaped as \' to be accepted by the org.fcrepo.server.search.Condition.getConditions parser. (This is not a problem, but I am not sure it is documented)  But still with the apostrophe character escaped for the parser, the search condition is rejected by a check in the Condition constructor.  If this check is removed, it becomes possible to search for the objects.  I am attaching a diff file with the check removed and with added integration test that demonstrates the handling of apostrophes in terms and query type searches. It seems to work OK with this change  (This may also be related to FCREPO-867)",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1186,Fedora overrides logback configuration for other webapps as well,"The class org.fcrepo.utilities.LogConfig initializes the logback configuration with its initFromFile method.  It does so, however, by setting the system property *logback.configurationFile* if it is not already set.  This leads to one of the following problems:  - If the property is already set, the fedora logback configuration is not used. - If the property is not already set, Fedora sets it, overriding any logback.xml files that may be on the classpath, even for other web applications.  A better way to programmatically load a logback configuration, just for your own webapplication, would be to use a ServletContextListener and have it execute something like the following in its contextInitialized method: {code}        LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();        JoranConfigurator configurator = new JoranConfigurator();        configurator.setContext(lc);        lc.reset();        configurator.doConfigure(externalConfigFile);        logger.info(""Configured Logback with config file from: {}"", externalConfigFile.getAbsolutePath()); {code}",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1187,URL escaping PIDs for Relationships REST resource returns 404s,"This is essentially the same as issue FCREPO-1102.  When 1102 was fixed in https://github.com/fcrepo/fcrepo/commit/2aa71e3db6f2aba5b66b22783594b035fbe0119d the VALID_PID_PART regular expression constant was added to FedoraObjectsResource and DatastreamResource, but the original (problematic) regular expression is still present in RelationshipResource.   Currently it uses ([A-Za-z0-9]|-|\\.)+:(([A-Za-z0-9])|-|\\.|~|_|(%[0-9A-F]{2}))+ which matches ""test:1234"" but not ""test:%3a1234"" (see http://fiddle.re/pp0m ). The VALID_PID_PART regular expression correctly matches either PID.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1188,"Upgrade to latest Fedora, Lucene, Solr, and Tika.","Upgraded to Lucene 4.2.0, Solr 4.2.0, Tika 1.3 Compatible with Fedora 3.6.2 Still using fcrepo 3.5 libs, because messaging-client is not in 3.6, works ok.   ",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1189,Error retrieving tomcat dependency in fedora-client tests,"Hi,  I can't build fedora-client from src. I have faced the following issue:  Could not transfer artifact org.fcrepo:apache-tomcat:zip:7.0.29 from/to duraspace-thirdparty  I also cannot find apache-tomcat in ""org.fcrepo"" manually.  Full log is in attachment.  Please check it.  Thank you.",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-1191,addRelationships REST API regression in fcrepo 3.6,"In Fedora 3.6.1 and 3.6.2 (haven't tried 3.6.0..), the addRelationships endpoint is broken. When you send a POST request (that worked in Fedora 3.5), you get a 404:  opening connection to localhost:8983... opened <- ""POST /fedora/objects/transactions%3A1/relationships/new?subject=transactions%3A1&predicate=uri%3Aasdf&object=fedora%3Aobject HTTP/1.1\r\nAccept: */*; q=0.5, application/xml\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: Ruby\r\nAuthorization: Basic ZmVkb3JhQWRtaW46ZmVkb3JhQWRtaW4=\r\nHost: localhost:8983\r\nContent-Length: 0\r\nContent-Type: application/x-www-form-urlencoded\r\n\r\n"" <- """" -> ""HTTP/1.1 404 Not Found\r\n"" -> ""Expires: Thu, 01-Jan-1970 00:00:00 GMT\r\n"" -> ""Set-Cookie: JSESSIONID=g2s8y1h6dqzbq6wevhz795wi;Path=/fedora\r\n"" -> ""Allow: POST,GET,DELETE,PUT,OPTIONS,HEAD\r\n"" -> ""Content-Length: 0\r\n"" -> ""Date: Thu, 02 May 2013 18:21:11 GMT\r\n"" -> ""Server: Jetty(6.1-SNAPSHOT)\r\n"" -> ""\r\n""  and a not-particularly-helpful JAX-RS message in the logs:  WARN 2013-05-02 10:47:30.533 [btpool0-1] (JAXRSUtils) No operation matching request path ""/fedora/objects/transactions%3A1/relationships/new"" is found, Relative Path: /transactions%3A1/relationships/new, HTTP Method: POST, ContentType: application/x-www-form-urlencoded, Accept: application/xml,*/*;q=0.5,. Please enable FINE/TRACE log level for more details.  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1192,REST API can not upload files greater than 2^31-1 in size,"I have a version of  fedora 3.5 running that errors with  javax.ws.rs.WebApplicationException: org.fcrepo.server.errors.StreamWriteException: Error writing temp stream       at org.fcrepo.server.rest.BaseRestResource.handleException(BaseRestResource.java:172)       at org.fcrepo.server.rest.DatastreamResource.addOrUpdateDatastream(DatastreamResource.java:583)     when I write a file 2GB in size (1024*1024*2048) via the API:  curl -H ""Content-type:application/octet-stream"" -X POST -u ""name:pass"" --upload-file 3g.data \  http://host:8080/fedora/objects/scholarsphere:5425k9692/datastreams/blah?controlGroup=M  But when I write a 2GB-1MB file (1024*1024*2047) via the API, it works without issue. Multipart uploads also do not work.  Ben Armintor has been working with me on this and first identified https://jira.duraspace.org/browse/FCREPO-704 as a potential starting place. He has since followed up with:    I've got a test verifying a bug in FCRepo 3.6 (and earlier) for content posted in the request body- I'll push a fix today (I think).  There are two places in the REST library in which signed ints are being used got content-length in the kind of upload you have: https://github.com/fcrepo/fcrepo/blob/master/fcrepo-server/src/main/java/org/fcrepo/server/rest/RestUtil.java#L74 (where it's implicit in the j2ee interface, so we just have to ignore it and parse the header) and at https://github.com/fcrepo/fcrepo/blob/master/fcrepo-server/src/main/java/org/fcrepo/server/rest/RestUtil.java#L63 (our fault- that was clearly a place we missed when an earlier bug in this line was fixed 3 years ago).  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1194,Rebuilders fail when a Management Delegate bean is configured,"Hi all,  I am in the process to upgrade from Fedora 3.3.1 to 3.6.2  I just noticed that after enabling journaling the fedora-rebuild.sh script won't work anymore.   Basically in fedora.fcfg I added the relevant section for normal mode as described here https://wiki.duraspace.org/display/FEDORA36/Journaling#Journaling-impl-config  When starting the fedora web applications everything looks fine but, when stopping it and running fedora-rebuild.sh  I get a  Error creating bean with name 'org.fcrepo.server.security.Authorization': Bean definition is abstract.   This suggest to me that enabling journaling, introduces more spring beans behind the scenes but I have not been able to figure out where or how, enabling DEBUG logging for springframework in logback.xml shows that it is loading beans from the standard locations in server/conf/spring but it does not reveal much detail about the other locations where it is loadging beans from.  This is a snippet:  ************************************************************************ DEBUG (DefaultBeanDefinitionDocumentReader) Loading bean definitions DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.security.AuthorizationConfiguration$created#546ce79d] DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.security.AuthorizationConfiguration$created#42dd8bec] DEBUG (DefaultNamespaceHandlerResolver) Loaded NamespaceHandler mappings: {http://www.springframework.org/schema/task=org.springframework.scheduling.config.TaskNamespaceHandler, http://activemq.apache.org/schema/core=org.apache.xbean.spring.context.v2.XBeanNamespaceHandler, http://www.springframework.org/schema/p=org.springframework.beans.factory.xml.SimplePropertyNamespaceHandler, http://www.w3.org/2006/07/ws-policy=org.apache.cxf.ws.policy.spring.PolicyNamespaceHandler, http://www.springframework.org/schema/lang=org.springframework.scripting.config.LangNamespaceHandler, http://www.springframework.org/schema/util=org.springframework.beans.factory.xml.UtilNamespaceHandler, http://cxf.apache.org/jaxws=org.apache.cxf.jaxws.spring.NamespaceHandler, http://cxf.apache.org/policy=org.apache.cxf.ws.policy.spring.NamespaceHandler, http://www.springframework.org/schema/jee=org.springframework.ejb.config.JeeNamespaceHandler, http://cxf.apache.org/transports/http/configuration=org.apache.cxf.transport.http.spring.NamespaceHandler, http://www.springframework.org/schema/tx=org.springframework.transaction.config.TxNamespaceHandler, http://cxf.apache.org/ws/addressing=org.apache.cxf.ws.addressing.spring.NamespaceHandler, http://cxf.apache.org/simple=org.apache.cxf.frontend.spring.NamespaceHandler, http://www.springframework.org/schema/aop=org.springframework.aop.config.AopNamespaceHandler, http://www.springframework.org/schema/context=org.springframework.context.config.ContextNamespaceHandler, http://cxf.apache.org/core=org.apache.cxf.bus.spring.NamespaceHandler, http://cxf.apache.org/jaxrs=org.apache.cxf.jaxrs.spring.NamespaceHandler, http://www.springframework.org/schema/security=org.springframework.security.config.SecurityNamespaceHandler, http://schemas.xmlsoap.org/ws/2004/09/policy=org.apache.cxf.ws.policy.spring.PolicyNamespaceHandler, http://www.w3.org/ns/ws-policy=org.apache.cxf.ws.policy.spring.PolicyNamespaceHandler, http://cxf.apache.org/bindings/soap=org.apache.cxf.binding.soap.spring.NamespaceHandler} DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.config.Parameter#245a690] DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.config.Parameter#2aba391a] DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.config.Parameter#27faefe0] DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.config.Parameter#4b9a6fa1] DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.config.Parameter#816d9ce] DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.config.Parameter#14356788] DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.config.Parameter#3e201c15] DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.config.Parameter#2e13c690] DEBUG (BeanDefinitionParserDelegate) Using generated bean name [util:list#14512f92] for nested custom element 'util:list' DEBUG (BeanDefinitionParserDelegate) Neither XML 'id' nor 'name' specified - using generated bean name [org.fcrepo.server.security.impl.SimplePolicyLoader#4a5844db] INFO (XmlBeanDefinitionReader) Loading XML bean definitions from file [/opt/fedora/fedora-3.6/server/config/spring/doobjectvalidator.xml] DEBUG (DefaultDocumentLoader) Using JAXP provider [org.apache.xerces.jaxp.DocumentBuilderFactoryImpl] DEBUG (PluggableSchemaResolver) Found XML schema [http://www.springframework.org/schema/beans/spring-beans-3.0.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-3.0.xsd DEBUG (DefaultBeanDefinitionDocumentReader) Loading bean definitions DEBUG (BeanDefinitionParserDelegate) No XML 'id' specified - using 'org.fcrepo.server.validation.DOObjectValidator' as bean name and [] as aliases INFO (XmlBeanDefinitionReader) Loading XML bean definitions from file [/opt/fedora/fedora-3.6/server/config/spring/triple-generator.xml] DEBUG (DefaultDocumentLoader) Using JAXP provider [org.apache.xerces.jaxp.DocumentBuilderFactoryImpl] DEBUG (PluggableSchemaResolver) Found XML schema [http://www.springframework.org/schema/beans/spring-beans-3.0.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-3.0.xsd DEBUG (DefaultBeanDefinitionDocumentReader) Loading bean definitions INFO (GenericApplicationContext) Refreshing org.springframework.context.support.GenericApplicationContext@3e0d6c32: startup date [Thu Jul 18 11:20:35 EST 2013]; parent: org.springframework.context.support.GenericApplicationContext@42e50215 DEBUG (GenericApplicationContext) Bean factory for org.springframework.context.support.GenericApplicationContext@3e0d6c32: org.springframework.beans.factory.support.DefaultListableBeanFactory@50e68513: defining beans [org.springframework.context.annotation.CommonAnnotationBeanPostProcessor,org.fcrepo.server.security.ContextRegistry,org.fcrepo.server.security.Authorization,org.fcrepo.server.security.AuthorizationConfiguration,policyFinderModules,org.fcrepo.server.security.ContextAttributeFinderModule,org.fcrepo.server.security.ResourceAttributeFinderModule,attributeFinderModules,resourceFinderModules,PDPConfigurationFactory,LegacyPDPConfig,org.fcrepo.server.security.PolicyEnforcementPoint,org.fcrepo.server.validation.DOObjectValidator,org.trippi.io.TripleIteratorFactory,Object-3.0,ContentModel-3.0,ServiceDefinition-3.0,ServiceDeployment-3.0,org.fcrepo.server.resourceIndex.TripleGenerator,org.fcrepo.server.resourceIndex.ModelBasedTripleGenerator,localMySQLPool,localDerbyPool,localOraclePool,localPostgreSQLPool,localMulgaraTriplestore,localPostgresMPTTriplestore,apimUpdateMessages,apimAccessMessages,org.fcrepo.server.storage.lowlevel.ILowlevelStorage,org.fcrepo.server.storage.lowlevel.ILowlevelStorageConfiguration,org.fcrepo.server.security.BackendSecurity,org.fcrepo.server.security.BackendSecurityConfiguration,org.fcrepo.server.storage.DOManager,org.fcrepo.server.storage.DOManagerConfiguration,org.fcrepo.server.management.Management,org.fcrepo.server.management.ManagementConfiguration,org.fcrepo.server.management.ManagementDelegate,org.fcrepo.server.management.ManagementDelegateConfiguration,org.fcrepo.server.access.Access,org.fcrepo.server.access.AccessConfiguration,org.fcrepo.server.access.DynamicAccess,org.fcrepo.server.access.DynamicAccessConfiguration,org.fcrepo.server.search.FieldSearch,org.fcrepo.server.search.FieldSearchConfiguration,org.fcrepo.server.resourceIndex.ResourceIndex,org.fcrepo.server.resourceIndex.ResourceIndexConfiguration,org.fcrepo.oai.OAIProvider,org.fcrepo.oai.OAIProviderConfiguration,org.fcrepo.server.storage.translation.DOTranslator,org.fcrepo.server.storage.translation.DOTranslatorConfiguration,org.fcrepo.server.management.PIDGenerator,org.fcrepo.server.management.PIDGeneratorConfiguration,org.fcrepo.server.messaging.Messaging,org.fcrepo.server.messaging.MessagingConfiguration,org.fcrepo.server.storage.ConnectionPoolManager,org.fcrepo.server.storage.ConnectionPoolManagerConfiguration,org.fcrepo.server.validation.DOValidator,org.fcrepo.server.validation.DOValidatorConfiguration,org.fcrepo.server.storage.ExternalContentManager,org.fcrepo.server.storage.ExternalContentManagerConfiguration,org.trippi.TriplestoreConnector,org.fcrepo.server.resourceIndex.ResourceIndexRebuilder,org.fcrepo.server.utilities.rebuild.SQLRebuilder]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@7795c14c DEBUG (DefaultListableBeanFactory) Creating shared instance of singleton bean 'org.springframework.context.annotation.CommonAnnotationBeanPostProcessor'  ****************************************************  And here below is the  output when running fedora-rebuild.sh with the default logback.xml config.  Has anyone come across this? Any suggestion to fix it?  Thanks, Javier   ************************************************************ javier@genesis-cl:/opt/fedora/fedora-3.6/server/bin$ ./fedora-rebuild.sh                          Fedora Rebuild Utility                      ..........................  WARNING: Live rebuilds are not currently supported.          Make sure your server is stopped before continuing.  Server directory is /opt/fedora/fedora-3.6/server  ---------------------------------------------------------------------  ERROR (Server) Fatal error while starting server org.springframework.beans.factory.BeanIsAbstractException: Error creating bean with name 'org.fcrepo.server.security.Authorization': Bean definition is abstract         at org.springframework.beans.factory.support.AbstractBeanFactory.checkMergedBeanDefinition(AbstractBeanFactory.java:1208) ~[spring-beans-3.0.7.RELEASE.jar:3.0.7.RELEASE]         at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277) ~[spring-beans-3.0.7.RELEASE.jar:3.0.7.RELEASE]         at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196) ~[spring-beans-3.0.7.RELEASE.jar:3.0.7.RELEASE]         at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079) ~[spring-context-3.0.7.RELEASE.jar:3.0.7.RELEASE]         at org.fcrepo.server.Server.getBean(Server.java:1684) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.management.ManagementModule.postInitModule(ManagementModule.java:180) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.Server.init(Server.java:655) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.utilities.rebuild.RebuildServer.getRebuildInstance(RebuildServer.java:164) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.utilities.rebuild.Rebuild.getServer(Rebuild.java:206) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.utilities.rebuild.Rebuild.getRebuilder(Rebuild.java:268) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.utilities.rebuild.Rebuild.main(Rebuild.java:450) ~[fcrepo-server-3.6.2.jar:na] Error: Fatal error while starting server  java.lang.RuntimeException: Fatal error while starting server         at org.fcrepo.server.Server.init(Server.java:695)         at org.fcrepo.server.utilities.rebuild.RebuildServer.getRebuildInstance(RebuildServer.java:164)         at org.fcrepo.server.utilities.rebuild.Rebuild.getServer(Rebuild.java:206)         at org.fcrepo.server.utilities.rebuild.Rebuild.getRebuilder(Rebuild.java:268)         at org.fcrepo.server.utilities.rebuild.Rebuild.main(Rebuild.java:450) Caused by: org.springframework.beans.factory.BeanIsAbstractException: Error creating bean with name 'org.fcrepo.server.security.Authorization': Bean definition is abstract         at org.springframework.beans.factory.support.AbstractBeanFactory.checkMergedBeanDefinition(AbstractBeanFactory.java:1208)         at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)         at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)         at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079)         at org.fcrepo.server.Server.getBean(Server.java:1684)         at org.fcrepo.server.management.ManagementModule.postInitModule(ManagementModule.java:180)         at org.fcrepo.server.Server.init(Server.java:655)         ... 4 more ERROR (Server) Fatal error while starting server org.springframework.beans.factory.BeanIsAbstractException: Error creating bean with name 'org.fcrepo.server.security.Authorization': Bean definition is abstract         at org.springframework.beans.factory.support.AbstractBeanFactory.checkMergedBeanDefinition(AbstractBeanFactory.java:1208) ~[spring-beans-3.0.7.RELEASE.jar:3.0.7.RELEASE]         at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277) ~[spring-beans-3.0.7.RELEASE.jar:3.0.7.RELEASE]         at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196) ~[spring-beans-3.0.7.RELEASE.jar:3.0.7.RELEASE]         at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079) ~[spring-context-3.0.7.RELEASE.jar:3.0.7.RELEASE]         at org.fcrepo.server.Server.getBean(Server.java:1684) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.management.ManagementModule.postInitModule(ManagementModule.java:180) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.Server.init(Server.java:655) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.utilities.rebuild.RebuildServer.getRebuildInstance(RebuildServer.java:164) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.utilities.rebuild.Rebuild.getServer(Rebuild.java:206) ~[fcrepo-server-3.6.2.jar:na]         at org.fcrepo.server.utilities.rebuild.Rebuild.main(Rebuild.java:463) ~[fcrepo-server-3.6.2.jar:na] Server shutdown error: java.lang.RuntimeException: Fatal error while starting server   ********************************************************************************",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1196,fedora-export utility throws NullPointerException,running the following command in order to export all objects from my local fedora repo   ./fedora-export.sh localhost:8980 fedoraAdmin fedoraAdmin DMO default default /tmp http  I get a NullPointerException (see attached log file),legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1197,fedora-ingest utility throws ObjectNotInLowlevelStorageException,"Running the following command to ingest a file to a Fedora repo:  ./fedora-ingest.sh f ~/authors_migration/h_c_andersen/sifd_1058.xml info:fedora/fedora-system:FOXML-1.1 server_url:port_number fedoraAdmin password http  returns the following message:  Error  :  Caused by: [DefaultExternalContentManager] returned an error.  The underlying error was a org.fcrepo.server.errors.GeneralException  The message was  ""Error getting http://localhost:8080/fedora/get/sifd:1058/provenanceMetadata/2013-07-17T08:29:40.294Z""  .   (Last attempted file was /home/jatr/authors_migration/h_c_andersen/sifd_1058.xml)  I have attached an excerpt from the fedora.log from the server and the FOXML I was trying to ingest ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1198,fcr:fixity bug using the fcepo-fs-ms-federation-connecter,"from:  http://localhost:8080/rest/objects/WallSsamAniC.tif/fcr:fixity  fedora-internal:hasFixityResult 468db09b:140c5679d13:-7ff4  468db09b:140c5679d13:-7ff4  fedora-internal:computedChecksum urn:sha1:da39a3ee5e6b4b0d3255bfef95601890afd80709  fedora-internal:status ""BAD_CHECKSUM""^^http://www.w3.org/2001/XMLSchema#string fedora-internal:status ""BAD_SIZE""^^http://www.w3.org/2001/XMLSchema#string  That same checksum (beginning da39a) appears for each of projected content",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1199,RmiTransport not closing the journal,"I reported the following back in January:  Hi,  We are having trouble getting the RMI Journal Receiver to close journal files and I wonder if anyone can provide assistance. We have two Fedora 3.3 instances setup with the Primary named Moscow and the Secondary named Kiev. The journaling setup for Moscow is as follows:   <module role=""fedora.server.management.Management"" class=""fedora.server.journal.Journaler"">    <param name=""journalFileSizeLimit"" value=""100M""/>     <param name=""journalFileAgeLimit"" value=""1M""/>    <param name=""journalWriterClassname"" value=""fedora.server.journal.readerwriter.multicast.MulticastJournalWriter""/>    <param name=""transport.local.classname"" value=""fedora.server.journal.readerwriter.multicast.LocalDirectoryTransport""/>    <param name=""transport.local.directoryPath"" value=""/usr/local/journals/archiveFiles""/>    <param name=""transport.local.crucial"" value=""true""/>    <param name=""transport.follow1.classname"" value=""fedora.server.journal.readerwriter.multicast.rmi.RmiTransport""/>    <param name=""transport.follow1.crucial"" value=""true""/>    <param name=""transport.follow1.hostName"" value=""kiev""/>    <param name=""transport.follow1.service"" value=""RmiJournalReceiver""/>  </module>  I've set the follower to crucial for testing so I know when its failed. When I make a change on the Moscow Fedora it creates a journal file in /usr/local/journals/archiveFiles on moscow and also sends a copy to kiev:  [root@kiev journals]# ls /usr/local/ndr-content/journals/journalFiles/ _fedoraJournal20130104.112651.626Z  but the above journal is never closed, so when I make a second change on Moscow I get the following error from the RMI Journal Receiver:  java -jar RmiJournalReceiver.jar /usr/local/ndr-content/journals/journalFiles ERROR - Attempting to open file 'fedoraJournal20130104.112928.178Z' when file 'fedoraJournal20130104.112651.626Z' has not been closed.  Note the RMIJournal Receiver is running on kiev. I've tried manually copying the journal files from Moscow /usr/local/journals/archiveFiles to kiev /usr/local/ndr-content/journals/journalFiles/ and these get applied correctly so I think the problem is with the RMIJournalReciever. The journals are correctly closed on Moscow:  [root@moscow objects]# ls /usr/local/journals/archiveFiles fedoraJournal20121109.150753.709Z  fedoraJournal20130104.092118.451Z  fedoraJournal20130104.104736.028Z  fedoraJournal20130104.111949.758Z  fedoraJournal20130104.112928.178Z fedoraJournal20130104.085612.224Z  fedoraJournal20130104.092225.537Z  fedoraJournal20130104.105831.895Z  fedoraJournal20130104.112411.838Z fedoraJournal20130104.085936.569Z  fedoraJournal20130104.092911.764Z  fedoraJournal20130104.110746.708Z  fedoraJournal20130104.112651.626Z  Thanks for your help  Glen Robson Head of Systems National Library of Wales",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1200,Running the mysql create database command the database was created as latin1 not utf-8,"Following the instructions at:  http://fedora-commons.org/documentation/3.3/Installation%20and%20Configuration%20Guide.html  it tells you to run:  Create the database. For example, to create a database named ""fedora3"", enter:  CREATE DATABASE fedora3;  which by default created a latin1 encoded database:  mysql> status -------------- mysql  Ver 14.14 Distrib 5.1.67, for redhat-linux-gnu (x86_64) using readline 5.1  Connection id:  11140 Current database: fedora33 Current user:  root@localhost SSL:   Not in use Current pager:  stdout Using outfile:  '' Using delimiter: ; Server version:  5.1.67 Source distribution Protocol version: 10 Connection:  Localhost via UNIX socket Server characterset: latin1 Db     characterset: latin1 Client characterset: latin1 Conn.  characterset: latin1 UNIX socket:  /var/lib/mysql/mysql.sock Uptime:   90 days 18 hours 33 min 5 sec  Threads: 3  Questions: 240484138  Slow queries: 4  Opens: 48  Flush tables: 1  Open tables: 41  Queries per second avg: 30.663 --------------  we only discovered this when trying to ingest a Dublin Core datastream which had the ? character in them and we got the following error:  Caused by: java.sql.SQLException: Incorrect string value: '\xC5\xB7... ...' for column 'dcDescription' at row 1   com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)   com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)   com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)   com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)   com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)   com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)   com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)   com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)   com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2019)   com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1937)   com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1922)   org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:101)   fedora.server.utilities.SQLUtilityImpl.i_updateRow(SQLUtilityImpl.java:205)   fedora.server.utilities.SQLUtilityImpl.i_replaceInto(SQLUtilityImpl.java:143)   fedora.server.utilities.SQLUtility.replaceInto(SQLUtility.java:91)   fedora.server.search.FieldSearchSQLImpl.update(FieldSearchSQLImpl.java:240)  Would it be possible to change the Documentation to get people to check what the default character set is for their database or create the database as utf-8 by deafult?  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1201,Typos in logback.xml prevent fedora logging coming up automatically after installation,https://github.com/fcrepo/fcrepo/blob/master/fcrepo-server/src/main/resources/fcfg/server/logback.xml  Title case is used for FileNamePattern and MaxFileSize instead of camel case preventing fedora logging from starting automatically,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1202,pidRegistry corruption,"Legacy storage: INGEST: foo:1 201310091500000 1) DOManager checks the pidRegistry Db for foo:1 2) if no, creates {OBJECTS}/2013/10/09/1500/000/foo_1 Akubra storage: INGEST: foo:1 201310091500000 1) ditto 2) if no, MD5  info:fedora/foo:1  3) build directory structure from hash advantage: you don t have to look up path in Db Scenario: As of 20131010, Db is corrupt, or not up to date, or incomplete, or maybe the last val for PIDs in namespace just reset Legacy: INGEST: foo:1 201310101500000 1) DOManager checks the pidRegistry Db for foo:1 2) if no, creates {OBJECTS}/2013/10/10/1500/000/foo_1 Where are you now? Original foo:1 is orphaned, but exists, as do datastreams Akubra: Everything that has the same id gets overwritten irreperably Circumstances that this happens in: 1) pidRegistry is jacked AND 2) you use sequential pids (as opposed to random, or UUIDs) AND 3) you use Akubra (Legacy you just have orphan objects) What can we do? 1) Legacy, we can build a report of duplicates, and possibly provide a FCSU command to move them to a unique PID 2) Akubra, we can really just tell you that an objectCreation date is out of sequence with it s PID (this is crappy) Is this behavior on ingest in the context of a bad Db fixable? 1) Legacy: not really. To do this without the Db, you would have trawl the corpus of FOXML, which would not only be slow, but the would be maximally slow on the non error requests (ie, a new PID). Non starter. 2) Akubra: Yes, because the DOManager could be required to ping an Akubra objectstore as part of the objectExists() call. Raise an exception. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1204,Fedora 3.7.1 fails to start with legacy-fs storage option chosen,"I just started a 3.7.1 upgrade at Tufts as well.  While running the installer we ran into a different initial problem, and having resolved that have caught up the problem reported here, so first off, thanks for the info here in this thread.  The problem we initially hit is that in our install we specify the low level storage option as legacy-fs, which upon start up results in the following error:  ERROR 13:46:21.014 (Server) Module (org.fcrepo.server.storage.lowlevel.ILowlevelStorage) failed to initialize org.fcrepo.server.errors.ModuleInitializationException: couldn't set up path_algorithm for objectPaths  Class org.fcrepo.server.storage.lowlevel.defaultstore.Store can not access a member of class org.fcrepo.server.storage.lowlevel.TimestampPathAlgorithm with modifiers ""public""         at org.fcrepo.server.storage.lowlevel.DefaultLowlevelStorageModule.postInitMod ule(DefaultLowlevelStorageModule.java:44) ~[fcrepo-server-3.7.1.jar:na]  Looking at the fcrepo-server source it seemed to be related to this commit:  https://github.com/fcrepo/fcrepo/commit/5ad360edf39bfeca57038974639b41073af1fd1b#diff-644ddc1704c65930c61becbd9826bee1  Where the Store class moved from being a support within DefaultLowlevelStorage in the org.fcrepo.server.storage.lowlevel package to the org.fcrepo.server.storage.lowlevel.default package as a top level class.  I confirmed that by making the TimestampPathAlgorithm class public this issue goes away at startup since Store would then have access.  Not sure if this is the correct fix or if Store should've stayed in the previous package. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1205,DDL for new rebuild table must not specify indexes on unique keys,"MySQL does not support defining an index with the same name as a unique key, and throws an exception when such is indicated in the DDL.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1208,Fedora Startup fails using a Oracle database,"As reported by Arnaud Koster from ARHS: ----------------------------------------------------- BTW: It seems that Fedora 3.7.1 is not compatible with Oracle database. In fact, we faced a problem during the startup: Fedora tries to execute this script: CREATE TABLE fcrepoRebuildStatus (     rebuildDate NUMBER(20,0) NOT NULL,     complete boolean NOT NULL,     UNIQUE  (rebuildDate) );",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1209,OutOfMemoryError uploading big files to fedora using mediashelf fedora-client v0.7,"Where are problems uploading big files to fedora using  fedora-client v0.7  Test to reproduce bug:      @Test     public void addLargeStreamToFedora() throws IOException, FedoraClientException {          FedoraCredentials fedoraCredentials =             new FedoraCredentials(""http://localhost:8085/fedora"", ""fedoraAdmin"",             ""<password>"");         FedoraClient fedoraClient = new FedoraClient(fedoraCredentials);          AddDatastream addStream =             new AddDatastream(""test:atest1"", ""MAIN"");         addStream.mimeType(""application/pdf"");         addStream.controlGroup(""M"");         addStream.dsLabel(""ds_label_1"");          Path filePath = Paths.get(""<path to large file>"");          InputStream is = Files.newInputStream(filePath);         addStream.content(is);         new Ingest(""test:atest1"").ownerId(""test"").execute(fedoraClient);         addStream.execute(fedoraClient); //java.lang.OutOfMemoryError: Java heap space     }  stack trace: addLargeStream(...FedoraRepositoryIT)  Time elapsed: 1.802 sec  <<< ERROR! java.lang.OutOfMemoryError: Java heap space     at java.util.Arrays.copyOf(Arrays.java:2271)     at java.io.ByteArrayOutputStream.grow(ByteArrayOutputStream.java:113)     at java.io.ByteArrayOutputStream.ensureCapacity(ByteArrayOutputStream.java:93)     at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:140)     at sun.net.www.http.PosterOutputStream.write(PosterOutputStream.java:78)     at com.sun.jersey.api.client.CommittingOutputStream.write(CommittingOutputStream.java:90)     at com.sun.jersey.core.util.ReaderWriter.writeTo(ReaderWriter.java:115)     at com.sun.jersey.core.provider.AbstractMessageReaderWriterProvider.writeTo(AbstractMessageReaderWriterProvider.java:76)     at com.sun.jersey.core.impl.provider.entity.InputStreamProvider.writeTo(InputStreamProvider.java:98)     at com.sun.jersey.core.impl.provider.entity.InputStreamProvider.writeTo(InputStreamProvider.java:59)     at com.sun.jersey.api.client.RequestWriter.writeRequestEntity(RequestWriter.java:300)     at com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:213)     at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:149)     at com.sun.jersey.api.client.filter.HTTPBasicAuthFilter.handle(HTTPBasicAuthFilter.java:104)     at com.sun.jersey.api.client.Client.handle(Client.java:648)     at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)     at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)     at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:568)     at com.yourmediashelf.fedora.client.request.AddDatastream.execute(AddDatastream.java:232)     at....addLargeStream(FedoraRepositoryIT.java:115)   I think, this problem is related to http://stackoverflow.com/questions/11176824/preventing-the-jersey-client-from-causing-an-outofmemory-error-when-posting-larg  And work around would be use ApacheHttpClient instead of HttpURLConection in com.yourmediashelf.fedora.client.FedoraClent constructor. Something like:      /**      * Constructor for FedoraClient.      *      * @param fc credentials for a Fedora repository      */     public FedoraClient(FedoraCredentials fc) {         this.fc = fc;          // TODO validate fc         // null check for username & password         // null check for baseUrl           ClientConfig config = new DefaultClientConfig(); //added         config.getProperties().put(DefaultApacheHttpClientConfig.PROPERTY_CHUNKED_ENCODING_SIZE, 0); //added          // FIXME this isn't very security-minded         if (fc.getBaseUrl().toString().startsWith(""https"")) {             SSLContext ctx = null;             try {                 ctx = SSLContext.getInstance(""SSL"");                 ctx.init(null, null, null);             } catch (NoSuchAlgorithmException e) {                 logger.error(e.getMessage(), e);             } catch (KeyManagementException e) {                 logger.error(e.getMessage(), e);             }              // FIXME Consider using not-yet-commons-ssl hostnameverifier             // config by property: strict, none, etc.             config.getProperties().put(                 HTTPSProperties.PROPERTY_HTTPS_PROPERTIES,                 new HTTPSProperties(null, ctx));             client = ApacheHttpClient.create(config);         } else {             client = ApacheHttpClient.create(config); //changed         }         client.setFollowRedirects(true);         client.addFilter(new HTTPBasicAuthFilter(fc.getUsername(), fc             .getPassword()));     } ",legacy - java-client,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
FCREPO-1213,ConnectionPool may spuriously set database connections to read-only,"When releasing a connection from the SQL connection pool, and SQL exception may cause the connection to never be read/write again.  The offending code is in org.fcrepo.server.storage.ConnectionPool where this method is: {code}     private void setConnectionReadOnly(Connection connection, boolean readOnly) {         if (supportsReadOnly) {             try {                 connection.setReadOnly(readOnly);             } catch (Throwable th) {                 logger.info(""Read-only connections not supported ("" + th.getMessage() + "")"");                 supportsReadOnly = false;             }         }     } {code}  Note that on any exception it is never tried again to change the mode of the connection. And since the default is that connections are read only in the pool, the connection will never again be read/write. The log message is erronous too, it seems to claim that the problem is in setting a connection read only, but it might as well be in setting it read write.  This may happen in a real world scenario, where the exception you try to set to readWrite or readOnly is closed. You will get an exception with ""connection is closed"". You will have this scenario if you call free twice: {code}     public void free(Connection connection) {         try {             // ensure connections returned to pool as read-only             setConnectionReadOnly(connection, true);             if (!connection.isClosed()) connection.close();         } catch (SQLException sqle) {             logger.warn(""Unable to close connection"", sqle);         } finally {             if (logger.isDebugEnabled()) {                 logger.debug(""Returned connection to pool ("" + toString() + "")"");             }         }     } {code} because free tries to set the connection to readOnly.  We think this happens if an SQL query is expired, while still delivering data. The connection will then be freed twice: First when expired, second when the result is finally ready.  We have had this situation happen to us twice in 24 hours, and it makes Fedora unwritable but responsive to reads.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1214,RISearchServlet chrashes if stylesheets unaccessable,"Installation of Fedora to standard Debain Tomcat via deployment descriptor files (fedora.xml context description in /var/lib/tomcat7/conf/Catalina/localhost) doesn't set up the webapp directory in the way RISearchServlet (and probably other components) is expecting it. In particular the directory /ri (containing stylesheets) is missing.  However, the set up of RISearchServlet doesn't check for existence/accessibility of these files on initialization.  Part of the problem seems to be, that Trippi needs absolute File path to the stylesheet files, instead of resource URL (obtained by calling getResource).  Maybe connected to this issue: https://jira.duraspace.org/browse/FCREPO-534",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1215,Spring application context not properly configured after installation,"After installation, configuration parameters regarding Fedora host name and OAI contact information is not reflected in Fedora configuration after start.  Although the settings in server/conf/fedora.fcfg are in place, Fedora (namely DescribeRepositoryServlet) shows default properties from deployed WEB-INF/classes/applicationContext.xml.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1217,Missing Aduna maven repository breaks build,"When the Aduna Maven repository was taken offline in mid-April 2014, fcrepo maven build broke, as required dependencies were no longer available.  Fix:  remove the Aduna repository from the the pom, remove/replace sesame artifacts with transitive dependencies to artifacts in the Aduna repo.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1218,Replace Melcoe Sunxacml artifact with JBOSS Sun XACML artifact,Replace the private sunxacml libraries stored in the Duraspace maven repo with the open jboss-sunxacml libraries.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1219,Maven fails to resolve dependency due to SSL Exception,"Using a fresh Maven setup (empty local repository), Maven can not resolve dependencies for project org.fcrepo:fcrepo-common. Looks like there is an SSL issue with https://m2.duraspace.org/content/repositories/releases.  The repository is accessible via web browser but Maven always stops the resolving process with ""peer not authenticated"" error.  I tried to trick Maven into accepting all SSL with http://stackoverflow.com/questions/21252800/maven-trusting-all-certs-unlimited-java-policy, but this just leads to ""unable to find valid certification path to requested target"" error.  Here is the Maven output:  [INFO] ------------------------------------------------------------------------ [INFO] Reactor Summary: [INFO]  [INFO] Fedora Repository Project ......................... SUCCESS [0.610s] [INFO] Fedora Common Library ............................. FAILURE [1.317s] [INFO] Fedora Server Library ............................. SKIPPED [INFO] All Fedora Clients ................................ SKIPPED [INFO] Fedora Admin Client (Swing) ....................... SKIPPED [INFO] Fedora Messaging Client Library ................... SKIPPED [INFO] Fedora Security Modules ........................... SKIPPED [INFO] Fedora Security PDP ............................... SKIPPED [INFO] Fedora JAAS Authentication ........................ SKIPPED [INFO] Fedora Security PEP ............................... SKIPPED [INFO] Fedora HTTP-sourced Authentication ................ SKIPPED [INFO] All Fedora Webapps ................................ SKIPPED [INFO] Fedora Webapp ..................................... SKIPPED [INFO] Fedora Webapp - Demo Content ...................... SKIPPED [INFO] Fedora Webapp - Formatting Objects Processor ...... SKIPPED [INFO] Fedora Webapp - Saxon XSLT Processor .............. SKIPPED [INFO] Fedora Webapp - Image Manipulation ................ SKIPPED [INFO] Fedora Installer .................................. SKIPPED [INFO] Fedora Integration Test ........................... SKIPPED [INFO] Fedora Integration Test - Basic Tests and Resources  SKIPPED [INFO] Fedora Integration Test - Configuration A ......... SKIPPED [INFO] Fedora Integration Test - Configuration B ......... SKIPPED [INFO] Fedora Integration Test - Configuration C ......... SKIPPED [INFO] Fedora Integration Test - Configuration Q ......... SKIPPED [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 2.922s [INFO] Finished at: Fri Aug 08 09:18:20 CEST 2014 [INFO] Final Memory: 21M/430M [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal on project fcrepo-common: Could not resolve dependencies for project org.fcrepo:fcrepo-common:jar:3.7.2-SNAPSHOT: Failed to collect dependencies for [commons-codec:commons-codec:jar:1.7 (compile), org.apache.httpcomponents:httpclient:jar:4.2.5 (compile), org.apache.httpcomponents:httpmime:jar:4.2.5 (compile), javax.xml:jaxrpc-api:jar:1.1 (compile), org.fcrepo:mulgara-core:jar:2.1.13 (compile), org.jboss.security:jboss-sunxacml:jar:2.0.9.Final (compile), wsdl4j:wsdl4j:jar:1.6.2 (compile), org.slf4j:slf4j-api:jar:1.7.2 (compile), org.slf4j:log4j-over-slf4j:jar:1.7.2 (runtime), org.slf4j:jcl-over-slf4j:jar:1.7.2 (runtime), dom4j:dom4j:jar:1.6.1 (compile), org.fcrepo:saxon:jar:9.0 (compile), javax.servlet:servlet-api:jar:2.4 (provided), joda-time:joda-time:jar:1.5.2 (compile), commons-pool:commons-pool:jar:1.6 (compile), commons-io:commons-io:jar:2.4 (compile), junit:junit:jar:4.10 (test)]: Failed to read artifact descriptor for org.fcrepo:mulgara-core:jar:2.1.13: Could not transfer artifact org.fcrepo:mulgara-core:pom:2.1.13 from/to duraspace-releases (https://m2.duraspace.org/content/repositories/releases): peer not authenticated -> [Help 1] org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal on project fcrepo-common: Could not resolve dependencies for project org.fcrepo:fcrepo-common:jar:3.7.2-SNAPSHOT: Failed to collect dependencies for [commons-codec:commons-codec:jar:1.7 (compile), org.apache.httpcomponents:httpclient:jar:4.2.5 (compile), org.apache.httpcomponents:httpmime:jar:4.2.5 (compile), javax.xml:jaxrpc-api:jar:1.1 (compile), org.fcrepo:mulgara-core:jar:2.1.13 (compile), org.jboss.security:jboss-sunxacml:jar:2.0.9.Final (compile), wsdl4j:wsdl4j:jar:1.6.2 (compile), org.slf4j:slf4j-api:jar:1.7.2 (compile), org.slf4j:log4j-over-slf4j:jar:1.7.2 (runtime), org.slf4j:jcl-over-slf4j:jar:1.7.2 (runtime), dom4j:dom4j:jar:1.6.1 (compile), org.fcrepo:saxon:jar:9.0 (compile), javax.servlet:servlet-api:jar:2.4 (provided), joda-time:joda-time:jar:1.5.2 (compile), commons-pool:commons-pool:jar:1.6 (compile), commons-io:commons-io:jar:2.4 (compile), junit:junit:jar:4.10 (test)]   org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:210)   org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resolveProjectDependencies(LifecycleDependencyResolver.java:117)   org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAreResolved(MojoExecutor.java:258)   org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:201)   org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)   org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)   org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)   org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)   org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)   org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)   org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)   org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)   org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)   org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)   org.apache.maven.cli.MavenCli.main(MavenCli.java:141)   sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)   java.lang.reflect.Method.invoke(Method.java:606)   org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)   org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)   org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)   org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356) Caused by: org.apache.maven.project.DependencyResolutionException: Could not resolve dependencies for project org.fcrepo:fcrepo-common:jar:3.7.2-SNAPSHOT: Failed to collect dependencies for [commons-codec:commons-codec:jar:1.7 (compile), org.apache.httpcomponents:httpclient:jar:4.2.5 (compile), org.apache.httpcomponents:httpmime:jar:4.2.5 (compile), javax.xml:jaxrpc-api:jar:1.1 (compile), org.fcrepo:mulgara-core:jar:2.1.13 (compile), org.jboss.security:jboss-sunxacml:jar:2.0.9.Final (compile), wsdl4j:wsdl4j:jar:1.6.2 (compile), org.slf4j:slf4j-api:jar:1.7.2 (compile), org.slf4j:log4j-over-slf4j:jar:1.7.2 (runtime), org.slf4j:jcl-over-slf4j:jar:1.7.2 (runtime), dom4j:dom4j:jar:1.6.1 (compile), org.fcrepo:saxon:jar:9.0 (compile), javax.servlet:servlet-api:jar:2.4 (provided), joda-time:joda-time:jar:1.5.2 (compile), commons-pool:commons-pool:jar:1.6 (compile), commons-io:commons-io:jar:2.4 (compile), junit:junit:jar:4.10 (test)]   org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:158)   org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:185)  ... 22 more Caused by: org.sonatype.aether.collection.DependencyCollectionException: Failed to collect dependencies for [commons-codec:commons-codec:jar:1.7 (compile), org.apache.httpcomponents:httpclient:jar:4.2.5 (compile), org.apache.httpcomponents:httpmime:jar:4.2.5 (compile), javax.xml:jaxrpc-api:jar:1.1 (compile), org.fcrepo:mulgara-core:jar:2.1.13 (compile), org.jboss.security:jboss-sunxacml:jar:2.0.9.Final (compile), wsdl4j:wsdl4j:jar:1.6.2 (compile), org.slf4j:slf4j-api:jar:1.7.2 (compile), org.slf4j:log4j-over-slf4j:jar:1.7.2 (runtime), org.slf4j:jcl-over-slf4j:jar:1.7.2 (runtime), dom4j:dom4j:jar:1.6.1 (compile), org.fcrepo:saxon:jar:9.0 (compile), javax.servlet:servlet-api:jar:2.4 (provided), joda-time:joda-time:jar:1.5.2 (compile), commons-pool:commons-pool:jar:1.6 (compile), commons-io:commons-io:jar:2.4 (compile), junit:junit:jar:4.10 (test)]   org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:258)   org.sonatype.aether.impl.internal.DefaultRepositorySystem.collectDependencies(DefaultRepositorySystem.java:308)   org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:150)  ... 23 more Caused by: org.sonatype.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.fcrepo:mulgara-core:jar:2.1.13   org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:296)   org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor(DefaultArtifactDescriptorReader.java:186)   org.sonatype.aether.impl.internal.DefaultDependencyCollector.process(DefaultDependencyCollector.java:412)   org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:240)  ... 25 more Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not transfer artifact org.fcrepo:mulgara-core:pom:2.1.13 from/to duraspace-releases (https://m2.duraspace.org/content/repositories/releases): peer not authenticated   org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)   org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)   org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193)   org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:281)  ... 28 more Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not transfer artifact org.fcrepo:mulgara-core:pom:2.1.13 from/to duraspace-releases (https://m2.duraspace.org/content/repositories/releases): peer not authenticated   org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:951)   org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:939)   org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:669)   org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)   java.lang.Thread.run(Thread.java:744) Caused by: org.apache.maven.wagon.TransferFailedException: peer not authenticated   org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:892)   org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116)   org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)   org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)   org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:601)  ... 4 more Caused by: javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated   sun.security.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:397)   org.apache.maven.wagon.providers.http.httpclient.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:126)   org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:437)   org.apache.maven.wagon.providers.http.ConfigurableSSLSocketFactoryDecorator.connectSocket(ConfigurableSSLSocketFactoryDecorator.java:64)   org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)   org.apache.maven.wagon.providers.http.httpclient.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)   org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:643)   org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)   org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)   org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)   org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.execute(AbstractHttpClientWagon.java:746)   org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:886)  ... 8 more ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1220,Included Postgres driver prevents installation ,"Just tried to upgrade a 3.7.2 installation with this snapshot on a Debian Wheezy/Java7/Tomcat6/Postgres9.1 combo, but I hit an error when trying to setup database access:  Database -------- Enter a value ==> postgresql  Postgresql JDBC driver ---------------------- Enter a value [default is included] ==>  Database username ----------------- Enter a value ==> myuser  Database password ----------------- Enter a value ==> secret  JDBC URL -------- Enter a value [default is jdbc:postgresql://localhost/fedora3] ==>  JDBC DriverClass ---------------- Enter a value [default is org.postgresql.Driver] ==>   Validating database connection...FAILED  java.sql.SQLFeatureNotSupportedException: Method org.postgresql.jdbc4.Jdbc4Connection.isValid(int) is not yet implemented.         at org.postgresql.Driver.notImplemented(Driver.java:751)         at org.postgresql.jdbc4.AbstractJdbc4Connection.isValid(AbstractJdbc4Connection.java:118)         at org.postgresql.jdbc4.Jdbc4Connection.isValid(Jdbc4Connection.java:19)         at org.fcrepo.utilities.install.Database.test(Database.java:126)         at org.fcrepo.utilities.install.InstallOptions.validateDatabaseConnection(InstallOptions.java:496)         at org.fcrepo.utilities.install.InstallOptions.<init>(InstallOptions.java:255)         at org.fcrepo.utilities.install.Installer.main(Installer.java:158)         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)         at java.lang.reflect.Method.invoke(Method.java:606)         at com.simontuffs.onejar.Boot.run(Boot.java:306)         at com.simontuffs.onejar.Boot.main(Boot.java:159) java.sql.SQLFeatureNotSupportedException: Method org.postgresql.jdbc4.Jdbc4Connection.isValid(int) is not yet implemented.  ERROR validating database connection; see above. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1222,fedora-export tool throws NullPointerException,Running the following command to export all objects from repo:  ./jetty/fedora/client/bin/fedora-export.sh localhost:8980 fedoraAdmin fedoraAdmin DMO default default ~/work/fedora_dump http fedo  returns the following message:  Error  : java.lang.NullPointerExceptionjava.lang.NullPointerException   org.fcrepo.client.utility.export.Export.one(Export.java:78)   org.fcrepo.client.utility.export.Export.main(Export.java:283) ,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1223,Default configuration for Postgres backend inappropriate for Postgres 9 defaults,"See http://www.postgresql.org/docs/current/static/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS  PostgreSQL 9.1 now ""treat[s] backslashes literally, as specified in the SQL standard."" This makes the default value of: <param name=""backslashIsEscape"" value=""true""/>  for the ILowLevelStore module in fcfg inappropriate.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1226,GSearch 2.6 blindly passes invalid XML to SOLR update service,"Evidence proves GSearch makes no attempt to ensure XML validity before passing the XML to SOLR's update service.  Invalid XML errors are completely lost and obscured in the current implementation; GSearch's log reports an ambiguous ""connection error"" instead of revealing the true source of the error (invalid XML).  One must manually feed XML to SOLR's update service to reveal the source of the error like so: curl -k --request POST -H ""Content-Type: text/xml"" --data-binary ""@invalid.xml"" https://localhost:8443/solr/update  <?xml version=""1.0"" encoding=""UTF-8""?> <response> <lst name=""responseHeader""><int name=""status"">400</int><int name=""QTime"">4</int></lst><lst name=""error""><str name=""msg"">Illegal character ((CTRL-CHAR, code 27))  at [row,col {unknown-source}]: [135,47]</str><int name=""code"">400</int></lst> </response>  In the case of the attached invalid.xml, there is an invisible control character rendering the XML invalid.  Attached is also a screenshot showing xmlstarlet's validator result.  Is is my professional opinion that invalid XML should never be passed blindingly to SOLR's update service.   Recommend running GSearch/Apache Tika generated XML through a validator subroutine prior to being passed to SOLR's update service.  Additionally, proper invalid XML error handling, including logging and related error messaging should be wholly reflected in GSearch's log files.  Today's error messaging is misnomer reflecting a communications error.  In reality, it is not a communications error at all, unless one stretches the definition of communications out like taffy to apply to invalid XML.",legacy - GSearch,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0
FCREPO-1227,Documentation states wrong configuration path for custom activemq.xml file,Documentation [1] states wrong configuration path for activemq.xml file.  Instead of $FEDORA_HOME/server/config an customized broker configuration file should go to $FEDORA_HOME/server/config/spring to be picked up at Spring context start up.  [1] https://wiki.duraspace.org/display/FEDORA37/Messaging,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1228,ActiveMQ Broker won't start when configured via Sprint Bean,Sample Spring Bean Broker set-up is invalid.  Putting an activemq.xml to $FEDORA_HOME/server/config/spring somehow interferes with the default broker instantiation. The broker won't start if configured the Spring way. Using default broker instantiation via Messaging Module (configured via fedora.fcfg) works fine.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1229,WADL generated for objects is broken,"The WADL file obtained from http://localhost:8080/fedora/objects/application.wadl is incomplete and missing id attributes on the methods.  About 60% of the methods are absent including pretty much all datastreams methods.  Please find attached a sample of the generated WADL file.  Using the 3.5 WADL file ""works"" as a work around. For my use the solution was to switch library to one that hardcodes the API instead of using WADL (eulfedora).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1230,Bug in org.fcrepo.server.security.jaas.auth.module.XmlUsersFileModule,"We have found that XmlUsersFileModule stops working intermittently, e.g. sometimes it doesn't let local users login. After adding logs to XmlUsersFileModule, I found when it stops working, the getUserDocument() method does return any users from fedora-users.xml. I reckon it's a bug with the 'quick and dirty caching'. If I change getUserDocument() to the following, the bug disappears (tested).  private static Document getUserDocument() throws Exception {     userDoc = DataUtils.getDocumentFromFile(userFile);     return userDoc; }  Our jaas.con: ------------------------- fedora-auth {  org.fcrepo.server.security.jaas.auth.module.XmlUsersFileModule sufficient;  XXXLdapModule sufficient  host.url=""XXX""  auth.type=""simple""  bind.mode=""bind""  bind.user=""XXX""  bind.pass=""XXX""  bind.filter=""XXX""; };",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1231,Synchornisation possible Repository Equivalence issue,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1232,If Critical follower is down primary only goes read only after one request. ,None,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1233,Ingest of AtomZIP files fails with FileNotFoundException,"Fedora allows exporting whole objects in AtomZIP1.1 file, but ingesting this file doesn't work. No error is presented in front end applications.    However, logs fill with FileNotFoundExceptions like this:  ```  Unable to read temp file created for datastream from archive for qucosa:1 / ATT-1  java.io.FileNotFoundException: /home/claussni/opt/apache-tomcat-7.0.55/temp/atomzip7872738724372657615/ATT-1.0.pdf (No such file or directory)  ```    Root cause is that the temporary folder ```/atomzip7872738724372657615/``` doesn't exist on ingest time.    The bug is in ```org.fcrepo.server.storage.translation.AtomDODeserializer.deserialize()```. The temporary directory gets deleted after building the new digital object, but references for managed datastreams still point there.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1234,Triples removed from triplestore index when a related resource is created,"See: https://www.pivotaltracker.com/story/show/83268844    Issue occurs when the following sequence is followed:  * Create a node at /parent  * Add rdf:type indexing:indexable to the /parent node  * Create a child node at /parent/child  * Add rdf:type indexing:indexable to the /parent/child node  (now the triplestore has entries for both /parent and /parent/child)  * Update some property on /parent (e.g. dc:title)  (now the triples for /parent/child are gone)    For this, I used the updated message-consumer.    If you look at https://github.com/fcrepo4/fcrepo-message-consumer/blob/master/fcrepo-message-consumer-core/src/main/java/org/fcrepo/indexer/sparql/SparqlIndexer.java#L122  You will see that when /parent is updated, if any triples have an object with a URI that starts with the /parent URI, that, too, is added to DELETE statement.",f4-message-consumer,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1235,Grinder testing framework setup,This task is to establish a repeatable process for setting up a Grinder environment to performance test Fedora.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1236,Grinder test runs,"Based on the Testing Considerations:  https://wiki.duraspace.org/display/FF/Assessment+Plan+-+Performance#AssessmentPlan-Performance-TestingConsiderations    ...please modify (or simply run) existing test (ingest.py) to achieve the following three states:  - a steady state is achieved  - a declining state is achieved  - Fedora 4 exhibits high error rates or stops responding    Please collect and document the results in a way that:  - someone else can run the same tests  - it is clear where the failure points are, i.e. how many objects before failure, or what rate of ingest before failure, etc    Once we have demonstrated that the grinder framework is actually useful in assessing F4 performance, then we can move on to the access tests.    Here are some results from last sprint: https://wiki.duraspace.org/display/FF/Grinder+Results",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1237,OAIProvider SPARQL/JQL Refactoring,This task is to refactor the fcrepo4-oaiprovider project to no longer need any of the classes in the org.fcrepo.oai.jql package:  https://github.com/fcrepo4-labs/fcrepo4-oaiprovider/tree/master/src/main/java/org/fcrepo/oai/jql    Where these classes are used (such as by: https://github.com/fcrepo4-labs/fcrepo4-oaiprovider/blob/master/src/main/java/org/fcrepo/oai/service/OAIProviderService.java) the SPARQL queries should be replaced by direct JQL queries.,f4-oaiprovider,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1238,OAIProvider - Allow admins to manage descriptive content about the repository and make the content available,This task is to review and clean up: https://github.com/fcrepo4-labs/fcrepo4-oaiprovider/pull/6    See: https://www.pivotaltracker.com/story/show/81482904,f4-oaiprovider,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1240,Draft implementation of a WebAccessControls authz module,This task is to develop an initial implementation of:  https://www.w3.org/wiki/WebAccessControl,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1250,fcrepo-camel doesn't deploy to OSGi containers,"When deploying fcrepo-camel to an OSGi container (such as Karaf), the getter/setter type mismatch on the endpoint class causes the startup to fail.",legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1251,Exception when accessing federated .DS_Store files,"When accessing "".DS_Store"" files on a federated filesystem, the following exception is thrown:     INFO 17:25:40.434 (FedoraLdp) HEAD for: resources/ext/imagingserver/Non_Object/Non-Object Archive/GlassNegProject/GlassNegDocumentation/.DS_Store  INFO 17:25:40.473 (WildcardExceptionMapper) Exception intercepted by WildcardExceptionMapper:    java.lang.IllegalArgumentException: Illegal character in path at index 90: http://dams01-test.artic.edu/fcrepo/rest/resources/ext/imagingserver/Non_Object/Non-Object Archive/GlassN  egProject/GlassNegDocumentation/.DS_Store/fcr:metadata          at java.net.URI.create(URI.java:859) ~[na:1.7.0_55]          at org.glassfish.jersey.uri.UriTemplate.normalize(UriTemplate.java:399) ~[jersey-common-2.13.jar:na]          at org.glassfish.jersey.message.internal.JerseyLink$Builder.resolveLinkUri(JerseyLink.java:174) ~[jersey-common-2.13.jar:na]          at org.glassfish.jersey.message.internal.JerseyLink$Builder.build(JerseyLink.java:161) ~[jersey-common-2.13.jar:na]          at org.glassfish.jersey.message.internal.JerseyLink$Builder.build(JerseyLink.java:73) ~[jersey-common-2.13.jar:na]          at org.fcrepo.http.api.FedoraLdp.addResourceLinkHeaders(FedoraLdp.java:521) ~[fcrepo-http-api-4.0.0-beta-05-SNAPSHOT.jar:na]          at org.fcrepo.http.api.FedoraLdp.addResourceLinkHeaders(FedoraLdp.java:506) ~[fcrepo-http-api-4.0.0-beta-05-SNAPSHOT.jar:na]          at org.fcrepo.http.api.FedoraLdp.addOptionsHttpHeaders(FedoraLdp.java:500) ~[fcrepo-http-api-4.0.0-beta-05-SNAPSHOT.jar:na]          at org.fcrepo.http.api.FedoraLdp.addResourceHttpHeaders(FedoraLdp.java:470) ~[fcrepo-http-api-4.0.0-beta-05-SNAPSHOT.jar:na]          at org.fcrepo.http.api.FedoraLdp.head(FedoraLdp.java:148) ~[fcrepo-http-api-4.0.0-beta-05-SNAPSHOT.jar:na]          at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source) ~[na:na]      I can access other .DS_Store files but this one (and one in sibling directories) has a space in its path. I can access other files under the path containing the space, but not .DS_Store files.     Will try some more combination to establish a pattern. ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1254,Make fcrepo-camel easier to deploy to OSGi containers,"fcrepo-camel uses jena classes for handling RDF in the org.fcrepo.camel.processor classes. Those should be swapped out for the corresponding clerezza libraries (http://clerezza.apache.org/), which wrap jena-core in an OSGi-safe way. It is possible to deploy fcrepo-camel without the change, but it would be significantly easier if its dependency chain was fully OSGi compliant -- which would make the pom.xml configuration much cleaner.",legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1255,fcrepo-camel should stream resources from fedora,The http client converts the response payload to a string. That should remain as an InputStream.,legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1256,fcrepo-camel should accept dynamic fcr:transform endpoints,"The current fcrepo-camel component allows users to specify endpoints with a static fcr:transform value:    to(""fcrepo:localhost:8080/rest?transform=foo"")    or a configurable property:    to(""fcrepo:localhost:8080/rest?transform={{transform}}"")    but this doesn't allow for the case when that value needs to be dynamically determined while a route is running, such as by checking the indexing:hasIndexingTransform property of an object.    Instead, users should be able to dynamically configure that value in the same way they can dynamically configure the Identifier value:    setHeader(FCREPO_TRANSFORM).xpath(""/rdf:RDF/rdf:Description/indexing:hasIndexingTransform/text()"", ns)     ",legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1257,Write integration test for massive blank node loading,Write an integration test that demonstrates the current degraded performance caused by ingested objects with large numbers of blank nodes. See the [discussion thread|https://groups.google.com/d/topic/fedora-tech/uDhbM3CkDQc/discussion] in the fedora-tech group for more details.  ,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1258,Many blank nodes under /.well-known/genid/,"Currently, blank nodes are created under:  /.well-known/genid/{uuid}    Since performance of the repository suffers when a single container has more than a few thousand children, the current approach of storing all blank nodes directly under the above parent is problematic.  This issue is to ensure that blank nodes do not introduce a performance penalty by instead creating an auto-generated hierarchy under the above path, or by some other means.    See: https://groups.google.com/d/msg/fedora-tech/uDhbM3CkDQc/8aRR76G76wgJ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1260,Better JMS integration test,Using the awaitility provides a cleaner IT for the JMS producer.    https://github.com/fcrepo4/fcrepo4/pull/668,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1261,Fedora ontology contains unknown owl predicates,"The fedora ontology at: http://fedora.info/definitions/v4/repository contains triples for owl:Individual, but AFAIK, this is not a valid owl property (it isn't in the spec for the owl v2 schema: http://www.w3.org/2002/07/owl#). These triples are not visible in the HTML view, so you must use `curl` to request the application/rdf+xml representation in order to see these values.    It is quite possible that owl:NamedIndividual is meant for the ""active"" and ""deleted"" values so that the ontology would read like this:       <owl:NamedIndividual rdf:about=""http://fedora.info/definitions/v4/repository#active"">       <rdfs:label xml:lang=""en"">active</rdfs:label>       <rdfs:comment xml:lang=""en"">The resource is active.</rdfs:comment>       <rdf:type rdf:resource=""http://fedora.info/definitions/v4/repository#ResourceStatus""/>     </owl:NamedIndividual>     <owl:NamedIndividual rdf:about=""http://fedora.info/definitions/v4/repository#deleted"">       <rdfs:label xml:lang=""en"">deleted</rdfs:label>       <rdfs:comment xml:lang=""en"">The resource has been marked for deletion.</rdfs:comment>       <rdf:type rdf:resource=""http://fedora.info/definitions/v4/repository#ResourceStatus""/>     </owl:NamedIndividual>",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1262,Clean compiler warnings,Clean out compiler warnings in kernel and elsewhere.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1263,Correct JavaDocs for -kernel and -kernel-impl,"The JavaDocs for core types in -kernel and -kernel-impl still make references to types like FedoraObject, which no longer exist after the Great LDP-aimed Refactoring of fall 2014. Part of the reason this happened is because those types were mentioned as ""literals"" in JavaDocs, instead of as the target of @link tags, which would have allowed IDEs to rename them as refactoring occurred. This ticket is to correct the bad comments that now exist and ensure that types are mentioned as the targets of @link tags to avoid the problem in future.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1264,Investigate using Hamcrest matchers for type determination,"We do an awful lot of nominal type-determination based on JCR mixins. Most of this happens via static methods with responsibility for a single type or a few types, with boolean result. Often these methods are wrapped in Guava Predicate<>s for operation over collections or Iterator<>s. It might be worth developing a clean and readable micro-framework around Hamcrest matchers for type-determination that would make it easy to find the right test or predicate for a particular task. But it might be more work than is worthwhile. This ticket is to find out which. The result will either be nothing or another ticket for the actual construction and integration of such a micro-framework.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1265,fcrepo-camel unit tests are behaving more like integration tests,"The existing unit tests for fcrepo-camel act more like integration tests (i.e. they start up an instance of fedora, etc). The tests should be refactored to work as true unit tests.",legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1266,Support dcterms:title and skos:prefLabel for node titles,Support more predicates for finding node titles: dcterms:title and skos:prefLabel.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1267,JMS event properties do not need to be in the fcrepo ontology,"The fcrepo ontology (http://fedora.info/definitions/v4/repository#) contains properties that were used for the JMS event system before the 4.0.0 release. Those properties are no longer used by the eventing system, and they should be removed from the ontology.    The properties in question are: identifier, baseURL, eventType, properties and timestamp    See also: https://github.com/fcrepo4/ontology/issues/10",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1268,Prepare fcrepo-camel for graduation from fcrepo4-labs,A number of small changes should be made to prepare fcrepo-camel for graduation from the -labs organization. They include:    * Decouple fcrepo-camel runtime from fcrepo server code  * Adjust maven configuration to include release-related artifacts; sonatype parent  * Use an embedded fuseki server (rather than a containerized servlet) for the triplestore integration tests  * Improve the integration tests to do more checking of body content    ,legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1269,Improve integration tests for fcrepo-camel,"The integration tests for fcrepo-camel could be more thorough, and they could do a better job of independently checking the results of an external operation (such as saving data to a triplestore).    In particular, an embedded solr server should be set up as part of this    Also, an OSGi environment should test the deployability of the bundle.",legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1270,fcrepo-camel sparql processors support Fuseki but not Sesame,"The message format and headers produced by the sparql processors work fine for fuseki but not for sesame. For example, sesame requires the content-type header to be equal to ""application/x-www-form-urlencoded"" and the body needs to be structured in key=value format like this:  update={sparql update query}    That format will work for both Fuseki and Sesame.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1271,base url contains trailing slash,"The message headers produced by fedora include a ""baseUrl"" and an ""identifier"" header. The baseUrl header is produced with a trailing slash and the identifier header contains an initial slash. Thus, in order to compose the two elements (baseUrl + identifier) into a complete path, one must first strip off any trailing slash from the baseUrl.    It would be better if the baseUrl value simply didn't contain the trailing slash.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1272,Too many transactions kill Fedora,"Created stress test script (see attached file).     The script loops over the following tasks 10,000 times:   - open a transaction  - create an object  - commit the transaction     Fedora starts consistently throwing error around cycle #950.    After that, the app becomes unresponsive and Tomcat needs to be killed. See logfile excerpt.     Interestingly, on my ArchLinux development VM with less RAM and processor this does not happen.     Happy New Year!",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1273,add support for Prefer: headers in fcrepo-camel,"The fcrepo-camel component does not support Prefer headers. It should support these headers both statically, with an endpoint declaration (fcrepo:{uri}?preferOmit=...) and with a dynamic header value (HTTP_PREFER).",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1274,Eliminate unnecessary iterators,"There are several types in org.fcrepo.kernel.impl.utils.iterators that do nothing but create properly type-safe Iterators from pre-Java-generics JCR iterator types. These can be safely destroyed in favor of other idioms in client code, which will reduce the size of the codebase with no other changes.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1275,Analyze Marmotta's usage of Memento as a base on which to build Fedora's versioning HTTP API,"Memento:    http://www.mementoweb.org/    is a specification for transacting in versions of resource representations over HTTP. It has been adopted by at least one other LDP implementation:    http://marmotta.apache.org/platform/versioning-module.html    This ticket is to analyze the match of Marmotta's adoption of Memento with Fedora community use cases around versioning and to determine what work would be needed to adapt it for Fedora. In particular, we want to understand the ways in which Memento would interact with LDP.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1276,Add proper OSGi support for Fedora modules,"The maven-bundle-plugin is not properly configured for the various fcrepo-* modules, despite being set up to package these as OSGi bundles.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1277,Add more logging to fcrepo-camel,The logging in fcrepo-camel is too minimal. This issue is to track the addition of better debug logging support.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1278,remove dependency on camel-http4,"The fcrepo-camel component with throw exceptions when the underlying http client encounters errors. The exception that is thrown uses an exception class from camel-http4, which is only a moderately good fit for fcrepo-camel. Since other camel component libraries tend not to have these cross-component dependencies, I think that it would be a good idea to remove the reliance on camel-http4 and implement the Exception class internally.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1279,fcrepo-camel doesn't build properly with java8,The integration tests don't build properly. Certain tests expect null values but the tests are written such that these null values are not associated with an Object.class type.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1280,fcrepo-camel RDF parsing classes should define a context node,"When certain types of RDF documents are passed to the camel processor classes (for instance, turtle documents with an implied subject), the RDF parser will create a dummy subject URI instead of using the message headers to construct a real subject URI.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1281,issues with OSGi bundling/deployment,"The javax.ws.rs.core classes appear to be causing issues with OSGi loading of fcrepo-camel.    When a route tries to use the FcrepoClient, a class not found error is thrown, even though the class (apparently) has been loaded into the bundle.    Since Link header parsing is the only place where the Jersey classes are being used, one option would be to parse the headers manually (split on "";"", remove leading and trailing <>, etc)",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1282,We need better examples for the camel component,"The fcrepo-camel component contains a few examples, but these are both rather poor in quality. It would be better to have more complete examples.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1283,Role-based authorization delegate allows user with only reader permission to PATCH,"On a Fedora 4 instance configured to use the role-based authorization delegate, I have added an fcr:accessroles ACL to the collection /bulk13  that sets up ""testuser"" with just read-only access:    {noformat}  { ""testuser"": [ ""reader"" ] }  {noformat}    Everything appears fine when I attempt to modify a container resource  under /bulk13 with PUT or POST; the PUT is rejected with a 409 and error  messages referring to insufficient permissions to modify the triples, and  the POST is rejected with a 403.    However, when I send a PATCH request with a SPARQL update query, it  succeeds (returns 204, and the resource gets updated). For example, this  command will add a triple with the predicate dc:title and the object  ""foobar 2"":    {noformat}  curl -X PATCH  http://localhost:8080/rest/bulk13/6c/16/04/6d/6c16046d-3c21-4a21-b866-febdf  cb8a61d -H 'Content-Type: application/sparql-update' -d'INSERT { <>  <http://purl.org/dc/elements/1.1/title> ""foobar 2"". } WHERE {}' -u  testuser:XXXXXX -i  {noformat}  Yields:  {noformat}  HTTP/1.1 204 No Content  ETag: ""ad1d4b9ed567a9bbd470de712e6c71765345d0c5""  Last-Modified: Tue, 13 Jan 2015 14:34:07 GMT  Server: Jetty(8.1.11.v20130520)  {noformat}    This is incorrect behavior, since testuser should not be able to modify  any resources under /bulk13, per the fcr:accessroles configuration.    Checking the effective access roles using an admin user, this is what I get:  {noformat}  curl 'http://localhost:8080/rest/bulk13/6c/16/04/6d/6c16046d-3c21-4a21-b866-febdfcb8a61d/fcr:accessroles?effective' -u fedoraAdmin:XXXX -i  {noformat}  Yields:  {nofoRmat}  HTTP/1.1 200 OK  Content-Length: 23  Content-Type: application/json  Server: Jetty(8.1.11.v20130520)    {""testuser"":[""reader""]}  {noformat}",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1284,"Write lock in DefaultDOManager can cause lost updates when, e.g., adding relationships from multiple threads","The implementation of getWriteLock in DefaultDOManager was changed a while ago to allow for improved ingest throughput:    https://jira.duraspace.org/browse/FCREPO-1024    However, since the write lock for an object is obtained after reading and deserializing an object, adding relationships to an object from multiple threads at the same time can result in lost updates, because a later thread may modify a datastream using stale data. Previously, if two threads tried to obtain a writer on the same object at the same time, an exception would be thrown.    A possible fix is to obtain the write lock before reading and deserializing the object. I've prepared a unit test and a small patch here:    https://github.com/UNC-Libraries/fcrepo/compare/read-write-lock",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1285,indexing# namespace,This task is to create a new http://fedora.info/definitions/v4/config namespace that includes the following predicates:  config:indexable  config:hasIndexingTransform    See: https://github.com/fcrepo4/ontology/issues/12  =================  Once this namespace has been created and added to:  https://github.com/fcrepo4/ontology    A new ticket should be created to:  - update codebases that currently expect/define indexing:indexable and indexing:hasIndexingTransform  - update wiki documentation,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1286,Fix errors in the documentation,"There were some errors in the documentation, including incorrect links, and outdated information.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1287,align the use of the indexing# namespace with the source OWL document,Related to https://jira.duraspace.org/browse/FCREPO-1285    The camel component should start using the config# namespace instead of the indexing# namespace. Same thing for fcrepo-message-consumer,"f4-camel,f4-message-consumer",0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1288,Inconsistent naming conventions for configuration parameters,"The fcrepo configuration values passed into the JVM follow inconsistent conventions, including CamelCase, hyphens, underscores and period delimiters. Also, the values of these configuration parameters expect different formats. For example:    fcrepo.home (expects a regular path)  fcrepo.modeshape.configuration (expects a path prefixed by either ""file:"" or ""classpath:"")  fcrepo.ispn.repo.CacheDirPath (uses camelCase, expects a regular path)  fcrepo.binary-store-path (uses hyphens ? and expects a regular path)  fcrepo.activemq.dir (regular path)  fcrepo.infinispan.cache_configuration (why is this not fcrepo.ispn.*? and why the underscore?)    Are there reasons why there is such a diversity of formats?",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1289,Update fcrepo4 pom.xml for Java8 source,"This task is to update the main fcrepo4 pom.xml to specify support for ""source"" of 1.8, while keeping ""target"" as 1.7.    Additionally, fcrepo-camel and fcrepo-build-tools /pom.xml should be updated.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1290,Subset of child nonRdfSource properties not found in responses,"If a resource ""parent"" has a child resource ""child"", where the child has a property of dc:title, the following request will correctly include the child's title:  curl -i  -H""Prefer: return=representation; include=\""http://fedora.info/definitions/v4/repository#EmbedResources\"""" http://localhost:8080/rest/parent    However, if the child is instead a nonRdfSource (an image, for example) with a dc:title, then the above request does not include the child's title.    This is likely due to the logic in PropertiesRdfContext.java not currently also including the nonRdfSourceDescription properties.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1291,Add support for fcrepo connections over https,"The fcrepo-camel component assumes that all connections to the fedora endpoint takes place over plain HTTP. The component should support connects over HTTPS as well. This can be done by adding a simple ""secure"" endpoint option.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1292,HTML-templates contain errors when proxied over an HTTPS connection,"When requesting the HTML version of the REST API, the output is incorrect when accessed over an HTTPS proxy. The hostnames are correct, but the scheme is written as http://.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1293,Production Transaction Manager,"This task is to establish a default Transaction Manager implementation to be wired into the ISPN layer. Currently, the dummy, in-memory Transaction Manager is used.    Reference:  * http://infinispan.org/docs/6.0.x/user_guide/user_guide.html#_configuration_4  * http://docs.jboss.org/infinispan/6.0/apidocs/org/infinispan/transaction/lookup/JBossStandaloneJTAManagerLookup.html  * http://narayana.io/",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1294,"Long-running ingest produces ""OutOfMemoryError: GC overhead limit exceeded"" error","When ingesting object metadata as RDF/XML, initial batches of 1000 objects are successful and pretty constant in processing time.  After 5-8 batches are loaded, the processing time increases and eventually there is the error ""java.lang.OutOfMemoryError: GC overhead limit exceeded"".    If I restart the servlet container between batches, the error goes away.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1295,"""java.text.ParseException: Next event is not a Separator"" raised","When you pass a filename header with an unescaped quote in it. It's fine for this to be an error, but is the java specific exception appropriate?    I set a header like this:  Content-Disposition: attachment; filename="" ""Value Added"" in Editorial Acquisitions.pdf""    The following example provokes the situation:  curl -XPOST -i --data-binary @file.txt -H""Content-Disposition: attachment; filename=""some"" junk.txt"" localhost:8080/f4/rest    See: https://github.com/fcrepo4/fcrepo4/issues/687",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1296,enable component-wide configuration via spring,"The camel component can be configured via uri options, but some of these options would apply to every use of the component (such as authUsername/authPassword), and it is cumbersome to type this each time.    It would be useful if the camel component would accept component-level configuration values via spring like many of the other camel components (i.e. activemq, jms, ssh, etc). Then, the route builder doesn't need to include all of these values each time.  ",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1297,change the copyright date to 2015,The copyright date in the license headers is listed as 2014. This should be changed to 2015 for the 4.0.1 release.,"f4-auth,f4-camel,f4-core,f4-java-client,f4-message-consumer,f4-oaiprovider",0,1,1,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1298,Concurrent API-A-LITE get requests fail,"There is a concurrency bug in the API-A-LITE ""get"" APIs in Fedora 3.8, which potentially results in a server exception and failure to properly respond to the following methods:    getDatastreamDissemination  getDissemination  getObjectProfile  getObjectHistory    The bug is in class org.fcrepo.server.access.FedoraAccessServlet.java, in which the instance variable requestURI is used in the processing logic.  As this is an instance variable it is not thread-safe, resulting in unexpected values for a given thread and exceptions during processing.      Here is the code snippet:  --------------------------------  public class FedoraAccessServlet   ...        /** Portion of initial request URL from protocol up to query string */      private String requestURI = null;      ...       public void doGet(HttpServletRequest request, HttpServletResponse response)              throws ServletException, IOException {      ...          requestURI = request.getQueryString() != null ?                  request.getRequestURL().toString() + ""?"" + request.getQueryString()                  : request.getRequestURL().toString();          logger.info(""Got request: {}"", requestURI);    ...          String[] URIArray = requestURI.substring(0, request.getRequestURL().length()).split(""/"");  --------------------------------    It appears that this instance variable has been around since at least Fedora 3.3, but it had been used only for logging.  So previous errors may have been limited to logging an incorrect requestURI.    It looks like Fedora 3.8 has a great deal of code cleanup and optimizations - thanks much for the hard work and the release!  However, I guess that this bug was introduced during some of the cleanup.    In our system, we process many requests simultaneously through this servlet in order to provide many images at once for search results or page thumbnails.  In our system the error manifests in several ways, about 0.5% of the time:    1. DatastreamNotFoundException, because requestURI.substring is called with the shorter length of a different request, resulting in truncated datastream names:  org.fcrepo.server.errors.DatastreamNotFoundException: [DefaulAccess] No datastream could be returned. Either there is no datastream for the digital object ""nlm:nlmuid-101539482-pgimg-11"" with datastream ID of ""THUM ""  OR  there are no datastreams that match the specified date/time value of ""null ""  .          at org.fcrepo.server.access.DefaultAccess.getDatastreamDissemination(DefaultAccess.java:1124) ~[fcrepo-server-3.8.0.jar:na]          at org.fcrepo.server.access.FedoraAccessServlet.getDatastreamDissemination(FedoraAccessServlet.java:594) ~[fcrepo-server-3.8.0.jar:na]          at org.fcrepo.server.access.FedoraAccessServlet.doGet(FedoraAccessServlet.java:447) ~[fcrepo-server-3.8.0.jar:na]    2. StringIndexOutOfBoundsException, because requestURI.substring is called with the longer length of a different request:  java.lang.StringIndexOutOfBoundsException: String index out of range: 62          at java.lang.String.substring(String.java:1907)          at org.fcrepo.server.access.FedoraAccessServlet.doGet(FedoraAccessServlet.java:208)    3. Incorrect logging - threads log that they are processing a different URI than they actually are.  Here, three different threads report on the processing of page 11 (should be processed by one thread in our system):  INFO 2015-01-16 10:11:51.960 [http-bio-8080-exec-10] (FedoraAccessServlet) Got request: http://localhost:8080/fedora/get/nlm:nlmuid-63510860R-pgimg-11/THUMB  ERROR 2015-01-16 10:11:52.081 [http-bio-8080-exec-8] (FedoraAccessServlet) Datastream not found for request: http://localhost:8080/fedora/get/nlm:nlmuid-63510860R-pgimg-11/THUMB (actionLabel=Access)  org.fcrepo.server.errors.DatastreamNotFoundException: [DefaulAccess] No datastream could be returned. Either there is no datastream for the digital object ""nlm:nlmuid-63510860R-pgimg-11"" with datastream ID of ""THUM ""  OR  there are no datastreams that match the specified date/time value of ""null ""  .          at org.fcrepo.server.access.DefaultAccess.getDatastreamDissemination(DefaultAccess.java:1124) ~[fcrepo-server-3.8.0.jar:na]          at org.fcrepo.server.access.FedoraAccessServlet.getDatastreamDissemination(FedoraAccessServlet.java:594) ~[fcrepo-server-3.8.0.jar:na]          at org.fcrepo.server.access.FedoraAccessServlet.doGet(FedoraAccessServlet.java:447) ~[fcrepo-server-3.8.0.jar:na]  ERROR 2015-01-16 10:11:52.095 [http-bio-8080-exec-16] (FedoraAccessServlet) Datastream not found for request: http://localhost:8080/fedora/get/nlm:nlmuid-63510860R-pgimg-11/THUMB (actionLabel=Access)  org.fcrepo.server.errors.DatastreamNotFoundException: [DefaulAccess] No datastream could be returned. Either there is no datastream for the digital object ""nlm:nlmuid-63510860R-pgimg-11"" with datastream ID of ""THUM ""  OR  there are no datastreams that match the specified date/time value of ""null ""  .          at org.fcrepo.server.access.DefaultAccess.getDatastreamDissemination(DefaultAccess.java:1124) ~[fcrepo-server-3.8.0.jar:na]          at org.fcrepo.server.access.FedoraAccessServlet.getDatastreamDissemination(FedoraAccessServlet.java:594) ~[fcrepo-server-3.8.0.jar:na]          at org.fcrepo.server.access.FedoraAccessServlet.doGet(FedoraAccessServlet.java:447) ~[fcrepo-server-3.8.0.jar:na]    We have patched this class in our system by making this variable a local variable:  // Portion of initial request URL from protocol up to query string  // Moved to a local variable to be thread-safe        String requestURI = request.getQueryString() != null ?                request.getRequestURL().toString() + ""?"" + request.getQueryString()                : request.getRequestURL().toString();    This proposed fix is attached.    We have tested the patch in our Fedora 3.8 system and it seems to be OK.  Converting this variable to local also seems to be OK given the intent of this variable and the rest of the code in this class, but it would be helpful to have confirmation given the effort that has gone into optimizing this class and code.    I understand also that this API has been deprecated since Fedora 3.4-RC1, so an alternative solution would be to just use the REST API.  However, this code was adjusted for Fedora 3.8, so perhaps it is still common for many organizations to use this API.  We do still use it in parts of our system.    Thanks again for all of the work in code cleanup, optimizations and other enhancements in this large release!",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1299,"Error processing """"""-escaped literals","When posting the turtle RDF:    <> <http://purl.org/dc/terms/description> """"""  """""" .    An internal server error is produced:         Ldp::HttpError:   (0x0D)STATUS: 500 org.apache.jena.riot.RiotException: [line: 2, col: 48] illegal escape sequence value:          at org.apache.jena.riot.system.ErrorHandlerFactory$ErrorHandlerStd.fatal(ErrorHandlerFactory.java:136)          at org.apache.jena.riot.lang.LangEngine.raiseException(LangEngine.java:163)          at org.apache.jena.riot.lang.LangEngine.nextToken(LangEngine.java:106)          at org.apache.jena.riot.lang.LangTurtleBase.predicateObjectItem(LangTurtleBase.java:287)          at org.apache.jena.riot.lang.LangTurtleBase.predicateObjectList(LangTurtleBase.java:269)          at org.apache.jena.riot.lang.LangTurtleBase.triples(LangTurtleBase.java:250)          at org.apache.jena.riot.lang.LangTurtleBase.triplesSameSubject(LangTurtleBase.java:191)          at org.apache.jena.riot.lang.LangTurtle.oneTopLevelElement(LangTurtle.java:44)          at org.apache.jena.riot.lang.LangTurtleBase.runParser(LangTurtleBase.java:90)          at org.apache.jena.riot.lang.LangBase.parse(LangBase.java:42)          at org.apache.jena.riot.RDFParserRegistry$ReaderRIOTLang.read(RDFParserRegistry.ja...    See https://github.com/fcrepo4/fcrepo4/issues/694",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1300,example projects have incorrect blueprint namespaces,"The blueprint files for the example projects in fcrepo-camel use version 1.0.0 of the aries namespace, but this is incompatible with the update-strategy=""reload"" that is used (introduced in version 1.1.0). The XML files need the namespace declarations to refer to the correct version.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1302,Ingest degradation bulk load,"It has been observed that when ingesting 50,000 resources with the attached mods.rdf file, ingest performance drops between the creation of 30,000 and 40,000 resources.   The attached mods.rdf includes 13 blanknodes.    The following script can be used to reproduce the issue:  ===========  curl -XPUT localhost:8080/fcrepo/rest/test/collection0    time for x in {0..50000}; do if [ $(( $x % 500 )) == 0 ]; then d=`date`; echo ""$d --- $x"" ; fi; curl -s -XPOST --data-binary @mods.ttl -H""Content-Type: text/turtle""   localhost:8080/fcrepo/rest/test/collection0 > /dev/null; done  ===========    Tests should be performed that create resources that do and do not include RDF bodies.  Additionally, tests should be performed in repository hierarchies that are initially empty and in those that already contain thousands of resources.    Once a scenario is found to exhibit performance degradation, repeat the test while profiling the application with YourKit:  https://wiki.duraspace.org/display/FF/Profiling+Fedora    ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1303,create a features.xml artifact for easy deployment in karaf,"When deploying fcrepo-camel in karaf, it is possible to copy the compiled jarfile to the $KARAF_HOME/deploy folder, but it would be better to have a features.xml artifact in the maven repository so that you can add (provision) fcrepo-camel support to karaf like you can with other camel artifacts. This is described here: http://karaf.apache.org/manual/latest/users-guide/provisioning.html    Basically, with a features.xml file, deployment consists of:    > feature:repo-add mvn:org.fcrepo.camel/fcrepo-camel/4.0.1/xml/features  > feature:install fcrepo-camel    This would make deployment of fcrepo-camel-based routes significantly easier.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1304,Update indexing documentation,This task is to update the wiki documentation to note the ontology updates included in:  https://jira.duraspace.org/browse/FCREPO-1287 and  https://jira.duraspace.org/browse/FCREPO-1285,f4-message-consumer,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1305,Publish indexing# and repository# ontologies,Found in https://github.com/fcrepo4/ontology    ----------  The existing vocabularies should be republished at:  http://fedora.info/definitions/v4/2014/11/27/repository  http://fedora.info/definitions/v4/2014/11/27/oai-pmh    ----------  The two vocabularies should be pushed at the respective URLs:  http://fedora.info/definitions/v4/2015/02/04/repository  http://fedora.info/definitions/v4/2015/02/04/indexing    ----------  With the following endpoints redirecting to the current vocabulary URLs above:  http://fedora.info/definitions/v4/repository  http://fedora.info/definitions/v4/indexing  http://fedora.info/definitions/v4/oai-pmh,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1306,incorrect links in documentation,"Many of the README files contain incorrect, outdated or version-specific links to the fcrepo wiki.","f4-auth,f4-camel,f4-message-consumer",0,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1307,Reduce a Sonar critical Issue,This task is to fix the 1 critical issue and reduce the 200 major issues:  http://sonar.fcrepo.org/drilldown/issues/1,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1308,Update wiki documentation for configuration changes,This task is to update the wiki documentation in response to codebase updates from:  https://jira.duraspace.org/browse/FCREPO-1288,"f4-core,f4-message-consumer",0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1309,Standardize ontology class names,"This task is to update the ontology class and property names, and ensure that the changes are reflected in the appropriate locations in the source code.    See: https://github.com/fcrepo4/ontology/issues/14",f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1310,Sparql processors should support named graphs,"The processor classes in fcrepo-camel will transform an RDF representation of a fedora node into a SPARQL-Update query capable of being sent to an external triplestore. It would be useful to be able to optionally store these in named graphs.    The implementation should accept a new header value, for example CamelFcrepoNamedGraph, which would allow for dynamic changes to this value without needing a separate processor class.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1311,change how https-based connections work with fcrepo-camel,"The current implementation of fcrepo-camel allows a user to interact with a remote fedora repository over https by setting the secure=true URI parameter.    I do not think this is a good implementation. It is error prone and departs from how this is handled in other camel components (such as http4).    The better implementation would remove the 'secure' option and instead use the https:// protocol if the fedora port is set as 443 (otherwise using http://). I am not convinced that there is a use case for using https:// with non-standard ports (e.g. 9443), and as it stands, this seems like an unnecessary option.    If that use case emerges, we can revisit this decision.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1312,Rewrite RDF generation framework for Java 8,"Rewrite the RDF generation framework in -kernel-modeshape to use Java 8's ""pseudo-functional"" Collections API enhancements. This should dramatically shorten and clarify the code therein.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1313,Reduce Sonar major issue - Dodgy - Parameter must be nonnull but is marked as nullable,"This task is to fix major issue ""Dodgy - Parameter must be nonnull but is marked as nullable"". There are 25 files: http://sonar.fcrepo.org/drilldown/issues/1",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1314,"Reduce Sonar major issues ""Methods should not be too complex""","This task is to fix major issue ""Methods should not be too complex"". There are 23 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AMethodCyclomaticComplexity&rule_sev=MAJOR&severity=MAJOR  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1315,"Reduce Sonar major issue - ""Avoid too deep inheritance tree""","This task is to fix major issue ""Avoid too deep inheritance tree"". There are 22 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AMaximumInheritanceDepth&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1316,"Reduce Sonar major issue - ""Bad practice - Class inherits equals() and uses Object.hashCode()""","This task is to fix major issue ""Bad practice - Class inherits equals() and uses Object.hashCode()"". There are 10 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=findbugs%3AHE_INHERITS_EQUALS_USE_HASHCODE&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1317,"Reduce Sonar major issue - ""Generic exceptions Error, RuntimeException, Throwable and Exception should never be thrown""","This task is to fix major issue ""Generic exceptions Error, RuntimeException, Throwable and Exception should never be thrown"". There are 9 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS00112&rule_sev=MAJOR&severity=MAJOR  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1318,"Reduce Sonar major issue - ""Correctness - Class defines field that masks a superclass field""","This task is to fix major issue ""Correctness - Class defines field that masks a superclass field"". There are 9 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=findbugs%3AMF_CLASS_MASKS_FIELD&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1319,"Reduce Sonar major issue - ""Class Fan Out Complexity""","This task is to fix major issue ""Class Fan Out Complexity"". There are 8 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=checkstyle%3Acom.puppycrawl.tools.checkstyle.checks.metrics.ClassFanOutComplexityCheck&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1320,"Reduce Sonar major issue - ""Lambdas and anonymous classes should not have too many lines""","This task is to fix major issue ""Lambdas and anonymous classes should not have too many lines"". There are 7 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1188&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1321,"Reduce Sonar major issue - ""Class Data Abstraction Coupling""","This task is to fix major issue ""Class Data Abstraction Coupling"". There are 6 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=checkstyle%3Acom.puppycrawl.tools.checkstyle.checks.metrics.ClassDataAbstractionCouplingCheck&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1322,"Reduce Sonar major issue - ""Final Class""","This task is to fix major issue ""Final Class"". There are 6 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=checkstyle%3Acom.puppycrawl.tools.checkstyle.checks.design.FinalClassCheck&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1323,"Reduce Sonar major issue - ""Abstract Class Without Abstract Method""","This task is to fix major issue ""Abstract Class Without Abstract Method"". There are 6 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3AAbstractClassWithoutAbstractMethod&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1324,"Reduce Sonar major issue - ""Class with only private constructors should be final""","This task is to fix major issue ""Class with only private constructors should be final"". There are 6 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3AClassWithOnlyPrivateConstructorsShouldBeFinal&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1325,"Reduce Sonar major issue - ""Throws declarations should not be redundant""","This task is to fix major issue ""Throws declarations should not be redundant"". There are 6 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3ARedundantThrowsDeclarationCheck&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1326,"Reduce Sonar major issue - ""Loggers should be ""private static final""","This task is to fix major issue ""Loggers should be ""private static final"" and should share a naming convention"". There are 5 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1312&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1327,"Reduce Sonar major issue - ""Unused Private Field""","This task is to fix major issue ""Unused Private Field"". There are 5 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3AUnusedPrivateField&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1328,"Reduce Sonar major issue - ""Use Index Of Char""","This task is to fix major issue ""Use Index Of Char"". There are 5 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3AUseIndexOfChar&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1329,"Reduce Sonar major issue - Declarations should use Java collection interfaces such as ""List"" rather than specific implementation classes such as ""LinkedList""","This task is to fix major issue Declarations should use Java collection interfaces such as ""List"" rather than specific implementation classes such as ""LinkedList"". There are 4 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1319&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1330,"Reduce Sonar major issue - ""Try-catch blocks should not be nested""","This task is to fix major issue ""Try-catch blocks should not be nested"". There are 4 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1141&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1331,"Reduce Sonar major issue - ""Close Resource""","This task is to fix major issue ""Close Resource"". There are 4 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3ACloseResource&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1332,"Reduce Sonar major issues - ""Static Variable Name"" and ""Avoid commented-out lines of code""",This task is to fix two major issues - Static Variable Name and Avoid commented-out lines of code. There are total 5 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=checkstyle%3Acom.puppycrawl.tools.checkstyle.checks.naming.StaticVariableNameCheck&rule_sev=MAJOR&severity=MAJOR  http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3ACommentedOutCodeLine&rule_sev=MAJOR&severity=MAJOR,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1333,"Reduce Sonar major issues - ""Constructor Calls Overridable Method"" and ""Collapsible ""if"" statements should be merged""","This task is to fix two major issues - Constructor Calls Overridable Method and Collapsible ""if"" statements should be merged. There are total 5 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3AConstructorCallsOverridableMethod&rule_sev=MAJOR&severity=MAJOR  http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1066&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1334,"Reduce Sonar major issues - ""Methods should not be empty"", ""Unused protected method"", and ""FIXME tags should be handled""","This task is to fix 3 major issues ""  Methods should not be empty 2 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1186&rule_sev=MAJOR&severity=MAJOR   Unused protected method 2 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AUnusedProtectedMethod&rule_sev=MAJOR&severity=MAJOR  FIXME tags should be handled 1 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1134&rule_sev=MAJOR&severity=MAJOR  """,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1335,Reduce 5 Sonar major issues (1),"This task is to fix 5 major issues ""   Performance - Method concatenates strings using + in a loop 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=findbugs%3ASBSC_USE_STRINGBUFFER_CONCATENATION&rule_sev=MAJOR&severity=MAJOR  Unused private method 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AUnusedPrivateMethod&rule_sev=MAJOR&severity=MAJOR  Singular Field 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3ASingularField&rule_sev=MAJOR&severity=MAJOR  Correctness - Nullcheck of value previously dereferenced 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=findbugs%3ARCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE&rule_sev=MAJOR&severity=MAJOR  Empty arrays and collections should be returned instead of null 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1168&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1336,Reduce 5 Sonar major issues (2),"Reduce 5 Sonar major issues -   This task is to fix 5 major issue ""   Compare Objects With Equals 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3ACompareObjectsWithEquals&rule_sev=MAJOR&severity=MAJOR  Simplify Conditional 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3ASimplifyConditional&rule_sev=MAJOR&severity=MAJOR  Correctness - Field only ever set to null 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=findbugs%3AUWF_NULL_FIELD&rule_sev=MAJOR&severity=MAJOR  Exception types should not be tested using ""instanceof"" in catch blocks 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=squid%3AS1193&rule_sev=MAJOR&severity=MAJOR    Bad practice - Class defines compareTo(...) and uses Object.equals() 9 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=findbugs%3AEQ_COMPARETO_USE_OBJECT_EQUALS&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1337,Reduce 5 Sonar major issues (3),"This task is to fix 5 major issue ""  Use String Buffer For String Appends 2 files: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3AUseStringBufferForStringAppends&rule_sev=MAJOR&severity=MAJOR  Performance - Should be a static inner class 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=findbugs%3ASIC_INNER_SHOULD_BE_STATIC&rule_sev=MAJOR&severity=MAJOR  Simple Date Format Needs Locale 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3ASimpleDateFormatNeedsLocale&rule_sev=MAJOR&severity=MAJOR  Unused formal parameter 1 file: http://sonar.fcrepo.org/drilldown/issues/1?&rule=pmd%3AUnusedFormalParameter&rule_sev=MAJOR&severity=MAJOR",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1338,Build plugin updates,There are a lot of plugins being used in the Fedora 4 core modules that need updating. This ticket is to update the heck out of 'em.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1340,Rejigger Checkstyles to work around Java 8 idioms,"Checkstyles currently has problems with Java 8 idioms like lambdas and lengthy method call chains. The Maven plugin we use for Checkstyles has been switched off to avoid failing builds in the branch for Java 8 for now:    https://github.com/fcrepo4/fcrepo4/tree/Java8    but should be fixed and turned back on. Although it would be ideal to actually turn all Checkstyle rules back on, if it is possible to turn on all rules except a small subset that pose difficulties for lamba idioms and the like, that would also be acceptable.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1341,Missing default properties in pom.xml,A couple of system properties are referenced throughout the POMs and code but never declared in any POM. These properties can be set in Maven command line executions: ```mvn ... -Dfcrepo.test.port=8080```    The properties should be declared in the man POM using some default values. They can than be overridden by command line arguments.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1342,Maven fails to resolve plugin dependency,"Executing ```mvn -U dependency:resolve-plugins``` fails with:    ""Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:2.8:resolve-plugins (default-cli) on project fcrepo: Nested: Could not find artifact org.eclipse.mylyn.github:org.eclipse.egit.github.core:jar:3.1.0.201310021548-r in fcrepo-thirdparty (http://maven.fcrepo.org/nexus/content/repositories/thirdparty/)""",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1343,Remove DublinCoreDescribable from vocabulary,"Since DublinCoreDescribable is no longer used in the context of Fedora, it the term/class should be removed from the vocabulary:  http://fedora.info/definitions/v4/repository#DublinCoreDescribable",f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1346,Update Repository and Indexing URIs in codebases,This task is to ensure that references to the repository# and indexing# namespaces point to the following URLs:  http://fedora.info/definitions/repository/v4.1.0  http://fedora.info/definitions/indexing/v4.1.0,"f4-camel,f4-core,f4-message-consumer,f4-ontology",0,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1347,fcrepo4-release tests broken,None,f4-message-consumer,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1349,fcrepo-camel should include explicit support for transactions,"Fcrepo-camel does not provide explicit support for transactions, but it should. Furthermore, it should do so in such a way that it does not get in the way of a user -- this would probably involve using appropriate header values inside a transaction (which are then cleared after committing the transaction). This way, a user program would not need to do any extra (unnecessary) url processing.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1350,Update pom.xml for list of committers,"This task is to update the top-level pom.xml to include only the ""committers"" in the <developers> section.  https://wiki.duraspace.org/display/FF/Fedora+Committers",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1351,fcrepo-camel gh-pages,This task is to enable github user documentation to be produced during release.  These docs will then be linked off of:  http://docs.fcrepo.org/,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1352,Fix javadocs: fcrepo4,This task is to run the following command on the main fcrepo4 codebase:  mvn javadoc:jar    ...and fix the issues that cause build failure.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1353,Fix javadocs: fcrepo-message-consumer,This task is to run the following command on the fcrepo-message-consumer codebase:  mvn javadoc:jar    ...and fix the issues that cause build failure.,f4-message-consumer,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1354,Fix javadocs: fcrepo-module-auth-rbacl,This task is to run the following command on the fcrepo-module-auth-rbacl codebase:  mvn javadoc:jar    ...and fix the issues that cause build failure.,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1355,Fix javadocs: fcrepo-module-auth-xacml,This task is to run the following command on the fcrepo-module-auth-xacml codebase:   mvn javadoc:jar     ...and fix the issues that cause build failure.,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1356,Fix javadocs: fcrepo4-oaiprovider,This task is to run the following command on the fcrepo4-oaiprovider codebase:   mvn javadoc:jar     ...and fix the issues that cause build failure.,f4-oaiprovider,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1357,Add previous version reference to Vocabularies,This task is to add a reference in Fedora vocabularies that indicates the URLs of:  - current version  - previous version  - supported Fedora version    The vocabularies to be updated are:  - http://fedora.info/definitions/v4/repository  - http://fedora.info/definitions/v4/indexing  - http://fedora.info/definitions/v4/oai-pmh,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1359,Improve the HTML display view of the ontologies ,"The RDF ontologies are transformed to HTML with some XSLT, but the resulting HTML is, perhaps, overly utilitarian. By updating the XSLT, it would be possible to improve the appearance to browser-based requests.    This would not involve changing the underlying RDF in any way -- just the XSLT.",f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1360,update dependencies and clean up fcrepo-camel maven configuration,"Related to https://jira.duraspace.org/browse/FCREPO-1338 and https://jira.duraspace.org/browse/FCREPO-1351    The maven configuration should be updated to include recent updates from dependencies, and generally should be cleaned up. For instance, there is no reason to use <pluginManagement> if there are no downstream modules inheriting the maven configuration. Plus, it would be good to put all of the maven plugin version numbers in variables near the top of the pom.xml file",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1362,Deleting referenced node removes all property values on referrer,"Steps to reproduce:   - Create containers: /test, /test/res1, /test/res2  - Add property to /test: INSERT { <> myns:rel </test/res1>, </test/res2> } WHERE {}  - Verify that multi-valued property is set in /test referring to both resources  - Delete either /test/res1 or /test/res2    Result: myns:rel does not appear in /test any more; both relationships are deleted  Expected: only the relationship with the deleted node should be deleted",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1364,Enable properties of InboundReferences,"This task is to create a new ""Prefer"" header type along the lines of:  http://fedora.info/definitions/v4/repository#InboundReferences    ...that enables a client requesting GET on a container to indicated that the properties of InboundReferences are desired in the response.  See:   https://wiki.duraspace.org/display/FEDORA4x/RESTful+HTTP+API+-+Containers#RESTfulHTTPAPI-Containers-GETRetrievethecontentoftheresource    and:  https://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-http-api/src/main/java/org/fcrepo/http/api/ContentExposingResource.java#L199  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1367,karaf features file should include dependency information,"The karaf-based features.xml artifact should include bundle dependencies, which will simplify the OSGi configuration (and bring it more in line with how it should work -- i.e. by externalizing its dependencies)",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1368,409 when setting RDF.type to a string,See: https://github.com/fcrepo4/fcrepo4/issues/726    The resolution to this issue should be limited to updating MalformedRdfExceptionMapper.java.  - The response code should be changed from 409 to 400.  - The `org.*Exception:` should be filtered out of the message in the response body.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1369,Inconsistent capitalization of indexing:indexable in code and wiki documentation,"In org.fcrepo.indexer.IndexerGroup.INDEXABLE_MIXIN, ""indexable"" is capitalized as ""Indexable."" But the Fedora 4 documentation wiki shows this property as lowercase:    https://wiki.duraspace.org/display/FEDORA40/External+Search#ExternalSearch-Createnewobjectswithindexingproperties  https://wiki.duraspace.org/display/FEDORA40/Solr+Indexing+Quick+Guide    When the indexable property is added to a resource in all-lowercase, as shown in the docs, the resource does not get indexed. Instead, IndexerGroup outputs a log message like: ""Resource: http://example.org/ retrieved without indexable type.""    It appears that either the documentation or INDEXABLE_MIXIN is using incorrect capitalization.",f4-message-consumer,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1370,Solr indexing on Binary resources,"When running the fcrepo-message-consumer, binary resources are not properly indexed into Solr due to the logic in NamedFieldsRetriever.java not inspecting the ""link: describedby"" resource.    See email thread: https://groups.google.com/d/msg/fedora-tech/TjbQkfIy6PM/1NU8saiEZ4kJ",f4-message-consumer,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1371,very slow GET requests to fs federated resources and Broken Pipe errors,"When I access certain resources in a federated filesystem, the response is very slow or causes an error (see attached log).     One specific case is accessing a container / federated folder which has only 23 subfolders, each of which has several thousands of nested files. Nesting does not go over 1-2 levels deep.     With curl, request times for the same resource vary from 0.06 to 47s. ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1375,409 Message - on PUT before parent created,This task is to clean up the message returned to the client when trying to create a resource with PUT before the resource's parent has been created.    See: https://github.com/fcrepo4/fcrepo4/issues/733,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1377,Vagrant F4 for Training,"This task is to create a Vagrant setup that can be used in F4 one-day trainings, like the upcoming training in D.C.  https://wiki.duraspace.org/display/FF/Training+-+DC+Area+Fedora+User+Group+Meeting%3A+31+March+-+1+April+2015    Ideally, this Vagrant setup would include:  - Tomcat7  - Fedora4  - Solr  - Fuseki    Here is a good starting point:  https://github.com/Islandora-Labs/islandora/blob/7.x-2.x/install/Vagrantfile","f4-core,f4-message-consumer",0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1378,clean up fcrepo-camel example projects,"the example projects should have their dependencies updated, along with some minor code updates.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1379,Unauthorized PATCH should be 403 not 400,"This task is the use the fcrepo-webapp-plus.war to reproduce the scenario documented here:  https://jira.duraspace.org/browse/FCREPO-1283    The fix will likely involve updating the JcrPropertyStatementListener.java to collect exceptions (not just exception.getMessage) and throw the javax.jcr.AccessDeniedException if it is caught, otherwise continue to throw a MalformedRdfException.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1380,errors encountered with CachedOutputStreams,"For large documents when streamCaching() is in effect, errors are encountered. This is probably due to the file-spooled stream being removed prematurely. The relevant function in FcrepoProducer should be fixed, and some tests should be written to test for this situation.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1381,Unterminated namespace incorrectly interpreted,"This task is to determine where in the application stack sparql-update requests, like the one below, are having their namespace declaration mis-interpreted.  The following example should successfully create a ""esc"" namespace prefix.  # Request  curl -i -XPATCH -H""Content-Type: application/sparql-update"" --data-binary @props.sparql localhost:8080/rest/testcontainer    # Where, props.sparql is:  ---------------  PREFIX esc: <http://myurl.org>  INSERT {  <>  esc:package ""ppp"";  }  WHERE { }  ---------------    See: https://groups.google.com/d/msg/fedora-tech/rk8U4KCKWbc/2J6bZkP3AxwJ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1382,PUT with bad RDF should have better message,"When creating a container resource with an RDF body, if the RDF is invalid in some way, it would be helpful if the message found in the internal logging would be sanitized and returned to the client.    curl -i -XPUT --data-binary @body.rdf -H""Content-Type: text/turtle"" localhost:8080/rest/test    Where ""body.rdf"" can be any of the attached ""body.*.rdf"" documents.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1383,LDP Indirect Containers not including references,"This task is to walk through the IndirectContainer example here:  https://docs.google.com/a/fedora-commons.org/document/d/1RI8aX8XQEk-30-Ht-DaPF5nz_VtI1-eqxUuDvF3nhv0/edit#    ...ensuring that the ""/collections/{id}"" container is updated with member statements.  Currently it is not.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1385,Anonymous Blank Nodes,"This task is to re-implement blank nodes along the lines of the following plan:    1) The REST API would continue to accept RDF documents with blank nodes (this is not a change from the current behavior).    2) The fedora:Blanknode class in the fedora ontology would be eliminated.    3) Blank nodes will no longer be published at the .well-known/genid location.    That is, when RDF documents with blank nodes are added to Fedora, those blank nodes will be skolemized internally and stored under the node that the RDF document described, but will not be made available at any location.    4) When fedora:Container nodes are requested, any skolem nodes contained in that document will be serialized as blank nodes, according to the concrete RDF syntax that is requested.    5) When a fedora:Container (one that contains blank nodes) is deleted, the corresponding skolem nodes will also be removed from Fedora.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1389,misleading error message,"When creating a consumerEndpoint (which isn't possible), an exception is thrown (correctly), but the error message suggests that a ""producer"" is being created as opposed to a ""consumer"".",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1390,Web UI over HTTPS throws non-HTTPS warning,"While accessing the fcrepo web UI over HTTPS, the browser notifies about an insecure form.    The Google Chrome console reports:     The page at 'https://myrepo.edu/fcrepo/rest' was loaded over HTTPS, but is submitting data to an insecure location at 'fcr:import': this content should also be submitted over HTTPS.  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1394,Remove the fedora:Blanknode class from the Fedora ontology ,None,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1396,Respond with 501 on client-provided Link header for LDPR creation,"See:   - https://groups.google.com/d/msg/fedora-tech/LBnvq7Z8ZuE/hf67h9wEIeAJ and  - http://www.w3.org/TR/ldp/#h-ldpc-post-createrdf    This task is to make it clear that F4 does not yet support the creation of LDPR (vs. LDPC) RDF Source resources that are not containers.    The following request should result in a ""501 Not Implemented"" response code:  curl -i -X POST -H ""Link: <http://www.w3.org/ns/ldp#Resource>;rel=\""type\"""" http://localhost:8080/rest/",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1397,address various sonar warnings in fcrepo-camel,There are a number of sonar-related issues that can be addressed with some minor refactoring and code cleanup.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1398,LDP Indirect Containers not including references in Java 8,Tests written for https://jira.duraspace.org/browse/FCREPO-1383 do not pass in Java 8.,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1399,Migrate to Java 8,Ongoing work found here:    https://github.com/fcrepo4/fcrepo4/tree/Java8,legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1401,fcrepo-message-consumer HttpClient opens too many connections,The fcrepo-message-consumer HttpClient instance currently disables all connection limits:    https://github.com/fcrepo4/fcrepo-message-consumer/blob/master/fcrepo-message-consumer-core/src/main/java/org/fcrepo/indexer/IndexerGroup.java#L208    This means that indexing a large number of objects will result in a very large number of open connections.  This limit should be set to a more reasonable value and/or made configurable.,f4-message-consumer,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1402,Add the ability to create version snapshots to the fedora 4 java client.,In using the fcrepo4-client it would be useful to be able to create versions.,f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1403,"Publish ""objState"" ontology",Related to: https://jira.duraspace.org/browse/FCREPO-1363,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1404,Sonar Blocker: VersionsRdfContext.Version2Triples equals() diverges from hashCode(),"See:  http://sonar.fcrepo.org/drilldown/issues/1?severity=BLOCKER    This issue was introduced with:  https://github.com/fcrepo4/fcrepo4/commit/d9a596b8c12bd473038e9455ab83f5d8537f0194    It is most likely not a good idea to disable VersionsRdfContext.equals(). Instead, a proper equals() method should exist that with a hashCode() method that abides by the contract:  http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1405,JCR references leaked to JMS message headers,"Some of the predicates passed to the JMS producer (in the org.fcrepo.jms.properties header) use the JCR namespace.     For example: http://www.jcp.org/jcr/1.0lastModified,http://www.jcp.org/jcr/1.0createdBy    These should be replaced the the http://fedora.info/definitions/v4/repository# namespace.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1406,Trailing semicolon in Prefer header causes parse failure,"Including a prefer header with a trailing semicolon causes a parsing failure, e.g.:    curl -H ""Prefer: return=minimal; "" http://fedora4/SSqaFedora4/rest/prod/path/to/a/valid/resource    See https://github.com/fcrepo4/fcrepo4/issues/750",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1407,"Publish ""fixity"" message","This task is to create an event type for ""fixity events"" and to publish them through the standard EventBus/JMS messaging flow.","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1408,Publish PCDM,This task is to publish the ontology found here:  https://github.com/duraspace/pcdm    onto the DuraSpace-hosted http://pcdm.org site.    A follow-on ticket should be created to automate this process. Apparently [~azaroth42] has some helper scripts.  ,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1409,HTTP 500 after dodgy SPARQL Update is submitted via PATCH,The issue detailed below has been confirmed:  https://github.com/fcrepo4/fcrepo4/issues/752    This task is to investigate and resolve the issue.      ,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1410,Enforce trailing a '/' on LDPC URIs,The LDP specification recommends using a trailing slash in the URIs of containers:  http://www.w3.org/TR/ldp-bp/#include-a-trailing-slash-in-container-uris    This task is to:  1) confirm with the F4 committer team that this is a recommendation that we want to enforce  2) investigate the impact of enforcing this recommendation  3) implement it,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1411,PUT/PATCH of resources that are not the target of the request,"Currently, an F4 client is able to request a PUT or PATCH on a repository resource that contains triples with other resources as their RDF subjects.  In these cases, the repository resource that is not the target of the request can be updated.   This is questionable behavior.    This task is to:  1) confirm with the F4 committer team that this behavior should be disabled  2) implement it    Note: Although this issue shows itself in the REST-API, the solution should be deeper within Fedora, i.e. within the kernel.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1415,PCDM JSON-LD @context,This task is to create a JSON-LD @context file for PCDM.  - http://www.w3.org/TR/json-ld/#the-context  - https://github.com/duraspace/pcdm    This @context file will then be published alongside the pcdm.org ontology for inclusion in PCDM JSON-LD documents.,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1416,"Verify correctness of ""omitting"" server managed triples","This task is to ensure that ""omitting"" server-managed triples (SMT) behaves as expected under the following circumstances:  1) Create an RDF Source with client-provided triples, then request that resource (omitting SMTs) and ensure that only the client-provided triples are in the response.  2) Add an rdf:type to the RDF Source, and ensure that it is included in the response that omits SMTs.  3) Ensure server-managed triples can not be updated (i.e. repository namespace).    Note: To omit server-managed triples on GET requests, include the following request header:  -----  Prefer: return=representation; omit=""http://fedora.info/definitions/v4/repository#ServerManaged""  -----",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1417,PUT must fail if triples not persisted,"4.2.4.4 If an otherwise valid HTTP PUT request is received that contains properties the server chooses not to persist, e.g. unknown content, LDP servers must respond with an appropriate 4xx range status code [RFC7231]. LDP servers should provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP. LDP servers expose these application-specific constraints as described in section 4.2.1 General.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1418,POST/PATCH must advertise constraints if triples not persisted,"4.2.1.6 LDP servers must publish any constraints on LDP clients  ability to create or update LDPRs, by adding a Link header with an appropriate context URI, a link relation of http://www.w3.org/ns/ldp#constrainedBy, and a target URI identifying a set of constraints [RFC5988], to all responses to requests that fail due to violation of those constraints. For example, a server that refuses resource creation requests via HTTP PUT, POST, or PATCH would return this Link header on its 4xx responses to such requests. The same Link header may be provided on other responses. LDP neither defines nor constrains the representation of the link's target resource. Natural language constraint documents are therefore permitted, although machine-readable ones facilitate better client interactions. The appropriate context URI can vary based on the request's semantics and method; unless the response is otherwise constrained, the default (the effective request URI) should be used.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1419,Make sure that all internal audit events generate JMS messages,"There is a ticket to generate messages for fixity events (FCREPO-1407), and all other events should be generating messages already.    This ticket is to confirm that all of the other internal events listed in the Audit event type table already generate events:    https://wiki.duraspace.org/display/FF/Audit+Service+Repository+Events+and+Agents","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1420,Make sure that generated messages contain enough information to create event RDF,"The Audit requirements list the information that must be recorded for events:    https://wiki.duraspace.org/display/FF/Design+-+Audit+Service#Design-AuditService-Functional-Write/Import    * Agent (end user)  * Date/Time  * Activity (event type)  * Entity (repository resource being acted on)    Make sure this information is available in the JMS messages being generated (so the events can be processed without needing to retrieve further info from the repository).  If any information is missing, create additional tickets for adding it.","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1421,Create Camel workflow to process messages and create event RDF in an external triplestore,None,"f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1422,Propose RDF classes and properties that event RDF should use,"The Audit requirements includes guidlines for the properties and classes to use for recording audit information:    https://wiki.duraspace.org/display/FF/Audit+Service+PROV-O+vs+PREMIS    This ticket is to document the RDF that will be used to record audit events and gather community feedback:    * Verify that these guidelines cover all of the required information in the Audit specification  * Create a wiki page documenting the classes, properties and values that will be used  * Post a message to the fedora-tech mailing list asking for feedback on the wiki page","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1423,Document recipe for creating event RDF for external events in an external triplestore using SPARQL Update,"Once the Audit functional tickets from phase 1 are completed, document an end-to-end recipe for processing JMS events with Camel and storing audit triples in an external triplestore.","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1424,Investigate disabling deleting event triples from external triplestore,"In some audit scenarios, it is important to prevent deletion of audit records.  To support this, investigate options for access control and/or disabling deletes in an external triplestore.    Fuseki does not appear to have builtin access control functionality (see http://jena.apache.org/documentation/serving_data/#security-and-access-control), but Sesame uses a standard Java servlet container and so should support access control (see http://www.rivuli-development.com/further-reading/sesame-cookbook/basic-security-with-http-authentication/).","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1425,Verify that all Audit specification requirements are satisfied by phase 1,Verify that the Audit service phase 1 implementation and documentation satisfy the requirements specified in:    https://wiki.duraspace.org/display/FF/Design+-+Audit+Service#Design-AuditService-ProposedRequirements    Correct documentation as needed.,"f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1426,Automatically generate audit event nodes for internal audit events,"If an audit container is configured, internal audit events should automatically be generated and posted to that container.","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1427,Audit REST API: per-resource GET,Create a REST API endpoint that allows retrieving audit records attached to a repository resource,"f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1428,Audit REST API: POST,Create a REST API endpoint for creating audit event records for external events,"f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1429,Audit REST API: whole-repository GET,Create a REST API for retrieving all event records in the repository,"f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1430,Audit REST API: DELETE,"Create a REST API endpoint for deleting audit events.  It should be possible to enable or disable this endpoint with a configuration change, such as setting a system property.","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1431,Verify that all Audit specification requirements are satisfied by phase 2,* verify that the Audit service phase 2 implementation and documentation satisfy the requirements specified in:     https://wiki.duraspace.org/display/FF/Design+-+Audit+Service#Design-AuditService-ProposedRequirements     * verify that other repository functionality isn't impacted by enabling or disabling persisting audit event records in the repository    * document end-to-end recipe for configuring audit events with in-repository persistence,"f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1432,Evaluate and integrate the bnd-maven-plugin,See http://blogs.paremus.com/2015/03/announcing-the-bnd-maven-plugin/    It appears that this will significantly improve the build configuration for OSGi bundles.,"f4-camel,f4-core",0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1433,make sure f4-camel supports new user-related JMS headers,"Related to https://jira.duraspace.org/browse/FCREPO-1420    This is mostly a documentation issue, but the JmsHeaders class should be modified to include the new header fields.","f4-audit,f4-camel",1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1434,move magic endpoint strings into constant values,"Some of the ""magic"" endpoint values are expressed as strings (fcr:tx, fcr:transform, etc) in the code. These should be moved into const values and consolidated into a single file.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1435,Version history container should be discoverable via Link header,"The URI for the versions container should be advertised, where available, in a Link header similar to the the metadata container:    Link: <./fcr:versions>;rel=""version-history""    This is following the patterns adhered to by LDP and the conventions outlined in RFC5829  (http://tools.ietf.org/html/rfc5829).",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1440,Multiple events published for NonRdfResources,"Multiple events are getting published to the activemq topic with regards to NonRDFSourceDescriptions.  It appears to be happening only for NODE_ADDED and NODE_REMOVED events.  PROPERTY_ADDED, PROPERTY_CHANGED, PROPERTY_REMOVED are fine.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1442,Create test/IT for FCREPO-1411 (PUT/PATCH resources not target of request) that checks whether a solution works,The sub-task is to create a failing test (currently with @Ignore) that should pass when a patch is introduced.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1443,"fcrepo-client should use Link rel=""describedby"" header for description","The Java client should inspect the headers of NonRDFSources to find where the description is, rather than adding fcr:metadata to the end of the NonRDFSource URI.    When creating a NonRDFSource or doing a HEAD on it, there will be a Link rel=""describedby"" header indicating the URI of the description.",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1444,Create Camel processor to transform audit events into SPARQL Update commands,Create a Camel Processor implementation that transforms JMS events into SPARQL Update commands for an external triplestore.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1445,File/content event collapsing using fcr:content instead of jcr:content,"File event collapsing doesn't work correctly because of a jcr/fcr namespace mixup.  Also, there is no way to differentiate between object and file removal operations since no properties are included in the event.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1446,Add Audit processing to Vagrant,Add a working audit event processing setup to the fcrepo4-vagrant setup.,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1447,Duplicate date properties on NonRdfSourceDescriptions,"The following SPARQL query creates duplicate date propeties on NonRdfSourceDescriptions:    DELETE WHERE  {  <> <http://www.loc.gov/premis/rdf/v1#hasDateCreatedByApplication> ?o0 .  <> <http://www.loc.gov/premis/rdf/v1#hasEventDateTime> ?o1 .  } ;  INSERT DATA {  <> <http://www.loc.gov/premis/rdf/v1#hasDateCreatedByApplication> ""2015-01-27T19:09:18.112Z""^^<http://www.w3.org/2001/XMLSchema#dateTime> .  <> <http://www.loc.gov/premis/rdf/v1#hasEventDateTime> ""2015-01-27T19:09:18.112Z""^^<http://www.w3.org/2001/XMLSchema#dateTime> .  }     Does not seem to affect Containers.  Non-date properties seem to be safe, as well.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1449,Add integration tests to fcrepo-camel-toolbox/audit-triplestore,None,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1450,Add sonar-related configuration to fcrepo-camel-toolbox,None,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1451,Functional testing of fcrepo-camel-toolbox/audit-triplestore,Verify that the audit-triplestore code works with Fuseki,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1452,Create a WAR package of fcrepo-camel-toolbox/audit-triplestore,Add WAR file packaging to audit-triplestore project pom.xml,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1453,add integration tests to audit-triplestore in fcrepo-camel-toolbox,There are currently no integration tests. This task would add these tasks,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1454,HTML UI - Enable creation of container with text/turtle body,"This task is to update the HTML UI to enable the creation of Container resources that have an RDF body.    For example, this ticket is complete when a user of the HTML UI can paste the following text/turtle into a UI input field when creating a Container, and the created container will have the appropriate pcdm property.  body.ttl----------  @prefix pcdm: <http://pcdm.org/models#>  <> a pcdm:Object .  ----------    ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1455,Document creating audit nodes in the repository for external audit events,Update the wiki to include instructions for creating repository nodes for external audit events instead of putting them in an external triplestore:    https://wiki.duraspace.org/display/FF/External+Audit+Events,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1456,Suppress JMS events for internal audit node creation,"The JMS module should not emit events related to creating audit nodes for internal audit events.  Add a way to suppress these events, ideally in a way that is configurable and not tightly coupled to the audit implementation.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1457,fcrepo-camel-toolbox checkstyles,The following plugin should be added to:  audit-triplestore/pom.xml          <plugin>          <groupId>org.apache.maven.plugins</groupId>          <artifactId>maven-checkstyle-plugin</artifactId>        </plugin>,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1458,jacoco configuration is not correct in fcrepo-camel-toolbox,Sonar does not report on code coverage for the fcrepo-camel-toolbox project. I suspect that is because I did not configure jacoco correctly. Could [~awoods] take a look at this?,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1459,decouple audit service event handler from fedora's activemq broker,"Currently the camel workflow for the audit service goes from a single activemq broker to the triplestore endpoint (via a processor) in a single route. By separating these into two separate routes, it will be easier to test and more flexible if there is a need to add another JMS/Kafka/etc consumer. ",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1460,Rename eventURI.base property,"To be consistent with the naming practices of the rest of the project, rename the ""eventURI.base"" property in fcrepo-camel-toolbox/audit-triplestore to ""event.baseUri"".",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1462,Add access control to fcrepo4-vagrant,Add access control to the fcrepo4-vagrant VM.    See https://wiki.duraspace.org/display/FEDORA4x/How+to+Configure+Servlet+Container+Authentication,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1463,REST Ingesting AtomZip fails on resource /new,"Fedora REST API resource ""/new"" won't accept Content-Type:application/zip needed for ingesting AtomZIP files.     A similar issue around ingesting has been addressed already in https://jira.duraspace.org/browse/FCREPO-1070",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1466,"Move existing fcrepo-camel ""examples"" to fcrepo-camel-toolbox","In addition to copying the project shells, add unit/integration tests.    (I imagine that the ""examples"" will remain in fcrepo-camel, but without the testing, etc)",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1468,Update REST API: client-provided checksums,This task is to change the existing REST API mechanism for allowing a F4 client to pass in a checksum when ingesting a NonRdfSource from:  https://wiki.duraspace.org/display/FEDORA4x/RESTful+HTTP+API+-+Containers#RESTfulHTTPAPI-Containers-BluePOSTCreatenewresourceswithinaLDPcontainer    to:  http://tools.ietf.org/html/rfc3230#section-4.3.2  ,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1470,"non-LPDC LDPRSes as ""pointlike objects""","Fedora should respond to a request to create a non-LDPC LDPRS by creating such a resource as a ""pointlike object"", an object with no datastreams and no child objects. This created resource should support the correct LDP interaction model.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1474,Subject of triples in GET request,"RDF triples that are returned on a GET response to a repository resource should only contain ""subjects"" that are the resource itself.    Examples of where this is not currently being enforced include:  <resource>/fcr:metadata, and  <resource>/fcr:versions",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1475,Create audit event type that can apply to either bitstream or metadata updates,"When mapping Fedora 3 audit types, there are cases where it isn't clear whether an update would correspond to Fedora 4 properties or files/bitstreams.  So we should include a supertype of the existing audit types that these can be mapped to.",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1476,Standardize JSON handling library,"The current codebase uses both the Jackson 1 and GSON libraries for handling JSON.  In addition, Modeshape by default includes Jackson 2, which is excluded.    Ideally, we should use Jackson 2 included with Modeshape.  If that is not possible for some reason, we should use a single JSON library.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1477,fcrepo-camel example on README is incorrect,The example on the fcrepo-camel README is too simplistic and doesn't take deletions into account.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1478,PREMIS hasEventRelatedAgent should be multivalued,"The PREMIS hasEventRelatedAgent property should be multi-valued, so it can be used for both the user and user-agent values as specified in our audit RDF requirements.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1479,create karaf features.xml provisioning for fcrepo-camel-toolbox projects,"When deploying camel-toolbox applications (such as the audit service) in OSGi, it would be nice to have a feature.xml file so that the bundle can be installed and managed directly from the karaf shell:    $ feature:install audit-triplestore    Rather than compiling and manually installing it.","f4-audit,f4-camel",1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1480,Add option to use fcrepo-webapp-plus-audit to fcrepo4-vagrant,Add an option to use the internal auditor in the fcrepo4-vagrant VM.,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1481,Add IT for InternalAuditor,Add an integration test for InteralAuditor.,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1482,PATCH should support LDPatch,The LDP Working Group is currently leaning towards using LDPatch as the preferred LDP PATCH language:    http://www.w3.org/TR/ldpatch/    We should investigate supporting LDPatch and add support if possible.    BananaRDF (https://github.com/w3c/banana-rdf) supports LDPatch.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1483,Checking audit node links to deleted resources causes error,"InternalAuditor creates audit nodes which link to resources with URIs instead of references, so the link isn't removed if the resource is deleted.  This is to support the use case of maintaining audit records for deleted nodes.    When the audit nodes that link to deleted nodes are accessed, there is an error when the URI pointing to the deleted node is treated as a reference and checked for being a Skolem.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1484,Update audit-triplestore to reuse as much of the internal auditor code/constants as possible,"The internal and external audit services implement mostly the same functionality, so there is duplicated code between them.  Update the external audit service (fcrepo-camel-toolbox/audit-triplestore) to reuse as much of the code as possible from the internal auditor (fcrepo-audit).",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1485,Publish fcrepo-audit.jar artifact in Maven repository,The PR to update audit-triplestore reuse fcrepo-audit code only works if you have built fcrepo-audit locally:    https://github.com/fcrepo4-labs/fcrepo-camel-toolbox/pull/15    This ticket is to publish the fcrepo-audit.jar artifact to a Maven repository so it will work normally.,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1486,Create an interim release of the fcrepo-webapp-plus audit WAR file,"To integrate the internal audit with vagrant, we need to be able to download WAR artifacts from a release.  This ticket is to create interim releases of the fcrepo-webapp-plus-audit.war artifact.",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1487,Contain JCR dependencies to fcrepo-kernel,This task is to find and eliminate leakage of JCR dependent code that extends beyond the kernel.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1488,add an indexing endpoint to the fcrepo-camel-toolbox projects,"The solr- and triplestore-indexers in the fcrepo-camel-toolbox project, would benefit from an external indexing endpoint -- that is, an endpoint where users can initiate an indexing process at any arbitrary node in the fedora hierarchy. The indexer would then traverse the repository, following ldp:contains links.    This would be useful for reindexing the entire collection (or some subset thereof).",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1489,Remove JCR leakage from fcrepo-audit,This change to fcrepo-audit leaks JCR exceptions and uses JCR nodes:    https://github.com/fcrepo4-labs/fcrepo-audit/commit/3d7d6d348424df73940bf992b2770cdbc92dc3d5#commitcomment-10865344    Refactor to hide the JCR implementation and use Fedora abstractions instead.,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1494,Create Wiki Page for Audit Service Phase 2,"Create a page like https://wiki.duraspace.org/display/FF/Using+Audit+Events+Phase+1 for the phase 2 audit service.    This page should include:  * How to setup the internal auditor using vagrant and/or fcrepo-webapp-plus, setting the system property  * How to generate and review audit events",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1495,Create Audit Service Feature wiki page,Create a Feature page for the Audit service.  This page should  * Link to the Phase 1 and Phase 2 detail pages  * Explain the difference between Phase 1 and Phase 2 approaches  * Explain the pros and cons of the different approaches  * Incorporate the Audit Service design docs,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1496,the HTML display of containers with bnodes causes exceptions,"Adding a bnode to a container works as expected, but if that container is subsequently viewed in the HTML display, a 500 server error is triggered and a stack trace is displayed",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1499,add fcrepo- prefix to modules in fcrepo-camel-toolbox,The modules in fcrepo-camel-toolbox follow the naming convention of:    <feature>-<backend>    for example:    audit-triplestore  indexing-solr    This ticket is to rename those so that they are all prefixed by fcrepo-:    fcrepo-audit-triplestore  fcrepo-indexing-solr    These all will continue to live in the org.fcrepo.camel groupId,"f4-audit,f4-camel",1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1500,travis-ci configuration for fcrepo-audit module,The fcrepo-audit module needs a .travis.yml file,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1501,audit-triplestore can't find class org.fcrepo.audit.InternalAuditor,"When the audit-triplestore Camel workflow is run (either as a webapp deployed in tomcat or using mvn jetty:run), when it attempts to process events, it gets the error:    java.lang.NoClassDefFoundError: Could not initialize class org.fcrepo.audit.InternalAuditor    The fcrepo-audit JAR file is present in the audit-triplestore WAR file.","f4-audit,f4-camel",1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1502,Transform fails for some properties,"fcr:transform fails for the transform program attached:     $ curl  -XPOST  -H 'Content-Type: application/rdf+ldpath' -T 'CITI_asset_transform.txt' 'http://localhost:8080/fcrepo/rest/test/fcr:transform'  org.apache.marmotta.ldpath.exception.LDPathParseException: error while parsing path expression    org.apache.marmotta.ldpath.LDPath.programQuery(LDPath.java:246)    org.fcrepo.transform.transformations.LDPathTransform.apply(LDPathTransform.java:146)    org.fcrepo.transform.transformations.LDPathTransform.apply(LDPathTransform.java:59)    org.fcrepo.transform.http.FedoraTransform.evaluateTransform(FedoraTransform.java:186)    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    java.lang.reflect.Method.invoke(Method.java:606)    org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)    org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:151)    org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:171)    org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ObjectOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:167)    org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:104)    org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:384)    org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:342)    org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:101)    org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:271)    org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)    org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)    org.glassfish.jersey.internal.Errors.process(Errors.java:315)    org.glassfish.jersey.internal.Errors.process(Errors.java:297)    org.glassfish.jersey.internal.Errors.process(Errors.java:267)    org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:297)    org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:254)    org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1030)    org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:373)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:381)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:344)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:221)    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501)    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:313)    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)    java.lang.Thread.run(Thread.java:745)  Caused by: org.apache.marmotta.ldpath.parser.ParseException: Encountered "" <IDENTIFIER> ""Created_On """" at line 12, column 1.  Was expecting:      <EOF>      org.apache.marmotta.ldpath.parser.LdPathParser.generateParseException(LdPathParser.java:2550)    org.apache.marmotta.ldpath.parser.LdPathParser.jj_consume_token(LdPathParser.java:2440)    org.apache.marmotta.ldpath.parser.LdPathParser.Program(LdPathParser.java:409)    org.apache.marmotta.ldpath.parser.LdPathParser.parseProgram(LdPathParser.java:112)    org.apache.marmotta.ldpath.LDPath.programQuery(LDPath.java:235)   ... 44 more      I tried different combinations, and I noticed that removing the fedora:* properties from the program I get expected results. Adding any of the fedora:* properties gives me the same error.   ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1505,403 when updating Pairtree elements,"When trying to update pairtree elements, a 403 should be returned...  such as in the following interaction:    # /rest/ container has 0 children  [azaroth@localhost fedora4]$ curl -X POST --data @temp.ttl http://localhost:8080/rest/  http://localhost:8080/rest/70/9d/63/00/709d6300-e65d-470e-8982-996eefbdf810    # /rest/ container now has 1 child  [azaroth@localhost fedora4]$ curl -X POST --data @temp.ttl http://localhost:8080/rest/70/  http://localhost:8080/rest/70/ea/e2/20/ff/eae220ff-ebed-42a3-ad7a-ef0be4cbf939    # /rest/ container now has two children, even though I posted to a different container :(",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1506,audit-triplestore Camel workflow should ignore events generated by InternalAuditor,"When both fcrepo-audit and audit-triplestore are enabled, two extra events are created for each event:    1. The event for the creation of the audit node created by fcrepo-audit  2. The event for the audit container lastModified being updated    InternalAuditor has some logic to ignore these updates:    https://github.com/fcrepo4-labs/fcrepo-audit/blob/master/src/main/java/org/fcrepo/audit/InternalAuditor.java#L157    audit-triplestore should ignore these too.",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1507,audit-triplestore and fcrepo-audit should use the same URIs for identifying events,"Both audit-triplestore and fcrepo-audit auto-generate identifiers for event nodes, leading to different identifiers for the same events stored in two different places.    We should generate a single identifier when the events are converted from JCR to Fedora events, and use that identifier in both places for consistency.",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1508,Provide UUID in REST API response body or HTTP header for requests that create events,"Ticket following from discussion beginning at https://groups.google.com/d/msg/fedora-tech/-7xfBGLdAaA/9IMYxFnxGhEJ    REST API requests that create new events should return the event's UUID, similar to how requests that create a new object return the new object's URI. General use case is so that external services that add events can use the UUID for internal record keeping. ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1511,Hash references (as child nodes) are not modifiable,"There is an undocumented feature in fedora 4 allowing a user to create child nodes on a resource using a #hashvalue. For instance:    curl -XPOST localhost:8080/rest -H""Slug: mynode""    One can create nested metadata on that node like so:    INSERT {    <> dc:creator <http://localhost:8080/rest/mynode#creator> .    <http://localhost:8080/rest/mynode#creator> a foaf:Person ;            foaf:name ""Haruki Murakami"" .  } WHERE {}    The #creator triples are stored as a child node, so when http://localhost:8080/rest/mynode is requested, those triples will be included.    This seems like a useful way of handling nested RDF metadata.    However, it does not seem possible to add, remove or otherwise modify this child container.    A subsequent SPARQL update has no effect:    INSERT {    <http://localhost:8080/rest/mynode#creator>             foaf:homepage <http://www.harukimurakami.com/> .  } WHERE {}    Neither does this:    DELETE { <http://localhost:8080/rest/mynode#creator> foaf:name ?o }  WHERE { <http://localhost:8080/rest/mynode#creator> foaf:name ?o }    Or this:    DELETE { <http://localhost:8080/rest/mynode#creator> foaf:name ""Haruki Murakami"" }  WHERE { <http://localhost:8080/rest/mynode#creator> foaf:name ""Haruki Murakami"" }    Or this:    DELETE WHERE { <http://localhost:8080/rest/mynode#creator> ?p ?o }    This behavior is clearly problematic. I wonder whether ""fixing it"" means changing the code to support the sorts of SPARQL update requests listed above, or whether this feature should be removed entirely.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1514,Revisit Blank Node implementation,This task is to reintroduce the following commits:  https://github.com/fcrepo4/fcrepo4/commit/ceacc9832890906c8dee8f4533f5b33679d9b875  https://github.com/fcrepo4-labs/fcrepo4-oaiprovider/commit/03c2bef5aa68ef224a86aa432d5ecfb378ff7c99    That were reverted with these commits:  https://github.com/fcrepo4/fcrepo4/commit/ae5aa5d2b2cafc8ebcb67baf226e57547e81bc5d  https://github.com/fcrepo4-labs/fcrepo-audit/commit/578626c0b8ff602920e95b78697dfba72a612d54  https://github.com/fcrepo4-labs/fcrepo4-oaiprovider/commit/c507414f4c9489a71291386c09f06525a6f1e666    Because PATCH and PUT were not yet supported.  An initial cut at a PATCH fix can be found in this PR:   https://github.com/fcrepo4/fcrepo4/pull/786,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1516,Redesign Fixity Service,"This task is to redesign the fcr:fixity service to be more in line with RESTful LDP interaction models.  For example, similar to the way that all non-RDF sources have an associated fcr:metadata resource, all resources (RDF or not) should possibly have an fcr:fixity resource.  When performing a GET on fcr:fixity, the most recent fixity check outcome should possibly be returned.  When performing a POST on fcr:fixity, a new fixity check should be run with a newly created outcome resource added as a child of fcr:fixity.    The completion of this ticket should also take into consideration:  Publish ""fixity"" message : https://jira.duraspace.org/browse/FCREPO-1407","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1517,Clean-up Vagrant configuration,"This task is to allow the System Property: FEDORA_AUDIT_LOCATION to be read into the fedora4.sh script.  Also, Fuseki only starts on the initial vagrant up, and not after a vagrant halt cycle.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1519,Camel Serialize to disk,This task is to create a Camel component that writes repository updates to disk to satisfy the need for a human-readable backup.  This should be part of the https://github.com/fcrepo4-exts/fcrepo-camel-toolbox repository along with other Camel components.    It would be ideal if such a module were configurable to allow users to define if the RDF and/or the binary resources should be persisted to disk.    This was implemented with the fcrepo-message-consumer as documented here:  https://wiki.duraspace.org/display/FEDORA4x/RdfPersistenceIndexer,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1520,Camel persist to DuraCloud,This task is to create a Camel component that persists updated repository resources (RDF and binaries) to DuraCloud via the DuraCloud REST API.    Similar modules already exist here:  https://github.com/fcrepo4-labs/fcrepo-camel-toolbox,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1521,NonRDFSources do not have rdf:type ldp:NonRDFSource,"The description of NonRDFSources includes rdf:type fedora:Binary, but does not include rdf:type ldp:NonRDFSource.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1523,Enable fcrepo-camel-toolbox profiles,"Currently, the fcrepo-camel-toolbox allows for the creation of war files configured for:   - audit triplestore  - indexing solr  - indexing triplestore    This task is to enable build profiles that would allow for any combination of the above.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1526,NonRDFSources (or their description) should be able to have child containers,"NonRDFSources should be allowed to have children, either directly underneath the NonRDFSource, or under its description (fcr:metadata).  This would allow for the associating files with other files that are not directly linked to the parent container (e.g., a FITS XML description of a file is related to the file, not to the parent container directly).",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1527,fcrepo-camel-toolbox README files should be updated,The documentation for fcrepo-camel-toolbox is out of date.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1528,jms identifier header is malformed for URI fragments,"Given the following sparql-update command:    INSERT {  <http://localhost:8080/rest/foo> dc:contributor <http://localhost:8080/rest/foo#contributor> .  <http://localhost:8080/rest/foo#contributor> a foaf:Person ;    foaf:name ""me"" .  } WHERE {}    The JMS system sends out two messages (this makes sense). But the one referring to the hash container has a strangely formatted IDENTIFIER: in this case it would be /foo/#/contributor, which doesn't seem right. I would expect /foo#contributor",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1529,Update fcrepo-vagrant all solr/audit/fuseki integrations,This task is to update the fcrepo4-vagrant configuration so that all of the integrations are enabled:  - indexing-solr  - indexing-triplestore  - audit-triplestore,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1530,Restore fcr:batch for bulk operations,"Restore the fcr:batch REST endpoint for doing batch operations.  This would be particularly helpful for reducing the number requests necessary to build complex objects, which should improve performance and concurrent editing robustness.    The last release of Fedora that had the fcr:batch functionality was 4.0.0-beta-03: https://github.com/fcrepo4/fcrepo4/blob/fcrepo-4.0.0-beta-03/fcrepo-http-api/src/main/java/org/fcrepo/http/api/FedoraBatch.java",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1531,Use premis:hasMessageDigest for checksums consistently,"The fixity service uses premis:hasMessageDigest for file checksums, but the file description uses fedora:digest.  We should use the same property in both places.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1532,Allow updating mimeType and filename,"Filename and mimeType are currently server-managed, so they cannot be updated once they are set.  Other server-managed properties (creation/modification dates, file size and sha1 checksum) are closely tied to the underlying storage, and modifying them could be problematic.  But filename and mimeType can safely be modified, so we should allow that.",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1534,fcrepo-connector-filesystem exports org.modeshape packages,"The fcrepo-connector-file exports org.modeshape packages, which is not good, especially in an OSGi context. The reason it does this is because it extends a private class in org.modeshape (JsonSidecarExtraPropertyStore). This export, however, can be avoided by simply extending the public o.m.j.spi.federation.ExtraPropertiesStore, which is public.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1535,fcrepo-kernel-impl exports org.modeshape packages,"The fcrepo-kernel-impl exports org.modeshape packages, which is especially problematic in an OSGi context. The code should be refactored in such a way that these org.modeshape packages are no longer exported.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1537,500 and stacktrace with empty path element,"javax.jcr.RepositoryException: The path ""/test/me/mb/er/s//members/9528a300-22da-40f2-bf3c-5b345d71affb"" is not valid because it contains an empty segment at     How about a 4xx error? ""not a valid path""    See: https://github.com/fcrepo4/fcrepo4/issues/793",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1539,Stop spewing UUIDs,"Fedora is currently publishing JCR-assigned internal UUIDs as properties of resources. It should stop doing this. The property that is used to publish this internal-only information (""fedora:uuid"") should be removed from the public ontologies.","f4-core,f4-ontology",0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1540,Binary resource properties to reside on Non-RDF Source Description,"This task is to ensure that properties relating to Binary resources should reside (and be manipulated) on the associated Non-RDF Source Description.  Additionally, all RDF that is returned in response to requests on the Non-RDF Source Description should have a single subject: the Binary resource.    Although users should not be allowed to update properties directly on Binary resources, the triples in the following response should all have the subject of the Binary resource:  https://gist.github.com/yulgit1/b5dd01305bec7883831c    Likely related to: https://github.com/fcrepo4/fcrepo4/issues/814",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1541,mix:created and mix:lastModified appear in rdf:type when a new resource is created.,"When creating a new resource, mix:created and mix:lastModified appear as rdf:types.      Though technically correct, as they are an artifact of JCR and the fact that RDF types are persisted as JCR mixins, we should hide them as they are confusing and could leak out to other systems.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1542,Create utility to migrate technical metadata properties,"Recent changes to 4.2-SNAPSHOT have changed the properties used to store technical metadata for files/NonRDFSources, such as the SHA-1 checksum, mime type, and file name:    fedora:digest => premis:hasMessageDigest  fedora:mimeType => ebucore:mimeType  premis:hasOriginalName => ebucore:filename    Develop a utility that will traverse a repository and migrate these properties.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1543,java8 build machinery for camel-related tools,"The fcrepo-camel and fcrepo-camel-toolbox projects do not have fcrepo configured as a parent POM, so in order to add Java8 support, they, too need to be updated.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1544,travis configuration should support java8,"Now that the fcrepo pom configuration specifies java8 as a build target, the .travis.yml configuration on the various downstream projects should be updated.    Effectively: perl -pi -e 's/oraclejdk7/oraclejdk8/' .travis.yml","f4-audit,f4-auth,f4-java-client,f4-message-consumer,f4-oaiprovider",1,1,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1550,fcrepo-camel: Migrate to Java8,This is a generic ticket to track progress refactoring the fcrepo-camel codebase to use more of the Java8 idioms,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1555,Attempting to PUT outdated RDF returns incorrect HTTP status code,"When updating a container via HTTP PUT, the value of the `fedora:lastModified` triple must match its current counterpart in the repository, otherwise an HTTP 400 error is returned with the following message:        Could not remove triple containing predicate http://fedora.info/definitions/v4/repository#lastModified to node /book    This should really be a 409 (Conflict) error with an improved message. I would propose something like: ""Cannot update the container as the supplied RDF is out-of-date based on the value of its fedora:lastModified triple.""    Background: https://github.com/fcrepo4/fcrepo4/issues/800#issuecomment-104694026",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1559,Attempting to delete non-existent properties short-circuits SPARQL update query.,"When issuing SPARQL updates, deletion of non-existent properties prevents the rest of the query from executing.    For example, if you have a container with dc:title, and attempt to issue a delete query on dc:title and dc:author, the missing dc:author stops the query from deleting the dc:title.    Example SPARQL update queries to issue on a new resource to test:    PREFIX  dc:   <http://purl.org/dc/elements/1.1/>     INSERT DATA {    <> dc:title ""Stuff"" .  }    Followed by    PREFIX  dc:   <http://purl.org/dc/elements/1.1/>     DELETE WHERE  {    <> dc:title ?o0 .    <> dc:author ?o1 .  } ;",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1560,Camel Reindexing Documentation,This task is to document on the wiki the usage of the Camel Reindexing capability.  The documentation should likely be a new child page of:  https://wiki.duraspace.org/display/FEDORA4x/Setup+Camel+Message+Integrations  ,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1561,Can't delete large literals,"Large literals (4096 characters or greater) can be created, but cannot be deleted.  - In addition to not deleting the large literal, no error is raised.  See https://github.com/fcrepo4/fcrepo4/issues/787    If there is a bug that prevents deleting large literals, it would be great to fix it. However, it is quite likely that there is a hard limit, in which case determining and documenting that limit would be adequate for this ticket.    Finding the limit of both the size of literals that can be created, and the size of literals that can be deleted would be helpful.  A note added here could be useful:  https://wiki.duraspace.org/display/FEDORA4x/RESTful+HTTP+API+-+Containers#RESTfulHTTPAPI-Containers-GreenPATCHModifythetriplesassociatedwitharesourcewithSPARQL-Update  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1562,fcrepo-http-api exporting some non-existent classes,"The fcrepo-http-api module is exporting some invalid classes, which is problematic in an OSGi context.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1563,migrate existing use of Guava functional classes to Java8 idioms,"The guava classes can mostly be refactored into core Java8 idioms. This is a ticket to track that migration, starting with the non-kernel code.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1564,fcrepo-indexing-solr has an incorrect XPath expression,The fcrepo-indexer-solr has an incorrect XPath expression for identifying custom indexingTransformations,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1565,Update Solr documentation,This task is to update the following documentation to target fcrepo-camel-toolbox instead of fcrepo-message-consumer:  https://wiki.duraspace.org/display/FEDORA4x/Solr+Indexing+Quick+Guide,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1566,improve the documentation for fcrepo-camel-toolbox,Some of the README documentation could be made more clear esp w/r/t solr configuration and tomcat/jetty deployment,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1567,Changing registered namespace prefixes,"This task is to create a backend utility that allows Fedora administrators to provide preferred namespace prefixes that will then override existing prefix mappings in the repository.     As a part of this task or a follow-on documentation ticket, this utility should be documented in the wiki.    See: https://groups.google.com/d/msg/fedora-tech/1F0paNOp9GY/lUHI9niwOpQJ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1568,Audit identifiers should be configurable,"FedoraEvent currently uses the default constructor of UUIDPathMinter to create a PidMinter.  Users should be able to configure a different minter and set the parameters to customize the desired event ID minting behavior.    One possibility:  Add a PidMinter parameter to the FedoraEvent constructor and inject the pidMinter instance into the AllNodeEventsOneEvent, spring-managed bean.  https://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-kernel-impl/src/main/java/org/fcrepo/kernel/impl/observer/eventmappings/AllNodeEventsOneEvent.java#L50    We should verify that the only place that FedoraEvents will be produced will be implementations of InternalExternalEventMapper (including, but not limited to, AllNodeEventsOneEvent).","f4-audit,f4-core",1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1580,fcrepo-camel-toolbox org.fcrepo dependencies,This task is to update the fcrepo-camel-toolbox pom.xml file(s) to use ${project.version} instead of hardcoded values for the org.fcrepo dependencies.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1581,Upgrade: Modeshape-4.4.0.Final... when released,"This task is to upgrade F4's Modeshape dependency to 4.3.0.Final  https://issues.jboss.org/browse/MODE/?selectedTab=com.atlassian.jira.jira-projects-plugin:versions-panel    Modeshape 4.3.0.Final jumps Infinispan versions to 7.2.0.Final, more than a major version number jump. None of the Infinispan configurations now in the code base will even parse with the new version, let alone run. They must all be rewritten, and in the case of clustering config, from scratch.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1583,License Header should not be JavaDoc Comment,The current license header as enforced by Maven License Plugin is formatted as a JavaDoc comment. This is unfortunate as it tends to confuse source code tools that work with and format JavaDoc comments.    TODO:  1- Change first line of header from `/**` to `/*`  2- Update all projects to the new header by running mvn license:format    ,"f4-audit,f4-auth,f4-camel,f4-core,f4-java-client,f4-ldp,f4-message-consumer,f4-oaiprovider,f4-ontology,legacy - Fedora",1,1,1,1,0,1,0,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1586,create a features.xml file for provisioning fcrepo modules,It would be convenient to have a features.xml file for provisioning to karaf.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1587,add support for fixity checking in fcrepo-camel,There is currently no support for fixity checking in fcrepo-camel. It would be nice to have.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1589,add a camel-toolbox service that runs fixity checks on Binary resources,It would be useful to have a camel service that can be plugged into the existing org.fcrepo.camel/fcrepo-reindexer service to verify the checksum values of all (or some subset of) Binary objects in the repository.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1590,fcr:metadata should be a container,"The fcr:metadata resource (description of a NonRDFSource) should be a container to allow full-featured RDF descriptions, including:    * child resources  * skolemized blank nodes  * hash URI subjects",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1591,Auth modules should be packaged as OSGi bundles,The fcrepo-module-auth-* modules are not currently built as OSGi bundles. This ticket is to track that change.,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1592,fix javadoc errors in fcrepo-camel-toolbox,This is to track fixing some javadoc-related errors in the fcrepo-camel-toolbox project,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1594,Use LDPath Template for HTML views,"The Marmotta project provides an LDPath templating module (see: https://marmotta.apache.org/ldpath) that would shorten and clarify the HTML templates in Fedora a great deal. The current ""homegrown"" templating framework should be replaced with it.    See: https://marmotta.apache.org/ldpath/template.html",f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1595,Remove maven.fcrepo.org repository in pom.xml,"This task is to minimally remove the unused Maven repository from the main fcrepo4 pom.xml:  https://github.com/fcrepo4/fcrepo4/blob/master/pom.xml#L1060-L1071    Additionally, the other projects in fcrepo4 and fcrepo4-labs should be inspected for the same snapshot which should also be removed.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1596,enable migration-utils to accept Fedora 2.2-created FOXML,"When pointed at FOXML files from Fedora 2.2, migration-utils expects a 'version' attribute in the foxml:digitalObject element, resulting in a NullPointerException when this attribute is not found.  A stacktrace and header from an example legacy FOXML type are attached below.    Exception in thread ""main"" java.lang.NullPointerException      org.fcrepo.migration.foxml11.Foxml11InputStreamFedoraObjectProcessor.<init>(Foxml11InputStreamFedoraObjectProcessor.java:87)      org.fcrepo.migration.foxml11.FoxmlDirectoryDFSIterator.next(FoxmlDirectoryDFSIterator.java:89)     org.fcrepo.migration.foxml11.FoxmlDirectoryDFSIterator.next(FoxmlDirectoryDFSIterator.java:22)    org.fcrepo.migration.Migrator.run(Migrator.java:105)    org.fcrepo.migration.Migrator.main(Migrator.java:46)```    <?xml version=""1.0"" encoding=""UTF-8""?>  <foxml:digitalObject xmlns:foxml=""info:fedora/fedora-system:def/foxml#""             xmlns:fedoraxsi=""http://www.w3.org/2001/XMLSchema-instance""             xmlns:audit=""info:fedora/fedora-system:def/audit#""             fedoraxsi:schemaLocation=""info:fedora/fedora-system:def/foxml# http://www.fedora.info/definitions/1/0/foxml1-0.xsd""             PID=""umd:22337"">  ",legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1597,standardize camel version across fcrepo-camel and fcrepo-camel-toolbox,fcrepo-camel uses camel 2.14 and fcrepo-camel-toolbox uses camel 2.15. They should both use 2.15,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1598,fcrepo-camel component fails to autoload,"When the fcrepo camel component autoloads in a route, the following exception is issued: Could not initialize class org.apache.http.conn.ssl.SSLConnectionSocketFactory.    Seems to have to do with a dependency failing to declare an export.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1599,Minor Java 8 refactoring in kernel observation code,Minor use of Java 8 syntax and types.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1601,More Java 8 types in the kernel,"More Java 8 types in the kernel, now including {{Optional}}.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1607,Desecrate fcr:tombstone,"fcr:tombstone serves no purpose that could not be better and more simply served by a property on the contextual resource graph around the ""tombstoned"" resource. It should be replaced by just that. ",f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1610,Factor up to org.fcrepo:fcrepo all possible Maven XML from projects that have it as their parent,"There is a certain amount of repeated XML in Maven configurations for projects inheriting from org.fcrepo:fcrepo. These projects include:     ? fcrepo-build-tools   ? fcrepo4   ? fcrepo-message-consumer   ? fcrepo-module-auth-rbacl   ? fcrepo-module-auth-xacml   ? fcrepo-camel   ? ontology   ? fcrepo4-client   ? fcrepo-audit   ? fcrepo-camel-toolbox   ? fcrepo-webapp-plus   ? fcrepo4-release-tests   ? fcrepo4-oaiprovider   ? fcrepo4-swordserver   ? migration-utils    This ticket is to find all such redundancies, and move that config up into the pom in org.fcrepo:fcrepo.","f4-audit,f4-auth,f4-camel,f4-core,f4-ldp,f4-oaiprovider,f4-ontology",1,1,1,1,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1613,Minor XACML Javadoc error,"After a recent commit, a minor javadoc error was introduced.    [ERROR] Exit code: 1 - /fcrepo-module-auth-xacml/src/main/java/org/fcrepo/auth/xacml/XACMLAuthorizationDelegate.java:80: error: exception not thrown: java.io.IOException  [ERROR] * @throws IOException if IO exception occurred  ",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1614,"POST constraints to use URLs, not data-URIs","As a follow-on to:  https://jira.duraspace.org/browse/FCREPO-1418    This ticket reveals another example of where a bad RDF document results in a 400 response but is not caught by a ""ConstraintExceptionMapper"". The following request should result in a <Link; constrainedBy> header that is a URL to a static RDF error description.    curl -i -XPOST -H""Content-Type: application/rdf+xml"" --data-binary @cuban_postcards.xml localhost:8080/rest/",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1618,camel-toolbox intermittent build failure,Was getting a failed build while building with tests turned off. The exception seems to be a known issue with the jetty-maven-plugin (https://bugs.eclipse.org/bugs/show_bug.cgi?id=412637).  ,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1619,Document configuration of audit-service,"This task is to document the following:  - How to enable/configure internal audit service?  - How to enable/configure external audit service?   - How to know the audit service is working?   - How to troubleshoot the audit service:    https://wiki.duraspace.org/display/FEDORA4x/Setup+Audit+Service    Additionally, the subpages of the above link should remove the vagrant details that were previously used for feature verification.",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1620,Should we add a Content-Location header to content-negotiated responses?,"The HTTP spec isn't particularly clear, but blog posts like this:    http://blog.iandavis.com/2010/11/a-guide-to-publishing-linked-data-without-redirects/    make it sound like we should be adding a Content-Location header when we generate content-negotiated responses.  The implication of this would be each RDF serialization would need to have its own URL (e.g., http://localhost:8080/rest/resource.json).",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1621,audit spring configuration incorrect in webapp-plus,The spring configuration for fcrepo-audit in fcrepo-webapp-plus is incorrect,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1623,github site pages for fcrepo-camel have some errors,The page: http://fcrepo4.github.io/fcrepo-camel/ is missing links for version 4.2.0,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1625,fcrepo-camel github pages use a different theme than fcrepo4,The mvn site pages use a different theme than fcrepo4. It should use the same theme. It also includes an incorrect address for the mailing list.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1628,clean up OSGi package imports,"Now that fcrepo-kernel-impl no longer breaks through the modeshape package layer, it is time to clean up the OSGi bundle configuration across modules, making sure that (optional) imports and exports are all correct.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1629,create fcrepo-infinispan,Create a fcrepo-infinispan project with the code removed in FCREPO-1535. The project should minimally build.,legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1631,Clean up integration tests in http-api,"The integration tests in fcrepo-http-api are very hard to read or understand, and there is a lot of repetition in them. We can do better.",f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1632,"fcrepo4-client: copy, delete, move",This task is to add the following capabilities to the fcrepo4-client:  - resource copy  - resource delete  - resource force delete  - resource removeTombstone  - resource move  ,f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1633,minor typo in o.f.k.i.utils.FedoraTypeUtils,Minor mistake in the documentation for FedoraTypesUtils::isBlankNode(),f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1636,camel minimum version is incorrect,"The minimum version for the camel dependency is listed as 2.15, but that is not a released version number. It should, instead, be 2.15.0",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1639,Management of resource lifecycles via relationships,"It should be possible to assign policies in a repository such that chosen relationships carry lifecycle dependency, in the same way that JCR containment now does.    For example, I should be able to assign lifecycle management to a predicate ""myns:describedBy"". Then if:    - I create two resources <a> and <b> and  - set on <a> the property <a> myns:describedBy <b>, then  - delete <a>    then <b> should also be deleted.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1641,Rename fcrepo-kernel* packages,"The fcrepo-kernel-* modules could be better organized. As discussed at https://wiki.duraspace.org/display/FF/2015-07-16+-+Fedora+Tech+Meeting, this ticket will track the renaming of fcrepo-kernel to fcrepo-kernel-api and also fcrepo-kernel-impl to fcrepo-kernel-modeshape.    ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1642,detangle fcrepo-kernel-api from fcrepo-mint,The fcrepo-kernel-api module depends on fcrepo-mint (in the observer.FedoraEvent class). These should be detangled.  ,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1643,fcrepo-webapp Plugin version issues,"This task is to eliminate the issues relating to building and running fcrepo-webapp.    The following errors are seen when running:  # mvn jetty:run -pl fcrepo-webapp    2015-07-14 17:04:42.447:WARN:oeja.AnnotationParser:Problem processing jar entry org/fcrepo/kernel/impl/FedoraResourceImpl.class  java.lang.ArrayIndexOutOfBoundsException: 2925    2015-07-14 17:04:42.451:WARN:oeja.AnnotationParser:Problem processing jar entry org/fcrepo/kernel/impl/observer/DefaultFilter.class  java.lang.ArrayIndexOutOfBoundsException: 3145  ...    # mvn verify -pl fcrepo-webapp  <same as above, and...>  Caused by: java.io.IOException: Error while instrumenting class com/steadystate/css/parser/SACParserCSS3TokenManager.          at org.jacoco.agent.rt.internal_e6e56f0.core.instr.Instrumenter.instrumentError(Instrumenter.java:152)          at org.jacoco.agent.rt.internal_e6e56f0.core.instr.Instrumenter.instrument(Instrumenter.java:103)          at org.jacoco.agent.rt.internal_e6e56f0.CoverageTransformer.transform(CoverageTransformer.java:87)          ... 90 more  Caused by: java.lang.RuntimeException: Method code too large!  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1644,use spring configuration for fcrepo-camel-toolbox integration tests,"The fcrepo-related integration tests for fcrepo-camel-toolbox currently use a downloaded war file run inside a Jetty container. Instead, those tests should be implemented using spring configurations. This will become important as more extension modules are removed from the fedora core.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1646,remove guava dependency from fcrepo-mint module,"As part of migrating to Java8 and removing dependencies on guava, this ticket is to track the cleanup of the fcrepo-mint module",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1647,remove unnecessary use of guava in fcrepo-connector-file,"fcrepo-connector-file sets a VisibleForTesting annotation on one of its protected methods. As a protected method, however, this annotation is unnecessary.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1649,cannot create child objects at root node through web interface,"In the web interface, one cannot create new child nodes from the root node without specifying an id.    This error is confined to the web interface, as curl works normally:     curl -X POST localhost:8080/fcrepo/rest    or    curl -X POST localhost:8080/fcrepo/rest/    Both return the expected values.    But at http://localhost:8080/fcrepo/rest/, clicking on the ""Add"" button gives me this response:    Bad Request  Path contains empty element! //a2/fb/cc/a0/a2fbcca0-bbdb-4c75-b40e-430d024b8451  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1650,fcrepo-camel-webapp doesn't accept system properties for enabling AuthZ,The fcrepo-camel-webapp project doesn't accept system properties for interacting with fedora when AuthZ is enabled.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1651,fcrepo-webapp-plus - XACML configuration issues,"This task is to update the fcrepo-webapp-plus/xacml configuration such that:  - xacml/webapp/WEB-INF/classes/config/repository.json  ** Uses the ""default"" workspace instead of ""fedora""  - xacml/webapp/WEB-INF/classes/spring  ** These configurations are in line with the ""audit"" example  ** For example, when running xacml.war along side the fcrepo-camel-toolbox, camel is unable to connect to the JMS topics",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1652,Missing repositories section in pom.xml causes build failures during release process,"I can build for the release if I have the section added. If this section is missing, I get:    [nruest@gorille:fcrepo-audit] (git)-[local-release]-$ mvn release:clean -V  Apache Maven 3.0.5  Maven home: /usr/share/maven  Java version: 1.8.0_45, vendor: Oracle Corporation  Java home: /usr/lib/jvm/java-8-oracle/jre  Default locale: en_CA, platform encoding: UTF-8  OS name: ""linux"", version: ""3.19.0-23-generic"", arch: ""amd64"", family: ""unix""  [INFO] Scanning for projects...  [ERROR] The build could not read 1 project -> [Help 1]  [ERROR]     [ERROR]   The project org.fcrepo:fcrepo-audit:4.2.1-SNAPSHOT (/home/nruest/git/fcrepo-release/fcrepo-audit/pom.xml) has 1 error  [ERROR]     Non-resolvable parent POM: Could not find artifact org.fcrepo:fcrepo:pom:4.2.1-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 6, column 11 -> [Help 2]  [ERROR]   [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.  [ERROR] Re-run Maven using the -X switch to enable full debug logging.  [ERROR]   [ERROR] For more information about the errors and possible solutions, please read the following articles:  [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException  [ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1653,Need to update site-maven-plugin from 0.11 to 0.12,Building and deploying ghpages fails for the release if we are using version 0.11 of site-maven-plugin.    We need to update the pom.xml for each component to 0.12 that uses it:  fcrepo4  fcrepo-message-consumer  fcrepo-module-auth-rbacl  fcrepo-module-auth-xacml  fcrepo-camel  fcrepo4-client  fcrepo-audit  fcrepo-camel-toolbox,"f4-audit,f4-auth,f4-camel,f4-core,f4-java-client,f4-message-consumer",1,1,1,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1655,clean up javadoc warnings,"There are a number of javadoc warnings from mvn javadoc:jar, mostly from missing descriptions.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1656,javadoc maven output is too verbose,"With the javadoc plugin as a standard part of the fcrepo4 build, the output becomes extremely verbose (so much that travis won't display it all on the standard screen). By setting the javadoc configuration as ""quiet"", all non-Error and non-Warning output is suppressed.  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1657,travis is building javadocs twice,"Now that mvn javadoc:jar has been moved into the standard maven build, it is no longer necessary to include it separately in the travis configuration",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1659,upgrade travis config,"The travis-ci configuration has fcrepo and associated projects running on a ""legacy system"". This can be fixed by adding        sudo: false    to the .travis.yml file    Here is an example: https://github.com/travis-ci/container-example/blob/master/.travis.yml    More information here: http://docs.travis-ci.com/user/migrating-from-legacy/?utm_source=legacy-notice&utm_medium=banner&utm_campaign=legacy-upgrade","f4-audit,f4-auth,f4-camel,f4-core,f4-message-consumer",1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1660,add fcrepo-camel-toolbox configuration files to the artifact set,"It would be convenient if, when deploying a camel-toolbox feature, the appropriate configuration file was also installed in $KARAF_HOME/etc (rather than instructing users to create their own configuration file from scratch)",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1661,fcrepo-audit-triplestore has incomplete list of bundle dependencies in features.xml,"The fcrepo-camel-toolbox features.xml file (used for provisioning in Karaf) has an incomplete list of transitive dependencies. Eventually the fcrepo-karaf project will manage this, but for now, the additional dependencies should be listed.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1663,Cleanup in RDF generation,It is possible to deploy some Java 8 syntax to make the current RDF generation framework a little more concise and readable.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1664,remove direct dependencies on javax.servlet,"The fedora http modules rely on both javax.ws.rs.core and javax.servlet.http classes. It seems to make sense to consolidate these around javax.ws.rs.core    Also, the metrics module depends on a javax.servlet.annotation class. We should evaluate whether this is necessary.    At present, the maven configuration downgrades the servlet-api version to 3.0.1 (even though modeshape depends on 3.1.0). This causes some messiness for OSGi, and it would be good to straighten this out. (Removing the direct dependency may be the easiest approach)",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1666,Deprecate fcr:import/export,"This task is to remove the ""fcr:export"" and ""fcr:import"" features.  Once this is done, a new ticket should be created to update the wiki documentation.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1667,PUT w/o body generates Internal Server Error,"  If a client sends application/ld+json as the content type, but no body, Fedora4 generates an uncaught exception.  Yes this is a client error, but the server shouldn't give an internal server error as the response.  Should probably be 400, as the request is just totally wrong.    $ curl -H ""Content-Type: application/ld+json"" -X PUT http://localhost:8080/rest/    org.apache.jena.atlas.AtlasException: com.fasterxml.jackson.core.JsonParseException: document doesn't start with a valid json element : null   at [Source: java.io.BufferedReader@57cec9d8; line: 1, column: 1]",f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1668,PUT with malformed etag generates Internal Server Error,"If the etag value is returned to the server in If-Match without the quotes, then the server raises an uncaught exception:    $ curl -XPUT http://localhost:8080/rest/foo  http://localhost:8080/rest/foo    $ curl -I http://localhost:8080/rest/foo  ...  ETag: ""2c35ae443a20eac5e1cc44d451371485a6e6ff4f""  ...    $ curl -XPUT -H ""If-Match: 2c35ae443a20eac5e1cc44d451371485a6e6ff4f"" http://localhost:8080/rest/foo  ...  org.glassfish.jersey.message.internal.HeaderValueException: Unable to parse ""If-Match"" header value: ""2c35ae443a20eac5e1cc44d451371485a6e6ff4f""  at org.glassfish.jersey.message.internal.InboundMessageContext.exception(InboundMessageContext.java:333)    It could give 400 or 412, preferably with a nice error message saying that the quotes are needed.  ",f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1670,Factor fcrepo-transform into a separate project,"fcrepo-transform is slated for excision from the main codebase and removal to an extension Github account. To begin that process, we can move it to a separate project inside the same Github organization.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1671,JCR bleed in fcrepo-kernel-api,"org.fcrepo.kernel.api.utils.UncheckedFunction<T, R> and org.fcrepo.kernel.api.utils.UncheckedPredicate<T> import javax.jcr.RepositoryException. Either they should be generalized or they should be moved to fcrepo-kernel-modeshape.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1672,Migrate to Jena 3.0.0,"At present, Fedora depends on Jena 2.12.1    The 3.x series has just been released. After some initial investigation, there are a few issues related to upgrading to the new version at this point.    Two minor issues relate to dependency conflicts between the fedora libraries and the LDP integration tests (which uses 2.12.x). The fcrepo-transform module also depends on an older 2.x version of the Jena API.    In the fedora kernel, the main change from 2 to 3 involves how string literals are represented. With RDF 1.1, there is no difference between the literal ""abc"" and ""abc""^^http://www.w3.org/2001/XMLSchema#string. But at present, they are serialized differently in the JCR layer. Transitioning to Jena 3 would require normalizing how those string literals are persisted.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1673,Stop publishing half-baked JCR types,"We currently publish a gabble of half-understandable JCR-sourced types as part of the typing of almost every Fedora resource. Examples include:    http://www.jcp.org/jcr/mix/1.0created   http://www.jcp.org/jcr/mix/1.0lastModified   http://www.jcp.org/jcr/mix/1.0referenceable   http://www.jcp.org/jcr/nt/1.0base   http://www.jcp.org/jcr/nt/1.0folder   http://www.jcp.org/jcr/nt/1.0hierarchyNode     et al. These should be removed. They serve no purpose, they expose internal implementation details inappropriately, and they confuse people into thinking that Fedora has a deeper connection with JCR than it actually does.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1675,Update Jena dependency,"There is a newer Jena 2.x release available (2.13.x). This is a ticket to track updating to that version.    A significant difference with this version is that all String literals now have a defined DatatypeURI. In RDF 1.1, there is no difference between ""abc"" and ""abc""^^<http://www.w3.org/2001/XMLSchema#string>, and this change simply makes that more explicit in the serialization.    2.13.0 also has artifacts built as OSGi bundles.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1676,update servlet-api version,"Fcrepo4 currently depends on v3.0.1 of the javax.servlet-api, yet transitive dependencies require v3.1.0.    Related to https://jira.duraspace.org/browse/FCREPO-1664",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1681,Replace guava's Function and Predicate classes with Java8 idioms,The fedora4 code relies extensively on Guava's Function and Predicate classes. These can be replaced by the Java8 versions.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1683,Github Shuffle,"This is a ticket to track the migration of github repositories to their ""proper"" home, as discussed at various tech meetings. This is mostly about projects moving from fcrepo4-labs to fcrepo4-exts or from fcrepo4 to fcrepo4-exts.    Most projects will include a minor PR to update SCM information listed in the maven configuration.","f4-audit,f4-camel,f4-message-consumer",1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1684,Maven cleanup,"In order to allow external projects to be more easily decoupled from the main fcrepo maven configuration, it would be convenient to have an fcrepo-parent POM artifact that defines a minimal (common) maven build environment.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1685,Reduce compiler warnings,"The compiler warns about a series of unchecked conversions, mostly related to specialized iterators being cast to a supertype. These warnings, however, can safely be suppressed.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1687,Minor javadoc errors in fcrepo-webapp,"There are some minor javadoc warnings in the fcrepo-webapp project, related to missing values in one of the test classes.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1688,upgrade commons-lang,"Jena 2.13.0 has a transitive dependency on commons-lang3, and fcrepo currently uses v2.x of commons-lang, meaning the codebase depends on both versions. This would be a good opportunity to upgrade the (minimal) existing usage of commons-lang from 2 to 3.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1689,test coverage of fcrepo-connector-file,The fcrepo-connector-file module has particularly poor test coverage. This is a ticket to track improvement in this area. Sonar shows unit test coverage at < 40% http://sonar.fcrepo.org/drilldown/measures/1?metric=coverage&rids%5B%5D=3535,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1690,make travis output not quite so verbose,"A standard fedora build in travis includes over 10,000 lines of output. This seems excessive; setting the log levels to WARN will significantly reduce the amount of output and make it easier to find real build errors.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1691,Extract fcrepo-camel-webapp to fcrepo4-labs,"This task is to extract the fcrepo-camel-webapp module from fcrepo-camel-toolbox and move it as an example to a new GitHub project within fcrepo4-labs.  Additionally, the fcrepo-camel-toolbox/README (and the wiki: https://wiki.duraspace.org/display/FEDORA4x/Setup+Camel+Message+Integrations) should be updated to point to that example.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1693,remove stale branches from fcrepo4 github repo,"The fcrepo4 repository has a lot of stale branches: https://github.com/fcrepo4/fcrepo4/branches/stale. Some of these have been merged with master, some relate to closed PRs, most of them are quite old and should be removed.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1695,Inappropriate ETag headers,"Etag headers are included in the responses to PATCH and POST operations (possibly others?), which seems peculiar. AFAIK, they should only be part of HEAD and GET requests.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1696,Move fcrepo-mint outside the core codebase,fcrepo-mint is no longer a dependency of the fcrepo-kernel-api and represents only extension functionality. It should be moved outside of the core codebase in much the same way as fcrepo-transform will be.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1697,update fcrepo-karaf with new dependencies,There have been a number of changes to the dependencies of the core fcrepo modules. Those changes should be reflected in fcrepo-karaf,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1699,fcrepo-camel has a mistake in the documentation,See this PR: https://github.com/fcrepo4-exts/fcrepo-camel/pull/87,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1706,"Sparql-update fails when literals contain ""/>""","A sparql-update will fail if any literal contains the string ""/>"", for instance:    PREFIX dc: <http://purl.org/dc/elements/1.1/>    INSERT DATA {   <> dc:title ""Some<br/>Text"" .  }    This appears to be related to this ticket: https://jira.duraspace.org/browse/FCREPO-1409    and this line in particular: https://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-kernel-modeshape/src/main/java/org/fcrepo/kernel/modeshape/FedoraResourceImpl.java#L444 ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1707,remove solr/fuseki integration tests from fcrepo-camel,The integration tests with solr and fuseki are already part of fcrepo-camel-toolbox. They should be removed from fcrepo-camel itself.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1708,Update fcrepo-camel-toolbox integration tests -- stop using EmbeddedFusekiServer,From [~ajs6f@virginia.edu]: See here (https://github.com/ocymum/trippi-sparql-update/blob/master/pom.xml) for an example of how to use Fuseki 2 to support integration tests with the Maven plugin for Cargo.    More background here: https://github.com/fcrepo4-exts/fcrepo-camel-toolbox/pull/50#issuecomment-134578075,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1709,Kill dependency on org.modeshape.jcr.security.AuthenticationProvider,"Currently the Fedora auth SPI depends directly on org.modeshape.jcr.security.AuthenticationProvider. This is a Modeshape type dependency which should be confined to the Modeshape kernel implementation. Instead, an appropriate Fedora-specific type should be substituted for org.modeshape.jcr.security.AuthenticationProvider.","f4-auth,f4-core",0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1711,Investigate Fixity Properties and Possible Modification,"Determine whether it is possible to modify properties related to fixity:    * Is a file's sha1 checksum stored in a property or added to the property response dynamically?  * If it is stored in a property, can it be modified if the code preventing that is removed?  * Are fixity responses resources that could potentially be modified?",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1712,Uploading Ogg Files Fails,"Uploading an Ogg Vorbis file to fcrepo4 results in a stacktrace (see https://github.com/fcrepo4/fcrepo4/issues/893).    This may be related to this dependency and exclusion: https://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-boms/fcrepo-jcr-bom/pom.xml#L24 -- we're excluding some of the vorbis-java components because they require an older version of Tika than we're using.  The versions mentioned in the comments are much older than the current requirements of the vorbis-java package, so this may be as simple as updating the pom.xml to use current versions of the related packages.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1713,Refactor implementation of EVERYONE user down to FAD,"Refactor the definition of the EVERYONE user in the ServletContainerAuthenticationProvider so that individual Fedora Authorization Delegates can provide their own definition of the EVERYONE user.    This came up in the context of the WebAC authorization delegate where, according to the spec, the notion of everyone is the class foaf:Agent, and not a string ""EVERYONE"".",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1714,Create FedoraWebACUserSecurityContext,Create FedoraWebACUserSecurityContext by extending FedoraUserSecurityContext to support WebAC compatibility.,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1715,Do not expose UUID of versions - HTML UI,"This task is a follow-on to:  https://jira.duraspace.org/browse/FCREPO-1703    When versioning containers, the UUID of the version shows up in the HTML UI display. To reproduce:  - Create a container  curl -i -XPUT localhost:8080/rest/book  - Version the container  curl -i -XPOST -H""slug: v0"" localhost:8080/rest/book/fcr:versions  - View the version in the HTML UI  ...boom, see UUID in breadcrumb and resource title",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1717,add a getTypes() method to the FedoraResource API,It would be convenient to have a getTypes() method on FedoraResource and a corresponding implementation in FedoraResourceImpl. The rdf:type property is a bit different than other values that can already be easily accessed with getProperty.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1718,Add WebAC profile to fedora-webapp-plus,Add a maven profile to create fcrepo-webapp bundle that includes WebAC authorization module.,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1723,WebACAuthorization class cleanup,"The WebACAuthorization/WebACAuthorizationImpl is just a POJO, and so there's no reason to have a separate interface and implementation. This is a ticket to track merging the two into a single class.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1724,WebAC maven configuration,"The WebAC maven configuration could use some cleanup: e.g. the module depends on commons-lang3, but that is not declared; version numbers should be moved into the properties tag.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1726,WebAC: address sonar-related issues,Sonar reports a number of issues with the WebAC modules: http://sonar.fcrepo.org/component_issues?id=org.fcrepo%3Afcrepo-module-auth-webac#resolved=false    This ticket is to track cleaning those up.,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1727,the priorVersion field in the ontology is incorrect,The owl:priorVersion field in the ontology is incorrect.,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1729,Cannot install fcrepo-camel through feature,"When attempting to install fcrepo-camel using an OSGi feature, you get the following error: Could not find artifact org.apache.commons:commons-codec:jar:1.9 in central (http://repo1.maven.org/maven2/)    This also prevents any of the fcrepo-camel-toolbox projects from deploying as features, as well.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1730,fcrepo-audit-triplestore doesn't startup properly in karaf,"The fcrepo-audit-triplestore module does not deploy correctly in karaf. This is due to upstream changes in the use of RDF parsing libraries, particularly since the resolution of https://jira.duraspace.org/browse/FCREPO-1667.    That ticket involved replacing fcrepo-camel's RDF processing facility with jena (moving away from clerezza). Doing so, however, left the fcrepo-audit-triplestore with missing transitive dependencies. This is a ticket to refactor the RDF processing to use Jena, too.    ",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1732,UI -- Issue Tracker points to GitHub instead of JIRA,"Update the ""Issue Tracker"" link in the footer of the UI to point to JIRA instead of GitHub.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1734,Switch testing apparatus to use OSGi pax exam,"Switch integration testing in the fcrepo-camel project to use PaxExam, to be more OSGi compliant.    https://ops4j1.jira.com/wiki/display/paxexam/Pax+Exam",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1742,Last-Modified and ETag should not change with inbound references,"Inbound links should not update the last-modified date or ETag.  Although inbound links can be retrieved with a resource, they are part of the state of the linking resources, not the linked-to resources.    On a practical level, updating the last-modifed/ETag when a resource is linked to make it very difficult to update resources that are frequently liked to.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1746,unknown predicate used in Fixity docs,"On this page: https://wiki.duraspace.org/display/FEDORA43/RESTful+HTTP+API    It has a sample response that shows:    <http://localhost:8080/rest/path/to/some/resource#fixity/1400589459772> <http://fedora.info/definitions/v4/repository#status> ""BAD_CHECKSUM""^^<http://www.w3.org/2001/XMLSchema#string> , ""BAD_SIZE""^^<http://www.w3.org/2001/XMLSchema#string> ;      But this status predicate doesn't exist in http://fedora.info/definitions/v4/repository","f4-core,f4-ontology",0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1747,extract non-core ontologies out of fcrepo4/ontology,"The {{fcrepo4/ontology}} repository contains a lot of non-core (extension) ontologies. These extension ontologies should be extracted into their own repositories and out of the {{fcrepo4}} organization. Ontologies to be moved include:    audit.rdf -> fcrepo4-exts/fcrepo-audit-ontology/  indexing.rdf -> fcrepo4-exts/fcrepo-indexing-ontology/  oai-pmh.rdf -> fcrepo4-exts/fcrepo-oai-pmh-ontology/  objState.rdf -> fcrepo4-exts/fcrepo-object-state-ontology/  ldp-fedora-mapping.rdf (is this even used? perhaps it can simply be removed: [~ajs6f@virginia.edu] would know)    [~ajs6f@virginia.edu], [~awoods] do you agree with the above reorganization?",f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1748,improve stream processing of large resources,"For very large resources (e.g. a root object with 100s of thousands of child resources), the streamCache() mechanism is not ideal with camel. Instead, using the xtokenize() xml parsing method works better, consumes less memory and runs faster.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1749,finish and integrate the ldp-fedora-mapping ontology,The ldp-fedora-mapping ontology has not been fully integrated into the main repository ontology. This is a ticket to track progress of that.,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1752,fcrepo-camel doesn't properly encode Sparql-Update queries,"Sparql-update queries handled by fcrepo-camel (esp. via fcrepo-indexing-triplestore) will fail if they contain special URL characters, such as &. The queries should be properly URL-escaped by the fcrepo-camel processors.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1754,eTags should be Weak eTags,"HTTP spec says that strong eTags should be based on the byte-for-byte serialization of the response that's sent, and LDP wants to use it for checking if the state has changed. We currently use strong e-tags, but not correctly (it doesn't change with different serializations) - we should just be able to prepend ""W/"".",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1756,oai-pmh ontology uses some incorrect fedora classes,The oai-pmh ontology uses some non-existent fedora classes. Those should be changed to align with the published fcrepo ontology,legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1758,Investigate creating an implementation of Jena's UpdateVisitor interface,"The visitor pattern is useful in several contexts when working with the Jena API. https://jira.duraspace.org/browse/FCREPO-1706 is one example, though that in itself is not sufficient justification for this implementation. This ticket should also track finding suitable parts of the code where such an implementation would be useful.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1761,fcrepo-camel should do preemptive authentication when authN is enabled,"the httpclient (and therefore fcrepo-camel) does not do preemptive authentication by default. That is, (when authN is enabled) it first tries to execute a request without authN; if it fails, it reissues the request.    The problem with PUT/PATCH/POST requests in the context of fcrepo-camel is that they typically operate on streams. The first (unauthenticated) request will then consume the stream while the second (authenticated) request will no longer be able to access that data. This can be fixed by using preemptive authN, as is currently done in the camel-http4 component.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1762,Add Transaction support to fcrepo4-client,Add support for transactions to the fcrepo4-client package:    * Opening a new transaction  * Automatically using the transaction-prefixed path  * Commiting the transaction  * Rolling back the transaction,f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1763,fcrepo-camel-toolbox features should include wrap as a dependency,"If the fcrepo-camel-toolbox features are installed at boot time in karaf (via org.apache.karaf.features.cfg), some of the features fail because they depend on the wrap protocol. wrap is typically also installed at boot time, but unless the fcrepo-camel-toolbox features are explicit about this dependency, karaf won't install wrap before the toolbox features, and the installation of the toolbox features will fail.    The solution is to add this to any feature that uses the wrap: protocol:    <feature prerequisite=""true"">wrap</feature>",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1765,RDF response clean up,"This task is to remove the following RDF elements from the default resource view.  Note, these elements show up prominently in the HTML UI; therefore, in the process of working this ticket it should be verified that the HTML UI is also cleaned up as necessary for a clean view.    - remove UUID from resource HTML view  - remove mixinTypes  - remove primaryType  - remove hasAccessRoles  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1772,update config/clustered/repository.json to point to infinispan/clustered.xml,"Recently updated https://wiki.duraspace.org/display/FEDORA44/Configuration+Options+Inventory mentions:    Modeshape Configurations  /config/clustered/repository.json      Default configuration with repository clustering enabled. By default, uses /config/infinispan/clustered/infinispan.xml persistence configuration.    In fact, in fcrepo4/fcrepo-configs/src/main/resources/config/clustered/repository.json the following line says otherwise:    ""cacheConfiguration"" : ""${fcrepo.ispn.configuration:config/infinispan/leveldb/infinispan.xml}"",    The repository.json file should be brought into correspondence to the documentation - which correctly describes the intent to configure clustering.",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1775,Basic search page gives a 500 Internal Server Error,"The Fedora basic search page ( /fedora/search ) gives a 500 Internal Server error when attempting to access the page with no queries.    The error happens at line 244 of org.fcrepo.server.access.FieldSearchServlet.doGet , FieldSearchServlet.java (see attached stack trace). Within the code, it looks like the FieldSearchResult fsr is set to null, which causes problems as search results are attempted to be displayed even when the page first loads.  A possible code fix is to check to see if there are any results at all (in fieldsArray) before attempting to iterate through the results. I could try to fix this myself (I'd need to set up a dev environment first though).    There are two imperfect workarounds:    1. Put in some search terms as a GET request, such as (at minimum it appears):    /fedora/search?query=&pid=true&maxResults=0    This allows the page to load and be used. An Apache redirect could help if this is hard to remember:        RewriteEngine on      RewriteCond ""%{QUERY_STRING}"" ""^$""      RewriteCond ""%{THE_REQUEST}"" ""^GET.*$""      RewriteRule ""^/fedora/search$"" ""/fedora/search?query=&pid=true&maxResults=0"" [R,L]    This workaround works pretty well, though it does seem like a bit of a hack.    2. Use the Fedora admin page instead ( /fedora/admin )    Though this page doesn't have the same functionality, such as easy access to disseminators.      Update: I just noticed that there is a near-identical search page (that works) here:    /fedora/objects    This basically resolves this problem, the old search page should either be removed or redirect to the new one.  ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1776,osgi-ify fcrepo-http-commons,The use of the SLF4J JUL bridge interferes with karaf deployment of the fcrepo-http-commons module.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1778,clean up stack traces from integration tests,"A number of integration tests unnecessarily produce stack traces. Where possible, these should be cleaned up.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1781,clean up maven configuration for fcrepo-camel-toolbox,"The maven configuration for fcrepo-camel-toolbox can be cleaned up considerably. For starters, it should inherit from fcrepo-parent, not oss-parent. Secondly, the build-helper plugin is incorrectly configured, preventing a successful {{mvn install}} from a subdirectory.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1782,maven configuration cannot inherit scm section,"When inheriting from fcrepo-parent in maven, the SCM section is incorrect. What happens is a project's artifactId is appended to the scm connection value, so during mvn release:perform the incorrect value is used.    The solution is to *not* inherit the scm values in maven. This affects fcrepo4, fcrepo-karaf and probably others, too.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1785,Jersey session injection fails with invalid transaction ids,"Using jersey, the AbstractResource class expects to have a Session object injected into it. This injection fails, however, in the context of a transaction when that transaction ID does not exist. This is because the SessionFactory class throws a TransactionMissingException error, leaving the AbstractResource in an invalid state (at least as far as Jersey is concerned).    That invalid state is circumvented by simply throwing a ClientErrorException and returning a 410 Gone response. This means that, from the perspective of a REST client, I see the correct behavior, but still the architecture is incorrect.    This ticket should track the refactoring of how sessions are injected into the AbstractResource class so that TransactionMissingExceptions don't cause stacktraces like this: https://gist.github.com/acoburn/86d46e4d4322cfa08160    This was generated while tailing the tomcat logfile and running this command:    curl -i localhost:8080/fcrepo/rest/tx:fake/some-existing-resource    ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1792,Use a filesystem-based ACL backstop for resources w/o defined accessControls,"This is a ticket to enforce ACL controls on ACL resources for non-admin agents. This has two parts: the first is to implement the acl:Control mode, which controls read/write access to ACLs. The second part is to have a file-based backstop (expressed in ACL rdf) for ACLs that don't contain (and whose parents don't contain) the acl:accessControl property.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1793,Add Auth support for agentClass graphs,"The document describing WebAC discusses the use of acl:agentClass for making access decisions based on a graph of user/group agents. This ticket will track the implementation of support for this where these agentClass graphs are defined as in-domain resources in fedora. The code should be written in such a way that it would be easy to access remote RDF graphs, should that use case arise.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1796,builds fail with out of memory errors,"Since upgrading to modeshape 4.4 and infinispan 7.x, the integration tests for fcrepo-http-api will fail intermittently due to out of memory (MetaSpace) errors. The solution appears to be simply increasing the MetaSpace size.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1797,Investigate backuping leveldb while fedora is up,Test if filesystem backups from the fcrepo home of a live repository could be used to reliably restore the repository.  Steps:  - Spin up a fedora repository.  - Use multiple client scripts to load test data to the repository  - Backup the fcrepo home directory while load scripts are actively ingesting new objects.  - Use the backup to start a new fcrepo repository.    - Verify that the repository starts without any issues (such as leveldb getting corrupted).  - Make the tests repeatable,f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-1804,README file should be cleaned up,The readme file in fcrepo4 could be cleaned up and made more informative. This is a ticket to track that.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1805,Review triples in HTTP representations for legitimacy,Review all RDF representations available from Fedora's HTTP API to separate them into two categories:    - Those that are documented in a Fedora API module ontology and to which the Fedora architecture is committed.  - Those to be added to a kill-list for removal.    All JCR-exposing triples should certainly be removed.,"f4-core,f4-ontology",0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1806,WebAC: Add documentation for root authorization override,"The WebAC module has a new feature allowing repository administrators to provide a root acl:Authorization file to apply to all resources without an explicitly defined acl:accessControl property. Documentation should be added describing how to use this.     In addition, the effective algorithm described here should be updated: https://wiki.duraspace.org/display/FEDORA4x/WebAC+Authorization+Delegate#WebACAuthorizationDelegate-Stepsindeterminingtheeffectiveauthorization",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1807,webac: minor code cleanup,"The webac integration tests include a lot of blocks of code like this:    try (final CloseableHttpResponse response = execute(request)) {      assertEquals(HttpStatus.SC_OK, getStatus(response));  }    Those should be refactored to be simply:    assertEquals(HttpStatus.SC_OK, getStatus(request));    ",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1810,WebAC: allow PUT and POST to create new resources,"With the webac module, it is not possible to create new resources for non-admin users even when the acl:Write mode is in effect. That is due to the algorithm used to find acl roles.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1811,Dublin Core Elements Title as URI causes an error in admin interface.,"Accessing an object using a Dublin Core Elements title that points to a uri causes an error in the web browser view of the object. (Note: Dublin Core Elements doesn't limit the range of values for the title like Dublin Core Terms does).    For further details, see the thread: https://groups.google.com/forum/#!topic/fedora-community/nHba8JlKIQg    Stack Trace:  org.apache.velocity.exception.MethodInvocationException: Invocation of method 'getObjectTitle' in class org.fcrepo.http.commons.responses.ViewHelpers threw exception java.lang.UnsupportedOperationException: http://id.loc.gov/authorities/names/n00020514 is not a literal node at /views/node.vsl[line 2, column 25] at org.apache.velocity.runtime.parser.node.ASTMethod.handleInvocationException(ASTMethod.java:243) at org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:187) at org.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:280) at org.apache.velocity.runtime.parser.node.ASTReference.value(ASTReference.java:567) at org.apache.velocity.runtime.parser.node.ASTExpression.value(ASTExpression.java:71) at org.apache.velocity.runtime.parser.node.ASTSetDirective.render(ASTSetDirective.java:142) at org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:342) at org.apache.velocity.Template.merge(Template.java:356) at org.apache.velocity.Template.merge(Template.java:260) at org.fcrepo.http.api.responses.StreamingBaseHtmlProvider.writeTo(StreamingBaseHtmlProvider.java:212) at org.fcrepo.http.api.responses.StreamingBaseHtmlProvider.writeTo(StreamingBaseHtmlProvider.java:85) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.invokeWriteTo(WriterInterceptorExecutor.java:265) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:250) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162) at org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:106) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162) at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:85) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162) at org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1154) at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:621) at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:377) at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:367) at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:274) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267) at org.glassfish.jersey.internal.Errors.process(Errors.java:315) at org.glassfish.jersey.internal.Errors.process(Errors.java:297) at org.glassfish.jersey.internal.Errors.process(Errors.java:267) at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:297) at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:254) at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1030) at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:373) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:381) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:344) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:221) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:684) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:503) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:522) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:429) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255) at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) at org.eclipse.jetty.server.Server.handle(Server.java:370) at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:494) at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:971) at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1033) at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:644) at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235) at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82) at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:696) at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:53) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608) at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543) at java.lang.Thread.run(Thread.java:745) Caused by: java.lang.UnsupportedOperationException: http://id.loc.gov/authorities/names/n00020514 is not a literal node at com.hp.hpl.jena.graph.Node.getLiteral(Node.java:227) at org.fcrepo.http.commons.responses.ViewHelpers.getObjectTitle(ViewHelpers.java:215) at sun.reflect.GeneratedMethodAccessor45.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:497) at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.doInvoke(UberspectImpl.java:395) at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.invoke(UberspectImpl.java:384) at org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:173) ... 58 more",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1812,OOM when migrating many objects,"We have started running migration tests using migration-utils, and are receiving an out of memory (OOM) error after migrating a few thousand objects, with heap sizes tested between 1-5 GB.  The OOM is observed in the migration-utils JVM.    For example, for one test we specified a max heap of 2 GB.  After 25 min the JVM started running full GCs; after 40 min the JVM was spending most of its time in full GC, and an OOM was thrown at 50 min after 1533 Fedora 3 objects were migrated.  The gc and migration-utils logs from this run are attached.    Similar results were experienced with max heaps specified in the range of 1-5 GB, see table below.  It appears that the heap usage grows linearly with the number of objects migrated to the max available, and some objects in the heap are never garbage collected.    On one of these runs I took a snapshot of the heap and looked at it through jvisualvm.  A fair amount of memory is consumed by char arrays and Strings, whose values appear to be triples.  Perhaps these triples are not garbage collected?    Max heap    # objects  Time to OOM  1 GB    1262   25 mins  2 GB    1533   50 mins  4 GB    3145   1 hr 41 mins  5 GB    4032   2 hr 8 mins    Environment:  migration-utils-4.3.1-SNAPSHOT, running on the same CentOS server as the destination Fedora.  Source data is from Fedora 3.8.1 legacy-fs format.  Target is Fedora 4.3, running with 5 GB max heap.    Eventually we would like to use this utility to migrate two different Fedora repos, each with approx. 3.5M objects.    Thanks!",legacy - community extensions,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
FCREPO-1813,The ViewHelpers class in fcrepo-http-commons could be cleaned up considerably,The ViewHelpers class in fcrepo-http-commons could be cleaned up (and shortened) considerably. Some java8 idioms and jena utilities (e.g. GraphUtil::listObjects) could replace much of our own implementation.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1815,Extract fedora 4 client code from fcrepo-camel project.,"We need a shared java client library for Fedora 4.  It will be a good start even if it just includes:    1.  Best practices for HttpClient creation  2.  The basic semantics of typical Fedora 4 requests    For a first pass, just extract the FcrepoClient (and dependencies) from fcrepo-camel and rig up an integration test framework.  ","f4-camel,f4-java-client",0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1818,Multiple OAI sets not working,"I have installed fcrepo4-oaiprovider-4.2.0 on Fedora 4.2.0 (plus-rbacl-audit). I have added sets using command below.  curl -X POST http://localhost:8080/fcrepo-webapp-plus-rbacl-audit-4.2.0/rest/oai/sets -H ""Content-Type: text/xml"" -d @oai_set.xml -u fedoraAdmin:fedoraAdmin     Here is my @oai_set.xml  <?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>    <set xmlns:ns2=""http://www.openarchives.org/OAI/2.0/"">      <ns2:setSpec>oai-test-set</ns2:setSpec>      <ns2:setName>oai-test-set</ns2:setName>    </set>    It was working for the first set. I have added another set, oai-test-set-2 and then list the set by using oai?verb=ListSets, but the response showed only first set.    Here are my questions  - How can I make the OAI Provider to show all sets?  - How can I update or delete oai set?",f4-oaiprovider,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1822,clean up build warnings,There are some minor build warnings (unchecked conversions and unused bundle imports) that could be removed.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1823,The javadocs should contain package descriptions,The javadocs are missing a lot of package descriptions: http://docs.fcrepo.org/site/4.4.0/fcrepo/apidocs/index.html  ,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1824,remove modeshape from the kernel-api,The {{fcrepo-kernel-api}} should in no way depend on modeshape. This ticket is to remove all trace of Modeshape from the kernel-api.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1830,WebAC: Unable to create new version,"This task is to resolve the scenario where a user with read/write permission on a resource is unable to create a version of that resource (or its children).  To reproduce:  ** Setup **  # Create a resource  curl -i -uadmin1:password3 -XPUT localhost:8080/rest/collection  # Create a child resource  curl -i -uadmin1:password3 -XPUT localhost:8080/rest/collection/book  # Create an ACL  curl -i -uadmin1:password3 -XPUT localhost:8080/rest/acl  # Create an Authorization  curl -i -uadmin1:password3 -XPUT -H""Content-Type: text/turtle"" --data-binary @auth.ttl localhost:8080/rest/acl/auth  # Link the resource to the ACL  curl -i -uadmin1:password3 -XPATCH -H""Content-Type: application/sparql-update"" --data-binary @link.su localhost:8080/rest/collection  ** Test **  # Verify ""user1"" has read access to the resource  curl -i -uuser1:password1 localhost:8080/rest/collection  # Try to create a version of the resource as ""user1"":  curl -i -uuser1:password1 -XPOST -H""slug: v0"" localhost:8080/rest/collection/fcr:versions  ** BOOM! failure - 403  # Try to create a version of the child as ""user1"":  curl -i -uuser1:password1 -XPOST -H""slug: v0"" localhost:8080/rest/collection/book/fcr:versions  ** BOOM! failure - 403  # Verify ability to create a version of the resource as ""admin1"":  curl -i -uadmin1:password3 -XPOST -H""slug: v0"" localhost:8080/rest/collection/fcr:versions    See attached:  * auth.ttl  * link.su",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1833,ISPN JDBC: Investigate functionality of a LevelDB alternative,"This task is to configure an alternative ISPN backend (JDBC?) and test for basic functionality.    If an alternative backend works, create a follow-on ticket for investigating the performance relative to the current LevelDB backend.  If performance is promising, create a follow-on-follow-on ticket for investigating a LevelDB-to-JDBC (or other) backend migration.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1834,Remove modeshape dependency from fcrepo-kernel-api,"fcrepo-kernel-api should not depend on modeshape. The only remaining dependency exists in the RepositoryService class, where the backup and restore methods return an org.modeshape.jcr.api.Problems object. This should instead be wrapped in a Collection<Throwable>.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1835,Add logging to HttpHeaderPrincipalProvider,"Add debug logging to HttpHeaderPrincipalProvider, to assist in tracing authentication information from the container.    See https://wiki.duraspace.org/display/FF/2015-10-16+-+WebAccessControl+Authorization+Delegate+Planning+Meeting?focusedCommentId=70589400#comment-70589400",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1837,Unbalanced brackets in path results in stacktrace,"If you try to retrieve a repository path with unbalanced brackets in the path (e.g., http://localhost:8080/rest/[foo), you will get an exception stacktrace: ""java.lang.IllegalArgumentException: Missing end bracket in segment name"" -- see https://github.com/fcrepo4/fcrepo4/issues/945    If you put an existing path in brackets, it will work (e.g. http://localhost:8080/rest/foo can also be accessed at http://localhost:8080/rest/[foo]).    Including brackets in the URL should not result in a stacktrace (it should be 400 or 404 instead).  And we should probably also document or suppress the bracket handling.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1838,webapp-plus: Internal Audit not active with jetty:run,"This task is to enable the internal audit capability when running ""mvn jetty:run"" on the fcrepo-webapp-plus project.",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1840,Incorrect Accept header should return an appropriate 4xx status code,"When making a GET request with an incorrect mimeType, e.g. ""Accept: application/turtle"", fedora responds with a 500 status code. It should, instead, respond with a 400 code.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1841,Two versionable datastreams with same identifier,"The islandora software creates objects, and stores them  in our fedora-commons installation, using the REST-API.    Every object has a datastream ""TN"", which is jpeg-file,  that serves as a ""thumbnail"". This datastream is versionable.    Mostly, all goes fine. But sometimes, the new version is registered  by fedora, but strangely disappears from the underlying filesystem,  without fedora noting this in the datastream description.    All I could was this in the log files:    [..]  INFO 2015-10-22 10:59:58.035 [http-8080-16] (DatastreamResource) addOrUpdate  INFO 2015-10-22 10:59:58.035 [http-8080-16] (DefaultManagement) Completed getDatastream(pid: islandora:20401, datastreamID: TN, asOfDateTime: null)  INFO 2015-10-22 10:59:58.045 [http-8080-50] (DatastreamResource) addOrUpdate  INFO 2015-10-22 10:59:58.046 [http-8080-50] (DefaultManagement) Completed getDatastream(pid: islandora:20401, datastreamID: TN, asOfDateTime: null)  INFO 2015-10-22 10:59:58.049 [http-8080-16] (DefaultDOManager) Committing modification of islandora:20401  INFO 2015-10-22 10:59:58.049 [http-8080-16] (DefaultDOManager) Getting managed datastream from internal uploaded location: uploaded://133842 for islandora:20401  INFO 2015-10-22 10:59:58.066 [http-8080-16] (DefaultDOManager) Replaced managed datastream location with internal id: islandora:20401+TN+TN.0  INFO 2015-10-22 10:59:58.067 [http-8080-16] (DefaultDOManager) Adding to ResourceIndex  INFO 2015-10-22 10:59:58.075 [http-8080-16] (DefaultDOManager) Updating dissemination index for islandora:20401  INFO 2015-10-22 10:59:58.075 [http-8080-16] (DefaultDOManager) Updating FieldSearch index  INFO 2015-10-22 10:59:58.077 [http-8080-16] (DefaultManagement) Completed addDatastream(pid: islandora:20401, dsID: TN, altIDs: , dsLabel: Thumbnail, versionable: true, MIMEType: image/jpeg, formatURI: , dsLocation: uploaded://133842, controlGroup: M, dsState: A, checksumType: DISABLED, checksum: null, logMessage: Copied datastream from islandora:20401.)  INFO 2015-10-22 10:59:58.081 [http-8080-16] (DefaultManagement) Completed getDatastream(pid: islandora:20401, datastreamID: TN, asOfDateTime: null)  INFO 2015-10-22 10:59:58.083 [http-8080-50] (DefaultDOManager) Committing modification of islandora:20401  INFO 2015-10-22 10:59:58.084 [http-8080-50] (DefaultDOManager) Getting managed datastream from internal uploaded location: uploaded://133843 for islandora:20401  INFO 2015-10-22 10:59:58.098 [http-8080-50] (DefaultDOManager) Replaced managed datastream location with internal id: islandora:20401+TN+TN.0  INFO 2015-10-22 10:59:58.098 [http-8080-50] (DefaultDOManager) Removed purged datastream version from low level storage (token = islandora:20401+TN+TN.0)  INFO 2015-10-22 10:59:58.100 [http-8080-50] (DefaultDOManager) Adding to ResourceIndex  INFO 2015-10-22 10:59:58.118 [http-8080-50] (DefaultDOManager) Updating dissemination index for islandora:20401  INFO 2015-10-22 10:59:58.118 [http-8080-50] (DefaultDOManager) Updating FieldSearch index  INFO 2015-10-22 10:59:58.120 [http-8080-50] (DefaultManagement) Completed addDatastream(pid: islandora:20401, dsID: TN, altIDs: , dsLabel: Thumbnail, versionable: true, MIMEType: image/jpeg, formatURI: , dsLocation: uploaded://133843, controlGroup: M, dsState: A, checksumType: DISABLED, checksum: null, logMessage: Copied datastream from islandora:20401.)  INFO 2015-10-22 10:59:58.131 [http-8080-50] (DefaultManagement) Completed getDatastream(pid: islandora:20401, datastreamID: TN, asOfDateTime: null)    [..]    As you can see, the file is uploaded two times.   The first file ""uploaded://133842"" gets the identifier ""islandora:20401+TN+TN.0"".  The second file ""uploaded://133843"" also gets the   identifier ""islandora:20401+TN+TN.0"".    This double identifier probably causes the deletion of the underlying file,  as reported in the log:    Removed purged datastream version from low level storage (token = islandora:20401+TN+TN.0)    The method ""deletePurgedDatastreams"" in DefaultDOManager  does this?  Is this behaviour intented? What can I do to prevent this?    Thanks in advance    ",legacy - Fedora,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0
FCREPO-1842,Calculate and compare alternate checksum on ingest,"I want to submit alternate checksums (SHA-256, MD5, etc) alongside deposited content and for Fedora to calculate, compare, and store a checksums matching the algorithms I've submitted.      Additionally, any user-provided digest algorithms that are not supported by Fedora should respond with a 400 status or some other indicator to the client that the digest can not be used.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1843,Allow inline transfer of binary resources,"When responding to a request for a Non-RDF Resource, Fedora always adds a ""content-disposition: attachment"" header, with filename and other details. This forces the browser to display a download dialog, making it impossible to serve/display/stream binary content directly from the repository.",f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1846,fcrepo-audit doesn't build,fcrepo-audit no longer builds. the maven config doesn't import the modeshape-jcr-api artifact. It should.,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1847,remove jcr dependencies from the kernel-api,The fedora kernel should not depend on JCR interfaces. This ticket will track the removal of all things jcr from the fcrepo-kernel-api module.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1848,remove modeshape dependency from fcrepo-jms module,The fcrepo-jms module compile-depends on the fcrepo-kernel-modeshape module. This ticket will track decoupling the two.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1849,omit ldp:contains triples for triplestore indexing,"The fcrepo-indexing-triplestore component currently includes ldp:contains triples in the serialization sent to a triplestore, but for large repositories, this can become problematic, as the request sizes are potentially very large. In principle, these triples are superfluous as a SPARQL query can use fedora:hasParent in an analogous query.    The easy solution is to simply omit the ldp:PreferContainment triples.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1850,"In the HTML UI, when binary files are uploaded, the filename property is empty","When uploading files through the HTML UI, the filename property is empty. This is because no Content-Disposition header is added.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1851,Remove deprecated 'checksum' query param,"This task is a follow-on to: https://jira.duraspace.org/browse/FCREPO-1468  The work is to remove the deprecated ""checksum"" query parameter from FedoraLdp.java in PUT and POST requests.  This task should not be worked until the deprecation period has ended: June 2016 or 4.6.0 (whichever comes first).",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1853,"Remove ""accessroles""","When any of the following Authorization modules are configured,   * RBACL  * XACML  * WebAC    ..a ""fedora:hasAccessRoles"" property [1] is created on new resources and a number of RBACL node-types [2] are registered. The ""hasAccessRoles"" service makes sense for RBACL and XACML, but not for WebAC. Since WebAC is the authorization module which we are encouraging the community to move towards, having the ""hasAccessRoles"" service exposed is incorrect and confusing.    [1] https://github.com/fcrepo4/fcrepo-module-auth-rbacl/blob/master/fcrepo-auth-roles-common/src/main/java/org/fcrepo/auth/roles/common/AccessRolesResources.java#L65  [2] https://github.com/fcrepo4/fcrepo-module-auth-rbacl/blob/master/fcrepo-auth-roles-common/src/main/java/org/fcrepo/auth/roles/common/AccessRolesTypes.java#L69    This task is to ensure that the ""hasAccessRoles"" property and the RBACL node-types are not included with WebAC is configured.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1854,exception when trying to delete containers with a large number of children," When sending an HTTP DELETE request on a container with a large number of children, the application throws an exception.     The number of children of the container where this happens cannot be easily calculated at the moment; it goes between tens of thousands to over 100k.     Command line to reproduce the error:     $ time curl -X DELETE http://localhost:8080/fcrepo/rest/prod  javax.jcr.RepositoryException: org.modeshape.common.SystemFailureException: java.lang.IllegalStateException: Transaction TransactionImple < ac, BasicAction: 0:ffffc6281b91:b590:5663c3ad:12 status: ActionStatus.ABORTED > is not in a valid state to be invoking cache operations on.      at org.modeshape.jcr.JcrSession.save(JcrSession.java:1190)      at org.fcrepo.http.api.FedoraLdp.deleteObject(FedoraLdp.java:217)      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)      at java.lang.reflect.Method.invoke(Method.java:497)      at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)      at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:151)      at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:171)      at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:152)      at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:104)      at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:384)      at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:342)      at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:101)      at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:271)      at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)      at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)      at org.glassfish.jersey.internal.Errors.process(Errors.java:315)      at org.glassfish.jersey.internal.Errors.process(Errors.java:297)      at org.glassfish.jersey.internal.Errors.process(Errors.java:267)      at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:297)      at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:254)      at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1030)      at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:373)      at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:381)      at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:344)      at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:221)      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)      at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:203)      at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)      at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501)      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)      at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)      at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)      at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)      at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)      at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)      at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)      at java.lang.Thread.run(Thread.java:745)  Caused by: org.modeshape.common.SystemFailureException: java.lang.IllegalStateException: Transaction TransactionImple < ac, BasicAction: 0:ffffc6281b91:b590:5663c3ad:12 status: ActionStatus.ABORTED > is not in a valid state to be invoking cache operations on.      at org.modeshape.jcr.cache.document.WritableSessionCache.save(WritableSessionCache.java:664)      at org.modeshape.jcr.JcrSession.save(JcrSession.java:1171)      ... 43 more  Caused by: java.lang.IllegalStateException: Transaction TransactionImple < ac, BasicAction: 0:ffffc6281b91:b590:5663c3ad:12 status: ActionStatus.ABORTED > is not in a valid state to be invoking cache operations on.      at org.infinispan.interceptors.TxInterceptor.enlist(TxInterceptor.java:389)      at org.infinispan.interceptors.TxInterceptor.enlistIfNeeded(TxInterceptor.java:351)      at org.infinispan.interceptors.TxInterceptor.enlistReadAndInvokeNext(TxInterceptor.java:345)      at org.infinispan.interceptors.TxInterceptor.visitGetKeyValueCommand(TxInterceptor.java:318)      at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:40)      at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:97)      at org.infinispan.interceptors.CacheMgmtInterceptor.visitDataReadCommand(CacheMgmtInterceptor.java:103)      at org.infinispan.interceptors.CacheMgmtInterceptor.visitGetKeyValueCommand(CacheMgmtInterceptor.java:91)      at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:40)      at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:97)      at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:102)      at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:71)      at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:86)      at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:40)      at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:336)      at org.infinispan.cache.impl.CacheImpl.get(CacheImpl.java:430)      at org.infinispan.cache.impl.CacheImpl.get(CacheImpl.java:422)      at org.infinispan.schematic.internal.CacheSchematicDb.get(CacheSchematicDb.java:77)      at org.modeshape.jcr.cache.document.LocalDocumentStore.get(LocalDocumentStore.java:71)      at org.modeshape.jcr.cache.document.WorkspaceCache.documentFor(WorkspaceCache.java:188)      at org.modeshape.jcr.cache.document.WorkspaceCache.documentFor(WorkspaceCache.java:207)      at org.modeshape.jcr.cache.document.WorkspaceCache.persistedCache(WorkspaceCache.java:414)      at org.modeshape.jcr.cache.document.WritableSessionCache.lockNodes(WritableSessionCache.java:1503)      at org.modeshape.jcr.cache.document.WritableSessionCache.save(WritableSessionCache.java:626)      ... 44 more    real    2m51.756s  user    0m0.022s  sys    0m0.013s  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1855,webapps-plus auth-master.xml file has incorrect classpath in audit import,"The auth-master.xml file located in the fcrepo-webapp-plus audit directory has an incorrect line.     <import resource=""${fcrepo.spring.jms.configuration:classpath:/spring/audit.xml}""/>    Should read:     <import resource=""${fcrepo.spring.audit.configuration:classpath:/spring/audit.xml}""/>    instead. ",f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1856,Camel Serialization Docs,This is a follow-on task to:  https://jira.duraspace.org/browse/FCREPO-1519    This task is to update the following wiki documentation page with a blurb on the new camel serialization module:  https://wiki.duraspace.org/display/FEDORA4x/Integration+Services,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1857,Replace message-consumer docs,This task is to replace the following wiki documentation with an updated version based on fcrepo-camel-toolbox:  https://wiki.duraspace.org/display/FEDORA4x/Indexer+Configuration,f4-message-consumer,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1858,The fcrepo-java-client isn't packaged as an OSGi bundle,"The http client code has been extracted from fcrepo-camel into fcrepo-java-client, but now fcrepo-camel no longer deploys in karaf. This is because the fcrepo-java-client is not built as an OSGi bundle.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1860,Implement 451,Implement the new HTTP 451 Status.    https://tools.ietf.org/html/draft-ietf-httpbis-legally-restricted-status-04,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1861,update fcrepo-camel dependencies,"The fcrepo-camel dependencies should be updated, especially those for camel and fcrepo-java-client",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1862,add site configuration for fcrepo-java-client,The fcrepo-java-client project is missing a site configuration,f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1863,Add camel-serialization to vagrant,This task is to update the fcrepo4-vagrant configuration to also install:  https://github.com/fcrepo4-exts/fcrepo-camel-toolbox/tree/master/fcrepo-serialization,f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-1864,Remove jcr dependencies from EventType enum,"The fcrepo-kernel-api EventType enum has both an explicit dependency on JCR in addition to copying JCR semantics (e.g. NODE_ADDED). These types should be defined in the ontology, and be based on Fedora semantics.    Since these events are published by the message broker, any changes to the names of the event types may require changes in the fcrepo-camel(-toolbox) code.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1865,remove javax.jcr.RepositoryException from kernel-api,The fcrepo-kernel-api code includes numerous references to javax.jcr.RepositoryException. Those parts of the code should either be moved to the fcrepo-kernel-modeshape module or replaced with a fedora-specific exception type.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1866,The kernel-api observer packages shouldn't depend on javax.jcr.observation.Event,The fcrepo-kernel-api observation module (the name of which is entirely an artifact of JCR) depends on javax.jcr.observation.Event. That code should be either replaced with a fedora-defined type or moved into the modeshape module.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1867,Version and VersionHistory types needed in fcrepo-kernel-api,"The fcrepo-kernel-api relies on javax.jcr.version.Version and javax.jcr.version.VersionHistory. If those constructs are a necessary part of the fedora API, there should be equivalent (non-JCR) types that implement these types, defined in the fcrepo-kernel-api.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1868,remove dependency on javax.jcr.Session in kernel-api,"The fcrepo-kernel-api uses the javax.jcr.Session type in numerous places. If a Session type is needed in the kernel-api, a Fedora-specific type should be created. Otherwise, uses of javax.jcr.Session should be moved to the modeshape module.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1869,FedoraResource type shouldn't return a javax.jcr.Node,"The FedoraResource type shouldn't return a javax.jcr.Node type; in those places, it should only ever return another FedoraResource.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1870,fcrepo-client should use system properties while building the client,"The HttpClient built by fedora-java-client does respect system properties. As a consequence, keystore and truststore configuration made via javax.net.ssl.* does not take effect.    Solution: Replace HttpClients.createDefault with HttpClients.createSystem.",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1871,Update fcrepo-camel-toolbox client code imports,"Update fcrepo-camel-toolbox client code imports. With FCREPO-1815, the client code were extracted to a separate project which changed the package of the code.     Note: FCREPO-1815 doesn't affect fcrepo-camel-toolbox yet, since it depends on the 4.4.0 of fcrepo-camel.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1872,javax.jcr.ItemExistsException returns a 500 and stack trace,"See: https://github.com/fcrepo4/fcrepo4/issues/957    It should be caught and a 4xx should be returned instead.    ```      STATUS: 500 javax.jcr.ItemExistsException: A node definition that allows same name siblings could not be found for the node ""{}42"" in workspace ""default""      at org.modeshape.jcr.JcrSession$JcrPreSave.processAfterLocking(JcrSession.java:2422)      at org.modeshape.jcr.cache.document.WritableSessionCache.runPreSaveAfterLocking(WritableSessionCache.java:541)      at org.modeshape.jcr.cache.document.WritableSessionCache.save(WritableSessionCache.java:614)      at org.modeshape.jcr.JcrSession.save(JcrSession.java:1166)      at org.fcrepo.http.api.FedoraLdp.createOrReplaceObjectRdf(FedoraLdp.java:301)      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)      at java.lang.reflect.Method.invoke(Method.java:606)      at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java...  ```    I think this occurs when two threads simultaneously try to create the same resource at the same time. Reported by @ojlyytinen here: https://github.com/projecthydra/sufia/issues/1362",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1873,Error occur while using REST API to perform a binary MOVE,"When trying to move a Binary, from path ""/test/image"" to ""/test/image1"", the following error occurs:  javax.jcr.nodetype.ConstraintViolationException: Unable to add child 'image1' with primary type 'nt:resource' to parent at /test with primary type 'nt:folder' and mixins fedora:Container,fedora:Resource} in workspace 'default' of repository 'repo' because:    - child's primary type 'nt:resource' does not satisfy parent's child definition: nt:folder/* (required primary types = [nt:hierarchyNode])    I'm assuming, by reading the REST API documentation (https://wiki.duraspace.org/display/FEDORA4x/RESTful+HTTP+API), that a Binary is a resource as a Container is and therefore should be possible to move (as I have tested and seen working with Containers).    How to reproduce (using fcrepo-webapp-4.[234].0-jetty-console.jar):  1) Create container  $> curl -i -X PUT ""http://localhost:8080/rest/test""    2) Create binary  $> curl -X PUT --upload-file ~/Desktop/JavaSE6\ HotSpotVirtualMachineHeapByGenerationsSchema.png -H""Content-Type: image/png"" ""http://localhost:8080/rest/test/image""    3) Move binary (i.e. rename it in this case)  $> curl -X MOVE -H ""Destination: http://localhost:8080/rest/test/image1"" ""http://localhost:8080/rest/test/image""  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1874,Logging for an exception that will be presented to the client should normally be at level ERROR.,"Currently many Exception class uses Logger.trace(), should use Logger.error()    Ref: https://github.com/fcrepo4/fcrepo4/pull/969#discussion-diff-49652816",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1875,Connection management responsiblities of FcrepoClient are unclear,"It is unclear whom is responsible for managing HTTP connections that are created by the FcrepoClient on behalf of the user.  Presumably the FcrepoClient is, but in my environment I'm running across the following issues:    1. Connections are only released if the user of FcrepoClient reads the response body.  If the user of the FcRepo client does not read the response body, the FcrepoClient eventually blocks waiting for a free connection.  2. If an FcrepoOperationFailedException is thrown, the user of FcrepoClient has no access to the response body, and cannot free the connection.  If enough exceptions are thrown, the FcrepoClient will eventually block waiting for free connections     A PR demonstrating the issue follows.    See: https://github.com/fcrepo4-exts/fcrepo-java-client/issues/5",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1876,fcrepo4 vagrant -- FEDORA_AUTH=true -- when README says it is optional,"In the fcrepo4 vagrant README:    ""(optional) to enable fedora internal audit capability, edit install_scripts/config and change the FEDORA_AUDIT variable to true.""    In the config, is it set to true:  https://github.com/fcrepo4-exts/fcrepo4-vagrant/blob/b05432eccb4d1824eeb19340c7630a08a12628fc/install_scripts/config#L18",f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-1877,LDPath transform of xsd:dateTime type results in long values,"After depositing the attached LDPath document to '/fedora:system/fedora:transform/fedora:ldpath/fedora-tx/fedora:Container', invoking this transform on a typical Fedora resource produces output like:  [{""rdfsLabel"":[""BUGS""],""rdfsComment"":[],""fedoraLastModified"":[1453880188507],""fedoraDateCreated"":[1453880188507]}]    Note that the xsd:dateTime fields are transformed to longs.",f4-transform,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0
FCREPO-1878,"On creation of LDPR, Content-Type is inappropriate to response entity","https://groups.google.com/forum/#!topic/fedora-tech/84EzwFUZvJU    [~acoburn] observes that the Accept header is always flipped to the response Content-Type, regardless of body. This is a bug. Content-Type must match the response entity if present.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1879,Prefer header should determine response entity on LDPR creation,"""Prefer: return=minimal"" should return the newly created LDPR URI in the format indicated in the Content-Type header (possibly matching the Accept request header).    ""Prefer: return=representation"" should return a representation of the newly created resource in line with a subsequent GET.    If a Prefer header is included, the response should include a Preference-Applied header.    The default behavior should be the minimal response, but not include a Preference-Applied header.    See also:  https://www.w3.org/TR/ldp/#prefer-parameters  https://tools.ietf.org/html/rfc7240  https://groups.google.com/d/msg/fedora-tech/84EzwFUZvJU/p2_moiBGBwAJ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1880,Limit child resource count,"This task is a follow-on to:  https://jira.duraspace.org/browse/FCREPO-1808    Instead of dynamically calculating the number child resources, the child count of a container should be capped to 1000.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1881,WebAC Link Header does not display for accessControl on ancestors,The WebAC link header displays on GET requests to show the effective ACL. This is currently retrieved from the triples on the current resource and therefore does not display if the ACL is on the parent of a resource even though it is under that control.  ,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1882,Missing/Incorrect HTTP Headers,"  The headers returned from RDF Sources, and particularly Containers, have a few minor issues:    - [ ] Content-Length is 0 on a HEAD, and should be the number of bytes of the representation if you had done a GET instead.  - [ ] application/ld+json is missing from Accept-Post for containers  - [ ] The Vary header is missing, even though the resources will content negotiate on at least Accept and Prefer  ",f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1883,Prune pom properties,"This task is to prune the following unnecessary properties:  * fcrepo-mint ** remove fcrepo.version property  * fcrepo-transform ** remove fcrepo.version property and fcrepo-jcr-bom  * fcrepo-audit ** remove fcrepo.mint.version, and fcrepo.version  * fcrepo-webapp-plus ** remove audit.version and transform.version, update fcrepo.version  ","f4-audit,f4-transform,f4-webapp-plus",1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0
FCREPO-1884,WebAC acl:accessTo property requires a trailing slash when the protected resource is the repsitory root,"When creating a WebAC ACL to protect the repository root, you must include a trailing slash in the Authorizations's acl:accessTo predicate, otherwise the Authorization will not match the resource's path in Fedora, and won't get applied.    The desired behavior is to allow the URI to the repository root to omit the trailing slash (e.g., <http://localhost:8080/fcrepo/rest>) but still have the Authorization apply. In other words, this should be valid:    <> a acl:Authorization ; acl:accessTo <http://localhost:8080/fcrepo/rest> .",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1885,Replace use of Pair with a type with specific semantics,There is a desire to remove the use of the Pair type from the WebAC implementation.    See the comment here: https://github.com/fcrepo4/fcrepo-module-auth-webac/pull/52#discussion_r51438412  ,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1886,Upgrade to ModeShape 4.5.0-Final,This task is to upgrade from ModeShape 4.4.0-Final to 4.5.0-Final.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1887,"Fedora4 Rest API GET Method ""Accept-Post"" header does not list all allowed supported RDF formats ","Response headers for a direct GET rest end point call (root resource) list the following RDF formats in the Accept-Post header  ..  Accept-Post: text/turtle,text/rdf+n3,text/n3,application/rdf+xml,application/n-triples,multipart/form-data,application/sparql-update  ..    But POST method allows also application/ld+json (not listed in the previous header) as valid rdf format source for new Resources:    example (tested on 4.4.x and 4.5.0) to reproduce:   $ curl -XGET http://localhost:8080/rest -v    outputs (trimmed, only headers)    * Connected to localhost (::1) port 8080 (#0)  > GET /rest HTTP/1.1  > User-Agent: curl/7.38.0  > Host: localhost:8080  > Accept: */*  >   < HTTP/1.1 200 OK  < Date: Thu, 04 Feb 2016 17:54:57 GMT  < Link: <http://www.w3.org/ns/ldp#Resource>;rel=""type""  < Link: <http://www.w3.org/ns/ldp#Container>;rel=""type""  < Link: <http://www.w3.org/ns/ldp#BasicContainer>;rel=""type""  < Accept-Patch: application/sparql-update  < Accept-Post: text/turtle,text/rdf+n3,text/n3,application/rdf+xml,application/n-triples,multipart/form-data,application/sparql-update  < Allow: MOVE,COPY,DELETE,POST,HEAD,GET,PUT,PATCH,OPTIONS  < Preference-Applied: return=representation  < Vary: Prefer  < Vary: Accept, Range, Accept-Encoding, Accept-Language  < Content-Type: text/turtle  < Content-Length: 2327  * Server Jetty(9.2.3.v20140905) is not blacklisted  < Server: Jetty(9.2.3.v20140905)    Now create a new resources using POST using application/ld+json which is not listed.    $ curl -XPOST  -H ""Content-Type: application/ld+json"" -H ""Slug:testjsonld"" --data-binary ""@jsonld.txt"" -v http://localhost:8080/rest/    jsonld.txt file content (body)  [    {      ""@id"": ""http://localhost:8080/rest/testjsonld"",      ""@type"": [        ""http://www.w3.org/ns/ldp#RDFSource"",        ""http://www.w3.org/ns/ldp#Container""      ],      ""http://purl.org/dc/elements/1.1/title"": [        {          ""@value"": ""json ld test""        }      ]    }  ]    Response (resource created):    * Connected to localhost (::1) port 8080 (#0)  > POST /rest/ HTTP/1.1  > User-Agent: curl/7.38.0  > Host: localhost:8080  > Accept: */*  > Content-Type: application/ld+json  > Slug:testjsonld2  > Content-Length: 276  >   * upload completely sent off: 276 out of 276 bytes  < HTTP/1.1 201 Created  < Date: Thu, 04 Feb 2016 17:26:24 GMT  < ETag: ""6654d7f2f741be93df0f265571ab9e1bcadbd21c""  < Last-Modified: Thu, 04 Feb 2016 17:26:24 GMT  < Location: http://localhost:8080/rest/testjsonld  < Content-Type: text/plain  < Content-Length: 38  * Server Jetty(9.2.3.v20140905) is not blacklisted  < Server: Jetty(9.2.3.v20140905)  <   * Connection #0 to host localhost left intact  http://localhost:8080/rest/testjsonld    Are there other rdf formats also available that can be used and are not listed? I guess json-ld is the only one.  ","f4-core,f4-ldp",0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1888,Error Content-Types incorrect and differ based on HTTP method,"  Issue:  The content types for errors do not match the format of the body returned.    Expected:  Content types match the media type of the returned representation    Steps to Reproduce:  * Spin up empty 4.5 repo.  * curl http://localhost:8080/rest/fcr:accessroles    Response received:  Status: 400, with Content-Type: text/turtle  Content-Length: 34  Body: Prefix fcr has not been registered    Which is text/plain, not text/turtle.    * curl -I http://localhost:8080/rest/fcr:accessroles   (HEAD not GET)    Status: 400, with ContentType: text/html  Content-Length: 308    Which is completely unrelated to what happens when you do a GET.  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1889,"Direct/Indirect Containers allow writing arbitrary triples to any resource, despite access controls","In a thought experiment, it is anticipated that by manipulating direct and indirect containers, it would allow an attacker to create arbitrary triples on any resource that they should not have write access to.    For example, if a user can create an indirect container (/a):    /a a ldp:IndirectContainer ;    ldp:insertedContentRelation rdf:object ;    ldp:membershipResource /resource/to/attack ;    ldp:hasMemberRelation xxx:predicateToCreate .    When posting a new resource:  <> a rdf:Statement ;    rdf:object /resource/to/link    Would create the triple    /resource/to/attack xxx:predicateToCreate /resource/to/link    Expected Behavior:      The creation of the resource in the indirect container should fail with a permissions / auth related error.    ",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1890,Remove /fcr:nodetypes endpoint,"In my opinion, the /rest/fcr:nodetypes has no reasonable place in the Fedora API. If there is general agreement on that point, this ticket will track the removal of that endpoint from the Fedora REST API.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1891,Remove jcr.Binary from fcrepo-kernel-api,The FedoraBinary interface contains a method that returns a jcr.Binary. That should be removed.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1892,add a Warning header to the /fcr:nodetypes endpoint,The /fcr:nodetypes endpoint should be deprecated before it is fully removed.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1893,remove jcr.AccessDeniedException from the kernel-api,The fcrepo-kernel-api makes use of the javax.jcr.AccessDeniedException. This should be replaced with an appropriate Exception in the org.fcrepo namespace.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1894,remove jcr.Property from kernel-api,The org.fcrepo.kernel.api.models.FedoraResource class has a method returning a jcr.Property. That should be removed.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1895,acl:agent in WebAC policies should be a URI not a literal,"The integration tests for the WebAC module use literals to identify acl:agents, but they should use URIs.    See https://github.com/fcrepo4/fcrepo-module-auth-webac/blob/master/src/test/resources/acls/01/authorization.ttl#L4    If the WebAC module is actually using URIs already, then the tests should be updated to reflect this.    This is intended to align the Fedora and Hydra WebAC usage.  See https://github.com/projecthydra/hydra-head/issues/313 for the Hydra Access Controls ticket created for changes there.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1896,update fcrepo-camel-toolbox dependencies,This is a ticket related to updating the camel toolbox dependencies,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1897,Add pax-exam tests to fcrepo-camel-toolbox,Set up pax exam to test the fcrepo-camel-toolbox OSGi features.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1898,Add pax-exam tests to fcrepo-karaf,Add pax-exam to validate the features.xml file,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1899,jmeter: Add initial binary upload test,"This task is to create the initial jmeter test for ""test 3"":  https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans#PerformanceandScalabilityTestPlans-Test3-Numberoffiles",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1900,Prefer Jena Node to Jena Resource,"We are using Jena's Resource type in places in which we should be using Jena's Node type. The use of Resource should be limited to places for which a genuinely natural Model context is available. Places (and APIs/SPIs) where there is no such context, or where one is artificially created just to translate Nodes into Resources should be altered to simply use Nodes.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1901,"FcrepoResponse object should manage the CloseableHttpResponse, instead of the InputStream to the underlying HttpEntity","Users of the FcrepoClient are responsible for managing the resources allocated by the FcrepoClient.  Specifically, FCREPO-1875 recommends that users of the FcrepoClient create FcrepoResponse objects within a try-with-resources block, so that any resources allocated by the FcrepoClient are released when the user is done with FcrepoResponse (FcrepoResponse implements Closeable).    Currently, the FcrepoResponse manages (i.e., will close()) the underlying InputStream of the underlying Apache CloseableHttpResponse.    It would be better if the FcrepoResponse managed the CloseableHttpResponse itself, and invoke close() on that object, instead of the underlying HttpEntity's InputStream.  This issue proposes that the FcrepoResponse manage a instance of CloseableHttpResponse instead of InputStream.    ",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1902,FcrepoResponse object should be immutable,"Considering FCREPO-1875 and FCREPO-1901, the FcrepoResponse is responsible for managing the state of the HTTP response object (if FCREPO-1901 is implemented, this is represented as a member variable containing the CloseableHttpResponse, if not, it may be represented as an InputStream to the response body).    Allowing clients to mutate that state in arbitrary ways (e.g. by setting a different response object, or modifying the status code) makes it more difficult for the FcrepoResponse to manage that state.  Ideally, the FcrepoResponse would provide accessors to necessary state, but restrict access to mutating that state.      One consideration is that methods such as FcrepoResponse#setBody(InputStream) are used throughout the unit tests, so some refactoring may be necessary, or simply reducing the visibility of the mutating methods may be sufficient.",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1904,Compare MySQL and LevelDB performance,"Now that MySQL support has been added, we should test the performance to see if it differs significantly from LevelDB.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1905,Compare MySQL and LevelDB reliability,"Now that we have MySQL support, we should verify that existing LevelDB corruption scenarios do not result in corruption with MySQL persistence.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1906,MySQL Migration Testing,Migrate backup dump from LevelDB to a Fedora repo with MySQL.    Steps:  1. Create backup dump from a Fedora with LevelDB  2. Create a Fedora with MySQL  3. Restore backup to that Fedora with MySQL  4. Verify the data consistency with these two Fedora servers.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1907,Removing federated-directory results in NullPointerException,"Once fedora is started with federation configured:  {code:JavaScript}  ""federated-directory"" : {              ""classname"" : ""org.fcrepo.connector.file.FedoraFileSystemConnector"",              ""directoryPath"" : ""/mnt/ingested"",              ""projections"" : [ ""default:/federated => /"" ],              ""contentBasedSha1"" : ""true"",              ""readonly"" : false,              ""extraPropertiesStorage"" : ""none"",              ""cacheTtlSeconds"" : 5          }  {code}  Then once nodes under the federated node were visited via the browser and then fedora is restarted without the federation configured.    Then visiting: {{http://localhost:8983/fedora/rest/federated/}} results in a Java {{NullPointerExeption}} (""java.lang.NullPointerException at org.modeshape.jcr.JcrSession.node..."") as opposed to a 404 not found.    Visiting any node below the federated node({{http://localhost:8983/fedora/rest/federated/subfolder}}) results in a similar {{NullPointerException}} (java.lang.NullPointerException at org.modeshape.jcr.JcrSession.cachedNode...)* I'm not sure if this is simply because the "".../federated/..."" node isn't available or if fedora kept some extra reference to the subfolder node around too.    *see attached file(s) for full trace   See: https://github.com/fcrepo4/fcrepo4/issues/980",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1908,Maintain child resource count - Federation,"Instead of dynamically calculating the number child resources of a federated resource, a container attribute should be maintained.    From: https://wiki.duraspace.org/display/FF/2016-02-11+-+Fedora+Tech+Meeting  ====  There is a child count property we could use - it does not indicate whether those children are in repository or federated storage  Could we use a listener to listen for federated changes and update the property in Modeshape?  Record number of children, bytes, and a timestamp and us a TTL to update at periodic intervals  Not sure if we could override the way the federated filesystem gets queried for its contents  We could pursue one solution for in-repository content and another solution for federated resources  Both solutions should use and maintain the same property  ====",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1916,Add support for PostgreSQL,None,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1917,Propose a better package structure for fcrepo modules,The package structure in the core fcrepo-* modules contain a number of circular dependencies. These can be seen here: http://sonar.fcrepo.org/design/index/org.fcrepo:fcrepo    This affects fcrepo-kernel-api to a small degree and fcrepo-kernel-modeshape to a large degree. This task is to propose a better structure and organization of these modules and will likely result in renaming and/or consolidating certain packages.    A document for discussing this proposal can be found here: https://docs.google.com/document/d/1MhgircKQWOLCrj9xWBStY0YAPYclt6EmQu3wn4_Pp2Y/edit?usp=sharing,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1918,fcrepo4-vagrant: Ensure all configurations use F4 webapp with fcr:transform,"This task is to update the fcrepo4-vagrant configuration to download an F4 webapp artifact that contains /fcr:transform but not audit nor auth.  https://github.com/fcrepo4-exts/fcrepo4-vagrant/blob/master/install_scripts/fedora4.sh#L23-L24    Such an artifact can be built from fcrepo-webapp-plus with the following command:  mvn clean install -P\!audit,\!webac    For 4.5.1-SNAPSHOT, such an artifact is available here:  https://github.com/fcrepo4-exts/fcrepo-webapp-plus/releases/download/fcrepo-webapp-plus-4.5.1-SNAPSHOT/fcrepo-webapp-plus-4.5.1-SNAPSHOT.war",f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-1919,fcrepo.camel.fixity does not install correctly on fcrepo4_vagrant,==> default: Failed to get the session.  ==> default: Failed to get the session.  ==> default: sed: can't read /opt/karaf/etc/org.fcrepo.camel.fixity.cfg: No such file or directory  ==> default: sed: can't read /opt/karaf/etc/org.fcrepo.camel.fixity.cfg: No such file or directory  ,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1920,PropertyConverter logs a WARN error for every triple when there are no user-defined namespaces,"PropertyConverter logs a WARN message when there is a namespace mismatch between the system-determined namespace and the user-supplied namespace.  But if there are no user-defined namespaces (e.g. using n-triples), it logs the warning for every triple added.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1921,Replace RdfContext enum with interfaces,"As part of FCREPO-1312, an RdfContext enum was introduced in order to specify the kinds of RDF generation that a kernel implementation must support and decouple the HTTP layers from the ModeShape implementation. In particular, the FedoraResource::getTriples method now accepts values from this RdfContext enum. While this works, it prevents extending the existing set of RdfContexts.    Instead of having FedoraResource::getTriples accept one or more enum values, it should use a system of interfaces, which would make it possible to extend the set of RDF generation contexts.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1922,"Documentation: On creation of LDPR, Content-Type is inappropriate to response entity",This task is to update the REST API documentation to detail the usage introduced in:  https://jira.duraspace.org/browse/FCREPO-1878,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1924,update FedoraResource::getChildren to use a Stream,"In the move toward Java8 idioms and structures, it would be helpful if the FedoraResource::getChildren method returned a Stream rather than an Iterator.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1926,change JcrPropertyFunctions::property2values function to return a Stream,The JcrPropertyFunctions::property2values returns an Iterator. It would be convenient if that returned a Stream instead.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1927,Documentation: Add support for PostgreSQL,"This task is to create a documentation wiki page for setting up a PostgreSQL integration, along the lines of:  https://wiki.duraspace.org/display/FEDORA4x/Configuring+MySQL+Object+Store",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1928,PUT request should default to Prefer:handling=lenient,"PUT request with non server-managed triples in payload fails.    Steps to reproduce:    $ curl -i -X PUT https://lmyrepo.edu/fcrepo/rest/test/testput   HTTP/1.1 201 Created  Date: Thu, 25 Feb 2016 15:27:46 GMT  Server: Apache-Coyote/1.1  ETag: ""e74f03e5f3a1784d15decb8eefec68f7bd281af3""  Last-Modified: Thu, 25 Feb 2016 15:27:46 GMT  Location: https://myrepo.edu/fcrepo/rest/test/testput  Content-Type: text/plain; charset=UTF-8  Content-Length: 55  Connection: close    https://myrepo.edu/fcrepo/rest/test/testput    $ curl -i -X PUT -H'Content-Type:text/turtle' --upload-file minimal.ttl https://myrepo.edu/fcrepo/rest/test/testput   HTTP/1.1 100 Continue    HTTP/1.1 100 Continue    HTTP/1.1 409 Conflict  Date: Thu, 25 Feb 2016 15:27:51 GMT  Server: Apache-Coyote/1.1  Link: <https://myrepo.edu/static/constraints/ServerManagedTypeException.rdf>; rel=""http://www.w3.org/ns/ldp#constrainedBy""  Content-Type: text/plain; charset=UTF-8  Content-Length: 112  Connection: close    The repository type (http://fedora.info/definitions/v4/repository#Container) of this resource is system managed.    Content of 'minimal.ttl':    @prefix xsd: <http://www.w3.org/2001/XMLSchema> .  @prefix dc: <http://purl.org/dc/elements/1.1/> .  <> dc:title ""Hello""^^xsd:string .    For what I understand, omitting server-managed properties for an existing resource should just leave those properties unchanged, right?  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1929,A GET request with Prefer=minimal should return all user-persisted information of relevance,"Currently, a GET request to an RDF resource with Prefer=minimal returns only triples with the subject that is the exact URI of the resource. Instead, it is more logical and useful to return those triples, and all triples that have subjects that are hash-URIs on the URI of the resource or blank nodes that were created by action against the resource. In short, the user should get back all user-managed triples (as the complement of server-managed triples).",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1932,Refactor use of translator.reverse...,"This task is to refactor the use of ""translator().reverse().convert(resource()).asNode()"" in the hierarchy of classes rooted at:  FedoraBaseResource.java",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1933,WebAC fails in BatchOperations,This task is to resolve the issue of the LinkHeaderProvider throwing a 404 in the context of a batch operation.   The issue was introduced with:  https://jira.duraspace.org/browse/FCREPO-1795    ..and commit:  https://github.com/fcrepo4/fcrepo-module-auth-webac/commit/6d7f196f1146378a171d81a44a8cb0454e068be8#diff-d0dbcb31e45df8a047776645dcc10cfbR73    To reproduce:  - Build and deploy fcrepo-webapp-plus with webac and optionally audit configured  - Start a transaction in the HTML UI  - Create a container... BOOM!,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1934,remove dependency on modeshape/jcr internal types in template rendering,"The HTML template rendering code is based on internal JCR and Modeshape types (primaryType, mixinType). This dependency should be eliminated and instead be based on RDF types. This change will be one more step toward making it possible to have alternate Fedora implementations.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1935,remove internal jcr/modeshape types from RDF generation,"At present, the modeshape internal types (primaryType, mixinType) are part of the (server managed) FedoraResourceImpl::getTriples response. These triples are then filtered out in the HTTP layer so they do not appear in client responses. These internal types are currently used by the HTTP layer to determine the correct Template to use. Once FCREPO-1934 is resolved, this will no longer be necessary, and the triples should not be generated in the first place. This applies especially to org.fcrepo.kernel.modeshape.rdf.impl.RdfTypeContext and org.fcrepo.kernel.modeshape.FedoraResourceImpl::getTypes",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1936,Remove JCR-sourced properties from ontologies,"See:    https://jira.duraspace.org/browse/FCREPO-1805?focusedCommentId=48456    ""As a side note, the current F4 ontology contains a number of JCR-specific properties that should be evaluated: frozenMixinTypes, frozenPrimaryTypes, frozenUuid, hasNodeType, mixinTypes, primaryType, uuid, UnmappedType, hasDefaultWorkspace, hasWorkspace, hasWorkspaces. There may be others in this category, but those jumped out at me.""    Those properties (and any others that exist solely to expose JCR-specific information) should be removed from the Fedora ontologies.",f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1937,MOVE not emitting complete events,This task is to ensure that NODE_MOVED and NODE_REMOVED events are published on HTTP/MOVE requests.    See: https://groups.google.com/d/msg/fedora-tech/wiwKt7QZSY8/fO5ipdl4AQAJ,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1939,The repository root should be a fedora:Resource,The repository root should contain the following types: fedora:Resource and fedora:Container.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1940,Refactor fedora ontology class names into constant values,"The code base contains a lot of REPOSITORY_NAMESPACE + ""Resource"" statements. Those should be refactored into constants in org.fcrepo.kernel.api.RdfLexicon.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1941,"Determine the drawbacks, if any, of defaulting to lenient handling of PUT updates",None,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1942,Error: GET version of container with versioned child,"This task is to resolve the bug demonstrated below:  clear;curl -i -XPUT localhost:8080/rest/collection  clear;curl -i -XPUT localhost:8080/rest/collection/child  clear;curl -i -XPOST -H""slug: v0"" localhost:8080/rest/collection/child/fcr:versions  clear;curl -i -XPOST -H""slug: v0"" localhost:8080/rest/collection/fcr:versions  clear;curl -i localhost:8080/rest/collection/fcr:versions/v0  => BOOM!  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1944,404 on GET version after Deletion of contained resource,"This bug is seen when a container contains another resource, the container is versioned, the child resource is deleted, then the previously created container version is retrieved.  The following requests demonstrate the error.    curl -i -XPUT localhost:8080/rest/collection  curl -i -XPUT -H""Content-Type: application/pdf"" --data-binary @book.pdf localhost:8080/rest/collection/book.pdf  curl -i -XPOST -H""slug: v0"" localhost:8080/rest/collection/fcr:versions  curl -i  localhost:8080/rest/collection/fcr:versions/v0  curl -i -XDELETE localhost:8080/rest/collection/book.pdf  curl -i  localhost:8080/rest/collection/fcr:versions/v0  ** BOOM! 404      Note: In the case where the child resource is a binary, it appears that the binary is not moved to the ""fcrepo.binary.directory/trash"" when it is deleted, implying that there is still a reference to the binary... which would indicate that the 404 is at the Fedora level, and that Modeshape may still enable restoring the child resource from the container version. ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1945,Node Properties should not be included in JMS events,The JMS events emitted by Fedora should not contain the list of changed properties. These are not used by any of the camel machinery and they are particularly troublesome in the context of ldp membership and containment (which are not currently included in JMS events anyway). Removing them will save a lot of work.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1946,minor refactoring of WebAC module,"The WebAC module could use some minor refactoring, to tighten and simplify the code base.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1947,Performance and Scalability Test Plans -- Create a JMeter test for: Test 5 - Number of containers - RDF bodies,"Create a JMeter test for Test 5 - Number of containers - RDF bodies (https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans)    The test should:    * Create containers with POST requests with RDF bodies at the top of the repository    * After every 1000 requests, performance requests should be made    The fcrepo-jmeter GitHub repo is available here: https://github.com/fcrepo4-labs/fcrepo4-jmeter",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1948,Performance and Scalability Test Plans - Run: Test 1 - Size of files - large,"This task is to run ""Test 1 - Size of files - large"" in a variety of environments.    The results of running this test should be documented as a child page here: https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans    See these two examples for formatting:    * https://wiki.duraspace.org/display/FF/Results+-+Test+4    * https://wiki.duraspace.org/display/FF/UW+Madison+Results+-+Test+4",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1949,Performance and Scalability Test Plans -- Create a JMeter test for: Test 6 - Number of mixed resources - files and containers,"Create a JMeter test for Test 6 - Number of mixed resources - files and containers    The test should:    * Create a mix of resources representative of a typical LDP model including containers and files    * After every 1000 requests, performance requests should be made    The fcrepo-jmeter GitHub repo is available here: https://github.com/fcrepo4-labs/fcrepo4-jmeter",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1950,Performance and Scalability Test Plans - Run: Test 2 - Size of files - small,"This task is to run ""Test 2 - Size of files - small"" in a variety of environments.    The results of running this test should be documented as a child page here: https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans    See these two examples for formatting:    * https://wiki.duraspace.org/display/FF/Results+-+Test+4    * https://wiki.duraspace.org/display/FF/UW+Madison+Results+-+Test+4",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1951,Performance and Scalability Test Plans - Run: Test 3 - Number of files,"This task is to run ""Test 3 - Number of files"" in a variety of environments.    The results of running this test should be documented as a child page here: https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans    See these two examples for formatting:    * https://wiki.duraspace.org/display/FF/Results+-+Test+4    * https://wiki.duraspace.org/display/FF/UW+Madison+Results+-+Test+4",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1952,Performance and Scalability Test Plans - Run: Test 4 - Number of containers - default,"This task is to run ""Test 4 - Number of containers - default"" in a variety of environments.    The results of running this test should be documented as a child page here: https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans    See these two examples for formatting:    * https://wiki.duraspace.org/display/FF/Results+-+Test+4    * https://wiki.duraspace.org/display/FF/UW+Madison+Results+-+Test+4",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1953,Performance and Scalability Test Plans - Run: Test 5 - Number of containers - RDF bodies,"This task is to run ""Test 5 - Number of containers - RDF bodies"" in a variety of environments.    The results of running this test should be documented as a child page here: https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans    See these two examples for formatting:    * https://wiki.duraspace.org/display/FF/Results+-+Test+4    * https://wiki.duraspace.org/display/FF/UW+Madison+Results+-+Test+4",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1954,Performance and Scalability Test Plans - Run: Test 6 - Number of mixed resources - files and containers,"This task is to run ""Test 6 - Number of mixed resources - files and containers"" in a variety of environments.    The results of running this test should be documented as a child page here: https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans    See these two examples for formatting:    * https://wiki.duraspace.org/display/FF/Results+-+Test+4    * https://wiki.duraspace.org/display/FF/UW+Madison+Results+-+Test+4",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1955,change AccessRolesProvider::getRoles to return a Collection instead of a List,"The AccessRolesProvider::getRoles method relies on a List, but there is no reason it can't be a Collection, which would give implementing code more flexibility.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1956,Performance and Scalability: Automate execution of JMeter tests via AWS,"The JMeter tests being created to gauge Fedora performance and scaling capability [1] need to be run to be useful. To provide the greatest value, these tests need to be run repeatedly, in the same environment, as changes to Fedora are made, as this will allow for greater insight into how changes to the system affect performance and scale metrics.    This task is to automate the execution of the JMeter tests using Amazon Web Services as the consistent environment. This will allow anyone to be able to run these tests. Using AWS also provides the option to hook these tests into an automated build/test environment (Jenkins, Travis CI, etc), however that work is not a part of this task.    [1] https://wiki.duraspace.org/display/FF/Performance+and+Scalability+Test+Plans",f4-jmeter,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1957,Replace Guava Converters with a more appropriate Fedora-specific interface.,"The Fedora codebase relies heavily on Guava Converter classes, especially for converting resource identifiers. This implementation, however, is verbose and confusing. This is a ticket to track the replacement of these Converter-based classes with a Fedora-specific interface.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1959,Update to Guava 19,Guava has released a version 19:  https://github.com/google/guava/wiki/Release19  We should use it.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1960,RDF expression for events,"Fedora should publish as part of the ontologies a system of classes and predicates (mostly reusing extant work) for the encoding of published events, such as appear on the Java API's event bus and are currently translated into JMS. Of course, the JMS event tap should also _use_ this encoding.","f4-core,f4-ontology",0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1961,Use Guava utilities for proxying,Guava offers utilities:    https://github.com/google/guava/wiki/ReflectionExplained#dynamic-proxies    that make dynamic proxy classes more readable and predictable. We ought to use them. The example available is org.fcrepo.kernel.modeshape.TxAwareSession.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1963,LDP Batch Implementation,Implement LDP Batch functionality as specified in expired IETF draft: https://tools.ietf.org/id/draft-snell-http-batch-00.html    Possibly relevant is the Fedora batch processing functionality removed in this PR: https://github.com/fcrepo4/fcrepo4/pull/519,f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1965,Make fedora-transform not create direct to the JCR,Follow on to https://jira.duraspace.org/projects/FCREPO/issues/FCREPO-1832.    This is remove the custom node types generated direct on the JCR and use normal FedoraResources instead.,f4-transform,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0
FCREPO-1966,Deprecate NodeTypes feature,This task is to mark the /fcr:nodetypes (FedoraRepositoryNodeTypes) as deprecated.    Related to: https://jira.duraspace.org/browse/FCREPO-1890,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1967,Remove references to fcrepo-camel-webapp,This task is to remove references from fcrepo-camel-toolbox leading to fcrepo-camel-webapp.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1968,include all fedora-namespaced properties in deluxe transformation,"The default LDPath transformation includes a minimal set of server-managed properties. It should contain all of them, including some additional rdf/rdfs/skos/dc/dcterms properties.",f4-transform,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0
FCREPO-1970,update fcrepo-camel dependencies,The integrations tests for camel still use Fedora 4.4.0. This and other dependencies should be updated.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1971,update fcrepo-camel-toolbox dependencies,Update core dependencies for fcrepo-camel-toolbox,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1972,fcrepo-camel(-toolbox) documentation pages can use a facelift,The docs at http://fcrepo4-exts.github.io/fcrepo-camel/ and http://fcrepo4-exts.github.io/fcrepo-camel-toolbox/ should be themed in a manner consistent with http://docs.fcrepo.org,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1973,RDF integration test error on Windows:  testBibframe,"The following RDF integration test error occurs when attempting to build fcrepo4 on Windows:    Running org.fcrepo.integration.rdf.BibframeIT  INFO 21:03:32.431 (FedoraLdp) PUT resource 'e11962b5-6f4e-4e8a-ae46-673b905ea6d4'  ERROR 21:03:32.448 (WildcardExceptionMapper) Exception intercepted by WildcardExceptionMapper: java.nio.charset.MalformedInputException: Input length = 1    Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.069 sec <<< FAILURE! - in org.fcrepo.integration.rdf.BibframeIT  testBibframe(org.fcrepo.integration.rdf.BibframeIT)  Time elapsed: 0.067 sec  <<< FAILURE!  java.lang.AssertionError: Didn't get a CREATED response! expected:<201> but was:<500>    org.junit.Assert.fail(Assert.java:88)    org.junit.Assert.failNotEquals(Assert.java:743)    org.junit.Assert.assertEquals(Assert.java:118)    org.junit.Assert.assertEquals(Assert.java:555)    org.fcrepo.integration.rdf.AbstractIntegrationRdfIT.checkResponse(AbstractIntegrationRdfIT.java:156)    org.fcrepo.integration.rdf.AbstractIntegrationRdfIT.createLDPRSAndCheckResponse(AbstractIntegrationRdfIT.java:63)    org.fcrepo.integration.rdf.BibframeIT.testBibframe(BibframeIT.java:69)    Full build output:  https://gist.github.com/sprater/c10dd909b3790ee8a2e408d35bdd9a2",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1974,Unable to display versioned binary resource metadata page in web UI,"In the web UI, if you click on the link to a versioned binary resource in the resource's versions list, the binary content displays, not the versioned resource that holds the content.  As a result, it is impossible through the UI to roll back to a previous version of the binary resource.    If you add ""/fcr:metadata"" to the end of the version URL, then the resource metadata appears correctly, and you can roll back to the previous version.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1975,Response to GET of versioned binary resource lacks Link:describedby header,"Here's the header when I GET the binary node URI:     Link: <http://localhost:8983/fedora/rest/dev/8f/49/84/e2/8f4984e2-5fbc-4e6f-bbc1-6b392b580f2a/content/fcr:metadata>; rel=""describedby""     When I request the binary URI under a version (http://localhost:8983/fedora/rest/dev/8f/49/84/e2/8f4984e2-5fbc-4e6f-bbc1-6b392b580f2a/fcr:versions/87a0a8c317f1e7e3193515-7815-4475-8950-95698c75d2e1/content), the describedby link is absent, although the correct info under the predicate http://www.iana.org/assignments/relation/describedby exists at {version_uri}/fcr:metadata.     [See also fedora-tech https://groups.google.com/d/topic/fedora-tech/2MIgi-i6HPU/discussion]    The inconsistency of responses causes consuming applications to assume the metadata node for the vesrioned binary is located at '/fcr:metadata'.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1976,ldp:contains can be asserted via hasMemberRelation,"If you set up a Direct or Indirect Container, with a memberRelation of ldp:contains, then F4 will happily go ahead and add the triple to the membershipResource.  As everything is a Container, you can mess with consistency in a horrible way with this, resulting in children with multiple parents.     ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1977,Add Warning header to deprecated /fcr:import and /fcr:export endpoints,"The /fcr:import and /fcr:export endpoints are deprecated and so before they are removed, there should be a release in which a ""Warning"" header indicates that they will be removed.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1978,Upgrade vagrant fuseki version,None,f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-1979,Gracefully reject character encodings other than UTF-8 in HTTP requests,"Some platforms (such as Windows) may send client requests with encodings other than UTF-8.  The Fedora HTTP service should detect non-UTF8 requests, and handle them gracefully.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1980,reindexing broken,"I just installed the fcrepo-camel 4.4.1 and toolbox-features 4.5.0 (thank you Aaron Coburn et al.!) into Karaf. I am getting an odd error when I try to POST to the fcrepo-reindexing route's REST endpoint:  $ curl -XPOST http://fcrepodev.lib.umd.edu:9080/reindexing -H'Content-Type: application/json' -d '[""activemq:queue:solr.reindex""]'  java.net.MalformedURLException: no protocol: /reindexing    java.net.URL.<init>(URL.java:586)    java.net.URL.<init>(URL.java:483)    java.net.URL.<init>(URL.java:432)    org.fcrepo.camel.reindexing.RestProcessor.process(RestProcessor.java:59)  [snipped rest of stack trace]  If I try appending a specific path after the ""/reindexing"", I just get a 404:  $ curl -XPOST http://fcrepodev.lib.umd.edu:9080/reindexing/tmp -H'Content-Type: application/json' -d '[""activemq:queue:solr.reindex""]'  <html>  <head>  <meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8""/>  <title>Error 404 Not Found</title>  </head>  <body><h2>HTTP ERROR 404</h2>  <p>Problem accessing /reindexing/tmp. Reason:  <pre>    Not Found</pre></p><hr><i><small>Powered by Jetty://</small></i><hr/>    </body>  </html>  I also noticed that this version of the reindexer is binding to the host's external IP address rather than to localhost as I remember it doing before. I don't know if that is connected to the MalformedURLException.    See: https://groups.google.com/d/msg/fedora-tech/UVgpuCaIy4w/6Y06c8rXAwAJ",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1981,Create Version web UI fails on Firefox browsers,"When you click on ""Create Version"" for a resource (binary or container, named or unnamed version) in the Firefox web browser, the results page just shows the single word ""false"".    The URL in the navigation bar is ""javascript:createVersionSnapshot()"".    The version is created on the server, but some WARNings are thrown:    INFO 14:20:51.702 (FedoraVersioning) Request to add version 'version.201647142051' for 'x2'  WARN 14:20:51.736 (DefaultMessageFactory) MessageFactory event UserData is empty!  WARN 14:20:51.742 (DefaultMessageFactory) MessageFactory event UserData is empty!  WARN 14:20:51.749 (DefaultMessageFactory) MessageFactory event UserData is empty!",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1982,Make jQuery.ajax calls consistent,We should go through the common.js and make the implementation of jQuery.ajax consistent.    Some cases use error: (https://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-http-api/src/main/resources/views/common.js#L214) others use .fail() (https://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-http-api/src/main/resources/views/common.js#L242)    Most everyone does a return false; but in at least one instance the (as I understand it) more correct event.preventDefault(); is also used (https://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-http-api/src/main/resources/views/common.js#L173)    A single method will ensure that certain actions don't fail for certain browsers.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1983,Binary resources do not refresh in web UI after a property is modified/added/deleted,"The web UI does not refresh the binary resource /fcr:metadata display page after a binary resource property is added.  In order to see the update to the property reflected, you must force a non-cached reload of the page with Shift+refresh.    This may be related to the etag issue described in FCREPO-1498.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1984,Exception thrown when spaces are put in version identifiers (web UI),"The following exception is thrown and a stack trace is returned when you create a version with a space in the version name in the web UI:        com.hp.hpl.jena.shared.InvalidPropertyURIException: http://localhost:8080/rest/x1/fcr:versions/version 1           at com.hp.hpl.jena.rdf.model.impl.PropertyImpl.checkLocalName(PropertyImpl.java:67)    Full stack trace:  https://gist.github.com/sprater/87554446460660bf957703f33476449e    In addition, the server reports the following warnings and errors:        INFO 16:11:47.567 (FedoraVersioning) Request to add version 'version 1' for 'x1'      WARN 16:11:47.602 (DefaultMessageFactory) MessageFactory event UserData is empty!      WARN 16:11:47.648 (DefaultMessageFactory) MessageFactory event UserData is empty!      WARN 16:11:47.658 (DefaultMessageFactory) MessageFactory event UserData is empty!      ERROR 16:11:47.696 (WildcardExceptionMapper) Exception intercepted by WildcardExceptionMapper: http://localhost:8080/rest/x1/fcr:versions/version 1      This seems to be display issue, as the same exception is thrown on any subsequent attempt to create a version on the same resource;  the version appears to be created, but the /fcr:versions data cannot be returned and displayed, due to the exception caused when trying to retrieve the version with the space in the name.    Steps to reproduce:    1.  Create a resource (binary or container)  2.  Type ""version 1"" in the ""Create version snapshot"" text field  3.  Click ""Create version"" button    At this point, the stack trace should be returned.    4.  Go back with the browser's back button, and attempt to create another version, with any name (or with an auto-generated name)    The stack trace is shown again.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1985,Hash URIs are not properly cleaned up,"Hash URIs are not properly cleaned up. For example:    INSERT {    <> dc:creator <#creator>.    <#creator> a foaf:Person ; foaf:name ""me"" .  } WHERE { }    Now delete the properties of the hash URI (but not the <> dc:creator <#creator> triple):    DELETE WHERE { <#creator> ?p ?o . }    Now I get a 404 for the container even though it is still listed in the parent container. (I can delete the container with CURL, but the HTML UI is useless).    The issue has to do with the removeEmptyFragments function in FedoraResourceImpl and the way it deletes the ""#"" node if it doesn't contain any properties. But doing so results in a jcr.ItemNotFoundException because of the existence of the `<> dc:creator <#creator>` triple (and possibly other references).",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1986,Hash URIs are not displayed in HTML UI,The velocity template for containers does not display HASH URI nodes. These nodes are present in the RDF serialization.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1987,Cannot create HASH URIs on Binary descriptions,It does not seem possible to create hash URIs on non-rdf source descriptions.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1988,InternalAuditor logging SEVERE error when objects are created,See mailing list report: https://groups.google.com/d/msg/fedora-tech/Z9b1HCjjrFU/BZRljSGWBQAJ,f4-audit,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1991,"charset isn't set in Content-Type headers, leading to mangled unicode","The Content-Type headers do not set the encoding to utf-8, causing unicode values to become mangled in external applications, such as the triplestore.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1992,Move fcrepo-connector-file module to fcrepo4-labs git repo,None,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1993,PATCH content must be assumed always to be UTF-8,"The Sparql-update spec is clear that the content type encoding must always be UTF-8: https://www.w3.org/TR/sparql11-update/#mediaType    But fedora reads the inputstream without specifying an encoding, meaning that  it will be read ""using the default character encoding of the platform.""    See: https://git.io/vwkyC",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1994,Upgrade to Modeshape 5.0.0.Final,This task is to upgrade the internal version of Modeshape to 5.0.0.Final:  http://docs.jboss.org/modeshape/5.0.0.Final/release.html,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1995,Replace java.util.Date with java.time classes,"Uses of java.util.Date/java.util.Calendar should be replaced with equivalent java.time.* classes. Need I go on?    This is particularly important for the kernel-api, which will have implications for the modeshape implementation.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1996,Should we use a binary's SHA1 as its ETag?,"We currently use last-modified dates to generate weak ETags.  And this PR aims to make binaries and their descriptions have a single last-modified date and thus ETag: https://github.com/fcrepo4/fcrepo4/pull/1022    We could use a binary's SHA1 as its ETag, which would avoid invalidating caches when a property changed but the content did not.    Should we use a binary's SHA1 as its ETag?  Do we need to provide separate last-modified timestamp for binaries too?",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-1997,JCR leakage through Tombstone,"This task is to remove the leaked JCR details exposed when GETting a tombstone.  To reproduce:  - curl -XPUT localhost:8080/rest/collection  - curl -XDELETE localhost:8080/rest/collection  - curl -XGET localhost:8080/rest/collection  ---  Discovered tombstone resource at /collection {jcr:createdBy=bypassAdmin, jcr:primaryType=fedora:Tombstone, jcr:created=2016-04-17T12:45:49.151-04:00}  ---    As a follow-on ticket, an HTML UI view for tombstones should be created.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2000,Enable the checkstyle plugin on projects that don't use it,The following projects do not have checkstyle enabled:    fcrepo-transform    This is a ticket to track adding the maven plugin.,f4-transform,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0
FCREPO-2002,Investigate Memory Consumption over Time,"This task is to use YourKit (or the like) to monitor Fedora's memory consumption and associated performance slowdown. It has been noted during York University scalability tests, that after loading ~2.5million resources, Fedora became effectively too slow for use.   https://wiki.duraspace.org/display/FF/York+University+Results+-+Test+4    However, after restarting Fedora's Tomcat, ingests were resumed at the initial response rates.    Also see: https://jira.duraspace.org/browse/FCREPO-1812",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2003,Add Snapshot repository to fcrepo-transform,This task is to enable builds of fcrepo-transform even when the local m2 repository has been deleted.,f4-transform,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0
FCREPO-2004,Create a new release for fcrepo-build-tools and update fcrepo-parent to use it,"fcrepo-build-tools has been updated and so a 4.4.1 release should be made. Subsequently, the fcrepo-parent module should be updated to use this new version.    At that point, developers will have the option of writing more concise test code by collapsing the declaration of multiple values into a single line.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2005,Default activemq configuration results in dropped messages to fcrepo-camel-indexing-triplestore under load.,"In the default activemq configuration a ConstantPendingMessageLimitStrategy is used to limit messages on the topic to 1000.     http://activemq.apache.org/slow-consumer-handling.html    In the camel toolbox the fcrepo-camel-indexing-triplestore connects to that topic and in my case at least, is slower to process those messages than fedora is generating them and for large batch ingests a bunch get dropped leaving the triplestore in a worthless state.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2006,OWL Reasoning in Fuseki / Vagrant,"This task is to add OWL reasoning to the Fuseki installation on fcrepo4-vagrant.  The immediate driving use case is to allow fcrepo-indexing-triplestore to ""omit"" ""http://www.w3.org/ns/ldp#PreferContainment"" (i.e. ldp:contains) triples but still be able to infer the same relationships via:  -----  INSERT {    fedora:hasParent owl:inverseOf ldp:contains .   } WHERE {}  -----  These Fuseki updates will likely occur in fcrepo4-vagrant-base-box:  https://github.com/fcrepo4-exts/fcrepo4-vagrant-base-box    The completion of this ticket should also include rolling back:  https://github.com/fcrepo4-exts/fcrepo4-vagrant/pull/41",f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2007,Document Vagrant Customizations,This task is to document in the fcrepo4-vagrant/README.md the specific customizations that have been made in the fcrepo4-vagrant installation.,f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2009,Clean up RdfLexicon,"RdfLexicon.java contains reference to certain non-existent properties (e.g. ldp:pageOf or ldp:firstPage). These do not appear in the LDP ontology, nor are they used in the fcrepo code. These and other such properties should be examined for possible exclusion from this file. For instance, fedora:hasChild appears not to be used anywhere except in test code.    Also, the JCR- and MODE-related namespaces and properties should be removed. If they are needed in other portions of the code base, they should be added to the fcrepo-kernel-modeshape module.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2013,Support authentication for JMS connections,"The camel toolbox applications can be configured to connect to a local or remote broker. Remote brokers, however, may require authentication, so it would be helpful if the osgi configuration supported options for that.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2014,update fcrepo-camel-toolbox dependencies,Update the fcrepo-camel dependency.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2015,Setup Github pages for fcrepo-transform,The mvn site-deploy goal for fcrepo-transform completes successfully but does not generate nor upload any release documentation to Github.    It was probably never setup after the module was pulled out of fcrepo4.    This task is to get that setup.,f4-transform,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0
FCREPO-2016,Move karaf-based integration testing out of fcrepo-camel projects,"The current KarafIT tests in the fcrepo-camel-* projects is testing the Karaf feature. This sort of testing has been moved to the fcrepo-camel-tests projects, and so it can be substantially refactored (or removed) from the fcrepo-camel and fcrepo-camel-toolbox projects.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2017,Change activemq bean into an osgi service,"The current camel toolbox services define an activemq bean directly in the blueprint configuration. If Fedora begins to support multiple messaging systems  and protocols, it would be much better to externalize that as a generic OSGi ""queuing"" service. This has several advantages: first, it means that all message broker configuration can be centralized, and second, it means that the JMS service can be dynamically swapped out for AMQP, Kafka, etc, etc.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2018,make it possible to configure the camel component's baseUrl component-wide,"It would be convenient to be able to configure the baseUrl (repository root) value in the fcrepo-camel component in such a way that all endpoints use that URL. This would allow, for instance, the ability to expose the fcrepo component as an OSGi service used by multiple camel contexts, while allowing users to configure the fcrepo endpoint centrally.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2019,Use Robust Links in HTML views,"http://robustlinks.mementoweb.org/spec/    is a new approach to adding durability to HTML links. As a matter of practice and example, we should use this technique in the links in Fedora's HTML views, as possible.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2020,Non-release Vagrant versions are not useful,"After a Fedora relase, fcrepo4-vagrant is then tied to the SNAPSHOT version. However those artifacts are generally not recreated during the development cycle. Therefore there is no difference between the release and the post-release artifacts.    Therefore it makes sense that fcrepo4-vagrant should only be updated at a release of Fedora and left there until the next release.    Tagging [~nruest] for thoughts?",f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2021,the java client's dependency on mockserver-netty isn't scoped to test,"The maven configuration should be adjusted so that the dependency on mockserver-netty is scoped to ""test"".",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2022,HEAD on a binary with and external-body mime type should redirect,"When performing a GET on a resource with Mime-Type: external-body, it returns a 302 redirect.  But doing a HEAD on the same resource returns 200.  It should also redirect.",f4-ldp,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2023,Make use of the EventBus instead of using Thread.sleep(...) in integration tests,"The integration testing suite, especially FedoraLdpIT (fcrepo-http-api) makes use of Thread.sleep(...) when it could make use of the internal EventBus.  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2024,"Using webac, users in the ""fedoraUser"" group may not perform sparql updates that would result in the registration of new namespace prefixes.","As a ""fedoraAdmin"" user I carefully set up a container to which I granted permission for a named ""fedoraUser"" user to read and write.  That user would seem to be able to do whatever they want within that container, except that they can't perform sparql updates with new namespace prefixes.",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2025,Memory leak in GET to containers,"Approx. 3KB of memory leaks per GET request to a Fedora container.  Heap analysis shows that this is due to an increasing number of LinkedHashMaps held by hk2, each resulting from the injection of MultiPrefer into ContentExposingResource.  This leak has likely been present since fedora 4.0.0.    It appears that this is ultimately a bug in Jersey, introduced in 2.9:  https://java.net/jira/browse/HK2-216    Reverting to Jersey 2.8 fixes the memory leak    It's possible that this was fixed in Jersey 2.17:  https://java.net/jira/browse/JERSEY-2800    After fixing a few compilation errors due to method signature changes in Jersey, LDP tests fail with Jersey 2.17+.  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2026,enable checkstyle and license plugins for fcrepo-camel-toolbox,"The license plugin is not currently enabled for fcrepo-camel-toolbox and the checkstyle plugin is not enabled for the toolbox-features module. Plus, the license format corresponds to the pre-Fedora 4.5.1 release.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2027,"With webac, non-fedoraAdmin users cannot delete properties even when granted write permission.",When you grant a non-fedoraAmin read and write permissions on a container (and all contained nodes) you'd expect them to be able to do any sort of normal read/write operations on nodes in that container.    When performing sparql update that includes a DELETE clause the following error message acompanies the 400 response. (in this case I tried to delete dc:rights from the resource /libra2/prod)    Cannot lookup child permission check information for /{}libra2/{}prod/{http://purl.org/dc/elements/1.1/}rights,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2028,Make fcrepo-connector-file module optional,"This task is to make the Federation capability optionally by moving it into fcrepo4-exts and building it into fcrepo-webapp-plus.  Additinally, the wiki documentation should be updated to indicate that Federation is not core, and available as an optional module.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2029,Add 'inactive' state to ObjState Vocabulary,"After some discussion in the Hydra community -- https://groups.google.com/d/topic/hydra-tech/2P2CCrk4LaU/discussion -- we're thinking this new state might be used as an initial state in deposit workflows where mediation must occur to ""publish"" an object, or could also possibly be used to ""withdraw"" an object without deleting it or marking it for deletion. This also achieves parity with the three object states provided by Fedora 3.  ",f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2030,Move objState to consolidated -exts GitHub repo,This task is to consolidate:  - https://github.com/fcrepo4-exts/fcrepo-audit-ontology  - https://github.com/fcrepo4-exts/fcrepo-indexing-ontology  - objState.rdf    ..into a single fcrepo4-exts GitHub repository.,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2031,User documentation for fcrepo-java-client,This task is to provide user documentation in the fcrepo-java-client README describing examples of basic operations:  - CRUD  - Batch atomic operations  - Versioning  - AuthZ  - Fixity    https://github.com/fcrepo4-exts/fcrepo-java-client,f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2032,fcrepo4-base-box maintenance,"https://gist.github.com/ruebot/45dbef8ab5bddff44604b10b42f4233c    Audit download urls for a variety of components, and update them where need be so we can build the base box. ",f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2033,Mark fcrepo4-client as deprecated,"The fcrepo4-client is no longer maintained. It should be clearly marked with a deprecation notice and, eventually migrated into fcrepo4-archive.",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2035,remove fcrepo-audit-triplestore's dependency on fcrepo-audit,"In order to avoid code duplication, the camel-toolbox artifact fcrepo-audit-triplestore uses a method from fcrepo-audit. While this saves a few lines of code and adheres to the principle of DRY, in this case, it is a terrible structure. The reason it is terrible is that the fcrepo-audit module has a hard dependency on fcrepo-kernel-modeshape and by extension: infinispan, cassandra, mongodb, etc. In OSGi, one needs to be explicit about dependencies and so simply by using that one static function from fcrepo-audit, it makes the OSGi bundle carry along the entire modeshape/infinispan infrastructure in the OSGi runtime. This actually makes the system _more_ brittle, makes testing harder and is, generally a bad architecture. The camel code shouldn't need to care a whit about modeshape.    Until the time that fcrepo-audit does not have a hard dependency on modeshape, etc, the camel code should not use the fcrepo-audit module.","f4-audit,f4-camel",1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2036,fcrepo-camel version wasn't incremented for the last release,"When the 4.4.2 camel release was prepared, the version bump wasn't pushed into master.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2037,Add support for API-related HTTP headers to client,"See: https://github.com/fcrepo4-exts/fcrepo-java-client/issues/11    Currently the client doesn't provide a way to add the following allowed headers:        Content-Disposition      Content-Type      digest      slug      if-match      if-none-match      if-unmodified-since      if-modified-since      Range    I would like to add support for all of the headers expected for basic object creation or retrieval.    In terms of implementation, the approach so far has been additional parameters to the post/put/get/patch methods, which may get unwieldy with the full set of options. I would favor a method override of the form:    public FcrepoResponse post(final URI url, final InputStream body, final Map headers)    Possibly with restrictions in each method so that it can only set allowed headers, but that may be iffy since some methods cover multiple endpoints with different headers allowed.    I'm not all that informed about camel, but I believe this would work there too?  ",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2038,RDF parsing error,"When I PUT this RDF:    {noformat}  ""\n<> a <http://pcdm.org/models#Object>,\n     <http://projecthydra.org/works/models#Work>;\n   <http://purl.org/dc/terms/title> \""Presidential Address: Rethinking the Comparative and the International\"";\n   <http://id.loc.gov/vocabulary/relators/dpt> \""batchuser@example.com\"";\n   <http://purl.org/dc/elements/1.1/contributor> \""Carnoy, Martin\"",\n     \""Comparative Education Review\"";\n   <http://purl.org/dc/elements/1.1/description> \""\""\""\""It is both a great honor and a great responsibility to address the Comparative and International Education Society (CIES) on the occasion of its fiftieth anniversary. A great honor, of course, because of the symbolism associated with such an event. The great responsibility comes from the richness and depth of past presidential addresses and the weight of living up to their standards. The theme of our meeting this year in Hawaii is \""\""Rethinking the Comparative.\""\""  It might well have been \""\""Rethinking the Comparative and the International,\""\""  for both elements of our name bear reexamination in a world and in national societies that are changing rapidly and profoundly. We need to ask ourselves, after 50 years, what it is that makes comparative and international education unique and what the CIES, as an intellectual community, contributes to understanding how the world works and to human progress.\r \""\""\""\"";\n   <http://purl.org/dc/elements/1.1/subject> \""-- comparative education\"",\n     \""-- international education\"";\n   <http://purl.org/dc/terms/created> \""2006\"";\n   <http://purl.org/dc/terms/dateSubmitted> \""2016-05-23T21:41:30.761946+00:00\""^^<http://www.w3.org/2001/XMLSchema#dateTime>;\n   <http://purl.org/dc/terms/modified> \""2016-05-23T21:41:30.766416+00:00\""^^<http://www.w3.org/2001/XMLSchema#dateTime>;\n   <http://purl.org/dc/terms/type> \""text\"";\n   <http://www.w3.org/ns/auth/acl#accessControl> <http://127.0.0.1:8986/rest/test/16/62/08/58/16620858-37a1-4da0-ae04-c906e0db4871>;\n   <info:fedora/fedora-system:def/model#hasModel> \""GenericWork\"" .\n""  {noformat}    Fcrepo returns a 400: ""RDF was not parsable: [line: 9, col: 1 ] Broken token (newline): ;""    The problem seems related to the \r in the description field. When I remove that it works.    Source data: https://purl.stanford.edu/wm346hj8366.xml  The description field has a quote in it, thus the quadruple quote.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2039,Update Fuseki to 2.4.0 in the vagrant base box,Related to https://jira.duraspace.org/browse/FCREPO-2006    ,f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2040,Revisit Indexing Documentation,This task is to update the indexing documentation:  https://wiki.duraspace.org/display/FEDORA451/Solr+Indexing+Quick+Guide    See: https://groups.google.com/d/msg/fedora-tech/995-m9GfUIE/i0ckbqGNAwAJ,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2041,minor compiler cleanup,This ticket is to address some minor compiler/test warnings.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2043,Clean up dependency definitions,"The maven dependency definitions should be cleaned up. Certain dependencies are not stated, and certain others are superfluous.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2045,Remove fcr:import and fcr:export endpoints,This task is to remove the fcr:import and fcr:export endpoints.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2046,Normalize use of test assertions,Certain test suites rely on both junit's assertX() methods and jgroups.util assertX() methods. We should change the jgroups.util.Util.assertX() methods to the equivalent junit method.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2047,Use @Inject instead of @Autowired,"Most of the fedora codebase uses @Inject for dependency injection, but it also uses @Autowired in places. The cases of @Autowired should be replaced with @Inject.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2048,Remove all instances of jcr.Node from the kernel-api,There remain a few traces of jcr.Node in the kernel-api. They should be removed.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2051,Use Embedded JDBC DB for Integration Tests,This task is to retool the core codebase integration tests to use an embedded JDBC DB.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2052,Remove Default repository.json Configuration in Deployable war,"This task is to remove the default repository.json from both the core fcrepo4-webapp.war as well as the fcrepo-webapp-plus.war, such as:  https://github.com/fcrepo4/fcrepo4/commit/324f8a3130536ac0c073e470794aeace9b3ee78d#diff-b9546c63cde391e1af63d195a571c371    However, the one-click should still have a default configuration, such as:  https://github.com/fcrepo4/fcrepo4/commit/f27cc4035302db9f251f4d7a549800fec0d97485",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2053,Version creation error,"This task is to resolve the unusual situation where FedoraVersioning.addVersion(..) fails.    Sometimes the update from ""versionService.createVersion(..)"", which adds the ""mix:versionable"" if necessary (line:152), is not available before the subsequent request for ""resource().getBaseVersion().getFrozenNode()"" is made (line:154).  https://github.com/fcrepo4/fcrepo4/blob/master/fcrepo-http-api/src/main/java/org/fcrepo/http/api/FedoraVersioning.java#L152-L154    See: https://groups.google.com/d/msg/fedora-tech/IpcKRY2IqJI/secreM_CAwAJ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2055,Error updating binary: javax.jcr.nodetype.ConstraintViolationException,"This is a bit of a two-parter, so it may need to be split into separate issues. I was using the Fedora 4 Vagrant image for testing this. First, to set up the conditions to reproduce this: from within the admin interface, when creating a binary resource, if the binary attachment is large enough, you can ""double click"" the ""Add"" button and it will create two instances of the resource. You end up with one resource called (assuming you named the resource such) ""image_resource"" and ""image_resource[2]"". You can also click multiple times to create additional resources indexed [3], [4], etc. I was also able to reproduce this with some clever cURLing, for both binary and container resource types. You have to do this on the initial transaction, however. Later attempts to duplicate the resource will result in expected error response. If you follow the above steps to create this duplicate binary resource, if you later attempt to update the resource content by uploading an updated binary file from the admin interface, you receive the following stacktrace: {noformat} javax.jcr.nodetype.ConstraintViolationException: Cannot find a definition for a child named '{}bar' on the node at '/tests/test-1' with primary type 'nt:folder' and mixin types: [fedora:Container,fedora:Resource] at org.modeshape.jcr.AbstractJcrNode.nodeDefinition(AbstractJcrNode.java:2911) at org.modeshape.jcr.AbstractJcrNode.getDefinition(AbstractJcrNode.java:2835) at org.modeshape.jcr.AbstractJcrNode.isCheckedOut(AbstractJcrNode.java:3222) at org.modeshape.jcr.AbstractJcrNode.canAddMixin(AbstractJcrNode.java:2749) at org.fcrepo.kernel.modeshape.FedoraBinaryImpl.setContent(FedoraBinaryImpl.java:147) at org.fcrepo.http.api.ContentExposingResource.replaceResourceBinaryWithStream(ContentExposingResource.java:592) at org.fcrepo.http.api.FedoraLdp.createOrReplaceObjectRdf(FedoraLdp.java:373) at sun.reflect.GeneratedMethodAccessor72.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:151) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:171) at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:152) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:104) at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:384) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:342) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:101) at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:271) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267) at org.glassfish.jersey.internal.Errors.process(Errors.java:315) at org.glassfish.jersey.internal.Errors.process(Errors.java:297) at org.glassfish.jersey.internal.Errors.process(Errors.java:267) at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:297) at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:254) at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1030) at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:373) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:381) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:344) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:221) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:610) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408) at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1041) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:315) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at java.lang.Thread.run(Thread.java:745) {noformat}",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2057,fcrepo-camel has a dependency on a particular logger impl; this should be removed,"fcrepo-camel lists a dependency on slf4j-log4j12, when it should simply depend on the slf4j-api.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2058,remove compile-time dependencies on logback logger,The fcrepo-camel-toolbox has a compile-time dependency on logback. This should be scoped to test and all logback.xml configurations should be removed from the various ./src/main/resources files.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2059,RdfSource objects should describe themselves,"As discussed in https://wiki.duraspace.org/display/FF/2016-06-02+-+Fedora+Tech+Meeting, {{RdfSource}} objects should be able to describe themselves. This involves moving the {{getDescription}} method to the FedoraResource interface.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2060,java.nio.charset.MalformedInputException,"Using the modeshape5 branch, when ingesting a large object with 1000+ files, I am seeing an exception on the 299th file:     Error: STATUS: 500 org.modeshape.persistence.relational.RelationalProviderException: java.nio.charset.MalformedInputException: Input length = 1    org.modeshape.persistence.relational.DefaultStatements.readDocument(DefaultStatements.java:192)    org.modeshape.persistence.relational.DefaultStatements.getById(DefaultStatements.java:109)    org.modeshape.persistence.relational.RelationalDb.lambda$get$9(RelationalDb.java:148)    org.modeshape.persistence.relational.RelationalDb.runWithConnection(RelationalDb.java:358)    org.modeshape.persistence.relational.RelationalDb.get(RelationalDb.java:148)    org.modeshape.schematic.SchematicDb.getEntry(SchematicDb.java:154)    org.modeshape.jcr.cache.document.LocalDocumentStore.get(LocalDocumentStore.java:87)    org.modeshape.jcr.cache.document.WorkspaceCache.documentFor(WorkspaceCache.java:184)    org.modeshape.jcr.cache.document.WorkspaceCache.documentFor(WorkspaceCache.java:203)    org.modeshape.jcr.cache.document.WorkspaceCache.getNode(WorkspaceCache.ja...    When trying to access the object afterwards, I see the same error (stacktrace attached).    I tried skipping the first 295 files and that file ingests without problem and the ingest continues, and I get the same error on the 299th file that is processed.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2061,Add ssl authentication capability to the fcrepo-indexing-solr,The fcrepo-indexing-solr camel route currently can not talk to solr servers that require ssl client authentication. Add the ssl client authentication capability to fcrepo-indexing-solr module.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2064,Consistent logging in JAXRS exception mappers,"Implementations of javax.ws.rs.ext.ExceptionMapper in org.fcrepo.http.commons.exceptionhandlers need to have consistent approaches to logging, and must have a way to configure logging of stacktraces for the mapped exceptions. The unavailability of the stacktraces is an impediment to debugging.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2065,DelegateHeaderPrincipalProvider passes on-behalf-of header in FEDORA_ALL_PRINCIPALS,"Scenario: both normal users (as configured in tomcat) and impersonated users (via admin account and on-behalf-of header) access the repository.    If admin user calls fedora with on-behalf-of header, all works as expected. If non-admin user calls fedora and adds on-behalf-of header, the contents of header gets propagated to FEDORA_ALL_PRINCIPALS - this is done in HttpHeaderPrincipalProvider.getPrincipals() as DelegateHeaderPrincipalProvider is a subclass of HttpHeader...",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2066,Update source code license header,"Update the source code license header so that the header references the Apache 2.0 license in each file, and references a single notice file that gets updated on a yearly basis. That way we need only update a single file with the copyright year(s) yearly.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2067,HTML UI - Error on HEAD requests,"This task is to replicate and resolve the issue identified by the test steps detailed in the following comments:  https://jira.duraspace.org/browse/FCREPO-2055?focusedCommentId=50536&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-50536    Under certain circumstances, the HTML UI responds with: ""SyntaxError: Unexpected end of JSON input"" when browsing through HTML resources.    The issue appears to be related to the fact that HEAD operations respond with application/ld+json that is unparseable... which is not surprising, since HEAD should have an empty body.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2068,update projects to use the latest fcrepo-java-client,This is a ticket to update to the latest version of fcrepo-java-client,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2069,Error restoring backup of a 4.5.1 repository into Modeshape 5 branch,"When restoring a backup from a 4.5.1 repository, I often see this error and the restore fails:    ERROR 08:42:50.311 (FedoraRepositoryRestore) Problems restoring up the repository:  java.sql.BatchUpdateException: Batch entry 615 INSERT INTO MODESHAPE_REPOSITORY (ID, CONTENT) VALUES ('87a0a8c317f1e7jcr:system/mode:metadata', ?) was aborted.  Call getNextException to see the cause.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2070,Use linked data backend for fcrepo-transform,"Marmotta offers a Linked Data -aware backend to support LDPath that is very much more powerful than the simpler Jena Model-based backend fcrepo-transform now uses, without being significantly more difficult to deploy or use. We should switch to using it.",f4-transform,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0
FCREPO-2071,Update fcrepo-camel to handle new event serialization,fcrepo-camel should be adjusted to handle the new message serialization from FCREPO-1960,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2073,build-tools: Update core and exts projects,This task is to update fcrepo4 core and exts projects to the latest release of fcrepo-build-tools:  https://github.com/fcrepo4/fcrepo-build-tools/releases/tag/fcrepo-build-tools-4.4.2  ...which first must be released.    Related ticket: https://jira.duraspace.org/browse/FCREPO-2066,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2074,Deleting versioned resource does not delete all version information,"When deleting a versioned object, it appears that not all of the version information for the object is deleted.  This poses a problem for us when the deleted versioned object contained a reference to another object because now we cannot delete the referenced object.  This seems like a bug?    Here is the scenario.  - Create two objects A and B.  - Give object B a relationship (e.g., isMemberOfCollection) to object A.  - Create a version of object B.  - Delete object B.  - Attempt to delete object A fails with the following error message:   javax.jcr.nodetype.ConstraintViolationException: The property '/jcr:system/jcr:versionStorage/af/f8/65/aff8653c5b09eb3fdfb3044ef04f315c3d2dc012/1.0/jcr:frozenNode/ns009:isMemberOfCollection_ref' is protected and cannot be removed.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2075,Fedora does not warn that non-SHA1 checksums are ignored,Any user-provided digest algorithms that are not supported by Fedora should respond with a 400 status or some other indicator to the client that the digest can not be used.    Example below:  ,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2079,fcrepo-camel-toolbox: fcrepo-serialization unit tests not running,The junit tests for the fcrepo-serialization module are not setup correctly and therefore not running during a `mvn install`,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2080,Modify UI javascript to disable Add button upon pressing it,"When files are uploaded via the HTML UI, it is possible to click the Add button twice, triggering duplicate files. Some simple javascript should address this.    Related to FCREPO-2055",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2081,Update use of javascript in the HTML-UI,"The javascript in fcrepo-http-api depends on jQuery, but there is no need for this dependency. All of the code could be written with native JS methods.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2083,Static resources in fcrepo-webapp don't use ETags,The static resources in fcrepo-webapp do not respond to ETag-related headers. A simple servlet filter should fix this.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2084,All static resources should be in /static directory for fcrepo-webapp,"Static image assets in fcrepo-webapp are located outside of the /static directory, which means they will not have ETag filtering enabled.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2085,/fcrepo landing page text could be clarified,The text on the index.html page is a little smug. It could be cleaned up.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2087,support https connections for fcrepo-indexing-triplestore,The fcrepo-indexing-triplestore (and fcrepo-audit-triplestore) do not support the use of SSL connections to the remote triplestore. This ticket will track supporting this.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2088,Move use of fcrepo-camel into a shared OSGi service in fcrepo-camel-toolbox,"Every fcrepo-camel component in fcrepo-camel-toolbox is configured separately, which leads to a lot of duplication of configuration. By converting the use of fcrepo-camel from a bean to an OSGi service, that configuration will all be centralized.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2089,Some unused classes can be removed,Some classes related (I think) to the removed /fcr:nodetypes endpoint can be removed as they are no longer used.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2090,Cannot delete non-string literals via sparql-update with literal matchers,"With Sparql-Update, it is currently possible to delete Literals with variables:    DELETE WHERE {    <> test:foo ?obj;  }    It is also possible to delete string Literals (with and without Language tags):    DELETE WHERE {    <> test:foo ""Bar""  }    and     DELETE WHERE {    <> test:foo ""Baz""@en  }    But, if the literal is not a string, it is no longer possible:    INSERT { <> test:foo 42 } WHERE {}    Now the integer ""42"" is part of the object    DELETE WHERE { <> test:foo 42 }    The integer ""42"" is still part of the object. This applies to all non-string literals.  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2091,increment version numbers to 4.7.0-SNAPSHOT,The version numbers on master should be incremented to 4.7.0-SNAPSHOT immediately to make it possible to continue development work on master while the 4.6.0 release is being prepared.    This applies to:  fcrepo4  fcrepo-module-auth-rbacl  fcrepo-module-auth-xacml  fcrepo-module-auth-webac  fcrepo-mint  fcrepo-transform  fcrepo-audit  fcrepo-webapp-plus  ,"f4-audit,f4-auth,f4-core,f4-transform,f4-webapp-plus",1,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0
FCREPO-2092,ldp:isMemberOfRelation does not find reference property,"This task is to resolve the situation when an IndirectContainer uses the inverted pattern of ""ldp:isMemberOfRelation"" to establish a relationship between an indirect resource and a membership resource.    The issue is demonstrated by the following script:  https://gist.github.com/awoods/2f790d6b0e089ef04a352d87dfd7cc3c    ..replacing line:22 ""MAX=10000"" with a smaller number, like ""MAX=5"".  https://gist.github.com/awoods/2f790d6b0e089ef04a352d87dfd7cc3c#file-10k-membersof-sh-L22  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2093,RDF documents persisted as binaries result in an exception,"Creating a binary resource containing an RDF document can be achieved as follows:    curl -X POST --data-binary ""@ore.rdf"" -H ""Content-Type: application/rdf+xml"" -H ""Slug: ore.rdf"" -H ""Content-Disposition: attachment; filename=\""ore.rdf\"""" http://localhost:8080/rest    This creates a binary resource with mime type of application/rdf+xml as expected.  Retrieving its contents via GET results in an exception, however (stack trace attached).     The problem is that ContentExposingResource is treating the binary content in a non-opaque fashion.  It appears to be parsing its contents as RDF, adding  (server-managed) triples from the associated object, and returning the union graph.  An exception is thrown at some point during this process.    A possible solution is to simply treat all binary resources opaquely as bytes, eliminating the exception for RDF.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2094,Binary properties are duplicated in UI,"For all binary resources created by fcrepo-4.5.1 and above, the UI page for the fcr:metadata resource has two identical sections ""Properties"" and ""Content Properties"" that each list the same set of properties    For all binary resources created with fcrepo-4.5.0 and below (even if viewed through a newer fedora instance, e.g. adding a binary with fcrepo-4.5.0, then upgrading to 4.5.1 and viewing the binary), the UI page for fcr:metadata displays only one ""Properties"" section.    There is no discernable difference between the RDF of resources that display the peoperties duplication vs those that do not.    For example, if a 4.6.0-RC2 repository has two binary resources, one created originally by fcrepo-4.5.0, and one created by 4.6.0; the UI for the fcr:metadata resource created by 4.5.0 will be correct, while the UI for the fcr:metadata resource created by 4.6.0-RC2 will show duplication.  Examining the fcr:metadata RDF for each resource shows no difference other than the obvious differences in timestamps and URIs.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2095,Revisit API for creating binary resources,"Currently, an LDP-NR is created whenever:  a) content-type of a POST or PUT request is not RDF  or  b) Content-Disposition: attachment header is present    At present, this is not codified in the specification draft doc:  https://docs.google.com/document/d/1ad3MhTQWGof0IJ03yY5jVofCK8uO9yPKMVXVYq7a44o/edit#    The LDP spec is fairly silent about when a repository should create an LDP-NR.  This ticket is to see if there is a better way (possibly leveraging LDP headers) to explicitly convey a client's intent that a given resource should be created as a LDP-NR, and incorporate the conclusion into the spec draft.    A case to consider is persisting an arbitrary RDF document (e.g. an owl document, RDF-based dataset, etc) as a binary resource in Fedora with an rdf media type.  This case precludes (a) from the above techniques for specifying binary resource creation.    See discussion in https://github.com/fcrepo4/fcrepo4/pull/1081",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2096,WebAC debug output includes entire JCR node content,"When DEBUG output is turned on, the entire JCR node is output to the console. This seems unnecessary. For example:    DEBUG 21:35:56.147 (LinkHeaderProvider) Adding WebAC Link Header for Resource: /test {jcr:lastModifiedBy=fedoraAdmin, jcr:uuid=941be92f-92e3-4813-b4c1-977a237253cd, dcterms:genre=[http://vocab.getty.edu/aat/300026646^^URI], dcterms:spatial=[http://sws.geonames.org/4929022^^URI], dcterms:creator=[http://id.loc.gov/authorities/names/n79109792^^URI], jcr:createdBy=bypassAdmin, jcr:primaryType=nt:folder, jcr:created=2016-07-29T11:11:43.009-04:00, fedora:lastModified=2016-07-30T21:28:05.749-04:00, jcr:mixinTypes=[fedora:Container,fedora:Resource], jcr:lastModified=2016-07-30T21:28:05.765-04:00, rdfs:label=[Test]}  ",f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2097,Ontology document doesn't return a Content-Type header,"The Fedora ontology is available online, but LDP clients have a hard time parsing it since it doesn't include a Content-Type header. It really MUST return a Content-Type header. I see that most other ontologies will redirect clients to a URL with a .rdf extension.    For example:    $ curl -i http://fedora.info/definitions/v4/2016/03/01/repository    HTTP/1.1 200 OK  Date: Sun, 31 Jul 2016 13:09:56 GMT  Server: Apache  Last-Modified: Mon, 02 May 2016 15:50:16 GMT  ETag: ""621a-531ddf2e5c191""  Accept-Ranges: bytes  Content-Length: 25114  ",f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2098,If-Match headers not properly evaluated for LDP-RSs,The If-Match header is not properly evaluated for LDP-RSs when modifying existing resources (i.e. via PATCH). This appears to be related to the Strong/Weak ETag issue addressed with FCREPO-1754.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2099,Add support for gzip compression of resources,"Many web servers support gzip compression of resources via the header: Accept-Encoding: gzip, deflate    This is a ticket to track the implementation of this, either via a container-level configuration recipe or by implementing a Jersey filter: https://jersey.java.net/documentation/latest/filters-and-interceptors.html",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2100,fcrepo4-vagrant: README troubleshooting recent Vagrant version,This task is to update the fcrepo4-vagrant README with troubleshooting issues encountered while trying to start the VM with an older version of Vagrant.,f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2101,fcrepo4-vagrant: remove unused variables,"This task is to remove the unused variables relating to Fuseki, Solr, and Karaf from '/install_scripts/config'.",f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2102,ActiveMQ directory created during integration tests should be in ./target,An ActiveMQ directory is created in fcrepo-webapp-plus. This directory should be configured to go in ./target so that it is cleaned up between builds.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2105,Retrieving the description of an object with many reference properties is slow,"I have been testing the performance of Fedora objects that link to many other repository objects (for example a collection with many members, or a book that contains many pages).    I've written up some of my findings in the Fedora wiki[1].  But the TL;DR version is that it's reasonably fast for small numbers of members, but gets progressively slower for larger numbers of members.  And the move from LevelDB to a relational database for storing metadata looks like it's adding to this issue.  So a book with 500+ pages or a collection that contains thousands of objects slows down to 30+ seconds to read the RDF from Fedora.    I mostly wanted to let people know about this issue so it can be a factor in discussions about modeling, performance, etc.    -Esm     1. https://wiki.duraspace.org/display/FF/Real+World+Performance#RealWorldPerformance-many_members",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2106,deprecate fcrepo-transform,"The functionality of fcrepo-transform has been reimplemented in camel, and so the fcrepo-transform module should be deprecated and eventually removed from fcrepo4-exts.",f4-transform,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0
FCREPO-2107,Publish event type ontology,The event type ontology (used by the 4.6.0 release candidate) will need to be published. https://github.com/fcrepo4/fcrepo-event-ontology.    The cannonical URL for this is: http://fedora.info/definitions/v4/event,f4-ontology,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2108,"Skolemize to hash-URIs, not /.well-known/genid/","Fedora should skolemize incoming bnodes to hash-URIs (with UUID fragments) on the base URI to which the request was addressed. It wouldn't be the practice shown in the RDF specs that we now do (with the ""/.well-known/genid/"" thing), but that advice doesn't consider our use case (an object repository). If we did that, we would strike out all the annoying lifecycle problems that we've encountered and let people use much simpler SPARQL Update against individual resources. And people who try to use bnodes would end up with what we would have told them to use: hash-URIs on the point of their graph of description.  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2109,Enable Inheritance of Logging Levels,"This task is to align the logging functionality with the documentation:  https://wiki.duraspace.org/display/FEDORA4x/Configuring+Logging+With+System+Properties    This ticket is complete when:  1. The default logging level is INFO  2. All logging can be changed by providing a value for the system property: -Dorg.fcrepo  3. Specific package loggers can be changed independently of 1 or 2 above.    Starting Fedora with the following logging settings should work as expected:  > mvn jetty:run -pl fcrepo-webapp/  ** log all packages at INFO    > mvn -Dfcrepo.log=DEBUG jetty:run -pl fcrepo-webapp/  ** log all packages at DEBUG    > mvn -Dfcrepo.log=DEBUG -Dfcrepo.log.jms=INFO jetty:run -pl fcrepo-webapp/  ** log all packages at DEBUG, except fcrepo.jms at INFO    > mvn -Dfcrepo.log=DEBUG -Dfcrepo.log.jms=INFO -Dfcrepo.log.kernel=INFO jetty:run -pl fcrepo-webapp/  ** log all packages at DEBUG, except fcrepo.jms and fcrepo.kernel at INFO  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2110,4.6.0-RC-4 WebAC Regression,The following steps come from the Fedora workshop exercises... and appears not to work in 4.6.0-RC-4.  Perform steps in slides 18 through 23: https://docs.google.com/presentation/d/1wbzi7d8xL_C_5jo_ZTykq3CswSfbaobLHgQacWGmNzA/edit?usp=sharing    The test that appears to fail now is:  curl -i -utestuser:password1 http://localhost:8080/fcrepo/rest/cover,f4-auth,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2111,Refactor URI translator chain to allow use without Jcr Node,None,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2115,Updates to Containers with If-Match headers should fail,"Because we never emit strong ETags for Containers, and strong ETags are required for updates with an If-Match header, we should never accept updates to containers with an If-Match header.    Related to FCREPO-2098.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2116,Update vagrant for Fedora 4.7.0 ,"This task is to update the fcrepo4-vagrant configuration for the Fedora 4.7.0 release.  As a part of this task, the following PR should be tested and merged:  https://github.com/fcrepo4-exts/fcrepo4-vagrant/pull/53",f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2119,Make the LDCache backend pluggable,It would be convenient to make the LDCache backend pluggable as an OSGi service. This will also make testing considerably easier.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2121,Make fcrepo-camel-toolbox compatible with Fedora 4.6.x,the messaging toolbox is not compatible with the messages emitted by Fedora 4.6.x. It should be adjusted so that it is.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2122,LDP If-Match guidance is incompatible with the HTTP spec,"The LDP spec says we SHOULD use the If-Match header to make sure that updates do not overwrite updates made by other clients (See 4.2.4.5 https://www.w3.org/TR/ldp/#ldpr-resource).  However, the HTTP spec requires strong ETags for the If-Match header (See https://tools.ietf.org/html/rfc7232#section-2.3.2).  The variability of RDF serializations (triple order, node ids, different serialization formats, etc., etc.) prevents us from using strong ETags, so we cannot satisfy both requirements.  We recommend that the LDP spec should be changed to recommend using the If-Unmodified-Since header instead, which provides similar functionality but using a timestamp instead of an ETag.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2123,Tombstone serialization is stinky ,"When you retrieve an URI at which a tombstone is present, you get     Discovered tombstone resource at /foo {jcr:createdBy=bypassAdmin, jcr:primaryType=fedora:Tombstone, jcr:created=2016-08-24T14:24:58.099-04:00}    You get this even if you put an RDF mimetype into the Accept header of the request.  1) There should not be any JCR cruft in there.  2) There ought to be a real RDF response when one is asked for.    OR    We should just get rid of tombstones (I really think this is what we should do.)",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2124,Fixity service error in HTML UI,"To reproduce:  - In the HTML UI, create a Binary resource  - Navigate to the Binary resource and click on the ""Fixity"" button  ** Boom **  ERROR 19:03:40.176 (WildcardExceptionMapper) Exception intercepted by WildcardExceptionMapper: Object 'org.apache.jena.graph.Node_ANY' does not contain method createURI(java.lang.String) at /views/fcr-fixity.vsl[line 53, column 60]    This is likely due to the recent upgrade to Jena3",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2125,Remove dead HTML-UI code,"This task is to remove dead code in the HTML-UI, which will minimally include:  https://github.com/awoods/fcrepo4/blob/master/fcrepo-http-api/src/main/resources/views/common.vsl#L48-L52",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2127,Document how the Camel RDF Serializer exports content to disk,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2128,Review Camel RDF Serializer implementation,Can the code be repurposed (imported by a new client)? Can we copy the code? Or at least use it as documentation of the serialization format?,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2129,Create import-export github repository in the fcrepo4-labs organization,This should include a Hello World maven project with an executable jar file.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2130,Create skeletal import client utility,The import client should:    * Log resources that are imported  * Have tests that verify that resources are imported  ,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2131,Create skeletal export client utility,The export utility should:    * Log resources that are exported and their location on disk  * Include tests that demonstrate exporting various kinds of resources,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2132,Create a test plan,Create a test plan that details the testing (both automated and manual) that will verify that the import/export utilities work as expected and meet the requirements.    Working draft: https://docs.google.com/document/d/1WW0dU9LDWvnRPGbzKpIE-ODkGq39md17sKkWVXC0P8U/edit?usp=sharing    Test resources: https://drive.google.com/folderview?id=0B42p4oXygqHfS2J6MmRoNEQ4WEU&usp=sharing,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2133,Create sample test dataset,"Create a test dataset, including:    * Binaries larger than 4KB  * Metadata with objects that link to other objects  * Metadata that includes external content (see https://wiki.duraspace.org/display/FEDORA4x/External+Content )",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2134,Document sprint resources,"As part of or a subpage of https://wiki.duraspace.org/display/FF/Import+-+Export+Sprint+Meetings, create a section documenting the github repositories, JIRA issues, test dataset and other resources.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2135,Create user documentation - README,Create basic user documentation for using the import/export utilities for the github README of the import/export github repository,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2136,Create Import/Export wiki documentation,"Create a wiki page documenting the Import/Export utilities, and linking to the github README for more information.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2137,Create a basic executable jar for fcrepo-import-export,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2138,Create a basic CLI framework for fcrepo-import-export,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2139,Use Airline instead of Apache Commons CLI,Airline:    https://github.com/airlift/airline    would provide more clarity in less code for command-line parsing than Apache Commons CLI.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2140,Return to single-artifact builds for fcrepo-webapp,"Having multiple artifacts for ""one-click"" demo operation and deployment into servlet containers is unnecessary, confusing to users, and results in a needlessly complicated release process.    One artifact, both usable as an executable and deployable as a web app, should be created.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2141,Export: Don't export binaries if binary directory not configured,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2142,Export: Recurse over members of Containers,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2143,Document usage of the export tool.,Documentation should be added here:    https://wiki.duraspace.org/display/FEDORA4x/Import+and+Export+Tools    Minimally it should include commands to run the program and a brief explanation of the output and limitations.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2144,Document usage of the export/import tool.,Documentation should be added here:    https://wiki.duraspace.org/display/FEDORA4x/Import+and+Export+Tools    Minimally it should include commands to run the program and a brief explanation of the output and limitations. ,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2145,Document export/import package format.,Documentation should be added here:    https://wiki.duraspace.org/display/FEDORA4x/Import+and+Export+Tools    It should be sufficient that one could make sense of an export package or hand-craft an import package.  Feel free to use a child page if the details are lengthy.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2146,Unified config and command-line invocation,"https://github.com/fcrepo4-labs/fcrepo-import-export/pull/6 includes configuration and command-line operation at the module level, but ideally we would have a single jar file with unified operation and configuration, parameters parsing, etc.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2147,update fcrepo-camel testing apparatus to use latest Fedora release,"The testing apparatus for fcrepo-camel uses Fedora 4.5.x, it should be updated to use 4.6.x",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2148,Add error handling and reporting failures,"We should add error handling to the project, and report any failures.    Currently, if run on a non-existent fcrepo, the utility says it is ""Exporting!""",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2149,Export: trailing slash in repo path causes filename issues,"Running the command shown below, where there is a trailing slash on the repository URL, causes the filename to show up simply as '.ttl' with no actual filename.  A trailing slash should be removed, if present.     `java -jar ../../fcrepo4-labs/fcrepo-import-export/fcrepo-export/target/fcrepo-export-0.0.1-SNAPSHOT.jar --mode export --resource http://localhost:8080/fcrepo_4.6_rc/rest/ -binDir bin_dir --descDir desc_dir`",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2150,Consider adding hawt.io to vagrant,"Consider adding a hawt.io console to the vagrant gear, for easy monitoring.",f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2151,"Split common, driver, import, export, parent modules out of importexport","common depends on parent  import, export depend on common  driver depends on import, export, common    common defines some interfaces for Config and ArgParser  driver dispatches to import or export depending on a command line flag",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2152,Binary export does not support recursive export,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2153,Log resources exported,This task is to create a mechanism for logging the resources that were exported.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2154,Export: binary metadata is not exported,"The metadata associated with a binary, avail at the fcr:metadata endpoint, is not exported along with the binary.   The metadata should be available in the description directory at the same path as where the binary ends up in the binary directory. ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2155,Create integration test framework,This task is to create an integration test framework and initial example tests.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2156,fcrepo4-vagrant: update configuration from 4.6.0 release,This task is to update the config per:  https://github.com/fcrepo4-exts/fcrepo4-vagrant/issues/56,f4-vagrant,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0
FCREPO-2157,Hide Config in favor of an interface for the Import/Export process,"The config implementations are internal, and are only passed between ArgParser and a constructor by the driver. We should make the Config implementations internal, and let ArgParser return a ""Porter"" implementation. ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2158,review Allow methods on repository root ,"The Allow header for requests to the repository root contains MOVE and DELETE, which seem incorrect.    For example:  curl -I localhost:8080/fcrepo/rest    Allow: MOVE,COPY,DELETE,POST,HEAD,GET,PUT,PATCH,OPTIONS",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2159,Review Content-Type header for HEAD requests on containers,A HEAD request to a Fedora container reports the content type as application/octet-stream. This seems incorrect.,f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2160,Fix broken executable jar,This task is to ensure that we once again have an executable jar artifact created by the maven build process.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2161,Add Standard Plugins,"This task is to add checkstyles plugin, and fix issues.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2162,Use top-level dependency management,This task is to consolidate the dependency definitions in the maven submodules and factor them up into the top-level pom.xml dependency management section.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2163,Support http authorization when exporting and importing,Running the export tool does not currently work when the Resource you are trying to export requires http authentication.  There is no error or warning printed to stdout either.  ,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2164,Add support for config file,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2165,Export w/ binary fails if descDir and binDir are the same path,"If you run with the description dir and binary dir being the same path, there is a collision on file name (and directory) for binaries.      This is a normal run, where `goats` is the binary:     ??? bin_dir  ?   ??? fcrepo_4.6_rc  ?       ??? rest  ?           ??? goats  ??? desc_dir      ??? fcrepo_4.6_rc          ??? rest          ?   ??? asc          ?   ?   ??? 336          ?   ?   ?   ??? members.ttl          ?   ?   ??? 336.ttl          ?   ??? asc.ttl          ?   ??? goats          ?       ??? fcr_metadata.ttl          ??? rest.ttl    But if I use the same dir for both I get an error that I believe to be cause by a name collision:   BuckyKatt:/Users/bseeger/Projects/fedora/fcrepo4-labs/fcrepo-import-export/fcrepo-import-export-driver/target>java -jar fcrepo-import-export-driver-0.0.1-SNAPSHOT.jar -m export  --binDir ../../../../backup/export/bin_dir --descDir ../../../../backup/export/bin_dir --resource http://localhost:8080/fcrepo_4.6_rc/rest  Exporting!  java.io.FileNotFoundException: ../../../../backup/export/bin_dir/fcrepo_4.6_rc/rest/goats/fcr_metadata.ttl (Not a directory)    java.io.FileOutputStream.open0(Native Method)    java.io.FileOutputStream.open(FileOutputStream.java:270)    java.io.FileOutputStream.<init>(FileOutputStream.java:213)    java.io.FileOutputStream.<init>(FileOutputStream.java:162)    java.io.FileWriter.<init>(FileWriter.java:90)    org.fcrepo.exporter.Exporter.writeResponse(Exporter.java:143)    org.fcrepo.exporter.Exporter.exportDescription(Exporter.java:119)    org.fcrepo.exporter.Exporter.writeResponse(Exporter.java:151)    org.fcrepo.exporter.Exporter.exportBinary(Exporter.java:107)    org.fcrepo.exporter.Exporter.export(Exporter.java:85)    org.fcrepo.exporter.Exporter.exportMembers(Exporter.java:130)    org.fcrepo.exporter.Exporter.exportDescription(Exporter.java:124)    org.fcrepo.exporter.Exporter.export(Exporter.java:87)    org.fcrepo.exporter.Exporter.run(Exporter.java:79)    org.fcrepo.importexport.ImportExportDriver.run(ImportExportDriver.java:52)    org.fcrepo.importexport.ImportExportDriver.main(ImportExportDriver.java:41)",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2166,Dataset: Create objects with cross-object relationships,This task is to update the dataset from:   https://github.com/fcrepo4-labs/fcrepo-sample-dataset/tree/master/plantpatents    Adding cross-object relationships.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2167,Dataset: Create objects with external content,This task is to update the dataset from:   https://github.com/fcrepo4-labs/fcrepo-sample-dataset/tree/master/plantpatents     Adding or updating resources to include references to external content.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2168,Dataset: Create nested resources,This task is to update the dataset from:   https://github.com/fcrepo4-labs/fcrepo-sample-dataset/tree/master/plantpatents     Adding or updating resources to include nested resources.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2169,Log resources imported,This task is to create a mechanism for logging the resources that were imported.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2170,Log exported resources to file,This task is to ensure that exported resources are logged to a file that would be a suitable artifact to act as an audit of the export operation.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2172,Process list of resources to import/export,"This task is to enable passing a file containing a list of resources as an argument into the import/export jar.    Note: this is not necessarily a phase-1 requirement.      Helpful design requirement:    Allow for a BagIt bag for all resources in a collection, and/or individual bags for each resource    - One bag per request; if there are multiple resources, they are all in one bag    - If you want a bag per resource, the utility must be called multiple times  ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2173,Clean up code warnings in fcrepo-export/src/main/java/org/fcrepo/exporter/Config.java,See the following link for list of warnings.    https://github.com/fcrepo4-labs/fcrepo-import-export/pull/16#issuecomment-244548953,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2174,Handle Link headers with three or more parts,"The Java client should be able to parse Link headers with three or more parts, such as the Link from a newly-created binary to its description, which has the form:    Link: <http://localhost:8080/rest/file1/fcr:metadata>; rel=""describedby""; anchor=""http://localhost:8080/rest/file1""",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2175,Fix return values for edge cases in FcrepoResponse,None,f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2176,Allow setting prefer headers on Put/Post requests,"When making Put/Post requests, the client should be able to add Prefer headers, such as Prefer: handling=lenient; received=""minimal""",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2177,Remove non-test dependencies on fcrepo,This task is to ensure that import/export limits its dependencies on core fcrepo artifacts to test.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2178,Address mvn build error; [ERROR] Error fetching link,[ERROR] Error fetching link: /home/nruest/git/fcrepo-import-export/fcrepo-import-export-common/target/testapidocs/package-list. Ignored it.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2179,Document behavior and workarounds for system-generated namespace prefixes,Document the behaviors that lead to the binding of system-generated namespace prefixes (in the form ns00x) when new namespaces are invoked in content deposited in Fedora.    Develop a recommendation for a workaround or best practice that will allow users to avoid the inadvertent binding of such prefixes.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2180,Export utility should map URIs to info:fedora/ URIs,"To reduce the exported RDF being tied to the original repository URIs, the export client should map the base URIs to info:fedora/ URIs.  For example, the resource http://localhost:8080/rest/a/b/c should be mapped to info:fedora/a/b/c",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2181,Exported resource filenames need to be escaped in an unambiguous manner,"Currently we replace colons with underscores... this causes a name collision if ""test:test"" and ""test_test"" exist.  For this ticket use URLEncoder.encode(string, ""UTF-8"") and URLDecoder.decode(string, ""UTF-8"") on the filename (or path element).",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2182,Fix potential NPE in Exporter,See: https://github.com/fcrepo4-labs/fcrepo-import-export/pull/17#discussion_r77715349,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2183,Remove URISyntaxExceptions,Throughout the codebase we are throwing and catching URISyntaxExceptions. This is because we are using {{new URI(...)}} instead of {{URI.create(...)}}.  This task is to replace the former with the later and remove the URISyntaxExceptions throughout the code.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2185,Simplify Import/Export package structure,"We currently have 4 packages (Import, Export, Common and Driver) for 7 classes.  Consider consolidating to a single package.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2186,malformed SPARQL query can cause binary objects to 'disappear',"It is possible to cause non-RDFsource objects to ""disappear"" from the repository with a malformed SPARQL query.  Steps to reproduce:      1. upload a binary object, for example to http://localhost:8080/fcrepo/rest/test    2. PATCH the metadata on this node with the following SPARQL (note the erroneous double hash-mark character in the PCDM URI):    {code}   url -ufedoraAdmin:secret3 -X PATCH -H ""Content-Type: application/sparql-update"" --data ""INSERT DATA {<> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://pcdm.org/models##file> .}"" ""http://localhost:8080/fcrepo/rest/test/fcr:metadata""    {code}      3. Fedora returns a Java stack trace on subsequent accesses to the /fcr:metadata, or 404 not found errors for the nonRDF node.  The exact behavior varies from browser to browser.    I would expect fedora to catch the SPARQL syntax error before saving the malformed triple on the node, and it does seem to do this for other similar errors, but for whatever reason this one slips through and causes the resource to become unreachable.  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2187,ERROR on export of dataset - plantpatents,"Setup:  - Download dataset: https://github.com/fcrepo4-labs/fcrepo-sample-dataset/blob/master/plantpatents/plants.tar.gz  - Start up an empty F4  - Upload the sample dataset:  > curl -i -XPOST --data-binary /path/to/1473315261896-0 localhost:8080/rest/fcr:restore  - Export the repository:  > java -jar fcrepo-import-export-driver-0.0.1-SNAPSHOT.jar -b /tmp/bin -m export -d /tmp/rdf -r http://localhost:8080/rest/    ! Notice output log for each external-body binary:  ---  ERROR 16:10:46.097 (Exporter) Resource is neither an LDP Container nor an LDP NonRDFSource: http://localhost:8080/rest/10/69/e9/cd/1069e9cd-3024-442a-a683-4f8930be992d/external  ---    However, the HEAD request shows correct link headers:  ---  > curl -I http://localhost:8080/rest/10/69/e9/cd/1069e9cd-3024-442a-a683-4f8930be992d/external  ---  Output:   ---  HTTP/1.1 307 Temporary Redirect  Date: Thu, 08 Sep 2016 20:15:16 GMT  ETag: ""f074729b6e3608542c34bbb5443e10d0e741ecf5""  Last-Modified: Thu, 08 Sep 2016 06:05:42 GMT  Content-Type: message/external-body;access-type=URL;url=""http://www.lib.umd.edu/plantpatents/binaries/09000/pp09075.pdf""  Accept-Ranges: bytes  Content-Disposition: attachment; filename=""""; creation-date=""Thu, 08 Sep 2016 06:05:42 GMT""; modification-date=""Thu, 08 Sep 2016 06:05:42 GMT""; size=0  Link: <http://www.w3.org/ns/ldp#Resource>;rel=""type""  Link: <http://www.w3.org/ns/ldp#NonRDFSource>;rel=""type""  Link: <http://localhost:8080/rest/10/69/e9/cd/1069e9cd-3024-442a-a683-4f8930be992d/external/fcr:metadata>; rel=""describedby""  Allow: DELETE,HEAD,GET,PUT,OPTIONS  Location: http://www.lib.umd.edu/plantpatents/binaries/09000/pp09075.pdf  Content-Length: 0  ---  ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2188,ERROR on import of dataset - plantpatents,"Setup per: https://jira.duraspace.org/browse/FCREPO-2187    After successful export, start an empty F4.  Perform the same operation as on export but changing the mode:  ---  > java -jar fcrepo-import-export-driver-0.0.1-SNAPSHOT.jar -b /tmp/bin -m import -d /tmp/rdf -r http://localhost:8080/rest/  ---    ! Notice immediately:  ---  INFO 16:59:25.473 (ArgParser) Configuration file exists, new file will NOT be created: /tmp/importexport.config  INFO 16:59:25.478 (Importer) Running importer...  WARN 16:59:25.889 (riot) [line: 31, col: 10] Lexical form '10/23/2014 17:02:32' not valid for datatype http://www.w3.org/2001/XMLSchema#dateTime  INFO 16:59:25.910 (Importer) Importing binary /tmp/awoods/test/x/rdf/rest/bb/34/ab/0d/bb34ab0d-e036-4b7b-9316-ace9378dba06/internal/fcr%3Ametadata.ttl  ERROR 16:59:26.137 (Importer) Import failed  ---",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2189,"add README, list of URIs, and binary checksums to sample dataset","To facilitate the use of the plantpatents sample dataset for testing and verifying integrity of the repository, add baseline information and instructions:      1. README explaning the structure of the dataset    2. list of URIs for patent and file nodes in the repository    3. filenames and checksums for all binary assets stored internally",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2190,Verify files on disk against their counterparts imported in a Fedora,"The goal is to create a tool that will verify that data exported to disk, via the import-export client, is the same as what was in the original fedora system.     ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2191,Java client should allow disabling redirects,"The Java client should allow disabling following redirects, if the client wants to retrieve an external content node without following the redirect.",f4-java-client,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2192,Add more extensive integration tests for import-export,"The goal of these integration tests is to quickly identify bugs that crop up not only as this project code changes, but as fcrepo4 changes.  Subtle changes in the repository software (like whether redirects are returned in HEAD requests) can break this import-export tooling and more complete integration test coverage would help.    Specifically include:  - full round-tripping with verification that properties are preserved.  - verification of the output files (config in the temp directory for instance)  - binary content with external bodies  - cross-resource relationships (/resource0 pcdm:hasMember /resource1)  - nested resources (/parent/child)  - direct containers  - indirect containers  - user properties",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2194,"ERROR on import of dataset, fedora:lastModified - lubm","Setup:   - Download dataset: https://github.com/fcrepo4-labs/fcrepo-sample-dataset/blob/master/lubm/LUBM.tar.gz  - Start up an empty F4   - Upload the sample dataset:   > curl -i -XPOST --data-binary /path/to/LUBMbackup localhost:8080/rest/fcr:restore   - Export the repository:   > java -jar fcrepo-import-export-driver-0.0.1-SNAPSHOT.jar -b /tmp/bin -m export -d /tmp/rdf -r http://localhost:8080/rest/   - Start up an empty F4  - Import the exported content:  > java -jar fcrepo-import-export-driver-0.0.1-SNAPSHOT.jar -b /tmp/bin -m import -d /tmp/rdf -r http://localhost:8080/rest/ | tee import.out      ! Notice output log for ""fedora:lastModified"" constraints:   WARN 10:47:46.284 (Importer) Error while importing /tmp/awoods/test/x/rdf/rest/Department14.University0.edu/AssociateProfessor6.ttl (500): javax.jcr.nodetype.ConstraintViolationException: Cannot find a definition for the property named 'fedora:lastModified' on the node at '/Department14.University0.edu/AssociateProfessor6' with primary type 'nt:folder' and mixin types: [ldp:Container,ldp:RDFSource,fedora:Pairtree]  ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2195,"ERROR on import of dataset, top-level resources - lubm","Setup per: https://jira.duraspace.org/browse/FCREPO-2194    After successful export, start an empty F4.   Perform the same operation as on export but changing the mode:   ---   > java -jar fcrepo-import-export-driver-0.0.1-SNAPSHOT.jar -b /tmp/bin -m import -d /tmp/rdf -r http://localhost:8080/rest/   ---     The import does not log any errors;   ! however, the resources in the original repository had 16 top-level resources, the imported repository has ~4260 resources.  ! Notice immediately:   --- ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2196,add -h flag to display available options,"It is possible to see the list of available options by running the export tool or the import tool with out any required arguments, but it also displays an error message.    Add a -h flag, that is able to display the list of options, without the error message.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2198,"ERROR on import of dataset, single-valued properties - plantpatents","Perform a restore/export/import as detailed in: https://jira.duraspace.org/browse/FCREPO-2188    Capture the terminal output of the import and see the WARNing:  ---  WARN 14:26:22.827 (Importer) Error while importing /tmp/test/desc/rest/a3/34/2f/c2/a3342fc2-16fb-4c66-a9ea-2d2a1b1eabc7.ttl (400): Unable to set existing single-valued property ""ns002:hasFile_ref"" on node ""/a3/34/2f/c2/a3342fc2-16fb-4c66-a9ea-2d2a1b1eabc7"" in workspace ""default"" using multi-value setter methods  Unable to set existing single-valued property ""ns003:inventorCity"" on node ""/a3/34/2f/c2/a3342fc2-16fb-4c66-a9ea-2d2a1b1eabc7"" in workspace ""default"" using multi-value setter methods  etc...  ---  ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2199,"ERROR on import of dataset, no properties - plantpatents","In a similar fashion to the setup detailed in: https://jira.duraspace.org/browse/FCREPO-2188     ...this ticket is to address the situation where resource properties are lost:  * After /fcr:restore of the plantpatents dataset, open a tab with the following resource:  http://localhost:8080/rest/62/44/53/d5/624453d5-e62a-43ff-b934-a04ab36acc75    Then go through the export/import cycle, and open a different tab with that same resource:  http://localhost:8080/rest/62/44/53/d5/624453d5-e62a-43ff-b934-a04ab36acc75    ! Notice the difference... no properties!    ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2200,"remove -x flag, set extension from -l","Current behaviour:    -x sets the file extension for exported rdf (default is .ttl)  -l sets the rdf language used (default is text/turtle)    It is possible to change one without changing the other, which could cause misleading file extensions (e.g. .jsonld file with turtle inside).    Suggested change:  Make the -l flag set the file extension to match the rdf language, and remove the -x flag.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2201,"ERROR on import of dataset, reference properties - plantpatents",Perform a restore/export/import as detailed in: https://jira.duraspace.org/browse/FCREPO-2188     Capture the terminal output of the import and see the WARNing:   ---   WARN 14:46:52.806 (Importer) Error while importing /tmp/awoods/test/x/rdf/rest/bb/34/ab/0d/bb34ab0d-e036-4b7b-9316-ace9378dba06/internal/fcr%3Ametadata.ttl (400): Only referenceable nodes may be the value of reference properties  ---,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2202,Add ability to delete or overwrite tombstone on import,"Example:    export a resource from Fedora using the export utility.  delete that resource (a tombstone is left behind).  try to import back into the same repository.    Currently, this does not work. The export utility could be enhanced to allow for this use case, perhaps by having a flag for 'remove tombstone' or 'overwrite existing resource' ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2203,Create integration test for importing,"The existing import-export integration tests all test export, so we should add an integration test that tests import.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2204,Verify resources in a Fedora are the same as their exported counterparts on disk,"  The goal is to create a tool that would look at imported data, located in the fedora 4 system, and verify that what was imported equals what was in the original export.  ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2205,deprecate transform option for fcrepo-camel,"Since the fcrepo-transform endpoint has been deprecated for Fedora and will be removed entirely for 4.7.0, it should also be deprecated and removed from fcrepo-camel.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2206,deprecate tombstone option from fcrepo-camel,"The tombstone option in fcrepo-camel makes it easy to delete tombstones in Fedora. Given that URLs shouldn't be re-used by an LDP server, it seems dubious that deleting tombstones should even be possible, let alone easy. This ticket is simply about making it not so easy to delete them with the camel machinery.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2207,Remove the ability to delete tombstone references,"The LDP specification contains a non-normative section describing how LDP servers should not reuse URIs: https://www.w3.org/TR/ldp/#h-ldp-webarch-uri-reuse    The Fedora implementation includes a mechanism to prevent re-use of URIs via a tombstone artifact. While that tombstone prevents the re-creation of a resource at a given URI, it is also possible to circumvent that by deleting the tombstone and then creating a resource in the old location.    This is a ticket to discuss and track the elimination of the ability to remove tombstones from a Fedora repository.    For example:    (current behavior)  PUT /rest/resource 201  GET /rest/resource 200  DELETE /rest/resource 204  GET /rest/resource 410  DELETE /rest/resource/fcr:tombstone 204  GET /rest/resource 404  PUT /rest/resource 201    (possible future behavior)  PUT /rest/resource 201  GET /rest/resource 200  DELETE /rest/resource 204  GET /rest/resource 410  DELETE /rest/resource/fcr:tombstone 400  GET /rest/resource 410  PUT /rest/resource 409  ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2208,Evaluate Library of Congress BagIt Library,"Evaluate the Library of Congress BagIt Library: https://github.com/LibraryOfCongress/bagit-java    Key priorities are:  * Avoid reading data twice when adding files to Bags  * Does it support serializing Bags as e.g., Zip or Tar files?",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2209,Remove deprecated options from fcrepo-camel,The transform and tombstone options for fcrepo-camel have been deprecated. They should now be removed.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2210,fcrepo-webapp-plus-webac-4.6.0.war doesn't seem to work in jetty,The error is something like:    Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/p]  ,f4-webapp-plus,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0
FCREPO-2211,fcrepo-import-export build fails when tomcat is running.,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2212,decouple testing environment from fedora version in fcrepo-camel,"The fcrepo-camel integration tests currently load Fedora via spring configuration. This means that any dependencies between the two projects must align, which is a bad thing. Notably, the jena version used by fcrepo-camel must be the same jena version as is used by the fedora testing infrastructure. There are other such dependency collisions, and by moving the testing apparatus into the maven-jetty plugin, this will all go away.",f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2213,lastModified date not updated on parent containers when children are deleted,"When a child object is deleted, the lastModified date on the parent object is not updated, but it should be.",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2214,Fcrepo 4.6.0 build failed in Windows 10,"1. Download source code from https://github.com/fcrepo4/fcrepo4/releases/tag/fcrepo-4.6.0    2. mvn clean install     The build always failed:    -------------------------------------------------------------------------------  Test set: org.fcrepo.integration.kernel.modeshape.FedoraBinaryImplIT  -------------------------------------------------------------------------------  Tests run: 11, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 0.187 sec <<< FAILURE! - in org.fcrepo.integration.kernel.modeshape.FedoraBinaryImplIT  testModifyDatastreamDescriptionLastMod(org.fcrepo.integration.kernel.modeshape.FedoraBinaryImplIT)  Time elapsed: 0.031 sec  <<< FAILURE!  java.lang.AssertionError: Last-modified on the description should have changed. Actual: 1473868788152          at org.junit.Assert.fail(Assert.java:88)          at org.junit.Assert.failEquals(Assert.java:185)          at org.junit.Assert.assertNotEquals(Assert.java:161)          at org.junit.Assert.assertNotEquals(Assert.java:198)          at org.fcrepo.integration.kernel.modeshape.FedoraBinaryImplIT.testModifyDatastreamDescriptionLastMod(FedoraBinaryImplIT.java:410)     testModifyDatastreamContentDigestAndLength(org.fcrepo.integration.kernel.modeshape.FedoraBinaryImplIT)  Time elapsed: 0.016 sec  <<< FAILURE!  java.lang.AssertionError: Last-modified should be updated          at org.junit.Assert.fail(Assert.java:88)          at org.junit.Assert.assertTrue(Assert.java:41)          at org.fcrepo.integration.kernel.modeshape.FedoraBinaryImplIT.testModifyDatastreamContentDigestAndLength(FedoraBinaryImplIT.java:218)    see: https://groups.google.com/d/msg/fedora-tech/ovLjYu4ADsU/LCcgMYDbAwAJ",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2215,Importer fails for non-flat imports.,None,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2217,Perform import/export of LUBM2,This task is to:  1. load the following dataset with /fcr:restore  2. export it with the import/export utility  3. start an empty fcrepo  4. import the exported resources into the empty fcrepo    https://github.com/fcrepo4-labs/fcrepo-sample-dataset/blob/master/additional_datasets/lubm/LUBM_02.tar.gz    Each of the steps above should be successful.  Any errors should result in new JIRA tickets being created.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2218,Binary image files are not viewable after export,"After using the tool to export image binaries from fedora I am unable to look at those files anymore -- a jpeg file will no longer open correctly and the SHA1 is different.     I suspect the wrong File object is used in exporting the object and it's not being treated like a binary file: https://github.com/fcrepo4-labs/fcrepo-import-export/blob/0111580f9b4fb1714abe01d01accf674c92bba35/src/main/java/org/fcrepo/importexport/common/TransferProcess.java#L82    This is on a mac OSx and to reproduce this issue create a binary file and export it.  I've seen this with a jpeg, but haven't tried other binary file formats. ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2219,Unable to import exported LUBM02 dataset,"After creating a successful export of the LUBM02 dataset, and clearing fcrepo, I am unable to import the exported dataset.     Formatted error in first comment below.    ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2220,Set Import 'source' if not provided,This task is to set the 'source' configuration element of an Import to the 'resource' if it was not provided by the user.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2221,Export BagIt bags from Fedora,"In order to send content to the preservation service, as a repository administrator I would like to:   - Select a group of resources in Fedora to export as bags    Definition of done:   - Select resource(s) to export   - Select resource(s) to export based on membership, e.g. ldp:contains, pcdm:hasMember   - Allow for a BagIt bag for all resources in a collection, and/or individual bags for each resource   - Resources exported to valid BagIt bag(s)   - Create a BagIt bag that adheres to a given BagIt Profile   - Configurable path for exported BagIt Bags",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2222,BagIt Profile for APTrust,"In order to add BagIt bags to APTrust, we will create an APTrust BagIt Profile for fcrepo-import-export.    Definition of done is conformance to the following document: https://docs.google.com/document/d/1F9ssL6-N2Yum5E1EsMyb_H92lDVRLhrLBEDB19PAfqE/edit#heading=h.nbx73mq7699    N.B. fcrepo-import-export need not run the APTrust bag validation script.    - Might need to explore bag sequences to adhere to the 250GB limit",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2223,BagIt Profile for MetaArchive,"In order to add BagIt bags to MetaArchive, we will create an MetaArchive BagIt Profile for fcrepo-import-export.    Definition of done is    - Exporting resource(s) that conform to the MetaArchive BagIt profile    - Documentation outlined on this document: https://docs.google.com/document/d/1yWfM9qHCUjT4FMLKX5cwCAPUVUTa9jvsldjmd7kbWfQ/edit#    N.B. There might be some useful resources/utilities here: https://github.com/MetaArchive",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2224,Create default fcrepo-import-export Bag Profile,Definition of done:    - A BagIt Profile    - Roundtripable with Bagit profile,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2225,"Select resource(s) to export based on membership, e.g. ldp:contains, pcdm:hasMember",Allow a user to define a membership predicate for resources. This should allow for use of multiple predicates; ORs.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2226,Rip out the --binDir and --descDir,"Rip out the --binDir and --descDir options, replace with --dir and a argument for --binaries (boolean).",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2227,Create a streaming bagit library that implements a BagIt Profile,"If the --bagitProfile default|APTrust is used:    - triggers the creation of a bag    - fails if bag already exists    - for APTrust profile, see FCREPO-2222    - for default profile, see FCREPO-2224    - upon import, verifies checksums in manifest    - create tag-manifest     Considerations    - Audit events -- provenance data from bag-info -- external events  ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2228,Create a config for the default BagIt Profile,Name value config file that outlines everything that can be in a given bagit profile.,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2229,Create basic import/export integration test classes,This task is to create integration tests at a level lower than:  ExecutableJarIT.java    ..specifically:  ImporterIT.java  ExporterIT.java,f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2230,Intelligent Container Import,"Import containers using a three-step process:    1. Parse all of the RDF on disk to build a map of containers' membership resources and member relations.    2. Perform the normal import process for all resources that are not membership resources.  This process will create placeholders for all resources that don't already exist, including the membership resources.    3. Import each membership resource, and add the filter out triples with the member relations as the predicate.    Note: #3 will result in losing manually-inserted triples with the same predicate as the member relation.  In order to preserve those triples, then alternate approaches would be:    * Retrieve the membership resource's RDF from Fedora and diff to filter out the membership triples.  * Include more LDP container logic in the import client to generate all of the triples that the container would generate and filter them out.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2231,ERROR on import of plantpatents dataset,"On HEAD as of 317db67dae692d0709b4f9e3a7de2a56930d059c    Imported plantplatents dataset, successfully exported dataset with:    [nruest@simian:fcrepo-import-export] (git)-[master]-$ java -jar target/fcrepo-import-export-0.0.1-SNAPSHOT.jar --mode export --resource http://localhost:8080/rest --descDir /tmp/awead --binDir /tmp/awead --rdfExt .jsonld --rdfLang application/ld+json    Shutdown fcrepo, clear fcrepo-data.    On import:    $ java -jar target/fcrepo-import-export-0.0.1-SNAPSHOT.jar --mode import --resource http://localhost:8080/rest --descDir /tmp/awead --binDir /tmp/awead --rdfExt .jsonld --rdfLang application/ld+json  INFO 11:10:07.746 (ArgParser) Configuration file exists, new file will NOT be created: /tmp/importexport.config  INFO 11:10:07.750 (Importer) Running importer...  INFO 11:10:08.292 (Importer) Importing container /tmp/awead/rest/plantpatents.jsonld to http://localhost:8080/rest/plantpatents  ERROR 11:10:08.894 (ImportExportDriver) Error performing import/export: Error while importing /tmp/awead/rest/plantpatents.jsonld (500):    Fedora stacktrace:    INFO 11:07:19.933 (FedoraLdp) GET resource ''  INFO 11:10:08.557 (FedoraLdp) PUT resource 'plantpatents'  WARN 11:10:08.685 (PropertyConverter) The namespace of predicate: http://pcdm.org/models#hasMember was possibly misinterpreted as: http://pcdm.org/models#.  [qtp210100675-21] WARN org.eclipse.jetty.server.HttpChannel - Commit failed  java.io.IOException: Response header too large    org.eclipse.jetty.http.HttpGenerator.generateResponse(HttpGenerator.java:394)    org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:599)    org.eclipse.jetty.util.IteratingCallback.processIterations(IteratingCallback.java:233)    org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:193)    org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:448)    org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:764)    org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:802)    org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:139)    org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:132)    org.eclipse.jetty.server.HttpOutput.flush(HttpOutput.java:234)    org.glassfish.jersey.servlet.internal.ResponseWriter$NonCloseableOutputStreamWrapper.flush(ResponseWriter.java:330)    org.glassfish.jersey.message.internal.CommittingOutputStream.flush(CommittingOutputStream.java:292)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor$UnCloseableOutputStream.flush(WriterInterceptorExecutor.java:304)    sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:297)    sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)    java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)    org.glassfish.jersey.message.internal.ReaderWriter.writeToAsString(ReaderWriter.java:193)    org.glassfish.jersey.message.internal.AbstractMessageReaderWriterProvider.writeToAsString(AbstractMessageReaderWriterProvider.java:130)    org.glassfish.jersey.message.internal.StringMessageProvider.writeTo(StringMessageProvider.java:99)    org.glassfish.jersey.message.internal.StringMessageProvider.writeTo(StringMessageProvider.java:59)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.invokeWriteTo(WriterInterceptorExecutor.java:265)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:250)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)    org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:106)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)    org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:86)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)    org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1130)    org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:711)    org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:444)    org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:490)    org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:334)    org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)    org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)    org.glassfish.jersey.internal.Errors.process(Errors.java:315)    org.glassfish.jersey.internal.Errors.process(Errors.java:297)    org.glassfish.jersey.internal.Errors.process(Errors.java:267)    org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)    org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)    org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)    org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:473)    org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:427)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:388)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:341)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:228)    org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:769)    org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)    org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)    org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)    org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)    org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1125)    org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)    org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)    org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1059)    org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)    org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)    org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)    org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)    org.eclipse.jetty.server.Server.handle(Server.java:497)    org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)    org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248)    org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)    org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:610)    org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:539)    java.lang.Thread.run(Thread.java:745)  Caused by: java.nio.BufferOverflowException    java.nio.Buffer.nextPutIndex(Buffer.java:521)    java.nio.HeapByteBuffer.put(HeapByteBuffer.java:169)    org.eclipse.jetty.http.HttpGenerator.putSanitisedValue(HttpGenerator.java:1051)    org.eclipse.jetty.http.HttpGenerator.putTo(HttpGenerator.java:1073)    org.eclipse.jetty.http.HttpGenerator.generateHeaders(HttpGenerator.java:697)    org.eclipse.jetty.http.HttpGenerator.generateResponse(HttpGenerator.java:379)   ... 64 more  Sep 20, 2016 11:10:08 AM org.glassfish.jersey.server.ServerRuntime$Responder writeResponse  SEVERE: An I/O error has occurred while writing a response message entity to the container output stream.  org.glassfish.jersey.server.internal.process.MappableException: java.io.IOException: Response header too large    org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:92)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)    org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1130)    org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:711)    org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:444)    org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:490)    org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:334)    org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)    org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)    org.glassfish.jersey.internal.Errors.process(Errors.java:315)    org.glassfish.jersey.internal.Errors.process(Errors.java:297)    org.glassfish.jersey.internal.Errors.process(Errors.java:267)    org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)    org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)    org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)    org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:473)    org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:427)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:388)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:341)    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:228)    org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:769)    org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)    org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)    org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)    org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)    org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1125)    org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)    org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)    org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1059)    org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)    org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)    org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)    org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)    org.eclipse.jetty.server.Server.handle(Server.java:497)    org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)    org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248)    org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)    org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:610)    org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:539)    java.lang.Thread.run(Thread.java:745)  Caused by: java.io.IOException: Response header too large    org.eclipse.jetty.http.HttpGenerator.generateResponse(HttpGenerator.java:394)    org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:599)    org.eclipse.jetty.util.IteratingCallback.processIterations(IteratingCallback.java:233)    org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:193)    org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:448)    org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:764)    org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:802)    org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:139)    org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:132)    org.eclipse.jetty.server.HttpOutput.flush(HttpOutput.java:234)    org.glassfish.jersey.servlet.internal.ResponseWriter$NonCloseableOutputStreamWrapper.flush(ResponseWriter.java:330)    org.glassfish.jersey.message.internal.CommittingOutputStream.flush(CommittingOutputStream.java:292)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor$UnCloseableOutputStream.flush(WriterInterceptorExecutor.java:304)    sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:297)    sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)    java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)    org.glassfish.jersey.message.internal.ReaderWriter.writeToAsString(ReaderWriter.java:193)    org.glassfish.jersey.message.internal.AbstractMessageReaderWriterProvider.writeToAsString(AbstractMessageReaderWriterProvider.java:130)    org.glassfish.jersey.message.internal.StringMessageProvider.writeTo(StringMessageProvider.java:99)    org.glassfish.jersey.message.internal.StringMessageProvider.writeTo(StringMessageProvider.java:59)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.invokeWriteTo(WriterInterceptorExecutor.java:265)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:250)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)    org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:106)    org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)    org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:86)   ... 39 more  Caused by: java.nio.BufferOverflowException    java.nio.Buffer.nextPutIndex(Buffer.java:521)    java.nio.HeapByteBuffer.put(HeapByteBuffer.java:169)    org.eclipse.jetty.http.HttpGenerator.putSanitisedValue(HttpGenerator.java:1051)    org.eclipse.jetty.http.HttpGenerator.putTo(HttpGenerator.java:1073)    org.eclipse.jetty.http.HttpGenerator.generateHeaders(HttpGenerator.java:697)    org.eclipse.jetty.http.HttpGenerator.generateResponse(HttpGenerator.java:379)   ... 64 more      ",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2232,Update fcrepo-indexing-solr to use fcrepo-ldpath,The fcrepo-indexing-solr camel route depends on fcrepo-transform. That should be changed to use fcrepo-ldpath instead.,f4-camel,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2233,Remove extra pom file,"Remove unneeded pom file ""fcrepo-import-export-driver-pom.xml"".",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2234,Importer needs to create repository resources that are referenced,"When importing RDF that contains references to other repository resources, those resources must exist or the import will fail.  So the importer should make sure that those resources exist, at least as placeholders.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2235,Ensure Link Headers not too long,"This task is to limit the length of the Base64 encoded ""constraint"" Link header that is produced by MalformedRdfExceptionMapper.    See: https://jira.duraspace.org/browse/FCREPO-2231",f4-core,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
FCREPO-2237,Verify dates makes sense when performing import/export with audit service,"As a repository manager, when I do an import/export I want an audit log that makes sense.    Definition of done:    - Perform a import and export with audit service turned on, investigate audit dates, and very that they make sense.",f4-import-export,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
